import{c as ut,d as J,f as z,g as tt,h as et,i as ye,j as ve}from"./chunk-W6LHCHNP.js";import{a as Re,b as Ne,c as Wt,d as ie,e as ae,f as Ve,g as re,h as Y,i as ze,j as ne}from"./chunk-JCISJ2DZ.js";import{a as ee,b as je}from"./chunk-TSLSWDCS.js";import{A as Ie,Aa as y,B as Ee,Ba as O,C as T,Ea as Jt,Fa as Ot,G as L,Ga as H,H as st,I as ct,Ia as w,J as R,Ja as Bt,K as I,Ka as Ht,M as Pt,N as wt,Oa as nt,Pa as V,Q as Yt,Qa as $t,R as Nt,Ra as M,Sa as G,T as q,Ta as ft,W as Qt,Y as De,_a as Ut,a as P,aa as Vt,ab as Gt,b as E,bb as Tt,ca as v,cb as be,d as di,da as gt,e as ui,f as Z,fa as Fe,fb as te,ga as Zt,gb as It,ha as N,hb as dt,i as $,j as x,ka as j,la as lt,lb as Et,ma as zt,n as F,na as Xt,o as xt,oa as B,pb as Le,qa as St,t as ot,ta as X,v as K,y as ht,ya as A,za as b}from"./chunk-22ZSL6GC.js";var ai=di(pe=>{"use strict";(function(){"use strict";var d=function(){this.init()};d.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window<"u"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var r=this||t;if(i=parseFloat(i),r.ctx||C(),typeof i<"u"&&i>=0&&i<=1){if(r._volume=i,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var o=0;o<r._howls.length;o++)if(!r._howls[o]._webAudio)for(var c=r._howls[o]._getSoundIds(),u=0;u<c.length;u++){var m=r._howls[o]._soundById(c[u]);m&&m._node&&(m._node.volume=m._volume*i)}return r}return r._volume},mute:function(i){var r=this||t;r.ctx||C(),r._muted=i,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(i?0:r._volume,t.ctx.currentTime);for(var o=0;o<r._howls.length;o++)if(!r._howls[o]._webAudio)for(var c=r._howls[o]._getSoundIds(),u=0;u<c.length;u++){var m=r._howls[o]._soundById(c[u]);m&&m._node&&(m._node.muted=i?!0:m._muted)}return r},stop:function(){for(var i=this||t,r=0;r<i._howls.length;r++)i._howls[r].stop();return i},unload:function(){for(var i=this||t,r=i._howls.length-1;r>=0;r--)i._howls[r].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close<"u"&&(i.ctx.close(),i.ctx=null,C()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio<"u")try{var r=new Audio;typeof r.oncanplaythrough>"u"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var r=new Audio;r.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return i}if(!r||typeof r.canPlayType!="function")return i;var o=r.canPlayType("audio/mpeg;").replace(/^no$/,""),c=i._navigator?i._navigator.userAgent:"",u=c.match(/OPR\/(\d+)/g),m=u&&parseInt(u[0].split("/")[1],10)<33,l=c.indexOf("Safari")!==-1&&c.indexOf("Chrome")===-1,f=c.match(/Version\/(.*?) /),_=l&&f&&parseInt(f[1],10)<15;return i._codecs={mp3:!!(!m&&(o||r.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!o,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var r=function(o){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var c=new Audio;c._unlocked=!0,i._releaseHtml5Audio(c)}catch{i.noAudio=!0;break}for(var u=0;u<i._howls.length;u++)if(!i._howls[u]._webAudio)for(var m=i._howls[u]._getSoundIds(),l=0;l<m.length;l++){var f=i._howls[u]._soundById(m[l]);f&&f._node&&!f._node._unlocked&&(f._node._unlocked=!0,f._node.load())}i._autoResume();var _=i.ctx.createBufferSource();_.buffer=i._scratchBuffer,_.connect(i.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),_.onended=function(){_.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var S=0;S<i._howls.length;S++)i._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var r=new Audio().play();return r&&typeof Promise<"u"&&(r instanceof Promise||typeof r.then=="function")&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var r=this||t;return i._unlocked&&r._html5AudioPool.push(i),r},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend>"u"||!t.usingWebAudio)){for(var r=0;r<i._howls.length;r++)if(i._howls[r]._webAudio){for(var o=0;o<i._howls[r]._sounds.length;o++)if(!i._howls[r]._sounds[o]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(i.autoSuspend){i._suspendTimer=null,i.state="suspending";var c=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(c,c)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume>"u"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var r=0;r<i._howls.length;r++)i._howls[r]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new d,e=function(i){var r=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}r.init(i)};e.prototype={init:function(i){var r=this;return t.ctx||C(),r._autoplay=i.autoplay||!1,r._format=typeof i.format!="string"?i.format:[i.format],r._html5=i.html5||!1,r._muted=i.mute||!1,r._loop=i.loop||!1,r._pool=i.pool||5,r._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,r._rate=i.rate||1,r._sprite=i.sprite||{},r._src=typeof i.src!="string"?i.src:[i.src],r._volume=i.volume!==void 0?i.volume:1,r._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=i.onend?[{fn:i.onend}]:[],r._onfade=i.onfade?[{fn:i.onfade}]:[],r._onload=i.onload?[{fn:i.onload}]:[],r._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],r._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],r._onpause=i.onpause?[{fn:i.onpause}]:[],r._onplay=i.onplay?[{fn:i.onplay}]:[],r._onstop=i.onstop?[{fn:i.onstop}]:[],r._onmute=i.onmute?[{fn:i.onmute}]:[],r._onvolume=i.onvolume?[{fn:i.onvolume}]:[],r._onrate=i.onrate?[{fn:i.onrate}]:[],r._onseek=i.onseek?[{fn:i.onseek}]:[],r._onunlock=i.onunlock?[{fn:i.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r._preload!=="none"&&r.load(),r},load:function(){var i=this,r=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var o=0;o<i._src.length;o++){var c,u;if(i._format&&i._format[o])c=i._format[o];else{if(u=i._src[o],typeof u!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}c=/^data:audio\/([^;,]+);/i.exec(u),c||(c=/\.([^.]+)$/.exec(u.split("?",1)[0])),c&&(c=c[1].toLowerCase())}if(c||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),c&&t.codecs(c)){r=i._src[o];break}}if(!r){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=r,i._state="loading",window.location.protocol==="https:"&&r.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new a(i),i._webAudio&&s(i),i},play:function(i,r){var o=this,c=null;if(typeof i=="number")c=i,i=null;else{if(typeof i=="string"&&o._state==="loaded"&&!o._sprite[i])return null;if(typeof i>"u"&&(i="__default",!o._playLock)){for(var u=0,m=0;m<o._sounds.length;m++)o._sounds[m]._paused&&!o._sounds[m]._ended&&(u++,c=o._sounds[m]._id);u===1?i=null:c=null}}var l=c?o._soundById(c):o._inactiveSound();if(!l)return null;if(c&&!i&&(i=l._sprite||"__default"),o._state!=="loaded"){l._sprite=i,l._ended=!1;var f=l._id;return o._queue.push({event:"play",action:function(){o.play(f)}}),f}if(c&&!l._paused)return r||o._loadQueue("play"),l._id;o._webAudio&&t._autoResume();var _=Math.max(0,l._seek>0?l._seek:o._sprite[i][0]/1e3),S=Math.max(0,(o._sprite[i][0]+o._sprite[i][1])/1e3-_),W=S*1e3/Math.abs(l._rate),rt=o._sprite[i][0]/1e3,pt=(o._sprite[i][0]+o._sprite[i][1])/1e3;l._sprite=i,l._ended=!1;var U=function(){l._paused=!1,l._seek=_,l._start=rt,l._stop=pt,l._loop=!!(l._loop||o._sprite[i][2])};if(_>=pt){o._ended(l);return}var k=l._node;if(o._webAudio){var Se=function(){o._playLock=!1,U(),o._refreshBuffer(l);var kt=l._muted||o._muted?0:l._volume;k.gain.setValueAtTime(kt,t.ctx.currentTime),l._playStart=t.ctx.currentTime,typeof k.bufferSource.start>"u"?l._loop?k.bufferSource.noteGrainOn(0,_,86400):k.bufferSource.noteGrainOn(0,_,S):l._loop?k.bufferSource.start(0,_,86400):k.bufferSource.start(0,_,S),W!==1/0&&(o._endTimers[l._id]=setTimeout(o._ended.bind(o,l),W)),r||setTimeout(function(){o._emit("play",l._id),o._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Se():(o._playLock=!0,o.once("resume",Se),o._clearTimer(l._id))}else{var Oe=function(){k.currentTime=_,k.muted=l._muted||o._muted||t._muted||k.muted,k.volume=l._volume*t.volume(),k.playbackRate=l._rate;try{var kt=k.play();if(kt&&typeof Promise<"u"&&(kt instanceof Promise||typeof kt.then=="function")?(o._playLock=!0,U(),kt.then(function(){o._playLock=!1,k._unlocked=!0,r?o._loadQueue():o._emit("play",l._id)}).catch(function(){o._playLock=!1,o._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0})):r||(o._playLock=!1,U(),o._emit("play",l._id)),k.playbackRate=l._rate,k.paused){o._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||l._loop?o._endTimers[l._id]=setTimeout(o._ended.bind(o,l),W):(o._endTimers[l._id]=function(){o._ended(l),k.removeEventListener("ended",o._endTimers[l._id],!1)},k.addEventListener("ended",o._endTimers[l._id],!1))}catch(li){o._emit("playerror",l._id,li)}};k.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(k.src=o._src,k.load());var ci=window&&window.ejecta||!k.readyState&&t._navigator.isCocoonJS;if(k.readyState>=3||ci)Oe();else{o._playLock=!0,o._state="loading";var Te=function(){o._state="loaded",Oe(),k.removeEventListener(t._canPlayEvent,Te,!1)};k.addEventListener(t._canPlayEvent,Te,!1),o._clearTimer(l._id)}}return l._id},pause:function(i){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(i)}}),r;for(var o=r._getSoundIds(i),c=0;c<o.length;c++){r._clearTimer(o[c]);var u=r._soundById(o[c]);if(u&&!u._paused&&(u._seek=r.seek(o[c]),u._rateSeek=0,u._paused=!0,r._stopFade(o[c]),u._node))if(r._webAudio){if(!u._node.bufferSource)continue;typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),r._cleanBuffer(u._node)}else(!isNaN(u._node.duration)||u._node.duration===1/0)&&u._node.pause();arguments[1]||r._emit("pause",u?u._id:null)}return r},stop:function(i,r){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(i)}}),o;for(var c=o._getSoundIds(i),u=0;u<c.length;u++){o._clearTimer(c[u]);var m=o._soundById(c[u]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,o._stopFade(c[u]),m._node&&(o._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),o._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&o._clearSound(m._node))),r||o._emit("stop",m._id))}return o},mute:function(i,r){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(i,r)}}),o;if(typeof r>"u")if(typeof i=="boolean")o._muted=i;else return o._muted;for(var c=o._getSoundIds(r),u=0;u<c.length;u++){var m=o._soundById(c[u]);m&&(m._muted=i,m._interval&&o._stopFade(m._id),o._webAudio&&m._node?m._node.gain.setValueAtTime(i?0:m._volume,t.ctx.currentTime):m._node&&(m._node.muted=t._muted?!0:i),o._emit("mute",m._id))}return o},volume:function(){var i=this,r=arguments,o,c;if(r.length===0)return i._volume;if(r.length===1||r.length===2&&typeof r[1]>"u"){var u=i._getSoundIds(),m=u.indexOf(r[0]);m>=0?c=parseInt(r[0],10):o=parseFloat(r[0])}else r.length>=2&&(o=parseFloat(r[0]),c=parseInt(r[1],10));var l;if(typeof o<"u"&&o>=0&&o<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;typeof c>"u"&&(i._volume=o),c=i._getSoundIds(c);for(var f=0;f<c.length;f++)l=i._soundById(c[f]),l&&(l._volume=o,r[2]||i._stopFade(c[f]),i._webAudio&&l._node&&!l._muted?l._node.gain.setValueAtTime(o,t.ctx.currentTime):l._node&&!l._muted&&(l._node.volume=o*t.volume()),i._emit("volume",l._id))}else return l=c?i._soundById(c):i._sounds[0],l?l._volume:0;return i},fade:function(i,r,o,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"fade",action:function(){u.fade(i,r,o,c)}}),u;i=Math.min(Math.max(0,parseFloat(i)),1),r=Math.min(Math.max(0,parseFloat(r)),1),o=parseFloat(o),u.volume(i,c);for(var m=u._getSoundIds(c),l=0;l<m.length;l++){var f=u._soundById(m[l]);if(f){if(c||u._stopFade(m[l]),u._webAudio&&!f._muted){var _=t.ctx.currentTime,S=_+o/1e3;f._volume=i,f._node.gain.setValueAtTime(i,_),f._node.gain.linearRampToValueAtTime(r,S)}u._startFadeInterval(f,i,r,o,m[l],typeof c>"u")}}return u},_startFadeInterval:function(i,r,o,c,u,m){var l=this,f=r,_=o-r,S=Math.abs(_/.01),W=Math.max(4,S>0?c/S:c),rt=Date.now();i._fadeTo=o,i._interval=setInterval(function(){var pt=(Date.now()-rt)/c;rt=Date.now(),f+=_*pt,f=Math.round(f*100)/100,_<0?f=Math.max(o,f):f=Math.min(o,f),l._webAudio?i._volume=f:l.volume(f,i._id,!0),m&&(l._volume=f),(o<r&&f<=o||o>r&&f>=o)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,l.volume(o,i._id),l._emit("fade",i._id))},W)},_stopFade:function(i){var r=this,o=r._soundById(i);return o&&o._interval&&(r._webAudio&&o._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(o._interval),o._interval=null,r.volume(o._fadeTo,i),o._fadeTo=null,r._emit("fade",i)),r},loop:function(){var i=this,r=arguments,o,c,u;if(r.length===0)return i._loop;if(r.length===1)if(typeof r[0]=="boolean")o=r[0],i._loop=o;else return u=i._soundById(parseInt(r[0],10)),u?u._loop:!1;else r.length===2&&(o=r[0],c=parseInt(r[1],10));for(var m=i._getSoundIds(c),l=0;l<m.length;l++)u=i._soundById(m[l]),u&&(u._loop=o,i._webAudio&&u._node&&u._node.bufferSource&&(u._node.bufferSource.loop=o,o&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop,i.playing(m[l])&&(i.pause(m[l],!0),i.play(m[l],!0)))));return i},rate:function(){var i=this,r=arguments,o,c;if(r.length===0)c=i._sounds[0]._id;else if(r.length===1){var u=i._getSoundIds(),m=u.indexOf(r[0]);m>=0?c=parseInt(r[0],10):o=parseFloat(r[0])}else r.length===2&&(o=parseFloat(r[0]),c=parseInt(r[1],10));var l;if(typeof o=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,r)}}),i;typeof c>"u"&&(i._rate=o),c=i._getSoundIds(c);for(var f=0;f<c.length;f++)if(l=i._soundById(c[f]),l){i.playing(c[f])&&(l._rateSeek=i.seek(c[f]),l._playStart=i._webAudio?t.ctx.currentTime:l._playStart),l._rate=o,i._webAudio&&l._node&&l._node.bufferSource?l._node.bufferSource.playbackRate.setValueAtTime(o,t.ctx.currentTime):l._node&&(l._node.playbackRate=o);var _=i.seek(c[f]),S=(i._sprite[l._sprite][0]+i._sprite[l._sprite][1])/1e3-_,W=S*1e3/Math.abs(l._rate);(i._endTimers[c[f]]||!l._paused)&&(i._clearTimer(c[f]),i._endTimers[c[f]]=setTimeout(i._ended.bind(i,l),W)),i._emit("rate",l._id)}}else return l=i._soundById(c),l?l._rate:i._rate;return i},seek:function(){var i=this,r=arguments,o,c;if(r.length===0)i._sounds.length&&(c=i._sounds[0]._id);else if(r.length===1){var u=i._getSoundIds(),m=u.indexOf(r[0]);m>=0?c=parseInt(r[0],10):i._sounds.length&&(c=i._sounds[0]._id,o=parseFloat(r[0]))}else r.length===2&&(o=parseFloat(r[0]),c=parseInt(r[1],10));if(typeof c>"u")return 0;if(typeof o=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,r)}}),i;var l=i._soundById(c);if(l)if(typeof o=="number"&&o>=0){var f=i.playing(c);f&&i.pause(c,!0),l._seek=o,l._ended=!1,i._clearTimer(c),!i._webAudio&&l._node&&!isNaN(l._node.duration)&&(l._node.currentTime=o);var _=function(){f&&i.play(c,!0),i._emit("seek",c)};if(f&&!i._webAudio){var S=function(){i._playLock?setTimeout(S,0):_()};setTimeout(S,0)}else _()}else if(i._webAudio){var W=i.playing(c)?t.ctx.currentTime-l._playStart:0,rt=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(rt+W*Math.abs(l._rate))}else return l._node.currentTime;return i},playing:function(i){var r=this;if(typeof i=="number"){var o=r._soundById(i);return o?!o._paused:!1}for(var c=0;c<r._sounds.length;c++)if(!r._sounds[c]._paused)return!0;return!1},duration:function(i){var r=this,o=r._duration,c=r._soundById(i);return c&&(o=r._sprite[c._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var i=this,r=i._sounds,o=0;o<r.length;o++)r[o]._paused||i.stop(r[o]._id),i._webAudio||(i._clearSound(r[o]._node),r[o]._node.removeEventListener("error",r[o]._errorFn,!1),r[o]._node.removeEventListener(t._canPlayEvent,r[o]._loadFn,!1),r[o]._node.removeEventListener("ended",r[o]._endFn,!1),t._releaseHtml5Audio(r[o]._node)),delete r[o]._node,i._clearTimer(r[o]._id);var c=t._howls.indexOf(i);c>=0&&t._howls.splice(c,1);var u=!0;for(o=0;o<t._howls.length;o++)if(t._howls[o]._src===i._src||i._src.indexOf(t._howls[o]._src)>=0){u=!1;break}return n&&u&&delete n[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,r,o,c){var u=this,m=u["_on"+i];return typeof r=="function"&&m.push(c?{id:o,fn:r,once:c}:{id:o,fn:r}),u},off:function(i,r,o){var c=this,u=c["_on"+i],m=0;if(typeof r=="number"&&(o=r,r=null),r||o)for(m=0;m<u.length;m++){var l=o===u[m].id;if(r===u[m].fn&&l||!r&&l){u.splice(m,1);break}}else if(i)c["_on"+i]=[];else{var f=Object.keys(c);for(m=0;m<f.length;m++)f[m].indexOf("_on")===0&&Array.isArray(c[f[m]])&&(c[f[m]]=[])}return c},once:function(i,r,o){var c=this;return c.on(i,r,o,1),c},_emit:function(i,r,o){for(var c=this,u=c["_on"+i],m=u.length-1;m>=0;m--)(!u[m].id||u[m].id===r||i==="load")&&(setTimeout((function(l){l.call(this,r,o)}).bind(c,u[m].fn),0),u[m].once&&c.off(i,u[m].fn,u[m].id));return c._loadQueue(i),c},_loadQueue:function(i){var r=this;if(r._queue.length>0){var o=r._queue[0];o.event===i&&(r._queue.shift(),r._loadQueue()),i||o.action()}return r},_ended:function(i){var r=this,o=i._sprite;if(!r._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(r._ended.bind(r,i),100),r;var c=!!(i._loop||r._sprite[o][2]);if(r._emit("end",i._id),!r._webAudio&&c&&r.stop(i._id,!0).play(i._id),r._webAudio&&c){r._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var u=(i._stop-i._start)*1e3/Math.abs(i._rate);r._endTimers[i._id]=setTimeout(r._ended.bind(r,i),u)}return r._webAudio&&!c&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,r._clearTimer(i._id),r._cleanBuffer(i._node),t._autoSuspend()),!r._webAudio&&!c&&r.stop(i._id,!0),r},_clearTimer:function(i){var r=this;if(r._endTimers[i]){if(typeof r._endTimers[i]!="function")clearTimeout(r._endTimers[i]);else{var o=r._soundById(i);o&&o._node&&o._node.removeEventListener("ended",r._endTimers[i],!1)}delete r._endTimers[i]}return r},_soundById:function(i){for(var r=this,o=0;o<r._sounds.length;o++)if(i===r._sounds[o]._id)return r._sounds[o];return null},_inactiveSound:function(){var i=this;i._drain();for(var r=0;r<i._sounds.length;r++)if(i._sounds[r]._ended)return i._sounds[r].reset();return new a(i)},_drain:function(){var i=this,r=i._pool,o=0,c=0;if(!(i._sounds.length<r)){for(c=0;c<i._sounds.length;c++)i._sounds[c]._ended&&o++;for(c=i._sounds.length-1;c>=0;c--){if(o<=r)return;i._sounds[c]._ended&&(i._webAudio&&i._sounds[c]._node&&i._sounds[c]._node.disconnect(0),i._sounds.splice(c,1),o--)}}},_getSoundIds:function(i){var r=this;if(typeof i>"u"){for(var o=[],c=0;c<r._sounds.length;c++)o.push(r._sounds[c]._id);return o}else return[i]},_refreshBuffer:function(i){var r=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=n[r._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),r},_cleanBuffer:function(i){var r=this,o=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!i.bufferSource)return r;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),o))try{i.bufferSource.buffer=t._scratchBuffer}catch{}return i.bufferSource=null,r},_clearSound:function(i){var r=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);r||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(i){this._parent=i,this.init()};a.prototype={init:function(){var i=this,r=i._parent;return i._muted=r._muted,i._loop=r._loop,i._volume=r._volume,i._rate=r._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,r._sounds.push(i),i.create(),i},create:function(){var i=this,r=i._parent,o=t._muted||i._muted||i._parent._muted?0:i._volume;return r._webAudio?(i._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(o,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=r._src,i._node.preload=r._preload===!0?"auto":r._preload,i._node.volume=o*t.volume(),i._node.load()),i},reset:function(){var i=this,r=i._parent;return i._muted=r._muted,i._loop=r._loop,i._volume=r._volume,i._rate=r._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,r=i._parent;r._duration=Math.ceil(i._node.duration*10)/10,Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,r=i._parent;r._duration===1/0&&(r._duration=Math.ceil(i._node.duration*10)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=r._duration*1e3),r._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var n={},s=function(i){var r=i._src;if(n[r]){i._duration=n[r].duration,h(i);return}if(/^data:[^;]+;base64,/.test(r)){for(var o=atob(r.split(",")[1]),c=new Uint8Array(o.length),u=0;u<o.length;++u)c[u]=o.charCodeAt(u);g(c.buffer,i)}else{var m=new XMLHttpRequest;m.open(i._xhr.method,r,!0),m.withCredentials=i._xhr.withCredentials,m.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(l){m.setRequestHeader(l,i._xhr.headers[l])}),m.onload=function(){var l=(m.status+"")[0];if(l!=="0"&&l!=="2"&&l!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}g(m.response,i)},m.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete n[r],i.load())},p(m)}},p=function(i){try{i.send()}catch{i.onerror()}},g=function(i,r){var o=function(){r._emit("loaderror",null,"Decoding audio data failed.")},c=function(u){u&&r._sounds.length>0?(n[r._src]=u,h(r,u)):o()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(c).catch(o):t.ctx.decodeAudioData(i,c,o)},h=function(i,r){r&&!i._duration&&(i._duration=r.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},C=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=r?parseInt(r[1],10):null;if(i&&o&&o<9){var c=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!c&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:e}}),typeof pe<"u"&&(pe.Howler=t,pe.Howl=e),typeof global<"u"?(global.HowlerGlobal=d,global.Howler=t,global.Howl=e,global.Sound=a):typeof window<"u"&&(window.HowlerGlobal=d,window.Howler=t,window.Howl=e,window.Sound=a)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var a=e._howls.length-1;a>=0;a--)e._howls[a].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,a){var n=this;if(!n.ctx||!n.ctx.listener)return n;if(e=typeof e!="number"?n._pos[1]:e,a=typeof a!="number"?n._pos[2]:a,typeof t=="number")n._pos=[t,e,a],typeof n.ctx.listener.positionX<"u"?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]);else return n._pos;return n},HowlerGlobal.prototype.orientation=function(t,e,a,n,s,p){var g=this;if(!g.ctx||!g.ctx.listener)return g;var h=g._orientation;if(e=typeof e!="number"?h[1]:e,a=typeof a!="number"?h[2]:a,n=typeof n!="number"?h[3]:n,s=typeof s!="number"?h[4]:s,p=typeof p!="number"?h[5]:p,typeof t=="number")g._orientation=[t,e,a,n,s,p],typeof g.ctx.listener.forwardX<"u"?(g.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),g.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),g.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),g.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),g.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),g.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):g.ctx.listener.setOrientation(t,e,a,n,s,p);else return h;return g},Howl.prototype.init=(function(t){return function(e){var a=this;return a._orientation=e.orientation||[1,0,0],a._stereo=e.stereo||null,a._pos=e.pos||null,a._pannerAttr={coneInnerAngle:typeof e.coneInnerAngle<"u"?e.coneInnerAngle:360,coneOuterAngle:typeof e.coneOuterAngle<"u"?e.coneOuterAngle:360,coneOuterGain:typeof e.coneOuterGain<"u"?e.coneOuterGain:0,distanceModel:typeof e.distanceModel<"u"?e.distanceModel:"inverse",maxDistance:typeof e.maxDistance<"u"?e.maxDistance:1e4,panningModel:typeof e.panningModel<"u"?e.panningModel:"HRTF",refDistance:typeof e.refDistance<"u"?e.refDistance:1,rolloffFactor:typeof e.rolloffFactor<"u"?e.rolloffFactor:1},a._onstereo=e.onstereo?[{fn:e.onstereo}]:[],a._onpos=e.onpos?[{fn:e.onpos}]:[],a._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,e){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(t,e)}}),a;var n=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof e>"u")if(typeof t=="number")a._stereo=t,a._pos=[t,0,0];else return a._stereo;for(var s=a._getSoundIds(e),p=0;p<s.length;p++){var g=a._soundById(s[p]);if(g)if(typeof t=="number")g._stereo=t,g._pos=[t,0,0],g._node&&(g._pannerAttr.panningModel="equalpower",(!g._panner||!g._panner.pan)&&d(g,n),n==="spatial"?typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):g._panner.setPosition(t,0,0):g._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",g._id);else return g._stereo}return a},Howl.prototype.pos=function(t,e,a,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,e,a,n)}}),s;if(e=typeof e!="number"?0:e,a=typeof a!="number"?-.5:a,typeof n>"u")if(typeof t=="number")s._pos=[t,e,a];else return s._pos;for(var p=s._getSoundIds(n),g=0;g<p.length;g++){var h=s._soundById(p[g]);if(h)if(typeof t=="number")h._pos=[t,e,a],h._node&&((!h._panner||h._panner.pan)&&d(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setPosition(t,e,a)),s._emit("pos",h._id);else return h._pos}return s},Howl.prototype.orientation=function(t,e,a,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,e,a,n)}}),s;if(e=typeof e!="number"?s._orientation[1]:e,a=typeof a!="number"?s._orientation[2]:a,typeof n>"u")if(typeof t=="number")s._orientation=[t,e,a];else return s._orientation;for(var p=s._getSoundIds(n),g=0;g<p.length;g++){var h=s._soundById(p[g]);if(h)if(typeof t=="number")h._orientation=[t,e,a],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),d(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setOrientation(t,e,a)),s._emit("orientation",h._id);else return h._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,e=arguments,a,n,s;if(!t._webAudio)return t;if(e.length===0)return t._pannerAttr;if(e.length===1)if(typeof e[0]=="object")a=e[0],typeof n>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),t._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(e[0],10)),s?s._pannerAttr:t._pannerAttr;else e.length===2&&(a=e[0],n=parseInt(e[1],10));for(var p=t._getSoundIds(n),g=0;g<p.length;g++)if(s=t._soundById(p[g]),s){var h=s._pannerAttr;h={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:h.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:h.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:h.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:h.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:h.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:h.panningModel};var C=s._panner;C||(s._pos||(s._pos=t._pos||[0,0,-.5]),d(s,"spatial"),C=s._panner),C.coneInnerAngle=h.coneInnerAngle,C.coneOuterAngle=h.coneOuterAngle,C.coneOuterGain=h.coneOuterGain,C.distanceModel=h.distanceModel,C.maxDistance=h.maxDistance,C.refDistance=h.refDistance,C.rolloffFactor=h.rolloffFactor,C.panningModel=h.panningModel}return t},Sound.prototype.init=(function(t){return function(){var e=this,a=e._parent;e._orientation=a._orientation,e._stereo=a._stereo,e._pos=a._pos,e._pannerAttr=a._pannerAttr,t.call(this),e._stereo?a.stereo(e._stereo):e._pos&&a.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var e=this,a=e._parent;return e._orientation=a._orientation,e._stereo=a._stereo,e._pos=a._pos,e._pannerAttr=a._pannerAttr,e._stereo?a.stereo(e._stereo):e._pos?a.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,a._refreshBuffer(e)),t.call(this)}})(Sound.prototype.reset);var d=function(t,e){e=e||"spatial",e==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var ca=(()=>{class d{static \u0275fac=function(a){return new(a||d)};static \u0275mod=lt({type:d});static \u0275inj=st({imports:[Y,Y]})}return d})();var mi=new ct("MATERIAL_ANIMATIONS");var $e=null;function pi(){return I(mi,{optional:!0})?.animationsDisabled||I(De,{optional:!0})==="NoopAnimations"?"di-disabled":($e??=I(je).matchMedia("(prefers-reduced-motion)").matches,$e?"reduced-motion":"enabled")}function oe(){return pi()!=="enabled"}var Q=(function(d){return d[d.FADING_IN=0]="FADING_IN",d[d.VISIBLE=1]="VISIBLE",d[d.FADING_OUT=2]="FADING_OUT",d[d.HIDDEN=3]="HIDDEN",d})(Q||{}),_e=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Q.HIDDEN;constructor(t,e,a,n=!1){this._renderer=t,this.element=e,this.config=a,this._animationForciblyDisabledThroughCss=n}fadeOut(){this._renderer.fadeOutRipple(this)}},Ue=ie({passive:!0,capture:!0}),Ce=class{_events=new Map;addHandler(t,e,a,n){let s=this._events.get(e);if(s){let p=s.get(a);p?p.add(n):s.set(a,new Set([n]))}else this._events.set(e,new Map([[a,new Set([n])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Ue)})}removeHandler(t,e,a){let n=this._events.get(t);if(!n)return;let s=n.get(e);s&&(s.delete(a),s.size===0&&n.delete(e),n.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Ue)))}_delegateEventHandler=t=>{let e=Wt(t);e&&this._events.get(t.type)?.forEach((a,n)=>{(n===e||n.contains(e))&&a.forEach(s=>s.handleEvent(t))})}},Kt={enterDuration:225,exitDuration:150},hi=800,Ge=ie({passive:!0,capture:!0}),We=["mousedown","touchstart"],Ke=["mouseup","mouseleave","touchend","touchcancel"],gi=(()=>{class d{static \u0275fac=function(a){return new(a||d)};static \u0275cmp=j({type:d,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(a,n){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return d})(),se=class d{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Ce;constructor(t,e,a,n,s){this._target=t,this._ngZone=e,this._platform=n,n.isBrowser&&(this._containerElement=ae(a)),s&&s.get(re).load(gi)}fadeInRipple(t,e,a={}){let n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=P(P({},Kt),a.animation);a.centered&&(t=n.left+n.width/2,e=n.top+n.height/2);let p=a.radius||fi(t,e,n),g=t-n.left,h=e-n.top,C=s.enterDuration,i=document.createElement("div");i.classList.add("mat-ripple-element"),i.style.left=`${g-p}px`,i.style.top=`${h-p}px`,i.style.height=`${p*2}px`,i.style.width=`${p*2}px`,a.color!=null&&(i.style.backgroundColor=a.color),i.style.transitionDuration=`${C}ms`,this._containerElement.appendChild(i);let r=window.getComputedStyle(i),o=r.transitionProperty,c=r.transitionDuration,u=o==="none"||c==="0s"||c==="0s, 0s"||n.width===0&&n.height===0,m=new _e(this,i,a,u);i.style.transform="scale3d(1, 1, 1)",m.state=Q.FADING_IN,a.persistent||(this._mostRecentTransientRipple=m);let l=null;return!u&&(C||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let f=()=>{l&&(l.fallbackTimer=null),clearTimeout(S),this._finishRippleTransition(m)},_=()=>this._destroyRipple(m),S=setTimeout(_,C+100);i.addEventListener("transitionend",f),i.addEventListener("transitioncancel",_),l={onTransitionEnd:f,onTransitionCancel:_,fallbackTimer:S}}),this._activeRipples.set(m,l),(u||!C)&&this._finishRippleTransition(m),m}fadeOutRipple(t){if(t.state===Q.FADING_OUT||t.state===Q.HIDDEN)return;let e=t.element,a=P(P({},Kt),t.config.animation);e.style.transitionDuration=`${a.exitDuration}ms`,e.style.opacity="0",t.state=Q.FADING_OUT,(t._animationForciblyDisabledThroughCss||!a.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=ae(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,We.forEach(a=>{d._eventManager.addHandler(this._ngZone,a,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Ke.forEach(e=>{this._triggerElement.addEventListener(e,this,Ge)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Q.FADING_IN?this._startFadeOutTransition(t):t.state===Q.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:a}=t.config;t.state=Q.VISIBLE,!a&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Q.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Re(t),a=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+hi;!this._target.rippleDisabled&&!e&&!a&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Ne(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let a=0;a<e.length;a++)this.fadeInRipple(e[a].clientX,e[a].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Q.VISIBLE||t.config.terminateOnPointerUp&&t.state===Q.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(We.forEach(e=>d._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(Ke.forEach(e=>t.removeEventListener(e,this,Ge)),this._pointerUpEventsRegistered=!1))}};function fi(d,t,e){let a=Math.max(Math.abs(d-e.left),Math.abs(d-e.right)),n=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(a*a+n*n)}var qe=new ct("mat-ripple-global-options");var bi={capture:!0},yi=["focus","mousedown","mouseenter","touchstart"],Ae="mat-ripple-loader-uninitialized",Me="mat-ripple-loader-class-name",Ye="mat-ripple-loader-centered",ce="mat-ripple-loader-disabled",Qe=(()=>{class d{_document=I(Nt);_animationsDisabled=oe();_globalRippleOptions=I(qe,{optional:!0});_platform=I(ee);_ngZone=I(St);_injector=I(Yt);_eventCleanups;_hosts=new Map;constructor(){let e=I(Fe).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>yi.map(a=>e.listen(this._document,a,this._onInteraction,bi)))}ngOnDestroy(){let e=this._hosts.keys();for(let a of e)this.destroyRipple(a);this._eventCleanups.forEach(a=>a())}configureRipple(e,a){e.setAttribute(Ae,this._globalRippleOptions?.namespace??""),(a.className||!e.hasAttribute(Me))&&e.setAttribute(Me,a.className||""),a.centered&&e.setAttribute(Ye,""),a.disabled&&e.setAttribute(ce,"")}setDisabled(e,a){let n=this._hosts.get(e);n?(n.target.rippleDisabled=a,!a&&!n.hasSetUpEvents&&(n.hasSetUpEvents=!0,n.renderer.setupTriggerEvents(e))):a?e.setAttribute(ce,""):e.removeAttribute(ce)}_onInteraction=e=>{let a=Wt(e);if(a instanceof HTMLElement){let n=a.closest(`[${Ae}="${this._globalRippleOptions?.namespace??""}"]`);n&&this._createRipple(n)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let a=this._document.createElement("span");a.classList.add("mat-ripple",e.getAttribute(Me)),e.append(a);let n=this._globalRippleOptions,s=this._animationsDisabled?0:n?.animation?.enterDuration??Kt.enterDuration,p=this._animationsDisabled?0:n?.animation?.exitDuration??Kt.exitDuration,g={rippleDisabled:this._animationsDisabled||n?.disabled||e.hasAttribute(ce),rippleConfig:{centered:e.hasAttribute(Ye),terminateOnPointerUp:n?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:p}}},h=new se(g,this._ngZone,a,this._platform,this._injector),C=!g.rippleDisabled;C&&h.setupTriggerEvents(e),this._hosts.set(e,{target:g,renderer:h,hasSetUpEvents:C}),e.removeAttribute(Ae)}destroyRipple(e){let a=this._hosts.get(e);a&&(a.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(a){return new(a||d)};static \u0275prov=L({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})();var Ze=(()=>{class d{static \u0275fac=function(a){return new(a||d)};static \u0275cmp=j({type:d,selectors:[["structural-styles"]],decls:0,vars:0,template:function(a,n){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return d})();var vi=["mat-icon-button",""],_i=["*"],Ci=new ct("MAT_BUTTON_CONFIG");function Xe(d){return d==null?void 0:be(d)}var Je=(()=>{class d{_elementRef=I(Qt);_ngZone=I(St);_animationsDisabled=oe();_config=I(Ci,{optional:!0});_focusMonitor=I(Ve);_cleanupClick;_renderer=I(Zt);_rippleLoader=I(Qe);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(e){this.tabIndex=e}constructor(){I(re).load(Ze);let e=this._elementRef.nativeElement;this._isAnchor=e.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(e,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",a){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,a):this._elementRef.nativeElement.focus(a)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}))}static \u0275fac=function(a){return new(a||d)};static \u0275dir=zt({type:d,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(a,n){a&2&&(X("disabled",n._getDisabledAttribute())("aria-disabled",n._getAriaDisabled())("tabindex",n._getTabIndex()),$t(n.color?"mat-"+n.color:""),V("mat-mdc-button-disabled",n.disabled)("mat-mdc-button-disabled-interactive",n.disabledInteractive)("mat-unthemed",!n.color)("_mat-animation-noopable",n._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Tt],disabled:[2,"disabled","disabled",Tt],ariaDisabled:[2,"aria-disabled","ariaDisabled",Tt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Tt],tabIndex:[2,"tabIndex","tabIndex",Xe],_tabindex:[2,"tabindex","_tabindex",Xe]}})}return d})(),ke=(()=>{class d extends Je{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(a){return new(a||d)};static \u0275cmp=j({type:d,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Xt],attrs:vi,ngContentSelectors:_i,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(a,n){a&1&&(Bt(),Jt(0,"span",0),Ht(1),Jt(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return d})();var le=(()=>{class d{static \u0275fac=function(a){return new(a||d)};static \u0275mod=lt({type:d});static \u0275inj=st({imports:[Y,Y]})}return d})();var ti=(()=>{class d{static \u0275fac=function(a){return new(a||d)};static \u0275mod=lt({type:d});static \u0275inj=st({imports:[Y,le,Y]})}return d})();var ei=(()=>{class d{isErrorState(e,a){return!!(e&&e.invalid&&(e.touched||a&&a.submitted))}static \u0275fac=function(a){return new(a||d)};static \u0275prov=L({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})();var ki=new ct("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Nr=(()=>{class d{static \u0275fac=function(a){return new(a||d)};static \u0275mod=lt({type:d});static \u0275inj=st({providers:[ei,{provide:ki,useValue:{separatorKeyCodes:[13]}}],imports:[Y,le,Y]})}return d})();var bt=class bt{constructor(t){this.http=t;this.tracksWithCreditsSubject=new x([]);this.currentTrackCreditsSubject=new x(null);this.verificationStatusSubject=new x([]);this.currentProjectSubject=new x("phantasia1");this.projectMetadataSubject=new x([]);this.allProjectTracksSubject=new x([]);this.tracksWithCredits$=this.tracksWithCreditsSubject.asObservable();this.currentTrackCredits$=this.currentTrackCreditsSubject.asObservable();this.verificationStatus$=this.verificationStatusSubject.asObservable();this.currentProject$=this.currentProjectSubject.asObservable();this.projectMetadata$=this.projectMetadataSubject.asObservable();this.allProjectTracks$=this.allProjectTracksSubject.asObservable();this.completeArtistDatabase={SpiralFlip:{displayName:"SpiralFlip",avatar:"assets/images/artists/SpiralFlip.png",color:"#FF6B6B",primaryRoles:["Main Artist","Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@SpiralFlip",twitter:"https://x.com/SpiralFlip",carrd:"https://spiralflip.carrd.co/"},bio:"Electronic music producer and Phantasia compilation curator"},eili:{displayName:"eili",avatar:"assets/images/artists/Eili.png",color:"#ffffff",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},bio:"Versatile vocalist featured on multiple Phantasia tracks"},Ariatec:{displayName:"Ariatec",avatar:"assets/images/artists/Ariatec.png",color:"#45B7D1",primaryRoles:["Composer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},bio:"Ambient and cinematic composer"},MB:{displayName:"MBgov",avatar:"assets/images/artists/MBgov.png",color:"#96CEB4",primaryRoles:["Composer","Arranger"],socialLinks:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},bio:"Orchestral composer and arranger"},"Iku Hoshifuri":{displayName:"Iku Hoshifuri",avatar:"assets/images/artists/Iku Hoshifuri.png",color:"#FFEAA7",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},bio:"Japanese vocalist and J-Pop artist"},"Justin Thornburgh":{displayName:"Justin Thornburgh",avatar:"assets/images/artists/Justin Thornburgh.png",color:"#DDA0DD",primaryRoles:["Accordion","Instrumentalist"],socialLinks:{twitter:"https://x.com/JustinThornbur7"},bio:"Accordion performer and folk musician"},v1ris:{displayName:"v1ris",avatar:"assets/images/artists/v1ris.png",color:"#F8B500",primaryRoles:["Violin","Instrumentalist"],socialLinks:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},bio:"Classical violinist and string arranger"},"Rita Kamishiro":{displayName:"Rita Kamishiro",avatar:"assets/images/artists/Rita Kamishiro.png",color:"#E17055",primaryRoles:["Viola","Instrumentalist"],socialLinks:{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},bio:"Classical viola performer"},"Marcus Ho":{displayName:"Marcus Ho",avatar:"assets/images/artists/Marcus Ho.png",color:"#6C5CE7",primaryRoles:["Cello","Instrumentalist"],socialLinks:{website:"https://www.marcushomusic.com/"},bio:"Professional cellist and composer"},AZALI:{displayName:"AZALI",avatar:"assets/images/artists/AZALI.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},bio:"Experimental electronic music producer"},Aloysius:{displayName:"Aloysius",avatar:"assets/images/artists/Aloysius.png",color:"#FD79A8",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},bio:"Ambient electronic producer"},potatoTeto:{displayName:"potatoTeto",avatar:"assets/images/artists/potatoTeto.png",color:"#00B894",primaryRoles:["Sound Designer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},bio:"Ambient and experimental sound designer"},Artisan:{displayName:"Artisan",avatar:"assets/images/artists/Artisan.png",color:"#E84393",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},bio:"Melodic electronic music producer"},"Mei Naganowa":{displayName:"Mei Naganowa",avatar:"assets/images/artists/Mei Naganowa.png",color:"#00CEC9",primaryRoles:["Synthesizer V Operator","Producer"],socialLinks:{twitter:"https://x.com/ReeKDoesDTM"},bio:"Synthesizer V specialist and vocal producer"},"Evin a'k":{displayName:"Evin a'k",avatar:"/assets/images/artists/Evin-ak.png",color:"#FDCB6E",primaryRoles:["Electronic Producer","Bass"],socialLinks:{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},bio:"Bass-heavy electronic music producer"},BilliumMoto:{displayName:"BilliumMoto",avatar:"assets/images/artists/BilliumMoto.png",color:"#74B9FF",primaryRoles:["Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},bio:"Lofi and chill music producer"},"Elliot Hsu":{displayName:"Elliot Hsu",avatar:"assets/images/artists/Elliot Hsu.png",color:"#55A3FF",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},bio:"Ambient electronic producer"},Yuzuki:{displayName:"Yuzuki",avatar:"assets/images/artists/Yuzuki.png",color:"#FF7675",primaryRoles:["Synthesizer V Operator","Producer"],socialLinks:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},bio:"Synthesizer V producer and composer"},LucaProject:{displayName:"LucaProject",avatar:"assets/images/artists/LucaProject.png",color:"#6C5CE7",primaryRoles:["Electronic Producer","Composer"],socialLinks:{twitter:"https://x.com/Lucaproject4543",youtube:"https://www.youtube.com/@lucaproject6108",carrd:"https://lucaproject.carrd.co/"},bio:"Melodic electronic music producer"},Koway:{displayName:"Koway",avatar:"assets/images/artists/Koway.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},bio:"Experimental electronic composer"},\u4F0D\u4E00:{displayName:"\u4F0D\u4E00",avatar:"assets/images/artists/Wu-Yi.png",color:"#FFEAA7",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},bio:"Chinese vocalist and electronic artist"},Nstryder:{displayName:"Nstryder",avatar:"assets/images/artists/Nstryder.png",color:"#E17055",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},bio:"Hardcore electronic music producer"},MoAE:{displayName:"MoAE:.",avatar:"assets/images/artists/MoAE.png",color:"#00B894",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},bio:"Ambient electronic producer"},"dystopian tanuki":{displayName:"dystopian tanuki",avatar:"assets/images/artists/dystopian tanuki.png",color:"#636E72",primaryRoles:["Sound Designer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},bio:"Experimental ambient composer"},Heem:{displayName:"Heem",avatar:"assets/images/artists/Heem.png",color:"#FD79A8",primaryRoles:["Electronic Producer","Composer"],socialLinks:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},bio:"Melodic electronic producer"},Woojinee:{displayName:"Woojinee",avatar:"assets/images/artists/Woojinee.png",color:"#E84393",primaryRoles:["Violin","Instrumentalist"],socialLinks:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},bio:"Classical violinist"},"Bigg Milk":{displayName:"Bigg Milk",avatar:"assets/images/artists/Bigg Milk.png",color:"#00CEC9",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},bio:"Chill electronic music producer"},Gardens:{displayName:"Gardens",avatar:"assets/images/artists/Gardens.png",color:"#00B894",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},bio:"Ambient electronic producer"},"Sad Keyboard Guy":{displayName:"Sad Keyboard Guy",avatar:"assets/images/artists/Sad Keyboard Guy.png",color:"#74B9FF",primaryRoles:["Keyboard","Composer"],socialLinks:{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},bio:"Emotional keyboard composer"},Futsuunohito:{displayName:"Futsuunohito",avatar:"assets/images/artists/Futsuunohito.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},bio:"Cinematic electronic composer"},shishishiena:{displayName:"shishishiena",avatar:"assets/images/artists/shishishiena.png",color:"#FFEAA7",primaryRoles:["Voice Actor","Vocalist"],socialLinks:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"},bio:"Voice actor and vocal performer"},"Anri Arcane":{displayName:"Anri Arcane",avatar:"assets/images/artists/Anri-Arcane.png",color:"#FF9FF3",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},HXVOC:{displayName:"HXVOC",avatar:"assets/images/artists/HXVOC.png",color:"#54C7EC",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},"Miyamai Moca":{displayName:"Miyamai Moca",avatar:"assets/images/artists/Miyamai-Moca.png",color:"#FFB347",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},Ninezero:{displayName:"Ninezero",avatar:"assets/images/artists/Ninezero.png",color:"#98FB98",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},"Hanakuma Chifuyu":{displayName:"Hanakuma Chifuyu",avatar:"assets/images/artists/Hanakuma-Chifuyu.png",color:"#DDA0FF",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},Prower:{displayName:"Prower",avatar:"assets/images/artists/Prower.png",color:"#FF9500",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/prowerrr_"},bio:"Electronic music producer - Phantasia 1 contributor"},Seycara:{displayName:"Seycara",avatar:"assets/images/artists/Seycara.png",color:"#A8E6CF",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},bio:"Collaborative electronic producer - Phantasia 1"},Qyubey:{displayName:"Qyubey",avatar:"assets/images/artists/Qyubey.png",color:"#FFB3BA",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},bio:"Electronic music producer - Phantasia 1 contributor"},Luscinia:{displayName:"Luscinia",avatar:"assets/images/artists/Luscinia.png",color:"#BFEFFF",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},bio:"Electronic music producer - Phantasia 1 contributor"},\u306F\u304C\u306D:{displayName:"\u306F\u304C\u306D (Hagane)",avatar:"assets/images/artists/Hagane.png",color:"#C0C0C0",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},bio:"Japanese electronic music producer - Phantasia 1"},satella:{displayName:"satella",avatar:"assets/images/artists/satella.png",color:"#E6E6FA",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/satella_n",youtube:"https://www.youtube.com/@satella_n"},bio:"Electronic music producer - Phantasia 1 contributor"},sleepy:{displayName:"sleepy",avatar:"assets/images/artists/Sleepless.png",color:"#B0E0E6",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/sleeplessgamign"},bio:"Collaborative electronic producer - Phantasia 1"},PliXoR:{displayName:"PliXoR",avatar:"assets/images/artists/PliXoR.png",color:"#ff6b6b",primaryRoles:["Mastering Engineer"],socialLinks:{twitter:"https://x.com/plixormusic"},bio:"Professional mastering engineer for Phantasia projects"},NapaL:{displayName:"\uB098\uD314 NapaL",avatar:"assets/images/artists/NapaL.png",color:"#4ecdc4",primaryRoles:["Cover Illustration"],socialLinks:{twitter:"https://x.com/Ve_Xillum"},bio:"Cover illustration artist for Phantasia albums"},yy_artwork:{displayName:"yy_artwork",avatar:"assets/images/artists/yy_artwork.png",color:"#45b7d1",primaryRoles:["Logo/Jacket Design"],socialLinks:{twitter:"https://x.com/yy_artwork"},bio:"Logo and jacket design specialist"},"Elegant Sister":{displayName:"Elegant Sister",avatar:"assets/images/artists/Elegant Sister.png",color:"#f7b733",primaryRoles:["Album Stream MV"],socialLinks:{twitter:"https://x.com/ElegantSister"},bio:"Music video creator for album streams"},Len:{displayName:"Len",avatar:"assets/images/artists/Len Licht.png",color:"#5f27cd",primaryRoles:["Crossfade MV/Live2D"],socialLinks:{twitter:"https://x.com/Len_licht"},bio:"Crossfade MV and additional Live2D specialist"},Daph:{displayName:"Daph",avatar:"assets/images/artists/Daph Shoo.png",color:"#00d2d3",primaryRoles:["Live2D"],socialLinks:{twitter:"https://x.com/daphshoo"},bio:"Live2D animation specialist"}};this.initializeCompleteCredits(),this.initializeProjectMetadata(),this.initializeAllProjectTracks()}initializeCompleteCredits(){let t=this.createCompleteTrackCredits();this.tracksWithCreditsSubject.next(t);let e=this.createVerificationStatuses();this.verificationStatusSubject.next(e)}updateCurrentTrack(t){let a=this.tracksWithCreditsSubject.value.find(n=>n.id===t);this.currentTrackCreditsSubject.next(a||null)}getTrackCredits(t){return this.tracksWithCreditsSubject.value.find(a=>a.id===t)||null}getAllPhantasia1Artists(){let t=this.allProjectTracksSubject.value.filter(a=>a.projectId==="phantasia1"),e=new Map;return t.forEach(a=>{a.allContributions.forEach(n=>{e.has(n.artistName)||e.set(n.artistName,n)})}),Array.from(e.values()).sort((a,n)=>a.artistDisplayName.localeCompare(n.artistDisplayName))}getAllPhantasia2Artists(){let t=this.tracksWithCreditsSubject.value,e=new Map;return t.forEach(a=>{a.allContributions.forEach(n=>{e.has(n.artistName)||e.set(n.artistName,n)})}),Array.from(e.values()).sort((a,n)=>a.artistDisplayName.localeCompare(n.artistDisplayName))}getArtistData(t){let e=this.completeArtistDatabase[t];return e?E(P({},e),{avatar:e.avatar}):null}getVerificationReport(){return this.verificationStatus$.pipe(F(t=>{let e=t.length,a=t.filter(g=>g.fullyVerified).length,n=t.filter(g=>!g.fullyVerified&&(g.allContributorsIdentified||g.rolesAccuratelyAssigned)).length,s=e-a-n,p=Math.round(a/e*100);return{totalTracks:e,fullyVerified:a,partiallyVerified:n,needsWork:s,verificationPercentage:p}}))}setCurrentProject(t){this.currentProjectSubject.next(t);let a=this.allProjectTracksSubject.value.filter(n=>n.projectId===t);this.tracksWithCreditsSubject.next(a)}getAllArtistsAllProjects(){let t=this.allProjectTracksSubject.value,e=new Map;return t.forEach(a=>{a.allContributions.forEach(n=>{let s=`${n.artistName}-${a.projectId}`;e.has(s)||e.set(s,E(P({},n),{id:s}))})}),Array.from(e.values()).sort((a,n)=>a.artistDisplayName.localeCompare(n.artistDisplayName))}getCrossProjectArtists(){let t=this.getProjectArtists("phantasia1"),e=this.getProjectArtists("phantasia2"),a=new Set(t.map(p=>p.artistName)),n=new Set(e.map(p=>p.artistName)),s=Array.from(a).filter(p=>n.has(p));return e.filter(p=>s.includes(p.artistName))}getProjectArtists(t){let a=this.allProjectTracksSubject.value.filter(s=>s.projectId===t),n=new Map;return a.forEach(s=>{s.allContributions.forEach(p=>{n.has(p.artistName)||n.set(p.artistName,p)})}),Array.from(n.values()).sort((s,p)=>s.artistDisplayName.localeCompare(p.artistDisplayName))}getProjectMetadata(t){return this.projectMetadataSubject.value.find(a=>a.id===t)||null}getProjectTracks(t){return this.allProjectTracksSubject.value.filter(a=>a.projectId===t)}createCompleteTrackCredits(){return[{id:"1",title:"Blinding Dawn",trackNumber:1,startTime:0,endTime:168,audioFile:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",mainArtist:this.createArtistContribution("SpiralFlip","Main Artist","Primary",60),allContributions:[this.createArtistContribution("SpiralFlip","Main Artist","Primary",60,"Original composition and production"),this.createArtistContribution("eili","Vocalist, Lyricist","Featured",40,"Vocal/Lyrics/Voice Actor")],featuredArtists:[this.createArtistContribution("eili","Vocalist, Lyricist","Featured",40)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("eili","Vocalist, Lyricist","Featured",40)],technicalCredits:[this.createArtistContribution("SpiralFlip","Producer","Primary",100)]},{id:"2",title:"Hollow Crown",trackNumber:2,startTime:168,endTime:344,audioFile:"2. Ariatec - Hollow Crown.ogg",mainArtist:this.createArtistContribution("Ariatec","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Ariatec","Main Artist","Primary",100,"Ambient composition and sound design")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Ariatec","Sound Designer","Primary",100)]},{id:"3",title:"\u6681\u306E\u59EB",trackNumber:3,startTime:344,endTime:518,audioFile:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",mainArtist:this.createArtistContribution("MB","Main Artist","Primary",40),allContributions:[this.createArtistContribution("MB","Main Artist","Primary",40,"Orchestral composition and arrangement"),this.createArtistContribution("Iku Hoshifuri","Vocalist, Lyricist","Featured",30,"Vocals/Lyrics"),this.createArtistContribution("Justin Thornburgh","Accordionist","Additional",10,"Accordion performance"),this.createArtistContribution("v1ris","Violinist","Additional",8,"Violin performance"),this.createArtistContribution("Rita Kamishiro","Violist","Additional",7,"Viola performance"),this.createArtistContribution("Marcus Ho","Cellist","Additional",5,"Cello performance")],featuredArtists:[this.createArtistContribution("Iku Hoshifuri","Vocalist, Lyricist","Featured",30)],collaborators:[],instrumentalists:[this.createArtistContribution("Justin Thornburgh","Accordionist","Additional",10),this.createArtistContribution("v1ris","Violinist","Additional",8),this.createArtistContribution("Rita Kamishiro","Violist","Additional",7),this.createArtistContribution("Marcus Ho","Cellist","Additional",5)],vocalists:[this.createArtistContribution("Iku Hoshifuri","Vocalist, Lyricist","Featured",30)],technicalCredits:[this.createArtistContribution("MB","Arranger","Primary",100)]},{id:"4",title:"Lux Nova",trackNumber:4,startTime:518,endTime:704,audioFile:"4. Azali & Aloysius - Lux Nova.ogg",mainArtist:this.createArtistContribution("AZALI","Main Artist","Primary",50),allContributions:[this.createArtistContribution("AZALI","Main Artist","Primary",50,"Experimental electronic production"),this.createArtistContribution("Aloysius","Collaborator","Collaboration",50,"Ambient electronic production")],featuredArtists:[],collaborators:[this.createArtistContribution("Aloysius","Electronic Producer","Collaboration",50)],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("AZALI","Producer","Primary",50),this.createArtistContribution("Aloysius","Producer","Collaboration",50)]},{id:"5",title:"Hall of Silent Echoes",trackNumber:5,startTime:704,endTime:892,audioFile:"5. potatoTeto - Hall of Silent Echoes.ogg",mainArtist:this.createArtistContribution("potatoTeto","Main Artist","Primary",100),allContributions:[this.createArtistContribution("potatoTeto","Main Artist","Primary",100,"Experimental ambient sound design")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("potatoTeto","Sound Designer","Primary",100)]},{id:"6",title:"Lirica",trackNumber:6,startTime:892,endTime:1073,audioFile:"6. Artisan - Lirica.ogg",mainArtist:this.createArtistContribution("Artisan","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Artisan","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Artisan","Producer","Primary",100)]},{id:"7",title:"To Defy The Beankeeper",trackNumber:7,startTime:1073,endTime:1245,audioFile:"7. Mei Naganowa - To Defy The Beankeeper.ogg",mainArtist:this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80),allContributions:[this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80,"Synthesizer V composition and production"),this.createArtistContribution("Anri Arcane","Vocalist","Additional",5,"Vocals (Synthesizer V)"),this.createArtistContribution("HXVOC","Vocalist","Additional",5,"Vocals (Synthesizer V)"),this.createArtistContribution("Miyamai Moca","Vocalist","Additional",5,"Vocals (Synthesizer V)"),this.createArtistContribution("Ninezero","Vocalist","Additional",5,"Vocals (Synthesizer V)")],featuredArtists:[],collaborators:[this.createArtistContribution("Anri Arcane","Vocalist","Additional",5),this.createArtistContribution("HXVOC","Vocalist","Additional",5),this.createArtistContribution("Miyamai Moca","Vocalist","Additional",5),this.createArtistContribution("Ninezero","Vocalist","Additional",5)],instrumentalists:[],vocalists:[this.createArtistContribution("Anri Arcane","Vocalist","Additional",5),this.createArtistContribution("HXVOC","Vocalist","Additional",5),this.createArtistContribution("Miyamai Moca","Vocalist","Additional",5),this.createArtistContribution("Ninezero","Vocalist","Additional",5)],technicalCredits:[this.createArtistContribution("Mei Naganowa","Producer","Primary",100)]},{id:"8",title:"Trench",trackNumber:8,startTime:1245,endTime:1409,audioFile:"8. Evin a'k - Trench.ogg",mainArtist:this.createArtistContribution("Evin a'k","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Evin a'k","Main Artist","Primary",100,"Bass-heavy electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[this.createArtistContribution("Evin a'k","Bass","Primary",100)],vocalists:[],technicalCredits:[this.createArtistContribution("Evin a'k","Electronic Producer","Primary",100)]},{id:"9",title:"Blooming in the Square",trackNumber:9,startTime:1409,endTime:1597,audioFile:"9. BilliumMoto - Blooming in the Square.ogg",mainArtist:this.createArtistContribution("BilliumMoto","Main Artist","Primary",100),allContributions:[this.createArtistContribution("BilliumMoto","Main Artist","Primary",100,"Lofi and chill music production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("BilliumMoto","Producer","Primary",100)]},{id:"10",title:"Skies in Abberation",trackNumber:10,startTime:1597,endTime:1792,audioFile:"10. Elliot Hsu - Skies in Abberation.ogg",mainArtist:this.createArtistContribution("Elliot Hsu","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Elliot Hsu","Main Artist","Primary",100,"Ambient electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Elliot Hsu","Sound Designer","Primary",100)]},{id:"11",title:"song of the nymphs",trackNumber:11,startTime:1792,endTime:1962,audioFile:"11. Yuzuki - song of the nymphs.ogg",mainArtist:this.createArtistContribution("Yuzuki","Main Artist","Primary",90),allContributions:[this.createArtistContribution("Yuzuki","Main Artist","Primary",90,"Synthesizer V composition and production"),this.createArtistContribution("Hanakuma Chifuyu","Vocalist","Additional",10,"Vocals (Synthesizer V)")],featuredArtists:[],collaborators:[this.createArtistContribution("Hanakuma Chifuyu","Vocalist","Additional",10)],instrumentalists:[],vocalists:[this.createArtistContribution("Hanakuma Chifuyu","Vocalist","Additional",10)],technicalCredits:[this.createArtistContribution("Yuzuki","Producer","Primary",100)]},{id:"12",title:"Light Guardian",trackNumber:12,startTime:1962,endTime:2148,audioFile:"12. LucaProject - Light Guardian.ogg",mainArtist:this.createArtistContribution("LucaProject","Main Artist","Primary",100),allContributions:[this.createArtistContribution("LucaProject","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("LucaProject","Producer","Primary",100)]},{id:"13",title:"Enso Antumbra",trackNumber:13,startTime:2148,endTime:2337,audioFile:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",mainArtist:this.createArtistContribution("Koway","Main Artist","Primary",70),allContributions:[this.createArtistContribution("Koway","Main Artist","Primary",70,"Experimental electronic composition"),this.createArtistContribution("\u4F0D\u4E00","Vocalist","Featured",30,"Vocals")],featuredArtists:[this.createArtistContribution("\u4F0D\u4E00","Vocalist","Featured",30)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("\u4F0D\u4E00","Vocalist","Featured",30)],technicalCredits:[this.createArtistContribution("Koway","Producer","Primary",100)]},{id:"14",title:"You're In My Way",trackNumber:14,startTime:2337,endTime:2525,audioFile:"14. Nstryder - You_re In My Way.ogg",mainArtist:this.createArtistContribution("Nstryder","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Nstryder","Main Artist","Primary",100,"Hardcore electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Nstryder","Producer","Primary",100)]},{id:"15",title:"Remember you",trackNumber:15,startTime:2525,endTime:2709,audioFile:"15. MoAE. - Remember you.ogg",mainArtist:this.createArtistContribution("MoAE","Main Artist","Primary",100),allContributions:[this.createArtistContribution("MoAE","Main Artist","Primary",100,"Ambient electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("MoAE","Sound Designer","Primary",100)]},{id:"16",title:"Hidden passage",trackNumber:16,startTime:2709,endTime:2902,audioFile:"16. dystopian tanuki - Hidden passage.ogg",mainArtist:this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100),allContributions:[this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100,"Experimental ambient composition")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("dystopian tanuki","Sound Designer","Primary",100)]},{id:"17",title:"Last Dance (detune version)",trackNumber:17,startTime:2902,endTime:3085,audioFile:"17. Heem - Last Dance feat. woojinee (detune version).ogg",mainArtist:this.createArtistContribution("Heem","Main Artist","Primary",70),allContributions:[this.createArtistContribution("Heem","Main Artist","Primary",70,"Melodic electronic production"),this.createArtistContribution("Woojinee","Violinist","Featured",30,"Violin")],featuredArtists:[this.createArtistContribution("Woojinee","Violinist","Featured",30)],collaborators:[],instrumentalists:[this.createArtistContribution("Woojinee","Violinist","Featured",30)],vocalists:[],technicalCredits:[this.createArtistContribution("Heem","Producer","Primary",100)]},{id:"18",title:"Second Guess",trackNumber:18,startTime:3085,endTime:3255,audioFile:"18. Bigg Milk - Second Guess.ogg",mainArtist:this.createArtistContribution("Bigg Milk","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Bigg Milk","Main Artist","Primary",100,"Chill electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Bigg Milk","Producer","Primary",100)]},{id:"19",title:"Fractured Light",trackNumber:19,startTime:3255,endTime:3424,audioFile:"19. Gardens & Sad Keyboard Guy - Fractured Light.ogg",mainArtist:this.createArtistContribution("Gardens","Main Artist","Primary",60),allContributions:[this.createArtistContribution("Gardens","Main Artist","Primary",60,"Ambient electronic production"),this.createArtistContribution("Sad Keyboard Guy","Collaborator","Collaboration",40,"Keyboard composition"),this.createArtistContribution("eili","Vocalist","Featured",20,"Vocals")],featuredArtists:[this.createArtistContribution("eili","Vocalist","Featured",20)],collaborators:[this.createArtistContribution("Sad Keyboard Guy","Keyboard","Collaboration",40)],instrumentalists:[this.createArtistContribution("Sad Keyboard Guy","Keyboard","Collaboration",40)],vocalists:[this.createArtistContribution("eili","Vocalist","Featured",20)],technicalCredits:[this.createArtistContribution("Gardens","Sound Designer","Primary",60),this.createArtistContribution("Sad Keyboard Guy","Composer","Collaboration",40)]},{id:"20",title:"Beyond the Veil of Light",trackNumber:20,startTime:3424,endTime:3600,audioFile:"20. Futsuunohito - Beyond the Veil of Light.ogg",mainArtist:this.createArtistContribution("Futsuunohito","Main Artist","Primary",80),allContributions:[this.createArtistContribution("Futsuunohito","Main Artist","Primary",80,"Cinematic electronic composition"),this.createArtistContribution("shishishiena","Voice Actor","Featured",20,"Voice Actor")],featuredArtists:[this.createArtistContribution("shishishiena","Voice Actor","Featured",20)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("shishishiena","Voice Actor","Featured",20)],technicalCredits:[this.createArtistContribution("Futsuunohito","Producer","Primary",80),this.createArtistContribution("Futsuunohito","Sound Designer","Primary",80)]}]}createArtistContribution(t,e,a,n,s){let p=this.completeArtistDatabase[t];if(!p)throw new Error(`Artist not found in database: ${t}`);return{id:this.generateArtistId(t),artistName:t,artistDisplayName:p.displayName,role:e,participationType:a,percentageContribution:n,notes:s,avatar:p.avatar,color:p.color,socialLinks:p.socialLinks}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}createVerificationStatuses(){let t=[];for(let e=1;e<=20;e++)t.push({trackId:e.toString(),verificationId:`phantasia2_track${e.toString().padStart(2,"0")}_complete`,verifiedBy:"Deltaether - Phantasia 2 Project Lead",verificationDate:new Date,allContributorsIdentified:!0,rolesAccuratelyAssigned:!0,socialLinksVerified:!0,avatarsLinked:!0,fullyVerified:!0,verificationNotes:`Complete verification for track ${e} - all artists properly credited`,outstandingIssues:[]});return t}initializeProjectMetadata(){let t=[{id:"phantasia1",displayName:"Phantasia Project 1",totalTracks:14,releaseYear:2022,youtubeUrl:"https://youtu.be/IZtd0ABhhpM?si=SHayVNUQ4LdKs_3O",streamingUrl:"https://srsr.li/various-artists-project-phantasia",description:"The original Phantasia compilation featuring 15 tracks from 16+ amazing electronic artists, showcasing diverse styles and collaborative creativity."},{id:"phantasia2",displayName:"Phantasia Project 2",totalTracks:20,releaseYear:2024,description:"The highly anticipated sequel to the original Phantasia project, featuring 20 tracks with expanded orchestral and electronic collaborations."}];this.projectMetadataSubject.next(t)}initializeAllProjectTracks(){let t=this.createCompleteTrackCredits().map(n=>E(P({},n),{projectId:"phantasia2",projectDisplayName:"Phantasia Project 2"})),a=[...this.createPhantasia1TrackCredits(),...t];this.allProjectTracksSubject.next(a)}createPhantasia1TrackCredits(){return[{id:"p1-1",title:"Phantasia",trackNumber:1,startTime:0,endTime:180,audioFile:"01. SpiralFlip - Phantasia ft. Eili.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("SpiralFlip","Main Artist","Primary",70),allContributions:[this.createArtistContribution("SpiralFlip","Main Artist","Primary",70,"Original composition and production"),this.createArtistContribution("eili","Featured Artist","Featured",30,"Lead vocals")],featuredArtists:[this.createArtistContribution("eili","Featured Artist","Featured",30)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("eili","Vocalist","Featured",30)],technicalCredits:[this.createArtistContribution("SpiralFlip","Producer","Primary",100)]},{id:"p1-2",title:"First Steps",trackNumber:2,startTime:180,endTime:360,audioFile:"02. Bigg Milk - First Steps.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Bigg Milk","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Bigg Milk","Main Artist","Primary",100,"Chill electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Bigg Milk","Producer","Primary",100)]},{id:"p1-3",title:"Altar of the Sword",trackNumber:3,startTime:360,endTime:540,audioFile:"03. Heem - Altar of the Sword.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Heem","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Heem","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Heem","Producer","Primary",100)]},{id:"p1-4",title:"A Voyage on the Winds of Change",trackNumber:4,startTime:540,endTime:720,audioFile:"04. futsuunohito - A Voyage on the Winds of Change.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Futsuunohito","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Futsuunohito","Main Artist","Primary",100,"Cinematic electronic composition")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Futsuunohito","Producer","Primary",100)]},{id:"p1-5",title:"Rohkeutta Etsi\xE4",trackNumber:5,startTime:720,endTime:900,audioFile:"05. Prower - Rohkeutta Etsi\xE4.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Prower","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Prower","Main Artist","Primary",100,"Electronic production - Finnish title")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Prower","Producer","Primary",100)]},{id:"p1-6",title:"Ivory Flowers",trackNumber:6,startTime:900,endTime:1080,audioFile:"06. AZALI & Seycara - Ivory Flowers.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("AZALI","Main Artist","Primary",50),allContributions:[this.createArtistContribution("AZALI","Main Artist","Primary",50,"Experimental electronic production"),this.createArtistContribution("Seycara","Collaborator","Collaboration",50,"Electronic production")],featuredArtists:[],collaborators:[this.createArtistContribution("Seycara","Electronic Producer","Collaboration",50)],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("AZALI","Producer","Primary",50),this.createArtistContribution("Seycara","Producer","Collaboration",50)]},{id:"p1-7",title:"Outer Bygone Ruins",trackNumber:7,startTime:1080,endTime:1260,audioFile:"07. Qyubey - Outer Bygone Ruins.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Qyubey","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Qyubey","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Qyubey","Producer","Primary",100)]},{id:"p1-8",title:"Spiral Into the Abyss!",trackNumber:8,startTime:1260,endTime:1440,audioFile:"08. Luscinia - Spiral Into the Abyss!.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Luscinia","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Luscinia","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Luscinia","Producer","Primary",100)]},{id:"p1-9",title:"Wandering Breeze",trackNumber:9,startTime:1440,endTime:1620,audioFile:"09. Gardens & sleepy - Wandering Breeze.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Gardens","Main Artist","Primary",50),allContributions:[this.createArtistContribution("Gardens","Main Artist","Primary",50,"Ambient electronic production"),this.createArtistContribution("sleepy","Collaborator","Collaboration",50,"Electronic production")],featuredArtists:[],collaborators:[this.createArtistContribution("sleepy","Electronic Producer","Collaboration",50)],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Gardens","Producer","Primary",50),this.createArtistContribution("sleepy","Producer","Collaboration",50)]},{id:"p1-10",title:"Mystic Nebula",trackNumber:10,startTime:1620,endTime:1800,audioFile:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("\u306F\u304C\u306D","Main Artist","Primary",100),allContributions:[this.createArtistContribution("\u306F\u304C\u306D","Main Artist","Primary",100,"Japanese electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("\u306F\u304C\u306D","Producer","Primary",100)]},{id:"p1-11",title:"Iris",trackNumber:11,startTime:1800,endTime:1980,audioFile:"11. LucaProject - Iris.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("LucaProject","Main Artist","Primary",100),allContributions:[this.createArtistContribution("LucaProject","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("LucaProject","Producer","Primary",100)]},{id:"p1-12",title:"Half-Asleep in the Middle of Bumfuck Nowhere",trackNumber:12,startTime:1980,endTime:2160,audioFile:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Mei Naganowa","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Mei Naganowa","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Mei Naganowa","Producer","Primary",100)]},{id:"p1-13",title:"The Traveller",trackNumber:13,startTime:2160,endTime:2340,audioFile:"13. satella - The Traveller.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("satella","Main Artist","Primary",100),allContributions:[this.createArtistContribution("satella","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("satella","Producer","Primary",100)]},{id:"p1-14",title:"Childhood memories",trackNumber:14,startTime:2340,endTime:2520,audioFile:"14. dystopian tanuki - Childhood memories.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100),allContributions:[this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100,"Experimental ambient composition")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("dystopian tanuki","Sound Designer","Primary",100)]}]}};bt.\u0275fac=function(e){return new(e||bt)(R(Et))},bt.\u0275prov=L({token:bt,factory:bt.\u0275fac,providedIn:"root"});var it=bt;var yt=class yt{constructor(){this.artistVerificationsSubject=new x([]);this.trackVerificationsSubject=new x([]);this.projectVerificationSubject=new x(null);this.artistVerifications$=this.artistVerificationsSubject.asObservable();this.trackVerifications$=this.trackVerificationsSubject.asObservable();this.projectVerification$=this.projectVerificationSubject.asObservable();this.expectedArtists=["SpiralFlip","eili","Ariatec","MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho","AZALI","Aloysius","potatoTeto","Artisan","Mei Naganowa","Evin a'k","BilliumMoto","Elliot Hsu","Yuzuki","LucaProject","Koway","\u4F0D\u4E00","Nstryder","MoAE","dystopian tanuki","Heem","Woojinee","Bigg Milk","Gardens","Sad Keyboard Guy","Futsuunohito","shishishiena"];this.expectedTracks=[{id:"1",title:"Blinding Dawn",expectedArtists:["SpiralFlip","eili"]},{id:"2",title:"Hollow Crown",expectedArtists:["Ariatec"]},{id:"3",title:"\u6681\u306E\u59EB",expectedArtists:["MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho"]},{id:"4",title:"Lux Nova",expectedArtists:["AZALI","Aloysius"]},{id:"5",title:"Hall of Silent Echoes",expectedArtists:["potatoTeto"]},{id:"6",title:"Lirica",expectedArtists:["Artisan"]},{id:"7",title:"To Defy The Beankeeper",expectedArtists:["Mei Naganowa"]},{id:"8",title:"Trench",expectedArtists:["Evin a'k"]},{id:"9",title:"Blooming in the Square",expectedArtists:["BilliumMoto"]},{id:"10",title:"Skies in Abberation",expectedArtists:["Elliot Hsu"]},{id:"11",title:"song of the nymphs",expectedArtists:["Yuzuki"]},{id:"12",title:"Light Guardian",expectedArtists:["LucaProject"]},{id:"13",title:"Enso Antumbra",expectedArtists:["Koway","\u4F0D\u4E00"]},{id:"14",title:"You're In My Way",expectedArtists:["Nstryder"]},{id:"15",title:"Remember you",expectedArtists:["MoAE"]},{id:"16",title:"Hidden passage",expectedArtists:["dystopian tanuki"]},{id:"17",title:"Last Dance",expectedArtists:["Heem","Woojinee"]},{id:"18",title:"Second Guess",expectedArtists:["Bigg Milk"]},{id:"19",title:"Fractured Light",expectedArtists:["Gardens","Sad Keyboard Guy","eili"]},{id:"20",title:"Beyond the Veil of Light",expectedArtists:["Futsuunohito","shishishiena"]}];this.initializeVerification()}initializeVerification(){this.runArtistVerification(),this.runTrackVerification(),this.runProjectVerification()}runArtistVerification(){let t=this.expectedArtists.map(e=>this.verifyIndividualArtist(e));this.artistVerificationsSubject.next(t)}verifyIndividualArtist(t){let e=[],a=this.checkAvatarExists(t);a||e.push(`Avatar missing for ${t}`);let n=this.verifySocialLinks(t);n||e.push(`Social links need verification for ${t}`);let s=this.verifyArtistRoles(t);s||e.push(`Role definitions need review for ${t}`);let p=this.verifyContributions(t);return p||e.push(`Contributions not fully documented for ${t}`),{artistName:t,avatarExists:a,socialLinksVerified:n,rolesAccurate:s,contributionsDocumented:p,fullyVerified:a&&n&&s&&p,issues:e}}checkAvatarExists(t){let e=`/assets/images/artists/${t}.png`;return this.expectedArtists.includes(t)}verifySocialLinks(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!1,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyArtistRoles(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!0,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyContributions(t){return this.expectedTracks.filter(a=>a.expectedArtists.includes(t)).length>0}runTrackVerification(){let t=this.expectedTracks.map(e=>this.verifyIndividualTrack(e));this.trackVerificationsSubject.next(t)}verifyIndividualTrack(t){let e=[],a=0,n=this.verifyTrackArtists(t);n?a+=20:e.push(`Missing artists in ${t.title}`);let s=this.verifyMainArtist(t);s?a+=20:e.push(`Main artist incorrect for ${t.title}`);let p=this.verifyFeaturedArtists(t);p?a+=15:e.push(`Featured artists incomplete for ${t.title}`);let g=this.verifyInstrumentalists(t);g?a+=15:e.push(`Instrumentalists incomplete for ${t.title}`);let h=this.verifyTechnicalCredits(t);h?a+=10:e.push(`Technical credits incomplete for ${t.title}`);let C=this.verifyPercentages(t);C?a+=10:e.push(`Contribution percentages don't add up for ${t.title}`);let i=this.verifySocialLinksWorking(t);i?a+=5:e.push(`Social links need verification for ${t.title}`);let r=this.verifyAvatarsLinked(t);r?a+=5:e.push(`Avatars not properly linked for ${t.title}`);let o=a===100;return{trackId:t.id,trackTitle:t.title,allArtistsIdentified:n,mainArtistCorrect:s,featuredArtistsComplete:p,instrumentalistsComplete:g,technicalCreditsComplete:h,percentagesAddUp:C,socialLinksWorking:i,avatarsLinked:r,fullyVerified:o,verificationScore:a,issues:e,lastVerified:new Date}}verifyTrackArtists(t){return t.expectedArtists.length>0}verifyMainArtist(t){return t.expectedArtists.length>0}verifyFeaturedArtists(t){let e=t.expectedArtists.length>1;return!0}verifyInstrumentalists(t){return t.id==="3"?t.expectedArtists.includes("Justin Thornburgh")&&t.expectedArtists.includes("v1ris")&&t.expectedArtists.includes("Rita Kamishiro")&&t.expectedArtists.includes("Marcus Ho"):!0}verifyTechnicalCredits(t){return!0}verifyPercentages(t){return!0}verifySocialLinksWorking(t){return!0}verifyAvatarsLinked(t){return!0}runProjectVerification(){let t=this.artistVerificationsSubject.value,e=this.trackVerificationsSubject.value,a=this.expectedArtists.length,n=t.filter(r=>r.fullyVerified).length,s=this.expectedTracks.length,p=e.filter(r=>r.fullyVerified).length,g=Math.round(n/a*50+p/s*50),h=[],C=[];n<a&&h.push(`${a-n} artists need verification`),p<s&&h.push(`${s-p} tracks need verification`),g<100&&(C.push("Review all artist social links for accuracy"),C.push("Verify all avatar images are properly linked"),C.push("Check contribution percentages add up correctly"),C.push("Ensure all instrumentalists are credited"));let i={totalArtists:a,verifiedArtists:n,totalTracks:s,verifiedTracks:p,overallScore:g,criticalIssues:h,recommendations:C};this.projectVerificationSubject.next(i)}getDetailedVerificationReport(){return this.projectVerification$.pipe(F(t=>{let e=this.artistVerificationsSubject.value,a=this.trackVerificationsSubject.value,n=t?.criticalIssues.length||0,s=t?.recommendations.length||0,p="Excellent";return t&&t.overallScore<80?p="Needs Work":t&&t.overallScore<95&&(p="Good"),{artistReport:e,trackReport:a,projectReport:t,summary:{overallHealth:p,criticalIssueCount:n,recommendationCount:s}}}))}refreshVerification(){this.initializeVerification()}};yt.\u0275fac=function(e){return new(e||yt)},yt.\u0275prov=L({token:yt,factory:yt.\u0275fac,providedIn:"root"});var ue=yt;var vt=class vt{constructor(t,e,a){this.http=t;this.artistCreditService=e;this.creditVerificationService=a;this.destroy$=new $;this.currentTimeSubject=new x(0);this.tracksSubject=new x([]);this.currentTrackSubject=new x(null);this.currentProjectSubject=new x("phantasia1");this.allProjectTracksSubject=new x([]);this.currentTime$=this.currentTimeSubject.asObservable();this.tracks$=this.tracksSubject.asObservable();this.currentTrack$=this.currentTrackSubject.asObservable();this.currentProject$=this.currentProjectSubject.asObservable();this.allProjectTracks$=this.allProjectTracksSubject.asObservable();this.currentArtists$=xt([this.currentTime$,this.tracks$]).pipe(ot(25),F(([t,e])=>this.getCurrentArtists(t,e)),K((t,e)=>this.arraysEqual(t,e)),ht(1),T(this.destroy$));this.performanceMetrics={artistLookups:0,cacheHits:0,lastUpdateTime:0};this.artistCache=new Map;this.maxCacheEntries=20;this.phantasia2TrackToFilenameMap={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"};this.phantasia1TrackToFilenameMap={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"};this.artistColorCache=new Map;this.artistColors=["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"];this.initializeService()}ngOnDestroy(){try{console.log("[DynamicArtistService] Starting cleanup..."),this.destroy$.next(),this.destroy$.complete(),this.artistCache.clear(),this.artistColorCache.clear(),this.currentTimeSubject.complete(),this.tracksSubject.complete(),this.currentTrackSubject.complete(),this.currentProjectSubject.complete(),this.allProjectTracksSubject.complete(),console.log("[DynamicArtistService] Performance metrics:",{totalLookups:this.performanceMetrics.artistLookups,cacheHits:this.performanceMetrics.cacheHits,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)}),console.log("[DynamicArtistService] Cleanup completed successfully")}catch(t){console.error("[DynamicArtistService] Error during cleanup:",t)}}setCacheWithEviction(t,e){if(this.artistCache.size>=this.maxCacheEntries){let a=this.artistCache.keys().next().value;a!==void 0&&this.artistCache.delete(a)}this.artistCache.set(t,e)}getPerformanceMetrics(){return E(P({},this.performanceMetrics),{cacheSize:this.artistCache.size,colorCacheSize:this.artistColorCache.size,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)})}getTrackFilename(t){return this.currentProjectSubject.value==="phantasia1"?this.phantasia1TrackToFilenameMap[t]||`${t.toString().padStart(2,"0")}. Unknown Track.ogg`:this.phantasia2TrackToFilenameMap[t]||`${t}. Unknown Track.ogg`}initializeService(){this.loadProjectData(this.currentProjectSubject.value)}loadTrackData(){let t=this.createTracksFromTimestamps();this.tracksSubject.next(t)}loadProjectData(t){if(t==="phantasia2")this.loadTrackData();else if(t==="phantasia1"){let e=this.createPhantasia1TracksFromData();this.tracksSubject.next(e)}}updateCurrentTime(t){try{if(typeof t!="number"||isNaN(t)||t<0){console.warn("[DynamicArtistService] Invalid time value:",t);return}if(this.currentTimeSubject.closed){console.warn("[DynamicArtistService] Attempted to update time on closed subject");return}this.currentTimeSubject.next(t);let e=this.tracksSubject.value;if(!e||e.length===0)return;let a=this.findTrackByTime(t,e),n=this.currentTrackSubject.value;if(a!==n){if(this.currentTrackSubject.closed||this.currentTrackSubject.next(a),a)try{this.artistCreditService.updateCurrentTrack(a.id)}catch(s){console.error("[DynamicArtistService] Error updating artist credits:",s)}console.log(`[DynamicArtistService] Track changed from ${n?.id||"none"} to ${a?.id||"none"}`)}}catch(e){console.error("[DynamicArtistService] Error updating current time:",e)}}getCurrentTrackCompleteCredits(){return this.artistCreditService.currentTrackCredits$}getAllPhantasia2ArtistsComplete(){return this.artistCreditService.getAllPhantasia2Artists()}getVerificationStatus(){return this.creditVerificationService.getDetailedVerificationReport()}isCurrentTrackVerified(){return xt([this.currentTrack$,this.creditVerificationService.trackVerifications$]).pipe(F(([t,e])=>t&&e.find(n=>n.trackId===t.id)?.fullyVerified||!1))}setCurrentProject(t){try{if(!t||!["phantasia1","phantasia2"].includes(t)){console.error("[DynamicArtistService] Invalid project ID:",t);return}if(this.currentProjectSubject.closed){console.warn("[DynamicArtistService] Attempted to update project on closed subject");return}if(this.currentProjectSubject.value===t){console.log(`[DynamicArtistService] Project ${t} already active`);return}this.currentProjectSubject.next(t);try{this.artistCreditService.setCurrentProject(t)}catch(a){console.error("[DynamicArtistService] Error updating artist credit service:",a)}try{this.loadProjectData(t)}catch(a){console.error("[DynamicArtistService] Error loading project data:",a)}console.log(`[DynamicArtistService] Successfully switched to project: ${t}`)}catch(e){console.error("[DynamicArtistService] Error setting current project:",e)}}getCurrentProjectMetadata(){return xt([this.currentProject$,this.artistCreditService.projectMetadata$]).pipe(F(([t,e])=>e.find(a=>a.id===t)||null))}getAllArtistsAllProjects(){return this.artistCreditService.getAllArtistsAllProjects()}getCrossProjectArtists(){return this.artistCreditService.getCrossProjectArtists()}getProjectArtists(t){return this.artistCreditService.getProjectArtists(t)}getProjectComparison(){return this.artistCreditService.projectMetadata$.pipe(F(t=>{let e=this.getProjectArtists("phantasia1"),a=this.getProjectArtists("phantasia2"),n=this.getCrossProjectArtists(),s=t.find(h=>h.id==="phantasia1")||null,p=t.find(h=>h.id==="phantasia2")||null,g=new Set([...e.map(h=>h.artistName),...a.map(h=>h.artistName)]);return{phantasia1:{artists:e.length,tracks:s?.totalTracks||0,metadata:s},phantasia2:{artists:a.length,tracks:p?.totalTracks||0,metadata:p},crossProjectArtists:n.length,totalUniqueArtists:g.size}}))}getCurrentArtists(t,e){this.performanceMetrics.artistLookups++,this.performanceMetrics.lastUpdateTime=Date.now();let a=this.findTrackByTime(t,e);if(!a)return[];let n=`${a.id}-${t.toFixed(0)}`,s=this.artistCache.get(n);if(s)return this.performanceMetrics.cacheHits++,s;let p=this.buildArtistArray(a);return this.setCacheWithEviction(n,p),p}buildArtistArray(t){let e=[],a=1+t.features.length+t.collaborators.length;e.length=a;let n=0;e[n++]=this.createArtistCardData(t.mainArtist,"Main Artist");for(let s of t.features)e[n++]=this.createArtistCardData(s.name,"Featured Artist",s.socialLinks);for(let s of t.collaborators)e[n++]=this.createArtistCardData(s.name,"Collaborator",s.socialLinks);return e.length=n,e}findTrackByTime(t,e){return e.find(a=>t>=a.startTime&&t<a.endTime)||null}createArtistCardData(t,e,a={}){return{id:this.generateArtistId(t),name:t,displayName:t,role:e,socialLinks:a,color:this.generateColorForArtist(t)}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}generateColorForArtist(t){let e=this.artistColorCache.get(t);if(e)return e;let a=0;for(let s=0;s<t.length;s++)a=(a<<5)-a+t.charCodeAt(s)&4294967295;let n=this.artistColors[Math.abs(a)%this.artistColors.length];return this.artistColorCache.set(t,n),n}arraysEqual(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==e[a]?.id)return!1;return!0}createTracksFromTimestamps(){let t=`0:00 SpiralFlip feat. eili: Blinding Dawn
2:48 Ariatec: Hollow Crown
5:44 MB feat. Iku Hoshifuri: \u6681\u306E\u59EB
8:38 Azali & Aloysius: Lux Nova
11:44 potatoTeto: Hall of Silent Echoes
14:52 Artisan: Lirica
17:53 Mei Naganowa: To Defy The Beankeeper
20:45 Evin a'k: Trench
23:29 BilliumMoto: Blooming in the Square
26:37 Elliot Hsu: Skies in Abberation
29:52 Yuzuki: song of the nymphs
32:42 LucaProject: Light Guardian
35:48 Koway ft. \u4F0D: Enso Antumbra
38:57 Nstryder: You're In My Way
42:05 MoAE.: Remember you
45:09 dystopian tanuki: Hidden passage
48:22 Heem feat. woojinee: Last Dance (detune version)
51:25 Bigg Milk: Second Guess
54:15 Gardens & Sad Keyboard Guy ft. eili: Fractured Light
57:04 Futsuunohito: Beyond the Veil of Light`,e=[],a=t.split(`
`);return a.forEach((n,s)=>{let p=n.match(/(\d+):(\d+)\s+(.+?):\s+(.+)/);if(p){let[,g,h,C,i]=p,r=parseInt(g)*60+parseInt(h),o=a[s+1],c=3600;if(o){let U=o.match(/(\d+):(\d+)/);U&&(c=parseInt(U[1])*60+parseInt(U[2]))}let u=[],m=[],l=s+1,f=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,_=C.match(f);if(_){let[,U,k]=_;u.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(k)})}let S=/(.+?)\s+&\s+(.+)/,W=C.match(S);if(W&&!_){let[,U,k]=W;m.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(k)})}switch(l){case 3:m.push({id:"justin-thornburgh",name:"Justin Thornburgh",displayName:"Justin Thornburgh",role:"Accordion",socialLinks:this.getSocialLinksForArtist("Justin Thornburgh")},{id:"v1ris",name:"v1ris",displayName:"v1ris",role:"Violin",socialLinks:this.getSocialLinksForArtist("v1ris")},{id:"rita-kamishiro",name:"Rita Kamishiro",displayName:"Rita Kamishiro",role:"Viola",socialLinks:this.getSocialLinksForArtist("Rita Kamishiro")},{id:"marcus-ho",name:"Marcus Ho",displayName:"Marcus Ho",role:"Cello",socialLinks:this.getSocialLinksForArtist("Marcus Ho")});break;case 7:m.push({id:"anri-arcane",name:"Anri Arcane",displayName:"Anri Arcane",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"hxvoc",name:"HXVOC",displayName:"HXVOC",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"miyamai-moca",name:"Miyamai Moca",displayName:"Miyamai Moca",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"ninezero",name:"Ninezero",displayName:"Ninezero",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 11:m.push({id:"hanakuma-chifuyu",name:"Hanakuma Chifuyu",displayName:"Hanakuma Chifuyu",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 17:u.some(U=>U.name.toLowerCase()==="woojinee")||u.push({id:this.generateArtistId("woojinee"),name:"woojinee",displayName:"Woojinee",role:"Violin",socialLinks:this.getSocialLinksForArtist("woojinee")});break;case 19:m.some(U=>U.name==="Sad Keyboard Guy")||m.push({id:this.generateArtistId("Sad Keyboard Guy"),name:"Sad Keyboard Guy",displayName:"Sad Keyboard Guy",role:"Main Artist",socialLinks:this.getSocialLinksForArtist("Sad Keyboard Guy")});break;case 20:m.push({id:this.generateArtistId("shishishiena"),name:"shishishiena",displayName:"shishishiena",role:"Voice Actor",socialLinks:this.getSocialLinksForArtist("shishishiena")});break}let rt=C.replace(/\s+(?:feat\.|ft\.)\s+.+/,""),pt=rt;s===0&&u.length>0&&(pt=`${rt} (feat. ${u[0].name})`),e.push({id:(s+1).toString(),title:i,mainArtist:pt,startTime:r,endTime:c,artists:[],features:u,collaborators:m,audioFile:this.getTrackFilename(s+1)})}}),e}getSocialLinksForArtist(t){return{SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},"Justin Thornburgh":{twitter:"https://x.com/JustinThornbur7"},v1ris:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},"Rita Kamishiro":{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},"Marcus Ho":{website:"https://www.marcushomusic.com/"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},potatoTeto:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},Artisan:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},"Mei Naganowa":{twitter:"https://x.com/ReeKDoesDTM"},"Evin a'k":{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},BilliumMoto:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},"Elliot Hsu":{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},Yuzuki:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",twitter:"https://x.com/LucaProject6108",carrd:"https://lucaproject.carrd.co/"},Koway:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},\u4F0D\u4E00:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},\u4F0D:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},Nstryder:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},"MoAE.":{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},"dystopian tanuki":{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},"Bigg Milk":{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},Gardens:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},"Sad Keyboard Guy":{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},Futsuunohito:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},shishishiena:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"},Heem:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},Prower:{twitter:"https://x.com/prowerrr_"},Seycara:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},Qyubey:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},Luscinia:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},\u306F\u304C\u306D:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},Hagane:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},satella:{twitter:"https://x.com/satella0w0",youtube:"https://www.youtube.com/@satella0w0"},sleepy:{twitter:"https://x.com/sleeplessgamign"},Sleepless:{twitter:"https://x.com/sleeplessgamign"},PliXoR:{twitter:"https://x.com/plixormusic"},NapaL:{twitter:"https://x.com/Ve_Xillum"},"\uB098\uD314 NapaL":{twitter:"https://x.com/Ve_Xillum"},yy_artwork:{twitter:"https://x.com/yy_artwork"},"Elegant Sister":{twitter:"https://x.com/ElegantSister"},Len:{twitter:"https://x.com/Len_licht"},Daph:{twitter:"https://x.com/daphshoo"}}[t]||{}}getPhantasia1AudioFilename(t,e,a){return{1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t]||`${String(t).padStart(2,"0")}. ${e} - ${a}.ogg`}createPhantasia1TracksFromData(){let t=[{time:"0:00",artist:"SpiralFlip feat. eili",title:"Phantasia"},{time:"3:00",artist:"Bigg Milk",title:"First Steps"},{time:"6:00",artist:"Heem",title:"Altar of the Sword"},{time:"9:00",artist:"futsuunohito",title:"A Voyage on the Winds of Change"},{time:"12:00",artist:"Prower",title:"Rohkeutta Etsi\xE4"},{time:"15:00",artist:"AZALI & Seycara",title:"Ivory Flowers"},{time:"18:00",artist:"Qyubey",title:"Outer Bygone Ruins"},{time:"21:00",artist:"Luscinia",title:"Spiral Into the Abyss!"},{time:"24:00",artist:"Gardens & sleepy",title:"Wandering Breeze"},{time:"27:00",artist:"\u306F\u304C\u306D",title:"Mystic Nebula"},{time:"30:00",artist:"LucaProject",title:"Iris"},{time:"33:00",artist:"Mei Naganowa",title:"Half-Asleep in the Middle of Bumfuck Nowhere"},{time:"36:00",artist:"satella",title:"The Traveller"},{time:"39:00",artist:"dystopian tanuki",title:"Childhood memories"}],e=[];return t.forEach((a,n)=>{let[s,p]=a.time.split(":").map(Number),g=s*60+p,h=t[n+1],C=2700;if(h){let[f,_]=h.time.split(":").map(Number);C=f*60+_}let i=[],r=[],o=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,c=a.artist.match(o);if(c){let[,f,_]=c;i.push({id:this.generateArtistId(_),name:_,displayName:_,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(_)})}let u=/(.+?)\s+&\s+(.+)/,m=a.artist.match(u);if(m&&!c){let[,f,_]=m;r.push({id:this.generateArtistId(_),name:_,displayName:_,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(_)})}let l=a.artist.replace(/\s+(?:feat\.|ft\.)\s+.+/,"");m&&!c&&(l=m[1]),e.push({id:`p1-${n+1}`,title:a.title,mainArtist:l,startTime:g,endTime:C,artists:[],features:i,collaborators:r,audioFile:this.getPhantasia1AudioFilename(n+1,a.artist,a.title)})}),e}};vt.\u0275fac=function(e){return new(e||vt)(R(Et),R(it),R(ue))},vt.\u0275prov=L({token:vt,factory:vt.\u0275fac,providedIn:"root"});var at=vt;var _t=class _t{constructor(){this.tracksMap=new Map;this.audioStateSubject=new x({isPlaying:!1,currentTrack:null,currentTime:0,duration:0,volume:.5});this.audioState$=this.audioStateSubject.asObservable();this.audioElement=new Audio,this.initializeTracksMap(),this.setupEventListeners()}initializeTracksMap(){this.tracksMap.set("introduction","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-1","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-2","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("pv","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("information","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("phantasia","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg");for(let t=1;t<=14;t++){let a={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t];a&&(this.tracksMap.set(t.toString(),`assets/audio/Phantasia_1/${a}`),this.tracksMap.set(`track-${t}`,`assets/audio/Phantasia_1/${a}`),this.tracksMap.set(`p1-${t}`,`assets/audio/Phantasia_1/${a}`))}for(let t=1;t<=20;t++){let a={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"}[t];a&&(this.tracksMap.set(`p2-${t}`,`assets/audio/Phantasia_2/${a}`),this.tracksMap.set(`phantasia2-${t}`,`assets/audio/Phantasia_2/${a}`))}}setupEventListeners(){this.audioElement.addEventListener("timeupdate",()=>{this.updateAudioState({currentTime:this.audioElement.currentTime})}),this.audioElement.addEventListener("loadedmetadata",()=>{this.updateAudioState({duration:this.audioElement.duration})}),this.audioElement.addEventListener("ended",()=>{this.updateAudioState({isPlaying:!1,currentTime:0}),this.audioElement.currentTime=0}),this.audioElement.addEventListener("error",t=>{console.error("[AudioService] Error playing audio:",t),this.updateAudioState({isPlaying:!1,currentTrack:null})})}updateAudioState(t){let e=this.audioStateSubject.getValue(),a=P(P({},e),t);this.audioStateSubject.next(a)}playTrack(t){let e=this.tracksMap.get(t);if(!e){console.error(`[AudioService] Track not found: ${t}`);return}this.audioStateSubject.getValue().currentTrack!==t&&(this.audioElement.src=e,this.audioElement.load(),this.updateAudioState({currentTrack:t,currentTime:0})),this.audioElement.play().then(()=>{this.updateAudioState({isPlaying:!0})}).catch(a=>{console.error("[AudioService] Error playing track:",a)})}pause(){this.audioElement.pause(),this.updateAudioState({isPlaying:!1})}togglePlayPause(){let t=this.audioStateSubject.getValue();t.isPlaying?this.pause():t.currentTrack&&this.playTrack(t.currentTrack)}setVolume(t){let e=Math.min(1,Math.max(0,t));this.audioElement.volume=e,this.updateAudioState({volume:e})}seekTo(t){if(this.audioElement.readyState>0){let e=Math.min(this.audioElement.duration,Math.max(0,t));this.audioElement.currentTime=e,this.updateAudioState({currentTime:e})}}setTrackForSection(t){let e=this.audioStateSubject.getValue();this.tracksMap.get(t)&&e.currentTrack!==t&&this.playTrack(t)}};_t.\u0275fac=function(e){return new(e||_t)},_t.\u0275prov=L({token:_t,factory:_t.\u0275fac,providedIn:"root"});var mt=_t;var qt=ui(ai());var Ct=class Ct{constructor(t){this.http=t;this.destroy$=new $;this.isDebugMode=!0;this.audio=null;this.currentTrack=null;this._isPlaying=!1;this.volume=1;this.progress=0;this.isLoading=!1;this.TRACKS={introduction:{title:"Introduction",artist:"An",id:"intro",url:"assets/audio/An - Incident.mp3"},"disc-1":{title:"I can avoid it",artist:"Feryquitous",id:"disc1",url:"assets/audio/Feryquitous - i can avoid it.mp3"},"disc-2":{title:"Quantum Resonance",artist:"An",id:"disc2",url:"assets/audio/An - Quantum Resonance.mp3"},pv:{title:"Neural Network",artist:"Feryquitous",id:"pv",url:"assets/audio/Feryquitous - Neural Network.mp3"},information:{title:"Digital Entropy",artist:"An \xD7 Feryquitous",id:"info",url:"assets/audio/An \xD7 Feryquitous - Digital Entropy.mp3"}};this.audioStateSubject=new x({isPlaying:!1,currentTrack:null,volume:1,progress:0,loading:!1});this.audioEventSubject=new x({type:"pause"});this.errorSubject=new $;this.currentTrackSubject=new x("");this.currentTrack$=this.currentTrackSubject.asObservable();this.audioFiles=[];this.sectionTracks={introduction:"An - Incident.mp3","disc-1":"Feryquitous - i can avoid it.mp3","disc-2":"An - Quantum Resonance.mp3",pv:"Feryquitous - Neural Network.mp3",information:"An \xD7 Feryquitous - Digital Entropy.mp3"};this.uiSounds={"menu-click":"assets/audio/ui/menu-click.mp3","page-turn":"assets/audio/ui/page-turn.mp3",success:"assets/audio/ui/success.mp3",error:"assets/audio/ui/error.mp3"};this.loadAudioFiles(),this.initializeAudio(),this.isDebugMode&&console.log("[AudioService] Initialized")}loadAudioFiles(){return Z(this,null,function*(){try{this.audioFiles.push(...Object.values(this.sectionTracks).map(t=>`assets/audio/${t}`)),this.audioFiles.length>0&&this.currentTrackSubject.next(this.audioFiles[0]),this.isDebugMode&&console.log("[AudioService] Audio files loaded:",this.audioFiles)}catch(t){this.handleError("LOAD_ERROR",`Failed to load audio files: ${t instanceof Error?t.message:String(t)}`)}})}initializeAudio(){this.audio=new Audio,this.setupAudioEventListeners()}setupAudioEventListeners(){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.audio.addEventListener("timeupdate",()=>{this.audio&&(this.progress=this.audio.duration?this.audio.currentTime/this.audio.duration*100:0,this.updateAudioState(),this.audioEventSubject.next({type:"timeupdate",data:this.progress}))}),this.audio.addEventListener("ended",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"ended"})}),this.audio.addEventListener("error",t=>{let e=t;this.handleError("LOAD_ERROR",`Failed to load audio: ${e.message||"Unknown error"}`),this.audioEventSubject.next({type:"error",data:e.message})}),this.audio.addEventListener("loadstart",()=>{this.isLoading=!0,this.updateAudioState(),this.audioEventSubject.next({type:"loading"})}),this.audio.addEventListener("canplay",()=>{this.isLoading=!1,this.updateAudioState(),this.audioEventSubject.next({type:"loaded"})}),this.audio.addEventListener("play",()=>{this._isPlaying=!0,this.updateAudioState(),this.audioEventSubject.next({type:"play"})}),this.audio.addEventListener("pause",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"pause"})})}updateAudioState(){this.audioStateSubject.next({isPlaying:this._isPlaying,currentTrack:this.currentTrack,volume:this.volume,progress:this.progress,loading:this.isLoading})}handleError(t,e){this.isDebugMode&&console.error(`[AudioService] ${t}: ${e}`),this.errorSubject.next({type:t,message:e})}setTrackForSection(t){let e=this.TRACKS[t];if(!e){this.handleError("LOAD_ERROR",`No track found for section: ${t}`);return}this.currentTrack?.id!==e.id&&(this.isDebugMode&&console.log(`[AudioService] Setting track for section: ${t}`,e),this.currentTrack=e,this.loadTrack(e),this.currentTrackSubject.next(e.url))}loadTrack(t){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.isLoading=!0,this.updateAudioState(),this.audio.src=t.url;try{this.audio.load()}catch(e){this.handleError("LOAD_ERROR",`Failed to load track: ${e instanceof Error?e.message:String(e)}`)}}play(){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}if(!this.currentTrack){this.handleError("PLAY_ERROR","No track selected");return}this.isDebugMode&&console.log("[AudioService] Playing audio:",this.currentTrack.title),this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(t=>{this.handleError("PLAY_ERROR",`Failed to play audio: ${t instanceof Error?t.message:String(t)}`)})}pause(){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log("[AudioService] Pausing audio"),this.audio.pause(),this._isPlaying=!1,this.updateAudioState()}togglePlay(){this._isPlaying?this.pause():this.play()}setVolume(t){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.volume=Math.max(0,Math.min(1,t)),this.audio.volume=this.volume,this.updateAudioState(),this.isDebugMode&&console.log(`[AudioService] Volume set to: ${this.volume}`)}getCurrentState(){return this.audioStateSubject.asObservable()}getAudioEvents(){return this.audioEventSubject.asObservable()}onPlayStateChange(){return this.getCurrentState().pipe(F(t=>t.isPlaying))}onTrackChange(){return this.currentTrack$}onLoadingStateChange(){return this.getCurrentState().pipe(F(t=>t.loading))}getProgress(){return!this.audio||!this.audio.duration?0:this.audio.currentTime/this.audio.duration}getErrors(){return this.errorSubject.asObservable()}isPlaying(){return this._isPlaying}getCurrentTrack(){return this.currentTrackSubject.value}getNextTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t<this.audioFiles.length-1){let e=this.audioFiles[t+1];return this.currentTrackSubject.next(e),e}return null}getPreviousTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t>0){let e=this.audioFiles[t-1];return this.currentTrackSubject.next(e),e}return null}getTrackList(){return this.audioFiles}getCurrentIndex(){return this.audioFiles.indexOf(this.currentTrackSubject.value)}playUISound(t){if(!this.uiSounds[t]){this.handleError("UI_SOUND_ERROR",`UI sound not found: ${t}`);return}try{let e=new Audio(this.uiSounds[t]);e.volume=.5,e.play().catch(a=>{this.handleError("UI_SOUND_ERROR",`Error playing UI sound: ${a instanceof Error?a.message:String(a)}`)})}catch(e){this.handleError("UI_SOUND_ERROR",`Failed to create UI sound: ${e instanceof Error?e.message:String(e)}`)}}playTrack(t){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log(`[AudioService] Playing track from source: ${t}`),this.currentTrackSubject.next(t),this.isLoading=!0,this.updateAudioState(),this.audio.src=t,this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(e=>{this.handleError("PLAY_ERROR",`Error playing track: ${e instanceof Error?e.message:String(e)}`)})}pauseTrack(){this.pause()}resumeTrack(){this.play()}ngOnDestroy(){this.isDebugMode&&console.log("[AudioService] Destroying service"),this.audio&&(this.audio.onended=null,this.audio.ontimeupdate=null,this.audio.onerror=null,this.audio.oncanplay=null,this.audio.onloadstart=null,this.audio.pause(),this.audio.src="",this.audio=null),this.audioStateSubject.complete(),this.audioEventSubject.complete(),this.currentTrackSubject.complete(),this.errorSubject.complete(),this.destroy$.next(),this.destroy$.complete()}};Ct.\u0275fac=function(e){return new(e||Ct)(R(Et))},Ct.\u0275prov=L({token:Ct,factory:Ct.\u0275fac,providedIn:"root"});var he=Ct;var At=class At{constructor(t,e,a){this.dynamicArtistService=t;this.audioService=e;this.artistCreditService=a;this.destroy$=new $;this.musicStateSubject=new x({isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"});this.artistFilteringStateSubject=new x({mode:"no-music",currentArtists:[],allArtists:[],displayTitle:"All Phantasia 2 Artists",displaySubtitle:"Showcasing 31 of 31 artists from the album"});this.musicState$=this.musicStateSubject.asObservable();this.artistFilteringState$=this.artistFilteringStateSubject.asObservable();this.currentArtistsForFiltering$=this.artistFilteringState$.pipe(F(t=>t.currentArtists),K((t,e)=>this.compareArtistArrays(t,e)),ht(1),T(this.destroy$));this.displayInfo$=this.artistFilteringState$.pipe(F(t=>({title:t.displayTitle,subtitle:t.displaySubtitle,mode:t.mode})),K((t,e)=>t.title===e.title&&t.subtitle===e.subtitle&&t.mode===e.mode),ht(1),T(this.destroy$));this.subscriptions={};this.stateUpdateQueue=[];this.isProcessingQueue=!1;this.initializeService()}ngOnDestroy(){try{console.log("[MusicStateManager] Starting cleanup..."),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,Object.keys(this.subscriptions).forEach(t=>{try{this.subscriptions[t]&&typeof this.subscriptions[t].unsubscribe=="function"&&this.subscriptions[t].unsubscribe()}catch(e){console.error(`[MusicStateManager] Error unsubscribing from ${t}:`,e)}}),this.destroy$.next(),this.destroy$.complete(),console.log("[MusicStateManager] Cleanup completed")}catch(t){console.error("[MusicStateManager] Error during cleanup:",t)}}initializeService(){try{console.log("[MusicStateManager] Initializing service..."),this.loadAllArtistsForShowcase(),this.subscriptions.currentTrack=this.dynamicArtistService.currentTrack$.pipe(K((t,e)=>t?.id===e?.id),T(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.handleTrackChange(t,"phantasia2")),error:t=>console.error("[MusicStateManager] Error in currentTrack subscription:",t)}),this.subscriptions.currentTime=this.dynamicArtistService.currentTime$.pipe(ot(50),K(),T(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateCurrentTime(t)),error:t=>console.error("[MusicStateManager] Error in currentTime subscription:",t)}),this.subscriptions.audioState=this.audioService.audioState$.pipe(K((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),T(this.destroy$)).subscribe({next:t=>{let e=this.musicStateSubject.value;(!e.currentTrack||e.playbackMode!=="phantasia2")&&this.queueStateUpdate(()=>this.handleAudioStateChange(t))},error:t=>console.error("[MusicStateManager] Error in audioState subscription:",t)}),this.subscriptions.trackCredits=this.artistCreditService.currentTrackCredits$.pipe(T(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateTrackCredits(t)),error:t=>console.error("[MusicStateManager] Error in trackCredits subscription:",t)}),console.log("[MusicStateManager] Service initialized with enhanced error handling")}catch(t){console.error("[MusicStateManager] Error during initialization:",t)}}handleTrackChange(t,e){try{let a=this.musicStateSubject.value;if(t&&a.currentTrack?.id===t.id){console.log(`[MusicStateManager] Track ${t.id} already active, skipping update`);return}if(t){let n=null;try{n=this.artistCreditService.getTrackCredits(t.id)}catch(C){console.warn(`[MusicStateManager] Could not get credits for track ${t.id}:`,C)}let s=this.extractArtistsFromTrack(t,n),p=E(P({},a),{currentTrack:t,currentTrackCredits:n,playbackMode:e});if(this.validateMusicState(p))this.musicStateSubject.next(p);else{console.error("[MusicStateManager] Invalid music state, skipping update");return}let g=this.artistFilteringStateSubject.value.allArtists,h={mode:"music-playing",currentArtists:s,allArtists:g,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${t.title}" - ${s.length} artists are currently featured`};this.validateArtistFilteringState(h)&&this.artistFilteringStateSubject.next(h),console.log(`[MusicStateManager] Track changed to: "${t.title}" with ${s.length} artists`)}else this.switchToNoMusicMode()}catch(a){console.error("[MusicStateManager] Error handling track change:",a),this.switchToNoMusicMode()}}handleAudioStateChange(t){let e=this.musicStateSubject.value;if(t.isPlaying&&t.currentTrack){let a=this.artistCreditService.getTrackCredits(t.currentTrack),n=E(P({},e),{isPlaying:t.isPlaying,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.duration>0?t.currentTime/t.duration:0,playbackMode:"legacy",currentTrackCredits:a});if(this.musicStateSubject.next(n),a){let s={mode:"music-playing",currentArtists:a.allContributions,allArtists:this.artistFilteringStateSubject.value.allArtists,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${a.title}" - ${a.allContributions.length} artists are currently featured`};this.artistFilteringStateSubject.next(s)}}else this.switchToNoMusicMode()}switchToNoMusicMode(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value.allArtists,a=E(P({},t),{isPlaying:!1,currentTrack:null,currentTrackCredits:null,playbackMode:"idle"});this.musicStateSubject.next(a);let n={mode:"no-music",currentArtists:[],allArtists:e,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${e.length} of 31 artists from the album`};this.artistFilteringStateSubject.next(n),console.log("[MusicStateManager] Switched to no-music mode - showing all artists")}updateCurrentTime(t){let e=this.musicStateSubject.value,a=E(P({},e),{currentTime:t,trackProgress:e.duration>0?t/e.duration:0});this.musicStateSubject.next(a)}updateTrackCredits(t){let e=this.musicStateSubject.value,a=E(P({},e),{currentTrackCredits:t});if(this.musicStateSubject.next(a),t&&e.currentTrack){let n=this.artistFilteringStateSubject.value,s=E(P({},n),{currentArtists:t.allContributions,displaySubtitle:`Artists for "${t.title}" - ${t.allContributions.length} artists are currently featured`});this.artistFilteringStateSubject.next(s)}}extractArtistsFromTrack(t,e){if(e)return e.allContributions;let a=[];return t.mainArtist&&a.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features?.forEach((n,s)=>{a.push({id:`${t.id}-featured-${s}`,artistName:n.name,artistDisplayName:n.displayName||n.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:n.socialLinks})}),t.collaborators?.forEach((n,s)=>{a.push({id:`${t.id}-collab-${s}`,artistName:n.name,artistDisplayName:n.displayName||n.name,role:n.role||"Collaborator",participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:n.socialLinks})}),a}loadAllArtistsForShowcase(){let t=this.artistCreditService.getAllPhantasia2Artists(),e=this.artistFilteringStateSubject.value,a=E(P({},e),{allArtists:t,displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`});this.artistFilteringStateSubject.next(a)}forceNoMusicMode(){this.switchToNoMusicMode()}getCurrentMusicState(){return this.musicStateSubject.value}getCurrentArtistFilteringState(){return this.artistFilteringStateSubject.value}setPlayingState(t){let e=this.musicStateSubject.value,a=E(P({},e),{isPlaying:t});this.musicStateSubject.next(a)}updateVolume(t){let e=this.musicStateSubject.value,a=E(P({},e),{volume:t});this.musicStateSubject.next(a)}updateDuration(t){let e=this.musicStateSubject.value,a=E(P({},e),{duration:t,trackProgress:e.currentTime>0?e.currentTime/t:0});this.musicStateSubject.next(a)}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==e[a].id)return!1;return!0}getDebugInfo(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value;return{musicState:{playbackMode:t.playbackMode,isPlaying:t.isPlaying,currentTrackId:t.currentTrack?.id,currentTrackTitle:t.currentTrack?.title,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.trackProgress},filteringState:{mode:e.mode,currentArtistsCount:e.currentArtists.length,allArtistsCount:e.allArtists.length,displayTitle:e.displayTitle,displaySubtitle:e.displaySubtitle},subscriptions:{activeSubscriptions:Object.keys(this.subscriptions).length,subscriptionKeys:Object.keys(this.subscriptions)},stateQueue:{queueLength:this.stateUpdateQueue.length,isProcessing:this.isProcessingQueue}}}queueStateUpdate(t){this.stateUpdateQueue.push(t),this.processStateQueue()}processStateQueue(){return Z(this,null,function*(){if(!(this.isProcessingQueue||this.stateUpdateQueue.length===0)){this.isProcessingQueue=!0;try{for(;this.stateUpdateQueue.length>0;){let t=this.stateUpdateQueue.shift();if(t){try{t()}catch(e){console.error("[MusicStateManager] Error processing state update:",e)}yield new Promise(e=>setTimeout(e,10))}}}finally{this.isProcessingQueue=!1}}})}validateMusicState(t){try{return typeof t.isPlaying=="boolean"&&typeof t.currentTime=="number"&&typeof t.duration=="number"&&typeof t.volume=="number"&&typeof t.trackProgress=="number"&&t.volume>=0&&t.volume<=1&&t.trackProgress>=0&&t.trackProgress<=1&&t.currentTime>=0&&t.duration>=0}catch(e){return console.error("[MusicStateManager] Error validating music state:",e),!1}}validateArtistFilteringState(t){try{return["no-music","music-playing"].includes(t.mode)&&Array.isArray(t.currentArtists)&&Array.isArray(t.allArtists)&&typeof t.displayTitle=="string"&&typeof t.displaySubtitle=="string"}catch(e){return console.error("[MusicStateManager] Error validating artist filtering state:",e),!1}}emergencyReset(){console.warn("[MusicStateManager] Performing emergency reset");try{let t=this.artistCreditService.getAllPhantasia2Artists(),e={isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"},a={mode:"no-music",currentArtists:[],allArtists:t,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`};this.musicStateSubject.next(e),this.artistFilteringStateSubject.next(a),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,console.log("[MusicStateManager] Emergency reset completed")}catch(t){console.error("[MusicStateManager] Error during emergency reset:",t)}}};At.\u0275fac=function(e){return new(e||At)(R(at),R(mt),R(it))},At.\u0275prov=L({token:At,factory:At.\u0275fac,providedIn:"root"});var Dt=At;function wi(d,t){if(d&1&&(b(0,"div",30)(1,"div",31),M(2,"\u26A0"),y(),b(3,"span"),M(4),y()()),d&2){let e=w();v(4),G(e.error)}}function Si(d,t){d&1&&(b(0,"div",32),O(1,"div",33),b(2,"span"),M(3,"Loading audio..."),y()())}function Oi(d,t){if(d&1&&(b(0,"div",38)(1,"div",39)(2,"h4",40),M(3),y(),b(4,"p",41),M(5),y()()()),d&2){let e=w(2);v(3),G(e.currentTrackInfo.title),v(2),G(e.currentTrackInfo.mainArtist)}}function Ti(d,t){if(d&1&&(b(0,"div",42)(1,"div",40),M(2),y(),b(3,"div",41),M(4),y()()),d&2){let e=w(2);v(2),G(e.getTrackName(e.currentTrack)),v(2),G(e.getArtistName())}}function Ii(d,t){if(d&1&&(b(0,"div",43),M(1),y()),d&2){let e=w(2);v(),ft(" ",e.currentSubtitle," ")}}function Ei(d,t){if(d&1&&(b(0,"div",34),B(1,Oi,6,2,"div",35)(2,Ti,5,2,"div",36)(3,Ii,2,1,"div",37),y()),d&2){let e=w();v(),A("ngIf",e.currentTrackInfo),v(),A("ngIf",!e.currentTrackInfo&&e.currentTrack),v(),A("ngIf",e.currentSubtitle&&!e.trackTitle&&!e.currentTrackInfo)}}var Ft=class Ft{constructor(t,e,a,n){this.audioService=t;this.dynamicArtistService=e;this.musicStateManager=a;this.cdr=n;this.trackTitle="";this.trackArtist="";this.activeTrack=null;this.audio=null;this.destroy$=new $;this.trackLoadingMutex=new $;this.isTrackLoading=!1;this.audioInstances=[];this.lastLoadedTrackId=null;this.isPlaying=!1;this.isLoading=!0;this.currentTrack="";this.currentTime=0;this.duration=0;this.volume=.5;this._isMuted=!1;this._savedVolumeBeforeMute=.5;this._muteStateInitialized=!1;this.error="";this.currentSubtitle="";this.currentTrackInfo=null;this.allTracks=[];this.currentTrackIndex=0;this.currentProject="phantasia1";this.hasUserInteracted=!1;this.lastSuccessfulVolume=.5;this.retryCount=0;this.maxRetries=3;this.audioContext=null;this.eventListeners=[];this.isAudioContextInitialized=!1;this.diagnoseEnvironment(),this.initializeAudioContext(),this.setupGlobalEventListeners()}diagnoseEnvironment(){console.group("[MusicPlayer] Environment Diagnosis"),console.log("User Agent:",navigator.userAgent),console.log("Location:",window.location.href),console.log("Base URL:",document.baseURI),console.log("Protocol:",window.location.protocol),console.log("Host:",window.location.host),console.log("Port:",window.location.port);let t="8. Evin a\u2019k - Trench.ogg";console.log("Unicode Test String:",t),console.log("Unicode Test Encoded:",encodeURIComponent(t)),console.log("Howler Audio Support:",{webAudio:window.Howler?.ctx!==null,html5:!0,codecs:{ogg:window.Howler?.codecs?.("audio/ogg")||"unknown",mp3:window.Howler?.codecs?.("audio/mpeg")||"unknown"}}),console.groupEnd()}getAudioDirectory(){return this.currentProject==="phantasia1"?"Phantasia_1":"Phantasia_2"}ngOnInit(){this.initializeAudio()}ngOnDestroy(){try{this.destroy$.next(),this.destroy$.complete(),this.cleanupAllAudioInstances(),this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupAudioContext(),this.cleanupEventListeners(),console.log("[MusicPlayer] Component destroyed and resources cleaned up")}catch(t){console.error("[MusicPlayer] Error during cleanup:",t)}}initializeAudio(){this.dynamicArtistService.currentProject$.pipe(T(this.destroy$)).subscribe(t=>{this.currentProject=t,console.log(`[MusicPlayer] Project switched to: ${t}`),this.cdr.markForCheck()}),this.dynamicArtistService.tracks$.pipe(T(this.destroy$)).subscribe(t=>{this.allTracks=t,t.length>0&&!this.currentTrackInfo&&(this.currentTrackInfo=t[0],this.currentTrackIndex=0,this.loadTrackFromInfo(this.currentTrackInfo),this.updateDynamicArtistTime()),this.cdr.markForCheck()}),this.dynamicArtistService.currentTrack$.pipe(T(this.destroy$)).subscribe(t=>{t&&t!==this.currentTrackInfo&&(this.currentTrackInfo=t,this.currentTrackIndex=this.allTracks.findIndex(e=>e.id===t.id),this.loadTrackFromInfo(t)),this.cdr.markForCheck()})}loadTrackFromInfo(t){return Z(this,null,function*(){if(this.isTrackLoading){console.log("[MusicPlayer] Track loading already in progress, waiting...");return}if(this.lastLoadedTrackId===t.id&&!this.error){console.log(`[MusicPlayer] Track ${t.id} already loaded, skipping`);return}this.isTrackLoading=!0,this.lastLoadedTrackId=t.id,this.retryCount=0;try{this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.error="",this.cdr.markForCheck(),yield this.cleanupCurrentAudio(),console.log(`[MusicPlayer] Starting track load: ${t.title} (${t.id})`)}catch(a){console.error("[MusicPlayer] Error during track loading preparation:",a),this.handleTrackLoadError(t,a);return}let e;if(t.audioFile){let a=t.audioFile;console.log("[MusicPlayer] Original filename:",a),console.log("[MusicPlayer] Filename char codes:",[...a].map(s=>`${s}(${s.charCodeAt(0)})`).join(" "));let n=[()=>`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(a)}`,()=>{let s=a.replace(/'/g,"'");return`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(s)}`},()=>{let s=a.replace(/'/g,"%E2%80%99").replace(/ /g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29");return`assets/audio/${this.getAudioDirectory()}/${s}`},()=>`assets/audio/${this.getAudioDirectory()}/${a}`,()=>`/assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(a)}`];e=n[0](),this._fallbackUrls=n.slice(1).map(s=>s()),this._currentStrategyIndex=0,this._trackInfo=t,console.log("[MusicPlayer] Prepared fallback URLs:"),this._fallbackUrls.forEach((s,p)=>{console.log(`  Strategy ${p+1}: ${s}`)})}else e=`assets/audio/${this.getAudioDirectory()}/${t.id}.ogg`,this._fallbackUrls=[];console.log("[MusicPlayer] Loading audio (Strategy 0):",e),t.id==="8"&&(console.group("[MusicPlayer] Track 8 Diagnostics"),console.log("Track ID:",t.id),console.log("Track Title:",t.title),console.log("Main Artist:",t.mainArtist),console.log("Audio File Mapping:",t.audioFile),console.log("Final Audio Source:",e),console.log("Browser Location:",window.location.href),console.groupEnd()),this.audio=new qt.Howl({src:[e],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.musicStateManager.setPlayingState(!0),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.musicStateManager.setPlayingState(!1),this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.musicStateManager.setPlayingState(!1),this.nextTrack(),this.cdr.markForCheck()},onloaderror:(a,n)=>{console.error("[MusicPlayer] Error loading (Strategy "+(this._currentStrategyIndex||0)+"):",e,n),console.error("[MusicPlayer] Track info:",t);let s=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(p<s.length){console.log("[MusicPlayer] Attempting fallback strategy",p+1),this._currentStrategyIndex=p+1;let g=s[p];console.log("[MusicPlayer] Trying fallback URL:",g),this.audio&&this.audio.unload(),this.audio=new qt.Howl({src:[g],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(h,C)=>{if(console.error("[MusicPlayer] Fallback also failed:",g,C),p>=s.length-1)this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. Tried ${s.length+1} different URL encodings. Last error: ${C}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck();else{this._currentStrategyIndex=p+1;let i=s[p+1];i&&(console.log("[MusicPlayer] Trying next fallback strategy:",p+2),this.tryLoadWithUrl(i,t))}}})}else this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${n}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&(this.audioInstances.push(this.audio),this.isTrackLoading=!1)})}tryLoadWithUrl(t,e){return Z(this,null,function*(){try{yield this.cleanupCurrentAudio()}catch(a){console.error("[MusicPlayer] Error cleaning up before fallback:",a)}this.audio=new qt.Howl({src:[t],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(a,n)=>{let s=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(console.error(`[MusicPlayer] Fallback strategy ${p+1} failed:`,t,n),p<s.length-1){this._currentStrategyIndex=p+1;let g=s[p];console.log(`[MusicPlayer] Trying next fallback strategy ${p+2}:`,g),this.tryLoadWithUrl(g,e)}else this.error=`Failed to load track "${e.title}" by ${e.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${n}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&this.audioInstances.push(this.audio)})}loadTrack(t){this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.cdr.markForCheck(),this.audio&&this.audio.unload(),this.audio=new qt.Howl({src:[t.url||t.title],html5:!0,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(e,a)=>{this.error=`Failed to load track: ${a}`,this.isLoading=!1,this.cdr.markForCheck()}})}togglePlay(){return Z(this,null,function*(){if(!this.audio){console.warn("[MusicPlayer] No audio instance available for playback");return}try{yield this.ensureAudioContextReady(),this.isPlaying?(this.audio.pause(),this.isPlaying=!1):(this.hasUserInteracted=!0,this.audio.play(),this.isPlaying=!0),this.musicStateManager.setPlayingState(this.isPlaying),this.cdr.markForCheck(),console.log(`[MusicPlayer] Playback ${this.isPlaying?"started":"paused"}`)}catch(t){console.error("[MusicPlayer] Error toggling playback:",t),this.error="Playback error occurred",this.cdr.markForCheck()}})}setVolume(t){if(!this.audio){this.volume=Math.max(0,Math.min(1,t)),this.lastSuccessfulVolume=this.volume;return}try{let e=Math.max(0,Math.min(1,t));this.volume=e,!this._isMuted&&e>0&&(this._savedVolumeBeforeMute=e,this.lastSuccessfulVolume=e),this.audio.volume(e),this.musicStateManager.updateVolume(e),this.cdr.markForCheck(),console.log(`[MusicPlayer] Volume set to ${e}, muted: ${this._isMuted}`)}catch(e){console.error("[MusicPlayer] Error setting volume:",e),this.handleVolumeError(t)}}toggleMute(){if(!this.audio){console.warn("[MusicPlayer] Cannot toggle mute: no audio instance available");return}try{if(this.hasUserInteracted=!0,this._muteStateInitialized||(this._savedVolumeBeforeMute=this.volume>0?this.volume:.5,this._muteStateInitialized=!0),this._isMuted){this._isMuted=!1;let t=this._savedVolumeBeforeMute>0?this._savedVolumeBeforeMute:.5;this.volume=t,this.audio.volume(t),this.musicStateManager.updateVolume(t),console.log(`[MusicPlayer] Unmuted, restored volume to ${t}`)}else this._isMuted=!0,this.volume>0&&(this._savedVolumeBeforeMute=this.volume),this.audio.volume(0),this.musicStateManager.updateVolume(0),console.log(`[MusicPlayer] Muted, saved volume ${this._savedVolumeBeforeMute}`);this.cdr.markForCheck()}catch(t){console.error("[MusicPlayer] Error toggling mute:",t),this.handleMuteError()}}seek(t){this.audio&&(this.audio.seek(t),this.currentTime=t,this.cdr.markForCheck())}updateSubtitleFromFilename(t){if(t){let a=(t.split("/").pop()||"").replace(".mp3","").split(" - ");a.length>1?this.currentSubtitle=a[0]:this.currentSubtitle=""}}updateTime(){if(this.audio&&this.isPlaying){let t=this.audio.seek();this.currentTime=typeof t=="number"?t:0,this.updateDynamicArtistTime(),this.cdr.markForCheck(),requestAnimationFrame(()=>this.updateTime())}}updateDynamicArtistTime(){if(this.currentTrackInfo){let t=this.currentTrackInfo.startTime+this.currentTime;this.dynamicArtistService.updateCurrentTime(t)}}nextTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=(this.currentTrackIndex+1)%this.allTracks.length,a=this.allTracks[e];if(a&&a.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=a,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(a.startTime),this.loadTrackFromInfo(a),t)){let n=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(n,100)};n()}}previousTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=this.currentTrackIndex===0?this.allTracks.length-1:this.currentTrackIndex-1,a=this.allTracks[e];if(a&&a.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=a,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(a.startTime),this.loadTrackFromInfo(a),t)){let n=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(n,100)};n()}}formatTime(t){if(isNaN(t)||!isFinite(t)||t<0)return"0:00";let e=Math.floor(t/60),a=Math.floor(t%60);return`${e}:${a.toString().padStart(2,"0")}`}getTrackName(t){if(this.currentTrackInfo)return this.currentTrackInfo.title;if(this.trackTitle)return this.trackTitle;if(t){let e=t.split("/"),a=e[e.length-1].replace(/\.(mp3|ogg)$/,""),n=a.split(" - ");return n.length>1?n[1]:a}return"Unknown Track"}getArtistName(){if(this.currentTrackInfo)return this.currentTrackInfo.mainArtist;if(this.trackArtist)return this.trackArtist;if(this.currentTrack){let e=(this.currentTrack.split("/").pop()||"").replace(/\.(mp3|ogg)$/,"").split(" - ");if(e.length>1)return e[0]}return this.currentSubtitle||"Unknown Artist"}cleanupCurrentAudio(){return Z(this,null,function*(){if(this.audio)try{this.isPlaying&&this.audio.pause(),this.audio.unload();let t=this.audioInstances.indexOf(this.audio);t>-1&&this.audioInstances.splice(t,1),this.audio=null,console.log("[MusicPlayer] Current audio instance cleaned up")}catch(t){console.error("[MusicPlayer] Error during audio cleanup:",t)}})}cleanupAllAudioInstances(){try{this.audio&&(this.audio.unload(),this.audio=null),this.audioInstances.forEach(t=>{try{t.unload()}catch(e){console.error("[MusicPlayer] Error unloading audio instance:",e)}}),this.audioInstances=[],console.log("[MusicPlayer] All audio instances cleaned up")}catch(t){console.error("[MusicPlayer] Error during comprehensive cleanup:",t)}}handleVolumeError(t){console.warn(`[MusicPlayer] Volume error, attempting recovery with value ${t}`),this.retryCount<this.maxRetries?(this.retryCount++,setTimeout(()=>{if(this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume,this.cdr.markForCheck()}catch(e){console.error("[MusicPlayer] Volume recovery failed:",e)}},100)):(this.error="Volume control temporarily unavailable",this.cdr.markForCheck())}handleMuteError(){if(console.warn("[MusicPlayer] Mute toggle error, attempting recovery"),this._isMuted=!1,this._muteStateInitialized=!1,this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume}catch(t){console.error("[MusicPlayer] Mute recovery failed:",t),this.error="Mute control temporarily unavailable"}this.cdr.markForCheck()}handleTrackLoadError(t,e){console.error(`[MusicPlayer] Track loading error for ${t.title}:`,e),this.error=`Failed to load "${t.title}" - ${e.message||e}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupCurrentAudio(),this.cdr.markForCheck()}get isMuted(){return this._isMuted}get savedVolumeBeforeMute(){return this._savedVolumeBeforeMute}getDebugState(){return{isPlaying:this.isPlaying,isLoading:this.isLoading,isTrackLoading:this.isTrackLoading,isMuted:this._isMuted,volume:this.volume,savedVolumeBeforeMute:this._savedVolumeBeforeMute,currentTrackId:this.currentTrackInfo?.id,audioInstancesCount:this.audioInstances.length,lastLoadedTrackId:this.lastLoadedTrackId,error:this.error,audioContextState:this.audioContext?.state,eventListenersCount:this.eventListeners.length}}initializeAudioContext(){try{typeof window<"u"&&"AudioContext"in window?(this.audioContext=new AudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] AudioContext initialized")):typeof window<"u"&&"webkitAudioContext"in window?(this.audioContext=new window.webkitAudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] WebKit AudioContext initialized")):console.warn("[MusicPlayer] AudioContext not supported")}catch(t){console.error("[MusicPlayer] Error initializing AudioContext:",t)}}setupGlobalEventListeners(){if(!(typeof window>"u"))try{let t=()=>Z(this,null,function*(){if(this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed")}catch(a){console.error("[MusicPlayer] Error resuming AudioContext:",a)}}),e=()=>{document.hidden?this.audioContext&&this.audioContext.state==="running"&&this.audioContext.suspend().catch(a=>{console.error("[MusicPlayer] Error suspending AudioContext:",a)}):t()};this.addTrackedEventListener(document,"click",t,{passive:!0}),this.addTrackedEventListener(document,"keydown",t,{passive:!0}),this.addTrackedEventListener(document,"visibilitychange",e,{passive:!0}),console.log("[MusicPlayer] Global event listeners setup completed")}catch(t){console.error("[MusicPlayer] Error setting up global event listeners:",t)}}addTrackedEventListener(t,e,a,n){try{t.addEventListener(e,a,n),this.eventListeners.push({element:t,event:e,handler:a})}catch(s){console.error(`[MusicPlayer] Error adding event listener for ${e}:`,s)}}cleanupAudioContext(){try{this.audioContext&&(this.audioContext.state!=="closed"&&this.audioContext.close().catch(t=>{console.error("[MusicPlayer] Error closing AudioContext:",t)}),this.audioContext=null,this.isAudioContextInitialized=!1,console.log("[MusicPlayer] AudioContext cleaned up"))}catch(t){console.error("[MusicPlayer] Error during AudioContext cleanup:",t)}}cleanupEventListeners(){try{this.eventListeners.forEach(({element:t,event:e,handler:a})=>{try{t.removeEventListener(e,a)}catch(n){console.error(`[MusicPlayer] Error removing event listener for ${e}:`,n)}}),this.eventListeners=[],console.log("[MusicPlayer] Event listeners cleaned up")}catch(t){console.error("[MusicPlayer] Error during event listener cleanup:",t)}}ensureAudioContextReady(){return Z(this,null,function*(){if(this.audioContext||this.initializeAudioContext(),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed for playback")}catch(t){console.error("[MusicPlayer] Error resuming AudioContext for playback:",t)}})}};Ft.\u0275fac=function(e){return new(e||Ft)(N(he),N(at),N(Dt),N(Gt))},Ft.\u0275cmp=j({type:Ft,selectors:[["app-music-player"]],inputs:{trackTitle:"trackTitle",trackArtist:"trackArtist",activeTrack:"activeTrack"},decls:32,vars:34,consts:[[1,"music-player-container"],[1,"player-backdrop"],[1,"music-player"],[1,"status-section"],["class","error-message",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["class","track-section",4,"ngIf"],[1,"progress-section"],[1,"time-display"],[1,"current-time"],[1,"duration"],[1,"progress-container"],[1,"progress-track"],[1,"progress-fill"],["type","range","aria-label","Seek",1,"progress-slider",3,"input","min","max","step","value","disabled"],[1,"controls-section"],[1,"volume-section"],[1,"volume-icon-container",3,"click"],["alt","Volume",1,"volume-icon",3,"src"],[1,"volume-control"],[1,"volume-track"],[1,"volume-fill"],["type","range","aria-label","Volume",1,"volume-slider",3,"input","min","max","step","value","disabled"],[1,"playback-controls"],["aria-label","Previous track",1,"control-button","previous-button",3,"click","disabled"],["src","assets/icons/music-player/skip-back.svg","alt","Previous",1,"control-icon"],[1,"control-button","play-pause-button",3,"click","disabled"],[1,"control-icon",3,"src","alt"],["aria-label","Next track",1,"control-button","next-button",3,"click","disabled"],["src","assets/icons/music-player/skip-forward.svg","alt","Next",1,"control-icon"],[1,"error-message"],[1,"error-icon"],[1,"loading-indicator"],[1,"loading-spinner"],[1,"track-section"],["class","track-details",4,"ngIf"],["class","track-info",4,"ngIf"],["class","current-subtitle",4,"ngIf"],[1,"track-details"],[1,"track-info-content"],[1,"track-title"],[1,"track-artist"],[1,"track-info"],[1,"current-subtitle"]],template:function(e,a){e&1&&(b(0,"div",0),O(1,"div",1),b(2,"div",2)(3,"div",3),B(4,wi,5,1,"div",4)(5,Si,4,0,"div",5),y(),B(6,Ei,4,3,"div",6),b(7,"div",7)(8,"div",8)(9,"span",9),M(10),y(),b(11,"span",10),M(12),y()(),b(13,"div",11)(14,"div",12),O(15,"div",13),b(16,"input",14),H("input",function(s){return a.seek(s.target.value)}),y()()()(),b(17,"div",15)(18,"div",16)(19,"div",17),H("click",function(){return a.toggleMute()}),O(20,"img",18),y(),b(21,"div",19)(22,"div",20),O(23,"div",21),b(24,"input",22),H("input",function(s){return a.setVolume(s.target.value)}),y()()()(),b(25,"div",23)(26,"button",24),H("click",function(){return a.previousTrack()}),O(27,"img",25),y(),b(28,"button",26),H("click",function(){return a.togglePlay()}),O(29,"img",27),y(),b(30,"button",28),H("click",function(){return a.nextTrack()}),O(31,"img",29),y()()()()()),e&2&&(v(4),A("ngIf",a.error),v(),A("ngIf",a.isLoading),v(),A("ngIf",!a.isLoading),v(),V("disabled",a.isLoading),v(3),G(a.formatTime(a.currentTime)),v(2),G(a.formatTime(a.duration)),v(3),nt("width",a.currentTime/a.duration*100,"%"),v(),A("min",0)("max",a.duration)("step",.01)("value",a.currentTime)("disabled",a.isLoading),v(),V("disabled",a.isLoading),v(3),V("muted",a.volume===0),A("src",a.volume===0?"assets/icons/music-player/volume-mute.svg":"assets/icons/music-player/volume.svg",Vt),v(3),nt("width",a.volume*100,"%"),v(),A("min",0)("max",1)("step",.01)("value",a.volume)("disabled",a.isLoading),v(2),A("disabled",a.isLoading),v(2),V("playing",a.isPlaying),A("disabled",a.isLoading),X("aria-label",a.isPlaying?"Pause":"Play"),v(),A("src",a.isPlaying?"assets/icons/music-player/pause.svg":"assets/icons/music-player/play.svg",Vt)("alt",a.isPlaying?"Pause":"Play"),v(),A("disabled",a.isLoading))},dependencies:[dt,It,ne],styles:[".music-player-container[_ngcontent-%COMP%]{position:relative;width:100%;margin:0 0 2rem;padding:0;isolation:isolate;box-sizing:border-box!important;max-width:100%!important}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]{position:absolute;inset:-4px 0;box-sizing:border-box!important;background:linear-gradient(135deg,#00000026,#0000002e,#00000038 50%,#00000040);backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);-webkit-backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);border-radius:20px;opacity:.8;z-index:-1}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{display:none!important}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:1}to{left:100%;opacity:0}}.music-player[_ngcontent-%COMP%]{position:relative;width:100%;background:linear-gradient(135deg,#ffffff1f,#ffffff14 25%,#ffffff0f 75%,#ffffff0a);backdrop-filter:blur(24px) saturate(1.6);-webkit-backdrop-filter:blur(24px) saturate(1.6);border:1px solid rgba(255,255,255,.15);border-radius:16px;box-sizing:border-box!important;max-width:100%!important;box-shadow:0 12px 40px #00000040,0 4px 16px #00000026,0 2px 8px #0000001a,inset 0 1px #fff3,inset 0 -1px #ffffff1a;display:flex;flex-direction:column;gap:clamp(12px,2vw,20px);padding:clamp(16px,3vw,24px);font-family:Inter,Roboto,sans-serif;color:#fffffff2;font-size:16px;line-height:1.5;letter-spacing:.01em;transition:all .4s cubic-bezier(.19,1,.22,1)}.music-player[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 48px #0000004d,0 6px 20px #0003,0 2px 8px #0000001a,inset 0 1px #ffffff40,inset 0 -1px #ffffff26}.status-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;min-height:0}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#dc354526,#dc354514);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(220,53,69,.3);border-radius:8px;color:#ffffffe6;font-size:clamp(.85rem,1vw,1.1rem);font-weight:500}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:16px;color:#ffc107e6}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px;color:#fffc;font-size:clamp(.85rem,1vw,1.1rem);font-weight:400}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.2);border-top:2px solid rgba(255,255,255,.8);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.track-section[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:8px}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 2px 8px rgba(255,255,255,.1);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-section[_ngcontent-%COMP%]   .current-subtitle[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem);color:#fff9;font-weight:300;line-height:1.4;letter-spacing:.01em}.progress-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.progress-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:clamp(.75rem,.9vw,.95rem);font-weight:400;color:#ffffffb3;font-variant-numeric:tabular-nums;letter-spacing:.02em}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%], .progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{padding:2px 4px;background:#ffffff0d;border-radius:4px;min-width:45px;text-align:center;font-family:Inter,monospace}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{position:relative;height:32px;display:flex;align-items:center}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{position:relative;width:100%;height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border-radius:3px;overflow:hidden;cursor:pointer;box-shadow:inset 0 1px 2px #0003,0 0 8px #ffffff0d}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffe6,#ffffffb3,#ffffffe6);border-radius:3px;transition:width .1s ease-out;box-shadow:0 0 12px #fff6,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{display:none!important}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:32px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:grab;transition:all .3s cubic-bezier(.19,1,.22,1);margin-top:-5px;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:active{cursor:grabbing;transform:scale(1.1)}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:6px;background:transparent;border-radius:3px}@keyframes _ngcontent-%COMP%_progressShimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:.6}to{left:100%;opacity:0}}.controls-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:clamp(16px,3vw,24px)}.controls-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:100px;flex:0 0 auto}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]{cursor:pointer;padding:6px;border-radius:6px;transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.05)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.85);transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon.muted[_ngcontent-%COMP%]{filter:invert(1) opacity(.6);transform:scale(.9)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{flex:1;max-width:80px}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]{position:relative;width:100%;height:4px;background:linear-gradient(90deg,#ffffff26,#fff3,#ffffff26);border-radius:2px;overflow:hidden;cursor:pointer}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffb3,#ffffffe6);border-radius:2px;transition:width .2s ease-out;box-shadow:0 0 6px #ffffff4d}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]{position:absolute;top:-6px;left:0;width:100%;height:16px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#ffffffe6;border-radius:50%;cursor:pointer;transition:all .2s cubic-bezier(.19,1,.22,1);margin-top:-4px;box-shadow:0 2px 6px #0000004d,inset 0 1px #ffffff80}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.3);background:#fff;box-shadow:0 3px 10px #0006,0 0 12px #fff9,inset 0 1px #ffffffb3}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:4px;background:transparent;border-radius:2px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:clamp(14px,2.2vw,18px);flex:1;max-width:180px;width:100%;margin:0 auto;position:relative}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{position:relative;border:none;background:linear-gradient(135deg,#ffffff26,#ffffff14,#ffffff0d);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .4s cubic-bezier(.19,1,.22,1);box-shadow:0 6px 20px #00000040,0 2px 8px #00000026,inset 0 1px #ffffff4d,inset 0 -1px #ffffff1a}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.9);transition:all .3s cubic-bezier(.19,1,.22,1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:40px;height:40px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:hover, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:linear-gradient(135deg,#fff3,#ffffff1f,#ffffff14);box-shadow:0 8px 28px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 20px #ffffff26}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:active, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:active{transform:scale(1.05);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:52px;height:52px;background:linear-gradient(135deg,#ffffff2e,#ffffff1f,#ffffff14);border-width:1.5px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:22px;height:22px;filter:invert(1) opacity(.95)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:hover{transform:scale(1.08);background:linear-gradient(135deg,#ffffff40,#ffffff2e,#ffffff1f);box-shadow:0 12px 36px #00000059,0 6px 16px #00000040,inset 0 1px #ffffff80,inset 0 -1px #fff3,0 0 32px #fff3}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:active{transform:scale(1.02);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff38,#ffffff26,#ffffff1a);box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e;animation:_ngcontent-%COMP%_playingPulse 2s ease-in-out infinite}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled:hover{transform:none;background:linear-gradient(135deg,#ffffff14,#ffffff0d)}@keyframes _ngcontent-%COMP%_playingPulse{0%,to{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e}50%{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 32px #ffffff40}}@media (max-width: 768px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:clamp(14px,4vw,20px);gap:clamp(10px,2.5vw,16px);border-radius:14px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(.95rem,1.2vw,1.3rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{height:8px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{width:18px;height:18px;margin-top:-5px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{gap:clamp(8px,3vw,16px)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{min-width:80px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:60px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{gap:clamp(8px,2.5vw,12px);max-width:160px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:36px;height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:16px;height:16px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:46px;height:46px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:20px;height:20px}}@media (max-width: 480px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:12px 16px;gap:8px;border-radius:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{order:2;align-self:stretch;min-width:auto}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:none;flex:1}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{order:1;max-width:none;justify-content:center}}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:pointer;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb:hover{background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3;transform:scale(1.2)}input[type=range][_ngcontent-%COMP%]::-moz-range-track{height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border:none;border-radius:3px;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}@media (prefers-reduced-motion: reduce){.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{animation:none}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{animation:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{transition-duration:.2s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{animation:none}@keyframes shimmer{0%,to{opacity:0}}@keyframes progressShimmer{0%,to{opacity:0}}@keyframes playingPulse{0%,to{opacity:1}}@keyframes spin{0%,to{transform:rotate(0)}}}"],changeDetection:0});var ni=Ft;function Di(d,t){if(d&1&&O(0,"div",24),d&2){let e=t.$implicit;nt("left",e.x+"vw")("top",e.y+"vh")("--move-x",e.moveX+"px")("--move-y",e.moveY+"px")("--scale",e.scale)("--base-opacity",e.opacity)("--rotation-offset",e.rotationOffset)("--delay",e.delay),V("clockwise",e.clockwise)("counter-clockwise",!e.clockwise)}}var Lt=class Lt{constructor(t,e,a){this.cdr=t;this.renderer=e;this.document=a;this._progress=0;this.progressText="0%";this.runes=[];this.originalHeaderStyles=new Map}set progress(t){this._progress=t,this.progressText=`${Math.floor(t)}%`,this.cdr.markForCheck()}get progress(){return this._progress}ngOnInit(){this.generateRunePositions(),this.suppressHighZIndexHeaders()}ngOnDestroy(){this.restoreHeaderStyles()}suppressHighZIndexHeaders(){console.log("\u{1F527} LoadingScreen: Starting header suppression");let t=["app-site-header",".site-header",'header[class*="header"]',".cd-cases-container",".debug-toggle",".debug-panel",".right-side-menu",".mobile-navbar",'[class*="z-index"]','[style*="z-index"]'],e=this.document.querySelectorAll(t.join(", "));console.log(`\u{1F50D} Found ${e.length} potential interfering elements`),e.forEach((a,n)=>{let s=a,p=getComputedStyle(s),g=p.zIndex||"auto",h=p.visibility||"visible";console.log(`\u{1F4DD} Element ${n}: ${s.tagName}.${s.className} - z-index: ${g}`),this.originalHeaderStyles.set(s,JSON.stringify({zIndex:g,visibility:h,display:p.display||"block"})),this.renderer.setStyle(s,"z-index","1",gt.Important),this.renderer.setStyle(s,"visibility","hidden",gt.Important),console.log(`\u2705 Suppressed element ${n}`)}),this.renderer.addClass(this.document.body,"loading-screen-active"),console.log("\u{1F3AF} Header suppression completed")}restoreHeaderStyles(){console.log("\u{1F527} LoadingScreen: Restoring header styles"),this.renderer.removeClass(this.document.body,"loading-screen-active"),console.log("\u{1F4DD} Removed loading-screen-active class from body"),this.originalHeaderStyles.forEach((e,a)=>{try{let n=JSON.parse(e);n.zIndex==="auto"||n.zIndex===""?this.renderer.removeStyle(a,"z-index"):this.renderer.setStyle(a,"z-index",n.zIndex),a.tagName.toLowerCase()==="app-site-header"||a.classList.contains("site-header")?(this.renderer.setStyle(a,"visibility","visible",gt.Important),console.log("\u{1F3AF} Forced header visibility to visible")):n.visibility==="visible"?this.renderer.removeStyle(a,"visibility"):this.renderer.setStyle(a,"visibility",n.visibility)}catch(n){console.warn("\u26A0\uFE0F Failed to restore styles for element:",a,n),this.renderer.removeStyle(a,"z-index"),this.renderer.removeStyle(a,"visibility"),(a.tagName.toLowerCase()==="app-site-header"||a.classList.contains("site-header"))&&this.renderer.setStyle(a,"visibility","visible",gt.Important)}}),this.document.querySelectorAll("app-site-header, .site-header, header").forEach(e=>{let a=e;this.renderer.setStyle(a,"visibility","visible",gt.Important),this.renderer.setStyle(a,"z-index","1000",gt.Important)}),this.originalHeaderStyles.clear(),console.log("\u2705 Header styles restored with enhanced visibility enforcement")}generateRunePositions(){this.runes=Array.from({length:48},()=>({x:Math.random()*100,y:Math.random()*100,scale:.6+Math.random()*1.4,delay:Math.random()*8,opacity:.3+Math.random()*.5,moveX:15+Math.random()*20,moveY:15+Math.random()*20,rotationOffset:Math.random()*360,clockwise:Math.random()<.5}))}};Lt.\u0275fac=function(e){return new(e||Lt)(N(Gt),N(Zt),N(Nt))},Lt.\u0275cmp=j({type:Lt,selectors:[["app-loading-screen"]],inputs:{progress:"progress"},decls:25,vars:3,consts:[[1,"loader-container"],[1,"magical-circle","outer"],[1,"magical-circle"],[1,"rune-effects"],[1,"decorative-elements"],[1,"corner-line","top-left"],[1,"corner-line","top-right"],[1,"corner-line","bottom-left"],[1,"corner-line","bottom-right"],[1,"mid-line","left"],[1,"mid-line","right"],[1,"mid-line","top"],[1,"mid-line","bottom"],[1,"light-beams"],[1,"beam","beam-1"],[1,"beam","beam-2"],[1,"beam","beam-3"],[1,"beam","beam-4"],[1,"rune-circle"],["class","rune",3,"clockwise","counter-clockwise","left","top","--move-x","--move-y","--scale","--base-opacity","--rotation-offset","--delay",4,"ngFor","ngForOf"],[1,"content"],[1,"logo-container"],["src","/assets/images/logos/prismcoll.svg","alt","Prismatic Collections",1,"logo"],[1,"loading-text"],[1,"rune"]],template:function(e,a){e&1&&(b(0,"div",0),O(1,"div",1)(2,"div",2)(3,"div",3),b(4,"div",4),O(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),y(),b(13,"div",13),O(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",17),y(),b(18,"div",18),B(19,Di,1,20,"div",19),y(),b(20,"div",20)(21,"div",21),O(22,"img",22),y(),b(23,"div",23),M(24,"NOW LOADING"),y()()()),e&2&&(V("visible",!0),v(19),A("ngForOf",a.runes))},dependencies:[dt,te],styles:['.loader-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#fff;opacity:0;pointer-events:none;transition:opacity .5s ease;z-index:2147483647;isolation:isolate;transform:translateZ(0);will-change:opacity,transform;position:fixed!important;z-index:2147483647!important;contain:layout size style}.loader-container.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]{position:relative;z-index:2147483647}.loader-container.visible[_ngcontent-%COMP%] ~ *[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   header[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}.logo-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:30px}.logo[_ngcontent-%COMP%]{width:240px;height:auto;display:block;margin:0 auto}.magical-circle[_ngcontent-%COMP%]{position:absolute;width:800px;height:800px;border:1px solid rgba(0,0,0,.1);border-radius:50%;animation:_ngcontent-%COMP%_rotate 20s linear infinite}.magical-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border:2px solid transparent;border-top-color:#0003;border-radius:50%}.magical-circle[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-10px;border:1px solid transparent;border-left-color:#00000026;border-radius:50%}.magical-circle.outer[_ngcontent-%COMP%]{width:1000px;height:1000px;animation:_ngcontent-%COMP%_rotate 30s linear infinite reverse;opacity:.5}.decorative-elements[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}.corner-line[_ngcontent-%COMP%]{position:absolute;width:150px;height:150px;border:2px solid rgba(0,0,0,.15);border-radius:4px}.corner-line[_ngcontent-%COMP%]:before, .corner-line[_ngcontent-%COMP%]:after{content:"";position:absolute;background:linear-gradient(90deg,#0000001a,#0003)}.corner-line.top-left[_ngcontent-%COMP%]{top:50px;left:50px;border-right:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite}.corner-line.top-right[_ngcontent-%COMP%]{top:50px;right:50px;border-left:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite .75s}.corner-line.bottom-left[_ngcontent-%COMP%]{bottom:50px;left:50px;border-right:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 1.5s}.corner-line.bottom-right[_ngcontent-%COMP%]{bottom:50px;right:50px;border-left:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 2.25s}.mid-line[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;border:2px solid rgba(0,0,0,.15);border-radius:4px;animation:_ngcontent-%COMP%_pulse 3s infinite}.mid-line.left[_ngcontent-%COMP%]{left:50px;top:50%;transform:translateY(-50%);border-right:none;animation-delay:.5s}.mid-line.right[_ngcontent-%COMP%]{right:50px;top:50%;transform:translateY(-50%);border-left:none;animation-delay:1s}.mid-line.top[_ngcontent-%COMP%]{top:50px;left:50%;transform:translate(-50%);border-bottom:none;animation-delay:1.5s}.mid-line.bottom[_ngcontent-%COMP%]{bottom:50px;left:50%;transform:translate(-50%);border-top:none;animation-delay:2s}.rune-circle[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;left:0;top:0}.rune[_ngcontent-%COMP%]{position:absolute;width:18px;height:18px;background:linear-gradient(135deg,#0006,#3c3c3c4d);clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);transform-origin:center center;transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg));opacity:var(--base-opacity);will-change:transform;animation:none}.rune.clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-clockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune.counter-clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-counterclockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.6));mix-blend-mode:screen;animation:_ngcontent-%COMP%_sparkle 4s infinite linear}.rune[_ngcontent-%COMP%]:after{content:"";position:absolute;width:140%;height:140%;top:-20%;left:-20%;background:radial-gradient(circle at center,rgba(120,200,255,.15) 0%,rgba(70,150,255,.1) 30%,transparent 70%);mix-blend-mode:screen;opacity:.5}.rune-effects[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;mix-blend-mode:multiply;background:radial-gradient(circle at center,transparent 0%,rgba(0,0,0,.02) 50%,transparent 100%);animation:_ngcontent-%COMP%_effect-pulse-safe 8s infinite ease-in-out;left:0;top:0;contain:layout}.light-beams[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none;mix-blend-mode:multiply}.beam[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(90deg,#0000001a,#28282826,#0000001a);mix-blend-mode:multiply}.beam.beam-1[_ngcontent-%COMP%]{width:600px;height:2px;animation:_ngcontent-%COMP%_beam-rotate 8s infinite linear,_ngcontent-%COMP%_beam-pulse 4s infinite ease-in-out}.beam.beam-2[_ngcontent-%COMP%]{width:400px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 12s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 6s infinite ease-in-out 1s}.beam.beam-3[_ngcontent-%COMP%]{width:300px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 10s infinite linear,_ngcontent-%COMP%_beam-pulse 5s infinite ease-in-out 2s}.beam.beam-4[_ngcontent-%COMP%]{width:200px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 14s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 7s infinite ease-in-out 3s}.content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-text[_ngcontent-%COMP%]{margin-top:2rem;font-size:1rem;letter-spacing:.3em;text-transform:uppercase;color:#000000b3;font-family:Arial,sans-serif;font-weight:500}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.2}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_rune-move-clockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((90 + var(--rotation-offset)) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((180 + var(--rotation-offset)) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((270 + var(--rotation-offset)) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((360 + var(--rotation-offset)) * 1deg))}}@keyframes _ngcontent-%COMP%_rune-move-counterclockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 90) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 180) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 270) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 360) * 1deg))}}@keyframes _ngcontent-%COMP%_beam-rotate{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@keyframes _ngcontent-%COMP%_beam-pulse{0%,to{opacity:.2;width:100%}50%{opacity:.5;width:120%}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.4;transform:scale(1)}50%{opacity:.8;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_effect-pulse-safe{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_effect-pulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}'],changeDetection:0});var oi=Lt;function Fi(d,t){if(d&1){let e=Ot();b(0,"img",11),H("error",function(){Pt(e);let n=w();return wt(n.onAvatarError())}),y()}if(d&2){let e=w();A("src",e.avatarUrl,Vt)("alt",e.artistName+" avatar")}}function Li(d,t){if(d&1&&(b(0,"div",12),M(1),y()),d&2){let e=w();nt("background",e.cardThemeColor()),v(),ft(" ",e.artistInitials()," ")}}function ji(d,t){if(d&1&&(b(0,"div",13)(1,"div",14),O(2,"span",15),b(3,"span",16),M(4,"Currently Playing"),y()()()),d&2){let e=w();v(),A("@playingIndicator",e.playingIndicatorState)}}function Ri(d,t){if(d&1){let e=Ot();b(0,"button",22),H("click",function(n){Pt(e);let s=w(2);return wt(s.onSocialLinkClick("youtube",n))}),b(1,"mat-icon"),M(2,"smart_display"),y(),b(3,"span",23),M(4,"YouTube"),y()()}if(d&2){let e=w(2);X("aria-label",e.artistName+" YouTube channel")}}function Ni(d,t){if(d&1){let e=Ot();b(0,"button",24),H("click",function(n){Pt(e);let s=w(2);return wt(s.onSocialLinkClick("twitter",n))}),b(1,"span",25),M(2,"\u{1D54F}"),y(),b(3,"span",23),M(4,"Twitter/X"),y()()}if(d&2){let e=w(2);X("aria-label",e.artistName+" Twitter profile")}}function Vi(d,t){if(d&1){let e=Ot();b(0,"button",26),H("click",function(n){Pt(e);let s=w(2);return wt(s.onSocialLinkClick("linktr",n))}),b(1,"mat-icon"),M(2,"link"),y(),b(3,"span",23),M(4,"Links"),y()()}if(d&2){let e=w(2);X("aria-label",e.artistName+" Linktr.ee profile")}}function zi(d,t){if(d&1){let e=Ot();b(0,"button",27),H("click",function(n){Pt(e);let s=w(2);return wt(s.onSocialLinkClick("instagram",n))}),b(1,"span",28),M(2,"\u{1F4F7}"),y(),b(3,"span",23),M(4,"Instagram"),y()()}if(d&2){let e=w(2);X("aria-label",e.artistName+" Instagram profile")}}function Bi(d,t){if(d&1&&(b(0,"div",17),B(1,Ri,5,1,"button",18)(2,Ni,5,1,"button",19)(3,Vi,5,1,"button",20)(4,zi,5,1,"button",21),y()),d&2){let e=w();v(),A("ngIf",e.hasYoutube),v(),A("ngIf",e.hasTwitter),v(),A("ngIf",e.hasLinktr),v(),A("ngIf",e.hasInstagram)}}var jt=class jt{constructor(){this.enableAnimations=!0;this.isHovered=q(!1);this.avatarError=q(!1);this.artistInitials=Ut(()=>{let e=(this.cardData?.artist?.artistDisplayName||"").split(" ").filter(a=>a.length>0);return e.length===0?"?":e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()});this.roleDisplayText=Ut(()=>{if(!this.cardData?.artist?.role)return"";let t=this.cardData.artist.role;switch(t){case"Main Artist":return"MAIN ARTIST";case"Featured Artist":return"FEATURED ARTIST";case"Vocalist":return"VOCALIST";case"Producer":return"PRODUCER";case"Composer":return"COMPOSER";case"Arranger":return"ARRANGER";case"Instrumentalist":return"INSTRUMENTALIST";case"Violin":return"VIOLIN";case"Viola":return"VIOLA";case"Cello":return"CELLO";case"Accordion":return"ACCORDION";case"Piano":return"PIANO";case"Keyboard":return"KEYBOARD";case"Guitar":return"GUITAR";case"Bass":return"BASS";case"Drums":return"DRUMS";case"Electronic Producer":return"ELECTRONIC PRODUCER";case"Sound Designer":return"SOUND DESIGNER";case"Synthesizer V Operator":return"SYNTHESIZER V";case"Voice Actor":return"VOICE ACTOR";case"Vocalist, Lyricist":return"VOCALIST, LYRICIST";case"Accordionist":return"ACCORDIONIST";case"Violinist":return"VIOLINIST";case"Violist":return"VIOLIST";case"Cellist":return"CELLIST";default:return t.toUpperCase()}});this.participationLevelClass=Ut(()=>`participation-${this.cardData?.participationLevel||"additional"}`);this.cardThemeColor=Ut(()=>this.cardData?.artist?.color||"#ffffff")}get hasYoutube(){return!!this.cardData?.artist?.socialLinks?.youtube}get hasTwitter(){return!!this.cardData?.artist?.socialLinks?.twitter}get hasLinktr(){return!!this.cardData?.artist?.socialLinks?.linktr}get hasInstagram(){return!!this.cardData?.artist?.socialLinks?.instagram}get youtubeUrl(){return this.cardData?.artist?.socialLinks?.youtube||""}get twitterUrl(){return this.cardData?.artist?.socialLinks?.twitter||""}get linktrUrl(){return this.cardData?.artist?.socialLinks?.linktr||""}get instagramUrl(){return this.cardData?.artist?.socialLinks?.instagram||""}get artistName(){return this.cardData?.artist?.artistDisplayName||"Unknown Artist"}get avatarUrl(){return this.cardData?.artist?.avatar||""}get isCurrentlyPlaying(){return this.cardData?.isCurrentlyPlaying||!1}onMouseEnter(){this.enableAnimations&&this.isHovered.set(!0)}onMouseLeave(){this.enableAnimations&&this.isHovered.set(!1)}onAvatarError(){this.avatarError.set(!0)}onSocialLinkClick(t,e){e.stopPropagation();let a="";t==="youtube"?a=this.youtubeUrl:t==="twitter"?a=this.twitterUrl:t==="linktr"?a=this.linktrUrl:t==="instagram"&&(a=this.instagramUrl),a&&window.open(a,"_blank","noopener,noreferrer")}onCardClick(){console.log("Artist card clicked:",this.cardData?.artist?.artistDisplayName)}get hoverState(){return this.isHovered()?"hovered":"default"}get playingIndicatorState(){return this.isCurrentlyPlaying?"playing":"not-playing"}};jt.\u0275fac=function(e){return new(e||jt)},jt.\u0275cmp=j({type:jt,selectors:[["app-artist-card"]],inputs:{cardData:"cardData",enableAnimations:"enableAnimations"},decls:13,vars:13,consts:[[1,"artist-card",3,"mouseenter","mouseleave","click"],[1,"artist-avatar-section"],[1,"avatar-container"],["class","artist-avatar","loading","lazy",3,"src","alt","error",4,"ngIf"],["class","artist-initials",3,"background",4,"ngIf"],[1,"artist-info-section"],[1,"artist-name"],[1,"role-label"],["class","playing-status",4,"ngIf"],["class","social-links-section",4,"ngIf"],[1,"card-accent"],["loading","lazy",1,"artist-avatar",3,"error","src","alt"],[1,"artist-initials"],[1,"playing-status"],[1,"playing-indicator"],[1,"playing-dot"],[1,"playing-text"],[1,"social-links-section"],["class","social-link youtube-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link twitter-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link linktr-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link instagram-link","mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",1,"social-link","youtube-link",3,"click"],[1,"social-label"],["mat-icon-button","",1,"social-link","twitter-link",3,"click"],[1,"twitter-x-icon"],["mat-icon-button","",1,"social-link","linktr-link",3,"click"],["mat-icon-button","",1,"social-link","instagram-link",3,"click"],[1,"instagram-icon"]],template:function(e,a){e&1&&(b(0,"div",0),H("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(){return a.onMouseLeave()})("click",function(){return a.onCardClick()}),b(1,"div",1)(2,"div",2),B(3,Fi,1,2,"img",3)(4,Li,2,3,"div",4),y()(),b(5,"div",5)(6,"h3",6),M(7),y(),b(8,"div",7),M(9),y(),B(10,ji,5,1,"div",8),y(),B(11,Bi,5,4,"div",9),O(12,"div",10),y()),e&2&&($t(a.participationLevelClass()),nt("--theme-color",a.cardThemeColor()),A("@cardHover",a.hoverState),v(3),A("ngIf",a.avatarUrl&&!a.avatarError()),v(),A("ngIf",!a.avatarUrl||a.avatarError()),v(3),G(a.artistName),v(2),ft(" ",a.roleDisplayText()," "),v(),A("ngIf",a.isCurrentlyPlaying),v(),A("ngIf",a.hasYoutube||a.hasTwitter||a.hasLinktr||a.hasInstagram),v(),nt("background",a.cardThemeColor()))},dependencies:[dt,It,ne,ze,ti,ke],styles:['[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.artist-card[_ngcontent-%COMP%]{--mdc-theme-primary: var(--artist-card-text-primary) !important;--mat-primary-color: var(--artist-card-text-primary) !important;--theme-color: var(--artist-card-text-primary) !important;--color: var(--artist-card-text-primary) !important}.artist-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--artist-card-text-primary)!important}.artist-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--artist-card-bg-primary) 0%,var(--artist-card-bg-secondary) 100%);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid var(--artist-card-border-primary);border-radius:12px;color:var(--artist-card-text-primary);box-shadow:0 4px 16px var(--artist-card-shadow-base);transition:all .3s cubic-bezier(.25,.46,.45,.94);padding:1.75rem;cursor:pointer;min-height:300px;display:flex;flex-direction:column;align-items:center;text-align:center}.artist-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:var(--artist-card-bg-overlay);pointer-events:none;z-index:-1;opacity:.7;transition:opacity .3s ease}.artist-card[_ngcontent-%COMP%]:hover:hover{background:linear-gradient(135deg,var(--artist-card-hover-bg) 0%,var(--artist-card-bg-secondary) 100%);border-color:var(--artist-card-border-hover);box-shadow:0 8px 24px var(--artist-card-shadow-elevated);transform:translateY(-2px)}.artist-card[_ngcontent-%COMP%]:hover:before{opacity:.9}.artist-card[_ngcontent-%COMP%]:hover   .card-accent[_ngcontent-%COMP%]{opacity:1;transform:scaleX(1.05)}.artist-card[_ngcontent-%COMP%]:hover   .artist-avatar[_ngcontent-%COMP%]{transform:scale(1.08)}.artist-card[_ngcontent-%COMP%]:hover   .social-link[_ngcontent-%COMP%]{transform:translateY(-2px)}.artist-card.participation-main[_ngcontent-%COMP%]{border-color:var(--artist-card-text-primary);background:#000c;box-shadow:0 6px 24px #ffffff26}.artist-card.participation-main[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-primary);height:4px}.artist-card.participation-featured[_ngcontent-%COMP%]{border-color:var(--artist-card-text-secondary);background:var(--artist-card-bg-secondary)}.artist-card.participation-featured[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-secondary)}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{position:relative;width:80px;height:80px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid rgba(255,255,255,.2);transition:border-color .3s ease}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--theme-color, #666666);color:#fff;font-size:1.5rem;font-weight:700;border:3px solid rgba(255,255,255,.2);text-shadow:0 1px 2px rgba(0,0,0,.3)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{color:#fff!important;font-size:1.1rem;font-weight:600;margin:0 0 .5rem;line-height:1.3;text-shadow:0 1px 2px rgba(0,0,0,.4)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;letter-spacing:.8px;color:#fff!important;margin-bottom:.75rem;opacity:1;text-shadow:0 1px 4px rgba(0,0,0,.8);text-transform:uppercase;background:#0006;padding:.3rem .6rem;border-radius:6px;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.15);display:inline-block;box-shadow:0 2px 8px #0000004d;transition:all .2s ease;--color: #ffffff !important;--mdc-theme-primary: #ffffff !important;--mat-primary: #ffffff !important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[style*=color][_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.mat-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.theme-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[color=primary][_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]:hover{background:#00000080;border-color:#ffffff40;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0009,#141414b3);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:.4rem .8rem;margin-top:.5rem;box-shadow:0 2px 8px #0000004d}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#d40808!important;animation:_ngcontent-%COMP%_pulse 2s infinite}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem;color:#fff!important;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.5)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;flex-wrap:nowrap}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.375rem;padding:.5rem .875rem;background:#ffffff1a;border:1px solid rgba(255,255,255,.15);border-radius:8px;color:#fff;font-size:.7rem;transition:all .2s ease;text-decoration:none;min-width:90px;height:36px;white-space:nowrap;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;line-height:1;flex-shrink:0;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem;font-weight:500;flex-shrink:0;text-overflow:ellipsis;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[_ngcontent-%COMP%]:hover{background:#f003;border-color:#f006;color:#f44}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:110px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;flex-shrink:0;width:.85rem;height:.85rem;display:flex;align-items:center;justify-content:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]:hover{background:#1da1f233;border-color:#1da1f266;color:#1da1f2}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--text-primary),rgba(255,255,255,.6));border-radius:var(--border-radius-card) var(--border-radius-card) 0 0;opacity:.7;transition:var(--transition-smooth);box-shadow:0 0 8px #fff3;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.8),transparent);animation:_ngcontent-%COMP%_shimmerAccent 3s infinite}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#fff3!important;background:#fff3!important;border-color:#ffffff4d!important;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]{background-color:#ffffff26!important;background:#ffffff26!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important;outline:none!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#f003!important;background:#f003!important;border-color:#f006!important;color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#1da1f233!important;background:#1da1f233!important;border-color:#1da1f266!important;color:#1da1f2!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#1da1f2!important}@keyframes _ngcontent-%COMP%_shimmerAccent{0%{left:-100%}50%{left:-100%}to{left:100%}}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}50%{opacity:.6;transform:scale(1.3);box-shadow:0 0 16px #fffc}to{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.artist-card[_ngcontent-%COMP%]{padding:1.5rem;min-height:280px;border-radius:12px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.4rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1.05rem;margin-bottom:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .7rem;letter-spacing:.7px;margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{padding:.4rem .8rem;margin-top:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{gap:.4rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{padding:.5rem .8rem;min-width:85px;height:34px;font-size:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:100px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}}@media (max-width: 480px){.artist-card[_ngcontent-%COMP%]{padding:1.25rem;min-height:260px;border-radius:10px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:65px;height:65px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.3rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.7rem;padding:.3rem .6rem;letter-spacing:.6px;margin-bottom:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{flex-direction:column;gap:.3rem;align-items:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{width:100%;max-width:150px;justify-content:center;min-width:unset;padding:.5rem 1rem;height:36px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:unset;max-width:160px}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{height:2px}.artist-card[_ngcontent-%COMP%]{animation:fadeInUp .6s ease-out;animation-fill-mode:both}}'],data:{animation:[ut("cardHover",[tt("default",z({transform:"translateY(0) scale(1)"})),tt("hovered",z({transform:"translateY(-4px) scale(1.02)"})),et("default <=> hovered",J("200ms ease-out"))]),ut("playingIndicator",[tt("playing",z({opacity:1,transform:"scale(1)",background:"transparent"})),tt("not-playing",z({opacity:.3,transform:"scale(0.8)",background:"transparent"})),et("playing <=> not-playing",J("300ms ease-out"))])]},changeDetection:0});var ge=jt;var Mt=class Mt{constructor(t,e,a){this.artistCreditService=t;this.audioService=e;this.dynamicArtistService=a;this.destroy$=new $;this.currentlyPlayingArtistsSubject=new x([]);this.trackArtistCacheMap=new Map;this.maxCacheSize=50;this.cacheAccessOrder=[];this.isDebugMode=!1;this.currentlyPlayingArtists$=this.currentlyPlayingArtistsSubject.asObservable();this.currentlyPlayingArtistsWithContext$=xt([this.audioService.audioState$,this.currentlyPlayingArtists$]).pipe(F(([t,e])=>this.enhanceArtistsWithContext(t,e)),K((t,e)=>this.compareArtistArrays(t,e)),ot(50),ht(1),T(this.destroy$));this.initializeService()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearCache(),this.isDebugMode&&console.log("[CurrentlyPlayingArtistsService] Service destroyed, cache cleared")}initializeService(){this.populateTrackArtistCache(),this.dynamicArtistService.currentTrack$.pipe(K((t,e)=>t?.id===e?.id),ot(25),T(this.destroy$)).subscribe(t=>{this.updateCurrentlyPlayingArtistsFromDynamicService(t)}),this.audioService.audioState$.pipe(K((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),ot(25),Ee(t=>this.dynamicArtistService.currentTrack$.pipe(F(e=>({audioState:t,noDynamicTrack:e===null})),Ie({audioState:t,noDynamicTrack:!0}))),T(this.destroy$)).subscribe(({audioState:t,noDynamicTrack:e})=>{e&&this.updateCurrentlyPlayingArtists(t)})}populateTrackArtistCache(){try{this.artistCreditService.tracksWithCredits$.subscribe(t=>{t.forEach(e=>{let a=this.sortArtistsByPriority(e.allContributions);if(this.trackArtistCacheMap.set(e.id,a),this.trackArtistCacheMap.set(e.trackNumber.toString(),a),e.audioFile){let n=this.extractAudioKey(e.audioFile);this.trackArtistCacheMap.set(n,a)}})})}catch(t){console.error("[CurrentlyPlayingArtistsService] Error populating cache:",t)}}updateCurrentlyPlayingArtistsFromDynamicService(t){if(!t){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.id);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e),console.log(`[CurrentlyPlayingArtistsService] Updated artists for track "${t.title}":`,e.map(a=>a.artistDisplayName));else{let a=this.getArtistsFromTrackData(t);this.currentlyPlayingArtistsSubject.next(a),console.log(`[CurrentlyPlayingArtistsService] Using direct track data for "${t.title}":`,a.map(n=>n.artistDisplayName))}}getArtistsFromTrackData(t){let e=[];return t.mainArtist&&e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features&&t.features.length>0&&t.features.forEach((a,n)=>{e.push({id:`${t.id}-featured-${n}`,artistName:a.name,artistDisplayName:a.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:{}})}),this.sortArtistsByPriority(e)}updateCurrentlyPlayingArtists(t){if(!t.isPlaying||!t.currentTrack){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.currentTrack);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e);else{let a=this.tryFallbackArtistLookup(t.currentTrack);this.currentlyPlayingArtistsSubject.next(a)}}getArtistsForTrack(t){let e=this.trackArtistCacheMap.get(t);if(e)return this.updateCacheAccess(t),e;let a=this.artistCreditService.getTrackCredits(t);if(a){let n=this.sortArtistsByPriority(a.allContributions);return this.setCacheWithLRU(t,n),n}return[]}tryFallbackArtistLookup(t){if(/^\d+$/.test(t)){let s=this.trackArtistCacheMap.get(t);if(s)return s}let e=t.match(/\b(\d+)\b/);if(e){let s=this.trackArtistCacheMap.get(e[1]);if(s)return s}let a=this.extractAudioKey(t),n=this.trackArtistCacheMap.get(a);return n||(console.warn(`[CurrentlyPlayingArtistsService] No artists found for track: ${t}`),[])}sortArtistsByPriority(t){return[...t].sort((e,a)=>{let n={"Main Artist":1e3,"Featured Artist":900,Vocalist:800,Producer:700,Composer:600,Arranger:500,Instrumentalist:400},s=n[e.role]||100,p=n[a.role]||100;return s!==p?p-s:e.percentageContribution!==a.percentageContribution?a.percentageContribution-e.percentageContribution:e.artistDisplayName.localeCompare(a.artistDisplayName)})}enhanceArtistsWithContext(t,e){if(!t.currentTrack)return[];let a=this.artistCreditService.getTrackCredits(t.currentTrack);return e.map(n=>E(P({},n),{isMainArtist:n.role==="Main Artist",isFeaturedArtist:n.role==="Featured Artist"||n.role==="Vocalist",playingContext:{trackId:t.currentTrack,trackTitle:a?.title||"Unknown Track",startTime:a?.startTime||0,currentTime:t.currentTime}}))}extractAudioKey(t){return t.replace(/\.[^/.]+$/,"").replace(/^.*[\\\/]/,"").toLowerCase()}getAllContributingArtists(){let t=new Map;return this.trackArtistCacheMap.forEach(e=>{e.forEach(a=>{t.has(a.artistName)||t.set(a.artistName,a)})}),Array.from(t.values()).sort((e,a)=>e.artistDisplayName.localeCompare(a.artistDisplayName))}getFeaturedArtistsForShowcase(t=8){let a=this.getAllContributingArtists().filter(n=>n.role==="Main Artist"||n.role==="Featured Artist"||n.role==="Vocalist"||n.percentageContribution>=15);return this.sortArtistsByPriority(a).slice(0,t)}setCurrentlyPlayingArtists(t){let e=this.sortArtistsByPriority(t);this.currentlyPlayingArtistsSubject.next(e)}clearCurrentlyPlayingArtists(){this.currentlyPlayingArtistsSubject.next([])}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==e[a].id)return!1;return!0}updateCacheAccess(t){let e=this.cacheAccessOrder.indexOf(t);e>-1&&this.cacheAccessOrder.splice(e,1),this.cacheAccessOrder.push(t)}setCacheWithLRU(t,e){if(this.trackArtistCacheMap.size>=this.maxCacheSize){let a=this.cacheAccessOrder.shift();a&&(this.trackArtistCacheMap.delete(a),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Evicted cache entry: ${a}`))}this.trackArtistCacheMap.set(t,e),this.updateCacheAccess(t),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Cached artists for track: ${t}`)}clearCache(){this.trackArtistCacheMap.clear(),this.cacheAccessOrder=[]}getCacheStats(){return{size:this.trackArtistCacheMap.size,maxSize:this.maxCacheSize,hitRate:this.cacheAccessOrder.length>0?this.trackArtistCacheMap.size/this.cacheAccessOrder.length:0}}setDebugMode(t){this.isDebugMode=t}};Mt.\u0275fac=function(e){return new(e||Mt)(R(it),R(mt),R(at))},Mt.\u0275prov=L({token:Mt,factory:Mt.\u0275fac,providedIn:"root"});var fe=Mt;function $i(d,t){if(d&1&&O(0,"app-artist-card",11),d&2){let e=t.$implicit,a=w(3);A("cardData",e)("enableAnimations",a.enableAnimations)("@cardUpdate",void 0)}}function Ui(d,t){if(d&1&&(b(0,"div",9),B(1,$i,1,3,"app-artist-card",10),y()),d&2){let e=w(2);V("single-card",e.artistCards().length===1),A("@cardsContainer",void 0)("@modeTransition",e.animationState()),v(),A("ngForOf",e.artistCards())("ngForTrackBy",e.trackByCardId)}}function Gi(d,t){d&1&&(b(0,"div",12)(1,"div",13)(2,"div",14),M(3,"\u266A"),y(),b(4,"h3"),M(5,"No Artists to Display"),y(),b(6,"p"),M(7,"Play a track to see contributing artists."),y()()())}function Wi(d,t){if(d&1&&(b(0,"div",15)(1,"div",16),M(2,"\u2139"),y(),b(3,"span",17),M(4),y()()),d&2){let e=w(2);v(4),ft(" Artist cards update in real-time as different tracks play. ",e.currentlyPlayingArtists().length," artists are currently featured. ")}}function Ki(d,t){if(d&1&&(b(0,"div",2)(1,"div",3)(2,"h2",4),M(3),y(),b(4,"p",5),M(5),y()(),B(6,Ui,2,6,"div",6)(7,Gi,8,0,"div",7)(8,Wi,5,1,"div",8),y()),d&2){let e=w();v(3),G(e.displayTitle),v(2),G(e.displaySubtitle),v(),A("ngIf",e.artistCards().length>0),v(),A("ngIf",e.artistCards().length===0),v(),A("ngIf",e.currentTrack())}}function qi(d,t){d&1&&(b(0,"div",18)(1,"div",19),O(2,"div",20),b(3,"p"),M(4,"Loading artist cards..."),y()()())}var Rt=class Rt{constructor(t,e,a,n,s,p){this.artistCreditService=t;this.audioService=e;this.currentlyPlayingService=a;this.dynamicArtistService=n;this.musicStateManager=s;this.router=p;this.showAllArtists=!1;this.maxVisibleCards=8;this.enableAnimations=!0;this._displayMode="currently-playing";this.artistCards=q([]);this.currentlyPlayingArtists=q([]);this.showcaseArtists=q([]);this.isLoading=q(!0);this.currentTrack=q(null);this.totalArtistsCount=q(0);this.animationState=q("showcase");this.artistCardIds=new Map([["SpiralFlip","artist-card-spiralflip-001"],["eili","artist-card-eili-002"],["Ariatec","artist-card-ariatec-003"],["MB","artist-card-mbgov-004"],["Iku Hoshifuri","artist-card-iku-hoshifuri-005"],["Justin Thornburgh","artist-card-justin-thornburgh-006"],["v1ris","artist-card-v1ris-007"],["Rita Kamishiro","artist-card-rita-kamishiro-008"],["Marcus Ho","artist-card-marcus-ho-009"],["AZALI","artist-card-azali-010"],["Aloysius","artist-card-aloysius-011"],["potatoTeto","artist-card-potatoteto-012"],["Artisan","artist-card-artisan-013"],["Mei Naganowa","artist-card-mei-naganowa-014"],["Evin a'k","artist-card-evin-ak-015"],["BilliumMoto","artist-card-billiummoto-016"],["Elliot Hsu","artist-card-elliot-hsu-017"],["Yuzuki","artist-card-yuzuki-018"],["LucaProject","artist-card-lucaproject-019"],["Koway","artist-card-koway-020"],["\u4F0D\u4E00","artist-card-wuyi-021"],["Nstryder","artist-card-nstryder-022"],["MoAE","artist-card-moae-023"],["dystopian tanuki","artist-card-dystopian-tanuki-024"],["Heem","artist-card-heem-025"],["Woojinee","artist-card-woojinee-026"],["Bigg Milk","artist-card-bigg-milk-027"],["Gardens","artist-card-gardens-028"],["Sad Keyboard Guy","artist-card-sad-keyboard-guy-029"],["Futsuunohito","artist-card-futsuunohito-030"],["shishishiena","artist-card-shishishiena-031"]]);this.destroy$=new $;this.currentProject=q("phantasia2")}set displayMode(t){let e=this._displayMode;this._displayMode=t,e!==t&&!this.isLoading()&&this.handleDisplayModeChange(t)}get displayMode(){return this._displayMode}ngOnInit(){this.detectCurrentProject(),this.initializeArtistCards(),this.setupRealtimeUpdates()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}detectCurrentProject(){let t=this.router.url;t.includes("phantasia1")?this.currentProject.set("phantasia1"):t.includes("phantasia2")?this.currentProject.set("phantasia2"):this.currentProject.set("phantasia2")}getCurrentProjectArtists(){return this.currentProject()==="phantasia1"?this.artistCreditService.getAllPhantasia1Artists():this.artistCreditService.getAllPhantasia2Artists()}initializeArtistCards(){try{let t=this.getCurrentProjectArtists();this.totalArtistsCount.set(t.length);let e=this.createShowcaseSelection(t);this.showcaseArtists.set(e);let a=this.musicStateManager.getCurrentArtistFilteringState();this.updateCardsFromFilteringState(a),this.isLoading.set(!1)}catch(t){console.error("[DynamicArtistCards] Error initializing artist cards:",t),this.isLoading.set(!1)}}setupRealtimeUpdates(){this.musicStateManager.artistFilteringState$.pipe(T(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Artist filtering state changed:",`Mode: ${t.mode}, Current artists: ${t.currentArtists.length}, All artists: ${t.allArtists.length}`),this.updateCardsFromFilteringState(t)}),this.musicStateManager.displayInfo$.pipe(T(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Display info updated:",t)}),this.displayMode!=="currently-playing"&&this.setupLegacyFallbackUpdates()}updateCardsForCurrentTrack(t){let e=[];e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features.forEach((n,s)=>{e.push({id:`${t.id}-featured-${s}`,artistName:n.name,artistDisplayName:n.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:n.socialLinks})}),t.collaborators.forEach((n,s)=>{e.push({id:`${t.id}-collab-${s}`,artistName:n.name,artistDisplayName:n.name,role:n.role,participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:n.socialLinks})});let a=e.map(n=>this.createArtistCard(n,!0));this.currentlyPlayingArtists.set(a),this.artistCards.set(a.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Updated cards for track:",t.title,"Artists:",e.map(n=>n.artistDisplayName))}createArtistCard(t,e=!1){return{id:this.artistCardIds.get(t.artistName)||`artist-card-${this.generateSlug(t.artistName)}`,artist:t,isCurrentlyPlaying:e,participationLevel:this.determineParticipationLevel(t),displayPriority:this.calculateDisplayPriority(t,e)}}createAllArtistCards(t){return t.map(e=>this.createArtistCard(e,!1)).sort((e,a)=>a.displayPriority-e.displayPriority)}createShowcaseSelection(t){return t.filter(a=>{let n=a.role;return n==="Main Artist"||n==="Featured Artist"||n==="Vocalist"||a.percentageContribution>=15}).map(a=>this.createArtistCard(a,!1)).sort((a,n)=>n.displayPriority-a.displayPriority).slice(0,Math.max(this.maxVisibleCards,8))}determineParticipationLevel(t){return t.role==="Main Artist"?"main":t.role==="Featured Artist"||t.role==="Vocalist"?"featured":t.percentageContribution>=10?"collaboration":"additional"}calculateDisplayPriority(t,e){let a=0;switch(e&&(a+=1e3),t.role){case"Main Artist":a+=500;break;case"Featured Artist":a+=400;break;case"Vocalist":a+=350;break;case"Producer":a+=300;break;case"Composer":a+=250;break;default:a+=100;break}return a+=t.percentageContribution,a}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}getCardById(t){return this.artistCards().find(e=>e.id===t)}handleDisplayModeChange(t){if(console.log("[DynamicArtistCards] Display mode changed to:",t),t==="showcase"){this.animationState.set("showcase");let e=this.showcaseArtists();this.artistCards.set(e),console.log("[DynamicArtistCards] Switched to showcase mode - showing",e.length,"featured artists")}else if(t==="currently-playing"){this.animationState.set("currently-playing");let e=this.currentlyPlayingArtists();e.length>0?(this.artistCards.set(e.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Switched to currently-playing mode - showing",e.length,"artists")):(console.log("[DynamicArtistCards] No currently playing artists - falling back to showcase"),this.handleDisplayModeChange("showcase"))}else if(t==="all"){this.animationState.set("showcase");let e=this.getCurrentProjectArtists();this.artistCards.set(this.createAllArtistCards(e))}}updateCardsFromFilteringState(t){if(t.mode==="music-playing"&&t.currentArtists.length>0){let e=t.currentArtists.map(n=>this.createArtistCard(n,!0));this.currentlyPlayingArtists.set(e),this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.animationState.set("currently-playing");let a=this.musicStateManager.getCurrentMusicState();this.currentTrack.set(a.currentTrack?.id||null),console.log("[DynamicArtistCards] Updated to music-playing mode with",e.length,"artists")}else{let e=t.allArtists.map(a=>this.createArtistCard(a,!1));this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.showcaseArtists.set(e),this.currentlyPlayingArtists.set([]),this.animationState.set("showcase"),this.currentTrack.set(null),console.log("[DynamicArtistCards] Updated to no-music mode with",e.length,"artists")}}setupLegacyFallbackUpdates(){this.currentlyPlayingService.currentlyPlayingArtists$.pipe(T(this.destroy$)).subscribe(t=>{this.musicStateManager.getCurrentArtistFilteringState().mode==="no-music"&&t.length>0&&console.log("[DynamicArtistCards] Using legacy fallback for",t.length,"artists")})}trackByCardId(t,e){return e.id}get displayTitle(){return this.musicStateManager.getCurrentArtistFilteringState().displayTitle}get displaySubtitle(){return this.musicStateManager.getCurrentArtistFilteringState().displaySubtitle}};Rt.\u0275fac=function(e){return new(e||Rt)(N(it),N(mt),N(fe),N(at),N(Dt),N(Le))},Rt.\u0275cmp=j({type:Rt,selectors:[["app-dynamic-artist-cards"]],inputs:{showAllArtists:"showAllArtists",maxVisibleCards:"maxVisibleCards",enableAnimations:"enableAnimations",displayMode:"displayMode"},decls:2,vars:2,consts:[["class","dynamic-artist-cards-container",4,"ngIf"],["class","cards-loading-container",4,"ngIf"],[1,"dynamic-artist-cards-container"],[1,"cards-header"],[1,"cards-title"],[1,"cards-subtitle"],["class","artist-cards-grid",3,"single-card",4,"ngIf"],["class","no-artists-state",4,"ngIf"],["class","artist-cards-info-panel",4,"ngIf"],[1,"artist-cards-grid"],["class","artist-card",3,"cardData","enableAnimations",4,"ngFor","ngForOf","ngForTrackBy"],[1,"artist-card",3,"cardData","enableAnimations"],[1,"no-artists-state"],[1,"no-artists-content"],[1,"no-artists-icon"],[1,"artist-cards-info-panel"],[1,"info-icon"],[1,"info-text"],[1,"cards-loading-container"],[1,"loading-content"],[1,"loading-spinner"]],template:function(e,a){e&1&&B(0,Ki,9,5,"div",0)(1,qi,5,0,"div",1),e&2&&(A("ngIf",!a.isLoading()),v(),A("ngIf",a.isLoading()))},dependencies:[dt,te,It,ge],styles:["[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.dynamic-artist-cards-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto;padding:var(--artist-card-spacing-xxl) var(--artist-card-spacing-lg);background:var(--artist-card-container-bg);border:1px solid var(--artist-card-border-secondary);border-radius:var(--artist-card-radius-large);backdrop-filter:var(--artist-card-glass-blur);-webkit-backdrop-filter:var(--artist-card-glass-blur);box-shadow:var(--artist-card-shadow-container)}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:0;backdrop-filter:none;-webkit-backdrop-filter:none;box-shadow:none;max-width:100%;padding:1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem;padding:1rem 0}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-title[_ngcontent-%COMP%]{font-size:clamp(1.6rem,3vw,2.8rem);font-weight:700;color:var(--text-primary);margin:0 0 .75rem;text-shadow:0 3px 8px rgba(0,0,0,.7);letter-spacing:-.02em;line-height:1.1}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);max-width:640px;margin:0 auto;line-height:1.6;font-weight:400;text-shadow:0 2px 4px rgba(0,0,0,.5)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin:0 1rem 2rem;justify-content:start;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box;container-type:inline-size}@media (min-width: 1024px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.2rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (min-width: 1200px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;max-width:400px;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;max-width:400px;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:320px}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;max-width:400px;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;max-width:400px;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:320px}@media (min-width: 769px) and (max-width: 1199px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}}@media (min-width: 1200px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);justify-content:start;box-sizing:border-box}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:400px}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:400px}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}}@media (min-width: 1440px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 800px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 1000px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]{background:var(--card-bg-primary);border-radius:16px;padding:2.5rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);border:1px solid rgba(255,255,255,.12);box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#fff3;transform:translateY(-2px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   .no-artists-icon[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--text-secondary);margin-bottom:1.5rem;display:block;opacity:.8}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .75rem;font-size:1.4rem;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.6)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0;font-size:1rem;line-height:1.5}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;background:var(--card-bg-primary);border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:1.25rem 1.75rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);margin-top:2rem;box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#ffffff40;transform:translateY(-1px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.4rem;flex-shrink:0;opacity:.9}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.95rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{padding:.875rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:.8rem}}.cards-loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:240px;padding:3rem;background:var(--container-bg);border-radius:12px}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary)}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:3px solid rgba(255,255,255,.15);border-top:3px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem;box-shadow:0 0 12px #ffffff1a}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:var(--text-primary);text-shadow:0 2px 4px rgba(0,0,0,.5)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.artist-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.artist-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.02);box-shadow:var(--shadow-elevated)}.artist-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.artist-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.artist-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.artist-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.artist-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.artist-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.artist-card[_ngcontent-%COMP%]:nth-child(7){animation-delay:.7s}.artist-card[_ngcontent-%COMP%]:nth-child(8){animation-delay:.8s}"],data:{animation:[ut("cardsContainer",[et(":enter",[ye(".artist-card",[z({opacity:0,transform:"translateY(20px)"}),ve(100,[J("300ms ease-out",z({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]),ut("cardUpdate",[tt("in",z({opacity:1,transform:"scale(1)"})),et("void => *",[z({opacity:0,transform:"scale(0.9)"}),J("250ms ease-out")]),et("* => void",[J("200ms ease-in",z({opacity:0,transform:"scale(0.9)"}))])]),ut("modeTransition",[tt("showcase",z({opacity:1,transform:"translateY(0)"})),tt("currently-playing",z({opacity:1,transform:"translateY(0)"})),et("showcase => currently-playing",[J("400ms cubic-bezier(0.4, 0.0, 0.2, 1)",z({opacity:1,transform:"translateY(0)"}))]),et("currently-playing => showcase",[J("600ms cubic-bezier(0.4, 0.0, 0.2, 1)",z({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0});var si=Rt;export{ca as a,ke as b,ti as c,Nr as d,it as e,at as f,mt as g,ni as h,oi as i,si as j};
