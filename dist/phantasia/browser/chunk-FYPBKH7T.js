import{a as bt}from"./chunk-YJ55D4VX.js";import{c as wt,d as ct,f as H,g as lt,h as dt,i as Ge,j as We}from"./chunk-W6LHCHNP.js";import{a as $e,b as Ve,c as qt,d as re,e as oe,f as He,g as se,h as Z,i as Ue,j as jt}from"./chunk-APZQJXLQ.js";import{a as ne,b as Be}from"./chunk-AZK7RCJB.js";import{Aa as f,B as Le,Ba as b,C as Re,Ca as O,Cb as Ne,D as E,Fa as ie,Ga as it,H as j,Ha as F,I as ut,J as pt,Ja as w,K as $,Ka as xt,L as D,La as Mt,N as tt,O as et,Pa as W,Qa as V,R as Xt,Ra as Wt,S as Ut,Sa as M,Ta as N,U as G,Ua as at,X as Jt,Z as je,a as A,b as B,ba as ht,cb as st,d as vi,da as v,e as _i,ea as Ct,eb as Kt,f as J,fb as Lt,ga as ze,gb as we,ha as te,i as U,ia as z,j as P,jb as ae,kb as ft,l as Fe,la as R,ma as gt,n as T,na as Gt,o as Dt,oa as ee,pa as I,ra as Ft,rb as nt,t as mt,ua as q,v as Q,xa as xe,xb as Rt,ya as Me,z as yt,za as x}from"./chunk-4XDFGVLT.js";var li=vi(ge=>{"use strict";(function(){"use strict";var c=function(){this.init()};c.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window<"u"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var n=this||t;if(i=parseFloat(i),n.ctx||y(),typeof i<"u"&&i>=0&&i<=1){if(n._volume=i,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var l=n._howls[o]._getSoundIds(),m=0;m<l.length;m++){var u=n._howls[o]._soundById(l[m]);u&&u._node&&(u._node.volume=u._volume*i)}return n}return n._volume},mute:function(i){var n=this||t;n.ctx||y(),n._muted=i,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(i?0:n._volume,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var l=n._howls[o]._getSoundIds(),m=0;m<l.length;m++){var u=n._howls[o]._soundById(l[m]);u&&u._node&&(u._node.muted=i?!0:u._muted)}return n},stop:function(){for(var i=this||t,n=0;n<i._howls.length;n++)i._howls[n].stop();return i},unload:function(){for(var i=this||t,n=i._howls.length-1;n>=0;n--)i._howls[n].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close<"u"&&(i.ctx.close(),i.ctx=null,y()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio<"u")try{var n=new Audio;typeof n.oncanplaythrough>"u"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var n=new Audio;n.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return i}if(!n||typeof n.canPlayType!="function")return i;var o=n.canPlayType("audio/mpeg;").replace(/^no$/,""),l=i._navigator?i._navigator.userAgent:"",m=l.match(/OPR\/(\d+)/g),u=m&&parseInt(m[0].split("/")[1],10)<33,d=l.indexOf("Safari")!==-1&&l.indexOf("Chrome")===-1,_=l.match(/Version\/(.*?) /),C=d&&_&&parseInt(_[1],10)<15;return i._codecs={mp3:!!(!u&&(o||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!o,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!C&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!C&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var n=function(o){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var l=new Audio;l._unlocked=!0,i._releaseHtml5Audio(l)}catch{i.noAudio=!0;break}for(var m=0;m<i._howls.length;m++)if(!i._howls[m]._webAudio)for(var u=i._howls[m]._getSoundIds(),d=0;d<u.length;d++){var _=i._howls[m]._soundById(u[d]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}i._autoResume();var C=i.ctx.createBufferSource();C.buffer=i._scratchBuffer,C.connect(i.ctx.destination),typeof C.start>"u"?C.noteOn(0):C.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),C.onended=function(){C.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var S=0;S<i._howls.length;S++)i._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var n=new Audio().play();return n&&typeof Promise<"u"&&(n instanceof Promise||typeof n.then=="function")&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var n=this||t;return i._unlocked&&n._html5AudioPool.push(i),n},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend>"u"||!t.usingWebAudio)){for(var n=0;n<i._howls.length;n++)if(i._howls[n]._webAudio){for(var o=0;o<i._howls[n]._sounds.length;o++)if(!i._howls[n]._sounds[o]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(i.autoSuspend){i._suspendTimer=null,i.state="suspending";var l=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(l,l)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume>"u"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var n=0;n<i._howls.length;n++)i._howls[n]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new c,e=function(i){var n=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(i)};e.prototype={init:function(i){var n=this;return t.ctx||y(),n._autoplay=i.autoplay||!1,n._format=typeof i.format!="string"?i.format:[i.format],n._html5=i.html5||!1,n._muted=i.mute||!1,n._loop=i.loop||!1,n._pool=i.pool||5,n._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,n._rate=i.rate||1,n._sprite=i.sprite||{},n._src=typeof i.src!="string"?i.src:[i.src],n._volume=i.volume!==void 0?i.volume:1,n._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=i.onend?[{fn:i.onend}]:[],n._onfade=i.onfade?[{fn:i.onfade}]:[],n._onload=i.onload?[{fn:i.onload}]:[],n._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],n._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],n._onpause=i.onpause?[{fn:i.onpause}]:[],n._onplay=i.onplay?[{fn:i.onplay}]:[],n._onstop=i.onstop?[{fn:i.onstop}]:[],n._onmute=i.onmute?[{fn:i.onmute}]:[],n._onvolume=i.onvolume?[{fn:i.onvolume}]:[],n._onrate=i.onrate?[{fn:i.onrate}]:[],n._onseek=i.onseek?[{fn:i.onseek}]:[],n._onunlock=i.onunlock?[{fn:i.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n._preload!=="none"&&n.load(),n},load:function(){var i=this,n=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var o=0;o<i._src.length;o++){var l,m;if(i._format&&i._format[o])l=i._format[o];else{if(m=i._src[o],typeof m!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}l=/^data:audio\/([^;,]+);/i.exec(m),l||(l=/\.([^.]+)$/.exec(m.split("?",1)[0])),l&&(l=l[1].toLowerCase())}if(l||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),l&&t.codecs(l)){n=i._src[o];break}}if(!n){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=n,i._state="loading",window.location.protocol==="https:"&&n.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new a(i),i._webAudio&&s(i),i},play:function(i,n){var o=this,l=null;if(typeof i=="number")l=i,i=null;else{if(typeof i=="string"&&o._state==="loaded"&&!o._sprite[i])return null;if(typeof i>"u"&&(i="__default",!o._playLock)){for(var m=0,u=0;u<o._sounds.length;u++)o._sounds[u]._paused&&!o._sounds[u]._ended&&(m++,l=o._sounds[u]._id);m===1?i=null:l=null}}var d=l?o._soundById(l):o._inactiveSound();if(!d)return null;if(l&&!i&&(i=d._sprite||"__default"),o._state!=="loaded"){d._sprite=i,d._ended=!1;var _=d._id;return o._queue.push({event:"play",action:function(){o.play(_)}}),_}if(l&&!d._paused)return n||o._loadQueue("play"),d._id;o._webAudio&&t._autoResume();var C=Math.max(0,d._seek>0?d._seek:o._sprite[i][0]/1e3),S=Math.max(0,(o._sprite[i][0]+o._sprite[i][1])/1e3-C),Y=S*1e3/Math.abs(d._rate),ot=o._sprite[i][0]/1e3,_t=(o._sprite[i][0]+o._sprite[i][1])/1e3;d._sprite=i,d._ended=!1;var K=function(){d._paused=!1,d._seek=C,d._start=ot,d._stop=_t,d._loop=!!(d._loop||o._sprite[i][2])};if(C>=_t){o._ended(d);return}var k=d._node;if(o._webAudio){var Ie=function(){o._playLock=!1,K(),o._refreshBuffer(d);var Et=d._muted||o._muted?0:d._volume;k.gain.setValueAtTime(Et,t.ctx.currentTime),d._playStart=t.ctx.currentTime,typeof k.bufferSource.start>"u"?d._loop?k.bufferSource.noteGrainOn(0,C,86400):k.bufferSource.noteGrainOn(0,C,S):d._loop?k.bufferSource.start(0,C,86400):k.bufferSource.start(0,C,S),Y!==1/0&&(o._endTimers[d._id]=setTimeout(o._ended.bind(o,d),Y)),n||setTimeout(function(){o._emit("play",d._id),o._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Ie():(o._playLock=!0,o.once("resume",Ie),o._clearTimer(d._id))}else{var Ee=function(){k.currentTime=C,k.muted=d._muted||o._muted||t._muted||k.muted,k.volume=d._volume*t.volume(),k.playbackRate=d._rate;try{var Et=k.play();if(Et&&typeof Promise<"u"&&(Et instanceof Promise||typeof Et.then=="function")?(o._playLock=!0,K(),Et.then(function(){o._playLock=!1,k._unlocked=!0,n?o._loadQueue():o._emit("play",d._id)}).catch(function(){o._playLock=!1,o._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),d._ended=!0,d._paused=!0})):n||(o._playLock=!1,K(),o._emit("play",d._id)),k.playbackRate=d._rate,k.paused){o._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||d._loop?o._endTimers[d._id]=setTimeout(o._ended.bind(o,d),Y):(o._endTimers[d._id]=function(){o._ended(d),k.removeEventListener("ended",o._endTimers[d._id],!1)},k.addEventListener("ended",o._endTimers[d._id],!1))}catch(bi){o._emit("playerror",d._id,bi)}};k.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(k.src=o._src,k.load());var fi=window&&window.ejecta||!k.readyState&&t._navigator.isCocoonJS;if(k.readyState>=3||fi)Ee();else{o._playLock=!0,o._state="loading";var De=function(){o._state="loaded",Ee(),k.removeEventListener(t._canPlayEvent,De,!1)};k.addEventListener(t._canPlayEvent,De,!1),o._clearTimer(d._id)}}return d._id},pause:function(i){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(i)}}),n;for(var o=n._getSoundIds(i),l=0;l<o.length;l++){n._clearTimer(o[l]);var m=n._soundById(o[l]);if(m&&!m._paused&&(m._seek=n.seek(o[l]),m._rateSeek=0,m._paused=!0,n._stopFade(o[l]),m._node))if(n._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),n._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||n._emit("pause",m?m._id:null)}return n},stop:function(i,n){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(i)}}),o;for(var l=o._getSoundIds(i),m=0;m<l.length;m++){o._clearTimer(l[m]);var u=o._soundById(l[m]);u&&(u._seek=u._start||0,u._rateSeek=0,u._paused=!0,u._ended=!0,o._stopFade(l[m]),u._node&&(o._webAudio?u._node.bufferSource&&(typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),o._cleanBuffer(u._node)):(!isNaN(u._node.duration)||u._node.duration===1/0)&&(u._node.currentTime=u._start||0,u._node.pause(),u._node.duration===1/0&&o._clearSound(u._node))),n||o._emit("stop",u._id))}return o},mute:function(i,n){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(i,n)}}),o;if(typeof n>"u")if(typeof i=="boolean")o._muted=i;else return o._muted;for(var l=o._getSoundIds(n),m=0;m<l.length;m++){var u=o._soundById(l[m]);u&&(u._muted=i,u._interval&&o._stopFade(u._id),o._webAudio&&u._node?u._node.gain.setValueAtTime(i?0:u._volume,t.ctx.currentTime):u._node&&(u._node.muted=t._muted?!0:i),o._emit("mute",u._id))}return o},volume:function(){var i=this,n=arguments,o,l;if(n.length===0)return i._volume;if(n.length===1||n.length===2&&typeof n[1]>"u"){var m=i._getSoundIds(),u=m.indexOf(n[0]);u>=0?l=parseInt(n[0],10):o=parseFloat(n[0])}else n.length>=2&&(o=parseFloat(n[0]),l=parseInt(n[1],10));var d;if(typeof o<"u"&&o>=0&&o<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,n)}}),i;typeof l>"u"&&(i._volume=o),l=i._getSoundIds(l);for(var _=0;_<l.length;_++)d=i._soundById(l[_]),d&&(d._volume=o,n[2]||i._stopFade(l[_]),i._webAudio&&d._node&&!d._muted?d._node.gain.setValueAtTime(o,t.ctx.currentTime):d._node&&!d._muted&&(d._node.volume=o*t.volume()),i._emit("volume",d._id))}else return d=l?i._soundById(l):i._sounds[0],d?d._volume:0;return i},fade:function(i,n,o,l){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(i,n,o,l)}}),m;i=Math.min(Math.max(0,parseFloat(i)),1),n=Math.min(Math.max(0,parseFloat(n)),1),o=parseFloat(o),m.volume(i,l);for(var u=m._getSoundIds(l),d=0;d<u.length;d++){var _=m._soundById(u[d]);if(_){if(l||m._stopFade(u[d]),m._webAudio&&!_._muted){var C=t.ctx.currentTime,S=C+o/1e3;_._volume=i,_._node.gain.setValueAtTime(i,C),_._node.gain.linearRampToValueAtTime(n,S)}m._startFadeInterval(_,i,n,o,u[d],typeof l>"u")}}return m},_startFadeInterval:function(i,n,o,l,m,u){var d=this,_=n,C=o-n,S=Math.abs(C/.01),Y=Math.max(4,S>0?l/S:l),ot=Date.now();i._fadeTo=o,i._interval=setInterval(function(){var _t=(Date.now()-ot)/l;ot=Date.now(),_+=C*_t,_=Math.round(_*100)/100,C<0?_=Math.max(o,_):_=Math.min(o,_),d._webAudio?i._volume=_:d.volume(_,i._id,!0),u&&(d._volume=_),(o<n&&_<=o||o>n&&_>=o)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,d.volume(o,i._id),d._emit("fade",i._id))},Y)},_stopFade:function(i){var n=this,o=n._soundById(i);return o&&o._interval&&(n._webAudio&&o._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(o._interval),o._interval=null,n.volume(o._fadeTo,i),o._fadeTo=null,n._emit("fade",i)),n},loop:function(){var i=this,n=arguments,o,l,m;if(n.length===0)return i._loop;if(n.length===1)if(typeof n[0]=="boolean")o=n[0],i._loop=o;else return m=i._soundById(parseInt(n[0],10)),m?m._loop:!1;else n.length===2&&(o=n[0],l=parseInt(n[1],10));for(var u=i._getSoundIds(l),d=0;d<u.length;d++)m=i._soundById(u[d]),m&&(m._loop=o,i._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=o,o&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,i.playing(u[d])&&(i.pause(u[d],!0),i.play(u[d],!0)))));return i},rate:function(){var i=this,n=arguments,o,l;if(n.length===0)l=i._sounds[0]._id;else if(n.length===1){var m=i._getSoundIds(),u=m.indexOf(n[0]);u>=0?l=parseInt(n[0],10):o=parseFloat(n[0])}else n.length===2&&(o=parseFloat(n[0]),l=parseInt(n[1],10));var d;if(typeof o=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,n)}}),i;typeof l>"u"&&(i._rate=o),l=i._getSoundIds(l);for(var _=0;_<l.length;_++)if(d=i._soundById(l[_]),d){i.playing(l[_])&&(d._rateSeek=i.seek(l[_]),d._playStart=i._webAudio?t.ctx.currentTime:d._playStart),d._rate=o,i._webAudio&&d._node&&d._node.bufferSource?d._node.bufferSource.playbackRate.setValueAtTime(o,t.ctx.currentTime):d._node&&(d._node.playbackRate=o);var C=i.seek(l[_]),S=(i._sprite[d._sprite][0]+i._sprite[d._sprite][1])/1e3-C,Y=S*1e3/Math.abs(d._rate);(i._endTimers[l[_]]||!d._paused)&&(i._clearTimer(l[_]),i._endTimers[l[_]]=setTimeout(i._ended.bind(i,d),Y)),i._emit("rate",d._id)}}else return d=i._soundById(l),d?d._rate:i._rate;return i},seek:function(){var i=this,n=arguments,o,l;if(n.length===0)i._sounds.length&&(l=i._sounds[0]._id);else if(n.length===1){var m=i._getSoundIds(),u=m.indexOf(n[0]);u>=0?l=parseInt(n[0],10):i._sounds.length&&(l=i._sounds[0]._id,o=parseFloat(n[0]))}else n.length===2&&(o=parseFloat(n[0]),l=parseInt(n[1],10));if(typeof l>"u")return 0;if(typeof o=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var d=i._soundById(l);if(d)if(typeof o=="number"&&o>=0){var _=i.playing(l);_&&i.pause(l,!0),d._seek=o,d._ended=!1,i._clearTimer(l),!i._webAudio&&d._node&&!isNaN(d._node.duration)&&(d._node.currentTime=o);var C=function(){_&&i.play(l,!0),i._emit("seek",l)};if(_&&!i._webAudio){var S=function(){i._playLock?setTimeout(S,0):C()};setTimeout(S,0)}else C()}else if(i._webAudio){var Y=i.playing(l)?t.ctx.currentTime-d._playStart:0,ot=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(ot+Y*Math.abs(d._rate))}else return d._node.currentTime;return i},playing:function(i){var n=this;if(typeof i=="number"){var o=n._soundById(i);return o?!o._paused:!1}for(var l=0;l<n._sounds.length;l++)if(!n._sounds[l]._paused)return!0;return!1},duration:function(i){var n=this,o=n._duration,l=n._soundById(i);return l&&(o=n._sprite[l._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var i=this,n=i._sounds,o=0;o<n.length;o++)n[o]._paused||i.stop(n[o]._id),i._webAudio||(i._clearSound(n[o]._node),n[o]._node.removeEventListener("error",n[o]._errorFn,!1),n[o]._node.removeEventListener(t._canPlayEvent,n[o]._loadFn,!1),n[o]._node.removeEventListener("ended",n[o]._endFn,!1),t._releaseHtml5Audio(n[o]._node)),delete n[o]._node,i._clearTimer(n[o]._id);var l=t._howls.indexOf(i);l>=0&&t._howls.splice(l,1);var m=!0;for(o=0;o<t._howls.length;o++)if(t._howls[o]._src===i._src||i._src.indexOf(t._howls[o]._src)>=0){m=!1;break}return r&&m&&delete r[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,n,o,l){var m=this,u=m["_on"+i];return typeof n=="function"&&u.push(l?{id:o,fn:n,once:l}:{id:o,fn:n}),m},off:function(i,n,o){var l=this,m=l["_on"+i],u=0;if(typeof n=="number"&&(o=n,n=null),n||o)for(u=0;u<m.length;u++){var d=o===m[u].id;if(n===m[u].fn&&d||!n&&d){m.splice(u,1);break}}else if(i)l["_on"+i]=[];else{var _=Object.keys(l);for(u=0;u<_.length;u++)_[u].indexOf("_on")===0&&Array.isArray(l[_[u]])&&(l[_[u]]=[])}return l},once:function(i,n,o){var l=this;return l.on(i,n,o,1),l},_emit:function(i,n,o){for(var l=this,m=l["_on"+i],u=m.length-1;u>=0;u--)(!m[u].id||m[u].id===n||i==="load")&&(setTimeout((function(d){d.call(this,n,o)}).bind(l,m[u].fn),0),m[u].once&&l.off(i,m[u].fn,m[u].id));return l._loadQueue(i),l},_loadQueue:function(i){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===i&&(n._queue.shift(),n._loadQueue()),i||o.action()}return n},_ended:function(i){var n=this,o=i._sprite;if(!n._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(n._ended.bind(n,i),100),n;var l=!!(i._loop||n._sprite[o][2]);if(n._emit("end",i._id),!n._webAudio&&l&&n.stop(i._id,!0).play(i._id),n._webAudio&&l){n._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var m=(i._stop-i._start)*1e3/Math.abs(i._rate);n._endTimers[i._id]=setTimeout(n._ended.bind(n,i),m)}return n._webAudio&&!l&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,n._clearTimer(i._id),n._cleanBuffer(i._node),t._autoSuspend()),!n._webAudio&&!l&&n.stop(i._id,!0),n},_clearTimer:function(i){var n=this;if(n._endTimers[i]){if(typeof n._endTimers[i]!="function")clearTimeout(n._endTimers[i]);else{var o=n._soundById(i);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[i],!1)}delete n._endTimers[i]}return n},_soundById:function(i){for(var n=this,o=0;o<n._sounds.length;o++)if(i===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var i=this;i._drain();for(var n=0;n<i._sounds.length;n++)if(i._sounds[n]._ended)return i._sounds[n].reset();return new a(i)},_drain:function(){var i=this,n=i._pool,o=0,l=0;if(!(i._sounds.length<n)){for(l=0;l<i._sounds.length;l++)i._sounds[l]._ended&&o++;for(l=i._sounds.length-1;l>=0;l--){if(o<=n)return;i._sounds[l]._ended&&(i._webAudio&&i._sounds[l]._node&&i._sounds[l]._node.disconnect(0),i._sounds.splice(l,1),o--)}}},_getSoundIds:function(i){var n=this;if(typeof i>"u"){for(var o=[],l=0;l<n._sounds.length;l++)o.push(n._sounds[l]._id);return o}else return[i]},_refreshBuffer:function(i){var n=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=r[n._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),n},_cleanBuffer:function(i){var n=this,o=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!i.bufferSource)return n;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),o))try{i.bufferSource.buffer=t._scratchBuffer}catch{}return i.bufferSource=null,n},_clearSound:function(i){var n=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);n||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(i){this._parent=i,this.init()};a.prototype={init:function(){var i=this,n=i._parent;return i._muted=n._muted,i._loop=n._loop,i._volume=n._volume,i._rate=n._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,n._sounds.push(i),i.create(),i},create:function(){var i=this,n=i._parent,o=t._muted||i._muted||i._parent._muted?0:i._volume;return n._webAudio?(i._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(o,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=n._src,i._node.preload=n._preload===!0?"auto":n._preload,i._node.volume=o*t.volume(),i._node.load()),i},reset:function(){var i=this,n=i._parent;return i._muted=n._muted,i._loop=n._loop,i._volume=n._volume,i._rate=n._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,n=i._parent;n._duration=Math.ceil(i._node.duration*10)/10,Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,n=i._parent;n._duration===1/0&&(n._duration=Math.ceil(i._node.duration*10)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=n._duration*1e3),n._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var r={},s=function(i){var n=i._src;if(r[n]){i._duration=r[n].duration,h(i);return}if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),l=new Uint8Array(o.length),m=0;m<o.length;++m)l[m]=o.charCodeAt(m);g(l.buffer,i)}else{var u=new XMLHttpRequest;u.open(i._xhr.method,n,!0),u.withCredentials=i._xhr.withCredentials,u.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(d){u.setRequestHeader(d,i._xhr.headers[d])}),u.onload=function(){var d=(u.status+"")[0];if(d!=="0"&&d!=="2"&&d!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".");return}g(u.response,i)},u.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete r[n],i.load())},p(u)}},p=function(i){try{i.send()}catch{i.onerror()}},g=function(i,n){var o=function(){n._emit("loaderror",null,"Decoding audio data failed.")},l=function(m){m&&n._sounds.length>0?(r[n._src]=m,h(n,m)):o()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(l).catch(o):t.ctx.decodeAudioData(i,l,o)},h=function(i,n){n&&!i._duration&&(i._duration=n.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},y=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=n?parseInt(n[1],10):null;if(i&&o&&o<9){var l=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!l&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:e}}),typeof ge<"u"&&(ge.Howler=t,ge.Howl=e),typeof global<"u"?(global.HowlerGlobal=c,global.Howler=t,global.Howl=e,global.Sound=a):typeof window<"u"&&(window.HowlerGlobal=c,window.Howler=t,window.Howl=e,window.Sound=a)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var a=e._howls.length-1;a>=0;a--)e._howls[a].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,a){var r=this;if(!r.ctx||!r.ctx.listener)return r;if(e=typeof e!="number"?r._pos[1]:e,a=typeof a!="number"?r._pos[2]:a,typeof t=="number")r._pos=[t,e,a],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]);else return r._pos;return r},HowlerGlobal.prototype.orientation=function(t,e,a,r,s,p){var g=this;if(!g.ctx||!g.ctx.listener)return g;var h=g._orientation;if(e=typeof e!="number"?h[1]:e,a=typeof a!="number"?h[2]:a,r=typeof r!="number"?h[3]:r,s=typeof s!="number"?h[4]:s,p=typeof p!="number"?h[5]:p,typeof t=="number")g._orientation=[t,e,a,r,s,p],typeof g.ctx.listener.forwardX<"u"?(g.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),g.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),g.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),g.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),g.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),g.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):g.ctx.listener.setOrientation(t,e,a,r,s,p);else return h;return g},Howl.prototype.init=(function(t){return function(e){var a=this;return a._orientation=e.orientation||[1,0,0],a._stereo=e.stereo||null,a._pos=e.pos||null,a._pannerAttr={coneInnerAngle:typeof e.coneInnerAngle<"u"?e.coneInnerAngle:360,coneOuterAngle:typeof e.coneOuterAngle<"u"?e.coneOuterAngle:360,coneOuterGain:typeof e.coneOuterGain<"u"?e.coneOuterGain:0,distanceModel:typeof e.distanceModel<"u"?e.distanceModel:"inverse",maxDistance:typeof e.maxDistance<"u"?e.maxDistance:1e4,panningModel:typeof e.panningModel<"u"?e.panningModel:"HRTF",refDistance:typeof e.refDistance<"u"?e.refDistance:1,rolloffFactor:typeof e.rolloffFactor<"u"?e.rolloffFactor:1},a._onstereo=e.onstereo?[{fn:e.onstereo}]:[],a._onpos=e.onpos?[{fn:e.onpos}]:[],a._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,e){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(t,e)}}),a;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof e>"u")if(typeof t=="number")a._stereo=t,a._pos=[t,0,0];else return a._stereo;for(var s=a._getSoundIds(e),p=0;p<s.length;p++){var g=a._soundById(s[p]);if(g)if(typeof t=="number")g._stereo=t,g._pos=[t,0,0],g._node&&(g._pannerAttr.panningModel="equalpower",(!g._panner||!g._panner.pan)&&c(g,r),r==="spatial"?typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):g._panner.setPosition(t,0,0):g._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",g._id);else return g._stereo}return a},Howl.prototype.pos=function(t,e,a,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,e,a,r)}}),s;if(e=typeof e!="number"?0:e,a=typeof a!="number"?-.5:a,typeof r>"u")if(typeof t=="number")s._pos=[t,e,a];else return s._pos;for(var p=s._getSoundIds(r),g=0;g<p.length;g++){var h=s._soundById(p[g]);if(h)if(typeof t=="number")h._pos=[t,e,a],h._node&&((!h._panner||h._panner.pan)&&c(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setPosition(t,e,a)),s._emit("pos",h._id);else return h._pos}return s},Howl.prototype.orientation=function(t,e,a,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,e,a,r)}}),s;if(e=typeof e!="number"?s._orientation[1]:e,a=typeof a!="number"?s._orientation[2]:a,typeof r>"u")if(typeof t=="number")s._orientation=[t,e,a];else return s._orientation;for(var p=s._getSoundIds(r),g=0;g<p.length;g++){var h=s._soundById(p[g]);if(h)if(typeof t=="number")h._orientation=[t,e,a],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),c(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setOrientation(t,e,a)),s._emit("orientation",h._id);else return h._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,e=arguments,a,r,s;if(!t._webAudio)return t;if(e.length===0)return t._pannerAttr;if(e.length===1)if(typeof e[0]=="object")a=e[0],typeof r>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),t._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(e[0],10)),s?s._pannerAttr:t._pannerAttr;else e.length===2&&(a=e[0],r=parseInt(e[1],10));for(var p=t._getSoundIds(r),g=0;g<p.length;g++)if(s=t._soundById(p[g]),s){var h=s._pannerAttr;h={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:h.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:h.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:h.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:h.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:h.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:h.panningModel};var y=s._panner;y||(s._pos||(s._pos=t._pos||[0,0,-.5]),c(s,"spatial"),y=s._panner),y.coneInnerAngle=h.coneInnerAngle,y.coneOuterAngle=h.coneOuterAngle,y.coneOuterGain=h.coneOuterGain,y.distanceModel=h.distanceModel,y.maxDistance=h.maxDistance,y.refDistance=h.refDistance,y.rolloffFactor=h.rolloffFactor,y.panningModel=h.panningModel}return t},Sound.prototype.init=(function(t){return function(){var e=this,a=e._parent;e._orientation=a._orientation,e._stereo=a._stereo,e._pos=a._pos,e._pannerAttr=a._pannerAttr,t.call(this),e._stereo?a.stereo(e._stereo):e._pos&&a.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var e=this,a=e._parent;return e._orientation=a._orientation,e._stereo=a._stereo,e._pos=a._pos,e._pannerAttr=a._pannerAttr,e._stereo?a.stereo(e._stereo):e._pos?a.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,a._refreshBuffer(e)),t.call(this)}})(Sound.prototype.reset);var c=function(t,e){e=e||"spatial",e==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var ba=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275mod=gt({type:c});static \u0275inj=ut({imports:[Z,Z]})}return c})();var yi=new pt("MATERIAL_ANIMATIONS");var Ye=null;function Ci(){return D(yi,{optional:!0})?.animationsDisabled||D(je,{optional:!0})==="NoopAnimations"?"di-disabled":(Ye??=D(Be).matchMedia("(prefers-reduced-motion)").matches,Ye?"reduced-motion":"enabled")}function ce(){return Ci()!=="enabled"}var X=(function(c){return c[c.FADING_IN=0]="FADING_IN",c[c.VISIBLE=1]="VISIBLE",c[c.FADING_OUT=2]="FADING_OUT",c[c.HIDDEN=3]="HIDDEN",c})(X||{}),ke=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=X.HIDDEN;constructor(t,e,a,r=!1){this._renderer=t,this.element=e,this.config=a,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},Qe=re({passive:!0,capture:!0}),Pe=class{_events=new Map;addHandler(t,e,a,r){let s=this._events.get(e);if(s){let p=s.get(a);p?p.add(r):s.set(a,new Set([r]))}else this._events.set(e,new Map([[a,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Qe)})}removeHandler(t,e,a){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(a),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Qe)))}_delegateEventHandler=t=>{let e=qt(t);e&&this._events.get(t.type)?.forEach((a,r)=>{(r===e||r.contains(e))&&a.forEach(s=>s.handleEvent(t))})}},Yt={enterDuration:225,exitDuration:150},xi=800,Ze=re({passive:!0,capture:!0}),Xe=["mousedown","touchstart"],Je=["mouseup","mouseleave","touchend","touchcancel"],Mi=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275cmp=R({type:c,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(a,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return c})(),le=class c{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Pe;constructor(t,e,a,r,s){this._target=t,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=oe(a)),s&&s.get(se).load(Mi)}fadeInRipple(t,e,a={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=A(A({},Yt),a.animation);a.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let p=a.radius||wi(t,e,r),g=t-r.left,h=e-r.top,y=s.enterDuration,i=document.createElement("div");i.classList.add("mat-ripple-element"),i.style.left=`${g-p}px`,i.style.top=`${h-p}px`,i.style.height=`${p*2}px`,i.style.width=`${p*2}px`,a.color!=null&&(i.style.backgroundColor=a.color),i.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(i);let n=window.getComputedStyle(i),o=n.transitionProperty,l=n.transitionDuration,m=o==="none"||l==="0s"||l==="0s, 0s"||r.width===0&&r.height===0,u=new ke(this,i,a,m);i.style.transform="scale3d(1, 1, 1)",u.state=X.FADING_IN,a.persistent||(this._mostRecentTransientRipple=u);let d=null;return!m&&(y||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let _=()=>{d&&(d.fallbackTimer=null),clearTimeout(S),this._finishRippleTransition(u)},C=()=>this._destroyRipple(u),S=setTimeout(C,y+100);i.addEventListener("transitionend",_),i.addEventListener("transitioncancel",C),d={onTransitionEnd:_,onTransitionCancel:C,fallbackTimer:S}}),this._activeRipples.set(u,d),(m||!y)&&this._finishRippleTransition(u),u}fadeOutRipple(t){if(t.state===X.FADING_OUT||t.state===X.HIDDEN)return;let e=t.element,a=A(A({},Yt),t.config.animation);e.style.transitionDuration=`${a.exitDuration}ms`,e.style.opacity="0",t.state=X.FADING_OUT,(t._animationForciblyDisabledThroughCss||!a.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=oe(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Xe.forEach(a=>{c._eventManager.addHandler(this._ngZone,a,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Je.forEach(e=>{this._triggerElement.addEventListener(e,this,Ze)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===X.FADING_IN?this._startFadeOutTransition(t):t.state===X.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:a}=t.config;t.state=X.VISIBLE,!a&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=X.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=$e(t),a=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+xi;!this._target.rippleDisabled&&!e&&!a&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Ve(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let a=0;a<e.length;a++)this.fadeInRipple(e[a].clientX,e[a].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===X.VISIBLE||t.config.terminateOnPointerUp&&t.state===X.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(Xe.forEach(e=>c._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(Je.forEach(e=>t.removeEventListener(e,this,Ze)),this._pointerUpEventsRegistered=!1))}};function wi(c,t,e){let a=Math.max(Math.abs(c-e.left),Math.abs(c-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(a*a+r*r)}var ti=new pt("mat-ripple-global-options");var ki={capture:!0},Pi=["focus","mousedown","mouseenter","touchstart"],Ae="mat-ripple-loader-uninitialized",Oe="mat-ripple-loader-class-name",ei="mat-ripple-loader-centered",de="mat-ripple-loader-disabled",ii=(()=>{class c{_document=D(Ut);_animationsDisabled=ce();_globalRippleOptions=D(ti,{optional:!0});_platform=D(ne);_ngZone=D(Ft);_injector=D(Xt);_eventCleanups;_hosts=new Map;constructor(){let e=D(ze).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Pi.map(a=>e.listen(this._document,a,this._onInteraction,ki)))}ngOnDestroy(){let e=this._hosts.keys();for(let a of e)this.destroyRipple(a);this._eventCleanups.forEach(a=>a())}configureRipple(e,a){e.setAttribute(Ae,this._globalRippleOptions?.namespace??""),(a.className||!e.hasAttribute(Oe))&&e.setAttribute(Oe,a.className||""),a.centered&&e.setAttribute(ei,""),a.disabled&&e.setAttribute(de,"")}setDisabled(e,a){let r=this._hosts.get(e);r?(r.target.rippleDisabled=a,!a&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):a?e.setAttribute(de,""):e.removeAttribute(de)}_onInteraction=e=>{let a=qt(e);if(a instanceof HTMLElement){let r=a.closest(`[${Ae}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let a=this._document.createElement("span");a.classList.add("mat-ripple",e.getAttribute(Oe)),e.append(a);let r=this._globalRippleOptions,s=this._animationsDisabled?0:r?.animation?.enterDuration??Yt.enterDuration,p=this._animationsDisabled?0:r?.animation?.exitDuration??Yt.exitDuration,g={rippleDisabled:this._animationsDisabled||r?.disabled||e.hasAttribute(de),rippleConfig:{centered:e.hasAttribute(ei),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:p}}},h=new le(g,this._ngZone,a,this._platform,this._injector),y=!g.rippleDisabled;y&&h.setupTriggerEvents(e),this._hosts.set(e,{target:g,renderer:h,hasSetUpEvents:y}),e.removeAttribute(Ae)}destroyRipple(e){let a=this._hosts.get(e);a&&(a.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(a){return new(a||c)};static \u0275prov=j({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();var ai=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275cmp=R({type:c,selectors:[["structural-styles"]],decls:0,vars:0,template:function(a,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return c})();var Ai=["mat-icon-button",""],Oi=["*"],Si=new pt("MAT_BUTTON_CONFIG");function ni(c){return c==null?void 0:we(c)}var ri=(()=>{class c{_elementRef=D(Jt);_ngZone=D(Ft);_animationsDisabled=ce();_config=D(Si,{optional:!0});_focusMonitor=D(He);_cleanupClick;_renderer=D(te);_rippleLoader=D(ii);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(e){this.tabIndex=e}constructor(){D(se).load(ai);let e=this._elementRef.nativeElement;this._isAnchor=e.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(e,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",a){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,a):this._elementRef.nativeElement.focus(a)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}))}static \u0275fac=function(a){return new(a||c)};static \u0275dir=Gt({type:c,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(a,r){a&2&&(q("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),Wt(r.color?"mat-"+r.color:""),V("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Lt],disabled:[2,"disabled","disabled",Lt],ariaDisabled:[2,"aria-disabled","ariaDisabled",Lt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Lt],tabIndex:[2,"tabIndex","tabIndex",ni],_tabindex:[2,"tabindex","_tabindex",ni]}})}return c})(),Qt=(()=>{class c extends ri{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(a){return new(a||c)};static \u0275cmp=R({type:c,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[ee],attrs:Ai,ngContentSelectors:Oi,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(a,r){a&1&&(xt(),ie(0,"span",0),Mt(1),ie(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return c})();var me=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275mod=gt({type:c});static \u0275inj=ut({imports:[Z,Z]})}return c})();var ue=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275mod=gt({type:c});static \u0275inj=ut({imports:[Z,me,Z]})}return c})();var si=(()=>{class c{isErrorState(e,a){return!!(e&&e.invalid&&(e.touched||a&&a.submitted))}static \u0275fac=function(a){return new(a||c)};static \u0275prov=j({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();var Ii=new pt("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var qn=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275mod=gt({type:c});static \u0275inj=ut({providers:[si,{provide:Ii,useValue:{separatorKeyCodes:[13]}}],imports:[Z,me,Z]})}return c})();var kt=class kt{constructor(){this.artistVerificationsSubject=new P([]);this.trackVerificationsSubject=new P([]);this.projectVerificationSubject=new P(null);this.artistVerifications$=this.artistVerificationsSubject.asObservable();this.trackVerifications$=this.trackVerificationsSubject.asObservable();this.projectVerification$=this.projectVerificationSubject.asObservable();this.expectedArtists=["SpiralFlip","eili","Ariatec","MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho","AZALI","Aloysius","potatoTeto","Artisan","Mei Naganowa","Evin a'k","BilliumMoto","Elliot Hsu","Yuzuki","LucaProject","Koway","\u4F0D\u4E00","Nstryder","MoAE","dystopian tanuki","Heem","Woojinee","Bigg Milk","Gardens","Sad Keyboard Guy","Futsuunohito","shishishiena"];this.expectedTracks=[{id:"1",title:"Blinding Dawn",expectedArtists:["SpiralFlip","eili"]},{id:"2",title:"Hollow Crown",expectedArtists:["Ariatec"]},{id:"3",title:"\u6681\u306E\u59EB",expectedArtists:["MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho"]},{id:"4",title:"Lux Nova",expectedArtists:["AZALI","Aloysius"]},{id:"5",title:"Hall of Silent Echoes",expectedArtists:["potatoTeto"]},{id:"6",title:"Lirica",expectedArtists:["Artisan"]},{id:"7",title:"To Defy The Beankeeper",expectedArtists:["Mei Naganowa"]},{id:"8",title:"Trench",expectedArtists:["Evin a'k"]},{id:"9",title:"Blooming in the Square",expectedArtists:["BilliumMoto"]},{id:"10",title:"Skies in Abberation",expectedArtists:["Elliot Hsu"]},{id:"11",title:"song of the nymphs",expectedArtists:["Yuzuki"]},{id:"12",title:"Light Guardian",expectedArtists:["LucaProject"]},{id:"13",title:"Enso Antumbra",expectedArtists:["Koway","\u4F0D\u4E00"]},{id:"14",title:"You're In My Way",expectedArtists:["Nstryder"]},{id:"15",title:"Remember you",expectedArtists:["MoAE"]},{id:"16",title:"Hidden passage",expectedArtists:["dystopian tanuki"]},{id:"17",title:"Last Dance",expectedArtists:["Heem","Woojinee"]},{id:"18",title:"Second Guess",expectedArtists:["Bigg Milk"]},{id:"19",title:"Fractured Light",expectedArtists:["Gardens","Sad Keyboard Guy","eili"]},{id:"20",title:"Beyond the Veil of Light",expectedArtists:["Futsuunohito","shishishiena"]}];this.initializeVerification()}initializeVerification(){this.runArtistVerification(),this.runTrackVerification(),this.runProjectVerification()}runArtistVerification(){let t=this.expectedArtists.map(e=>this.verifyIndividualArtist(e));this.artistVerificationsSubject.next(t)}verifyIndividualArtist(t){let e=[],a=this.checkAvatarExists(t);a||e.push(`Avatar missing for ${t}`);let r=this.verifySocialLinks(t);r||e.push(`Social links need verification for ${t}`);let s=this.verifyArtistRoles(t);s||e.push(`Role definitions need review for ${t}`);let p=this.verifyContributions(t);return p||e.push(`Contributions not fully documented for ${t}`),{artistName:t,avatarExists:a,socialLinksVerified:r,rolesAccurate:s,contributionsDocumented:p,fullyVerified:a&&r&&s&&p,issues:e}}checkAvatarExists(t){let e=`/assets/images/artists/${t}.png`;return this.expectedArtists.includes(t)}verifySocialLinks(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!1,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyArtistRoles(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!0,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyContributions(t){return this.expectedTracks.filter(a=>a.expectedArtists.includes(t)).length>0}runTrackVerification(){let t=this.expectedTracks.map(e=>this.verifyIndividualTrack(e));this.trackVerificationsSubject.next(t)}verifyIndividualTrack(t){let e=[],a=0,r=this.verifyTrackArtists(t);r?a+=20:e.push(`Missing artists in ${t.title}`);let s=this.verifyMainArtist(t);s?a+=20:e.push(`Main artist incorrect for ${t.title}`);let p=this.verifyFeaturedArtists(t);p?a+=15:e.push(`Featured artists incomplete for ${t.title}`);let g=this.verifyInstrumentalists(t);g?a+=15:e.push(`Instrumentalists incomplete for ${t.title}`);let h=this.verifyTechnicalCredits(t);h?a+=10:e.push(`Technical credits incomplete for ${t.title}`);let y=this.verifyPercentages(t);y?a+=10:e.push(`Contribution percentages don't add up for ${t.title}`);let i=this.verifySocialLinksWorking(t);i?a+=5:e.push(`Social links need verification for ${t.title}`);let n=this.verifyAvatarsLinked(t);n?a+=5:e.push(`Avatars not properly linked for ${t.title}`);let o=a===100;return{trackId:t.id,trackTitle:t.title,allArtistsIdentified:r,mainArtistCorrect:s,featuredArtistsComplete:p,instrumentalistsComplete:g,technicalCreditsComplete:h,percentagesAddUp:y,socialLinksWorking:i,avatarsLinked:n,fullyVerified:o,verificationScore:a,issues:e,lastVerified:new Date}}verifyTrackArtists(t){return t.expectedArtists.length>0}verifyMainArtist(t){return t.expectedArtists.length>0}verifyFeaturedArtists(t){let e=t.expectedArtists.length>1;return!0}verifyInstrumentalists(t){return t.id==="3"?t.expectedArtists.includes("Justin Thornburgh")&&t.expectedArtists.includes("v1ris")&&t.expectedArtists.includes("Rita Kamishiro")&&t.expectedArtists.includes("Marcus Ho"):!0}verifyTechnicalCredits(t){return!0}verifyPercentages(t){return!0}verifySocialLinksWorking(t){return!0}verifyAvatarsLinked(t){return!0}runProjectVerification(){let t=this.artistVerificationsSubject.value,e=this.trackVerificationsSubject.value,a=this.expectedArtists.length,r=t.filter(n=>n.fullyVerified).length,s=this.expectedTracks.length,p=e.filter(n=>n.fullyVerified).length,g=Math.round(r/a*50+p/s*50),h=[],y=[];r<a&&h.push(`${a-r} artists need verification`),p<s&&h.push(`${s-p} tracks need verification`),g<100&&(y.push("Review all artist social links for accuracy"),y.push("Verify all avatar images are properly linked"),y.push("Check contribution percentages add up correctly"),y.push("Ensure all instrumentalists are credited"));let i={totalArtists:a,verifiedArtists:r,totalTracks:s,verifiedTracks:p,overallScore:g,criticalIssues:h,recommendations:y};this.projectVerificationSubject.next(i)}getDetailedVerificationReport(){return this.projectVerification$.pipe(T(t=>{let e=this.artistVerificationsSubject.value,a=this.trackVerificationsSubject.value,r=t?.criticalIssues.length||0,s=t?.recommendations.length||0,p="Excellent";return t&&t.overallScore<80?p="Needs Work":t&&t.overallScore<95&&(p="Good"),{artistReport:e,trackReport:a,projectReport:t,summary:{overallHealth:p,criticalIssueCount:r,recommendationCount:s}}}))}refreshVerification(){this.initializeVerification()}};kt.\u0275fac=function(e){return new(e||kt)},kt.\u0275prov=j({token:kt,factory:kt.\u0275fac,providedIn:"root"});var pe=kt;var Pt=class Pt{constructor(t,e,a){this.http=t;this.artistCreditService=e;this.creditVerificationService=a;this.destroy$=new U;this.currentTimeSubject=new P(0);this.tracksSubject=new P([]);this.currentTrackSubject=new P(null);this.currentProjectSubject=new P("phantasia1");this.allProjectTracksSubject=new P([]);this.currentTime$=this.currentTimeSubject.asObservable();this.tracks$=this.tracksSubject.asObservable();this.currentTrack$=this.currentTrackSubject.asObservable();this.currentProject$=this.currentProjectSubject.asObservable();this.allProjectTracks$=this.allProjectTracksSubject.asObservable();this.currentArtists$=Dt([this.currentTime$,this.tracks$]).pipe(mt(25),T(([t,e])=>this.getCurrentArtists(t,e)),Q((t,e)=>this.arraysEqual(t,e)),yt(1),E(this.destroy$));this.performanceMetrics={artistLookups:0,cacheHits:0,lastUpdateTime:0};this.artistCache=new Map;this.maxCacheEntries=20;this.phantasia2TrackToFilenameMap={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"};this.phantasia1TrackToFilenameMap={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"};this.artistColorCache=new Map;this.artistColors=["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"];this.initializeService()}ngOnDestroy(){try{console.log("[DynamicArtistService] Starting cleanup..."),this.destroy$.next(),this.destroy$.complete(),this.artistCache.clear(),this.artistColorCache.clear(),this.currentTimeSubject.complete(),this.tracksSubject.complete(),this.currentTrackSubject.complete(),this.currentProjectSubject.complete(),this.allProjectTracksSubject.complete(),console.log("[DynamicArtistService] Performance metrics:",{totalLookups:this.performanceMetrics.artistLookups,cacheHits:this.performanceMetrics.cacheHits,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)}),console.log("[DynamicArtistService] Cleanup completed successfully")}catch(t){console.error("[DynamicArtistService] Error during cleanup:",t)}}setCacheWithEviction(t,e){if(this.artistCache.size>=this.maxCacheEntries){let a=this.artistCache.keys().next().value;a!==void 0&&this.artistCache.delete(a)}this.artistCache.set(t,e)}getPerformanceMetrics(){return B(A({},this.performanceMetrics),{cacheSize:this.artistCache.size,colorCacheSize:this.artistColorCache.size,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)})}getTrackFilename(t){return this.currentProjectSubject.value==="phantasia1"?this.phantasia1TrackToFilenameMap[t]||`${t.toString().padStart(2,"0")}. Unknown Track.ogg`:this.phantasia2TrackToFilenameMap[t]||`${t}. Unknown Track.ogg`}initializeService(){this.loadProjectData(this.currentProjectSubject.value)}loadTrackData(){let t=this.createTracksFromTimestamps();this.tracksSubject.next(t)}loadProjectData(t){if(t==="phantasia2")this.loadTrackData();else if(t==="phantasia1"){let e=this.createPhantasia1TracksFromData();this.tracksSubject.next(e)}}updateCurrentTime(t){try{if(typeof t!="number"||isNaN(t)||t<0){console.warn("[DynamicArtistService] Invalid time value:",t);return}if(this.currentTimeSubject.closed){console.warn("[DynamicArtistService] Attempted to update time on closed subject");return}this.currentTimeSubject.next(t);let e=this.tracksSubject.value;if(!e||e.length===0)return;let a=this.findTrackByTime(t,e),r=this.currentTrackSubject.value;if(a!==r){if(this.currentTrackSubject.closed||this.currentTrackSubject.next(a),a)try{this.artistCreditService.updateCurrentTrack(a.id)}catch(s){console.error("[DynamicArtistService] Error updating artist credits:",s)}console.log(`[DynamicArtistService] Track changed from ${r?.id||"none"} to ${a?.id||"none"}`)}}catch(e){console.error("[DynamicArtistService] Error updating current time:",e)}}getCurrentTrackCompleteCredits(){return this.artistCreditService.currentTrackCredits$}getAllPhantasia2ArtistsComplete(){return this.artistCreditService.getAllPhantasia2Artists()}getVerificationStatus(){return this.creditVerificationService.getDetailedVerificationReport()}isCurrentTrackVerified(){return Dt([this.currentTrack$,this.creditVerificationService.trackVerifications$]).pipe(T(([t,e])=>t&&e.find(r=>r.trackId===t.id)?.fullyVerified||!1))}setCurrentProject(t){try{if(!t||!["phantasia1","phantasia2"].includes(t)){console.error("[DynamicArtistService] Invalid project ID:",t);return}if(this.currentProjectSubject.closed){console.warn("[DynamicArtistService] Attempted to update project on closed subject");return}if(this.currentProjectSubject.value===t){console.log(`[DynamicArtistService] Project ${t} already active`);return}this.currentProjectSubject.next(t);try{this.artistCreditService.setCurrentProject(t)}catch(a){console.error("[DynamicArtistService] Error updating artist credit service:",a)}try{this.loadProjectData(t)}catch(a){console.error("[DynamicArtistService] Error loading project data:",a)}console.log(`[DynamicArtistService] Successfully switched to project: ${t}`)}catch(e){console.error("[DynamicArtistService] Error setting current project:",e)}}getCurrentProjectMetadata(){return Dt([this.currentProject$,this.artistCreditService.projectMetadata$]).pipe(T(([t,e])=>e.find(a=>a.id===t)||null))}getAllArtistsAllProjects(){return this.artistCreditService.getAllArtistsAllProjects()}getCrossProjectArtists(){return this.artistCreditService.getCrossProjectArtists()}getProjectArtists(t){return this.artistCreditService.getProjectArtists(t)}getProjectComparison(){return this.artistCreditService.projectMetadata$.pipe(T(t=>{let e=this.getProjectArtists("phantasia1"),a=this.getProjectArtists("phantasia2"),r=this.getCrossProjectArtists(),s=t.find(h=>h.id==="phantasia1")||null,p=t.find(h=>h.id==="phantasia2")||null,g=new Set([...e.map(h=>h.artistName),...a.map(h=>h.artistName)]);return{phantasia1:{artists:e.length,tracks:s?.totalTracks||0,metadata:s},phantasia2:{artists:a.length,tracks:p?.totalTracks||0,metadata:p},crossProjectArtists:r.length,totalUniqueArtists:g.size}}))}getCurrentArtists(t,e){this.performanceMetrics.artistLookups++,this.performanceMetrics.lastUpdateTime=Date.now();let a=this.findTrackByTime(t,e);if(!a)return[];let r=`${a.id}-${t.toFixed(0)}`,s=this.artistCache.get(r);if(s)return this.performanceMetrics.cacheHits++,s;let p=this.buildArtistArray(a);return this.setCacheWithEviction(r,p),p}buildArtistArray(t){let e=[],a=1+t.features.length+t.collaborators.length;e.length=a;let r=0;e[r++]=this.createArtistCardData(t.mainArtist,"Main Artist");for(let s of t.features)e[r++]=this.createArtistCardData(s.name,"Featured Artist",s.socialLinks);for(let s of t.collaborators)e[r++]=this.createArtistCardData(s.name,"Collaborator",s.socialLinks);return e.length=r,e}findTrackByTime(t,e){return e.find(a=>t>=a.startTime&&t<a.endTime)||null}createArtistCardData(t,e,a={}){return{id:this.generateArtistId(t),name:t,displayName:t,role:e,socialLinks:a,color:this.generateColorForArtist(t)}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}generateColorForArtist(t){let e=this.artistColorCache.get(t);if(e)return e;let a=0;for(let s=0;s<t.length;s++)a=(a<<5)-a+t.charCodeAt(s)&4294967295;let r=this.artistColors[Math.abs(a)%this.artistColors.length];return this.artistColorCache.set(t,r),r}arraysEqual(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==e[a]?.id)return!1;return!0}createTracksFromTimestamps(){let t=`0:00 SpiralFlip feat. eili: Blinding Dawn
2:48 Ariatec: Hollow Crown
5:44 MB feat. Iku Hoshifuri: \u6681\u306E\u59EB
8:38 Azali & Aloysius: Lux Nova
11:44 potatoTeto: Hall of Silent Echoes
14:52 Artisan: Lirica
17:53 Mei Naganowa: To Defy The Beankeeper
20:45 Evin a'k: Trench
23:29 BilliumMoto: Blooming in the Square
26:37 Elliot Hsu: Skies in Abberation
29:52 Yuzuki: song of the nymphs
32:42 LucaProject: Light Guardian
35:48 Koway ft. \u4F0D: Enso Antumbra
38:57 Nstryder: You're In My Way
42:05 MoAE.: Remember you
45:09 dystopian tanuki: Hidden passage
48:22 Heem feat. woojinee: Last Dance (detune version)
51:25 Bigg Milk: Second Guess
54:15 Gardens & Sad Keyboard Guy ft. eili: Fractured Light
57:04 Futsuunohito: Beyond the Veil of Light`,e=[],a=t.split(`
`);return a.forEach((r,s)=>{let p=r.match(/(\d+):(\d+)\s+(.+?):\s+(.+)/);if(p){let[,g,h,y,i]=p,n=parseInt(g)*60+parseInt(h),o=a[s+1],l=3600;if(o){let K=o.match(/(\d+):(\d+)/);K&&(l=parseInt(K[1])*60+parseInt(K[2]))}let m=[],u=[],d=s+1,_=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,C=y.match(_);if(C){let[,K,k]=C;m.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(k)})}let S=/(.+?)\s+&\s+(.+)/,Y=y.match(S);if(Y&&!C){let[,K,k]=Y;u.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(k)})}switch(d){case 3:u.push({id:"justin-thornburgh",name:"Justin Thornburgh",displayName:"Justin Thornburgh",role:"Accordion",socialLinks:this.getSocialLinksForArtist("Justin Thornburgh")},{id:"v1ris",name:"v1ris",displayName:"v1ris",role:"Violin",socialLinks:this.getSocialLinksForArtist("v1ris")},{id:"rita-kamishiro",name:"Rita Kamishiro",displayName:"Rita Kamishiro",role:"Viola",socialLinks:this.getSocialLinksForArtist("Rita Kamishiro")},{id:"marcus-ho",name:"Marcus Ho",displayName:"Marcus Ho",role:"Cello",socialLinks:this.getSocialLinksForArtist("Marcus Ho")});break;case 7:u.push({id:"anri-arcane",name:"Anri Arcane",displayName:"Anri Arcane",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"hxvoc",name:"HXVOC",displayName:"HXVOC",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"miyamai-moca",name:"Miyamai Moca",displayName:"Miyamai Moca",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"ninezero",name:"Ninezero",displayName:"Ninezero",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 11:u.push({id:"hanakuma-chifuyu",name:"Hanakuma Chifuyu",displayName:"Hanakuma Chifuyu",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 17:m.some(K=>K.name.toLowerCase()==="woojinee")||m.push({id:this.generateArtistId("woojinee"),name:"woojinee",displayName:"Woojinee",role:"Violin",socialLinks:this.getSocialLinksForArtist("woojinee")});break;case 19:u.some(K=>K.name==="Sad Keyboard Guy")||u.push({id:this.generateArtistId("Sad Keyboard Guy"),name:"Sad Keyboard Guy",displayName:"Sad Keyboard Guy",role:"Main Artist",socialLinks:this.getSocialLinksForArtist("Sad Keyboard Guy")});break;case 20:u.push({id:this.generateArtistId("shishishiena"),name:"shishishiena",displayName:"shishishiena",role:"Voice Actor",socialLinks:this.getSocialLinksForArtist("shishishiena")});break}let ot=y.replace(/\s+(?:feat\.|ft\.)\s+.+/,""),_t=ot;s===0&&m.length>0&&(_t=`${ot} (feat. ${m[0].name})`),e.push({id:(s+1).toString(),title:i,mainArtist:_t,startTime:n,endTime:l,artists:[],features:m,collaborators:u,audioFile:this.getTrackFilename(s+1)})}}),e}getSocialLinksForArtist(t){return{SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},"Justin Thornburgh":{twitter:"https://x.com/JustinThornbur7"},v1ris:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},"Rita Kamishiro":{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},"Marcus Ho":{website:"https://www.marcushomusic.com/"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},potatoTeto:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},Artisan:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},"Mei Naganowa":{twitter:"https://x.com/ReeKDoesDTM"},"Evin a'k":{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},BilliumMoto:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},"Elliot Hsu":{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},Yuzuki:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",twitter:"https://x.com/LucaProject6108",carrd:"https://lucaproject.carrd.co/"},Koway:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},\u4F0D\u4E00:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},\u4F0D:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},Nstryder:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},"MoAE.":{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},"dystopian tanuki":{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},"Bigg Milk":{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},Gardens:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},"Sad Keyboard Guy":{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},Futsuunohito:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},shishishiena:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"},Heem:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},Prower:{twitter:"https://x.com/prowerrr_"},Seycara:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},Qyubey:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},Luscinia:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},\u306F\u304C\u306D:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},Hagane:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},satella:{twitter:"https://x.com/satella0w0",youtube:"https://www.youtube.com/@satella0w0"},sleepy:{twitter:"https://x.com/sleeplessgamign"},Sleepless:{twitter:"https://x.com/sleeplessgamign"},PliXoR:{twitter:"https://x.com/plixormusic"},NapaL:{twitter:"https://x.com/Ve_Xillum"},"\uB098\uD314 NapaL":{twitter:"https://x.com/Ve_Xillum"},yy_artwork:{twitter:"https://x.com/yy_artwork"},"Elegant Sister":{twitter:"https://x.com/ElegantSister"},Len:{twitter:"https://x.com/Len_licht"},Daph:{twitter:"https://x.com/daphshoo"}}[t]||{}}getPhantasia1AudioFilename(t,e,a){return{1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t]||`${String(t).padStart(2,"0")}. ${e} - ${a}.ogg`}createPhantasia1TracksFromData(){let t=[{time:"0:00",artist:"SpiralFlip feat. eili",title:"Phantasia"},{time:"3:00",artist:"Bigg Milk",title:"First Steps"},{time:"6:00",artist:"Heem",title:"Altar of the Sword"},{time:"9:00",artist:"futsuunohito",title:"A Voyage on the Winds of Change"},{time:"12:00",artist:"Prower",title:"Rohkeutta Etsi\xE4"},{time:"15:00",artist:"AZALI & Seycara",title:"Ivory Flowers"},{time:"18:00",artist:"Qyubey",title:"Outer Bygone Ruins"},{time:"21:00",artist:"Luscinia",title:"Spiral Into the Abyss!"},{time:"24:00",artist:"Gardens & sleepy",title:"Wandering Breeze"},{time:"27:00",artist:"\u306F\u304C\u306D",title:"Mystic Nebula"},{time:"30:00",artist:"LucaProject",title:"Iris"},{time:"33:00",artist:"Mei Naganowa",title:"Half-Asleep in the Middle of Bumfuck Nowhere"},{time:"36:00",artist:"satella",title:"The Traveller"},{time:"39:00",artist:"dystopian tanuki",title:"Childhood memories"}],e=[];return t.forEach((a,r)=>{let[s,p]=a.time.split(":").map(Number),g=s*60+p,h=t[r+1],y=2700;if(h){let[_,C]=h.time.split(":").map(Number);y=_*60+C}let i=[],n=[],o=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,l=a.artist.match(o);if(l){let[,_,C]=l;i.push({id:this.generateArtistId(C),name:C,displayName:C,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(C)})}let m=/(.+?)\s+&\s+(.+)/,u=a.artist.match(m);if(u&&!l){let[,_,C]=u;n.push({id:this.generateArtistId(C),name:C,displayName:C,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(C)})}let d=a.artist.replace(/\s+(?:feat\.|ft\.)\s+.+/,"");u&&!l&&(d=u[1]),e.push({id:`p1-${r+1}`,title:a.title,mainArtist:d,startTime:g,endTime:y,artists:[],features:i,collaborators:n,audioFile:this.getPhantasia1AudioFilename(r+1,a.artist,a.title)})}),e}};Pt.\u0275fac=function(e){return new(e||Pt)($(Rt),$(bt),$(pe))},Pt.\u0275prov=j({token:Pt,factory:Pt.\u0275fac,providedIn:"root"});var rt=Pt;var At=class At{constructor(){this.tracksMap=new Map;this.audioStateSubject=new P({isPlaying:!1,currentTrack:null,currentTime:0,duration:0,volume:.5});this.audioState$=this.audioStateSubject.asObservable();this.audioElement=new Audio,this.initializeTracksMap(),this.setupEventListeners()}initializeTracksMap(){this.tracksMap.set("introduction","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-1","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-2","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("pv","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("information","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("phantasia","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg");for(let t=1;t<=14;t++){let a={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t];a&&(this.tracksMap.set(t.toString(),`assets/audio/Phantasia_1/${a}`),this.tracksMap.set(`track-${t}`,`assets/audio/Phantasia_1/${a}`),this.tracksMap.set(`p1-${t}`,`assets/audio/Phantasia_1/${a}`))}for(let t=1;t<=20;t++){let a={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"}[t];a&&(this.tracksMap.set(`p2-${t}`,`assets/audio/Phantasia_2/${a}`),this.tracksMap.set(`phantasia2-${t}`,`assets/audio/Phantasia_2/${a}`))}}setupEventListeners(){this.audioElement.addEventListener("timeupdate",()=>{this.updateAudioState({currentTime:this.audioElement.currentTime})}),this.audioElement.addEventListener("loadedmetadata",()=>{this.updateAudioState({duration:this.audioElement.duration})}),this.audioElement.addEventListener("ended",()=>{this.updateAudioState({isPlaying:!1,currentTime:0}),this.audioElement.currentTime=0}),this.audioElement.addEventListener("error",t=>{console.error("[AudioService] Error playing audio:",t),this.updateAudioState({isPlaying:!1,currentTrack:null})})}updateAudioState(t){let e=this.audioStateSubject.getValue(),a=A(A({},e),t);this.audioStateSubject.next(a)}playTrack(t){let e=this.tracksMap.get(t);if(!e){console.error(`[AudioService] Track not found: ${t}`);return}this.audioStateSubject.getValue().currentTrack!==t&&(this.audioElement.src=e,this.audioElement.load(),this.updateAudioState({currentTrack:t,currentTime:0})),this.audioElement.play().then(()=>{this.updateAudioState({isPlaying:!0})}).catch(a=>{console.error("[AudioService] Error playing track:",a)})}pause(){this.audioElement.pause(),this.updateAudioState({isPlaying:!1})}togglePlayPause(){let t=this.audioStateSubject.getValue();t.isPlaying?this.pause():t.currentTrack&&this.playTrack(t.currentTrack)}setVolume(t){let e=Math.min(1,Math.max(0,t));this.audioElement.volume=e,this.updateAudioState({volume:e})}seekTo(t){if(this.audioElement.readyState>0){let e=Math.min(this.audioElement.duration,Math.max(0,t));this.audioElement.currentTime=e,this.updateAudioState({currentTime:e})}}setTrackForSection(t){let e=this.audioStateSubject.getValue();this.tracksMap.get(t)&&e.currentTrack!==t&&this.playTrack(t)}};At.\u0275fac=function(e){return new(e||At)},At.\u0275prov=j({token:At,factory:At.\u0275fac,providedIn:"root"});var vt=At;var Zt=_i(li());var Ot=class Ot{constructor(t){this.http=t;this.destroy$=new U;this.isDebugMode=!0;this.audio=null;this.currentTrack=null;this._isPlaying=!1;this.volume=1;this.progress=0;this.isLoading=!1;this.TRACKS={introduction:{title:"Introduction",artist:"An",id:"intro",url:"assets/audio/An - Incident.mp3"},"disc-1":{title:"I can avoid it",artist:"Feryquitous",id:"disc1",url:"assets/audio/Feryquitous - i can avoid it.mp3"},"disc-2":{title:"Quantum Resonance",artist:"An",id:"disc2",url:"assets/audio/An - Quantum Resonance.mp3"},pv:{title:"Neural Network",artist:"Feryquitous",id:"pv",url:"assets/audio/Feryquitous - Neural Network.mp3"},information:{title:"Digital Entropy",artist:"An \xD7 Feryquitous",id:"info",url:"assets/audio/An \xD7 Feryquitous - Digital Entropy.mp3"}};this.audioStateSubject=new P({isPlaying:!1,currentTrack:null,volume:1,progress:0,loading:!1});this.audioEventSubject=new P({type:"pause"});this.errorSubject=new U;this.currentTrackSubject=new P("");this.currentTrack$=this.currentTrackSubject.asObservable();this.audioFiles=[];this.sectionTracks={introduction:"An - Incident.mp3","disc-1":"Feryquitous - i can avoid it.mp3","disc-2":"An - Quantum Resonance.mp3",pv:"Feryquitous - Neural Network.mp3",information:"An \xD7 Feryquitous - Digital Entropy.mp3"};this.uiSounds={"menu-click":"assets/audio/ui/menu-click.mp3","page-turn":"assets/audio/ui/page-turn.mp3",success:"assets/audio/ui/success.mp3",error:"assets/audio/ui/error.mp3"};this.loadAudioFiles(),this.initializeAudio(),this.isDebugMode&&console.log("[AudioService] Initialized")}loadAudioFiles(){return J(this,null,function*(){try{this.audioFiles.push(...Object.values(this.sectionTracks).map(t=>`assets/audio/${t}`)),this.audioFiles.length>0&&this.currentTrackSubject.next(this.audioFiles[0]),this.isDebugMode&&console.log("[AudioService] Audio files loaded:",this.audioFiles)}catch(t){this.handleError("LOAD_ERROR",`Failed to load audio files: ${t instanceof Error?t.message:String(t)}`)}})}initializeAudio(){this.audio=new Audio,this.setupAudioEventListeners()}setupAudioEventListeners(){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.audio.addEventListener("timeupdate",()=>{this.audio&&(this.progress=this.audio.duration?this.audio.currentTime/this.audio.duration*100:0,this.updateAudioState(),this.audioEventSubject.next({type:"timeupdate",data:this.progress}))}),this.audio.addEventListener("ended",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"ended"})}),this.audio.addEventListener("error",t=>{let e=t;this.handleError("LOAD_ERROR",`Failed to load audio: ${e.message||"Unknown error"}`),this.audioEventSubject.next({type:"error",data:e.message})}),this.audio.addEventListener("loadstart",()=>{this.isLoading=!0,this.updateAudioState(),this.audioEventSubject.next({type:"loading"})}),this.audio.addEventListener("canplay",()=>{this.isLoading=!1,this.updateAudioState(),this.audioEventSubject.next({type:"loaded"})}),this.audio.addEventListener("play",()=>{this._isPlaying=!0,this.updateAudioState(),this.audioEventSubject.next({type:"play"})}),this.audio.addEventListener("pause",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"pause"})})}updateAudioState(){this.audioStateSubject.next({isPlaying:this._isPlaying,currentTrack:this.currentTrack,volume:this.volume,progress:this.progress,loading:this.isLoading})}handleError(t,e){this.isDebugMode&&console.error(`[AudioService] ${t}: ${e}`),this.errorSubject.next({type:t,message:e})}setTrackForSection(t){let e=this.TRACKS[t];if(!e){this.handleError("LOAD_ERROR",`No track found for section: ${t}`);return}this.currentTrack?.id!==e.id&&(this.isDebugMode&&console.log(`[AudioService] Setting track for section: ${t}`,e),this.currentTrack=e,this.loadTrack(e),this.currentTrackSubject.next(e.url))}loadTrack(t){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.isLoading=!0,this.updateAudioState(),this.audio.src=t.url;try{this.audio.load()}catch(e){this.handleError("LOAD_ERROR",`Failed to load track: ${e instanceof Error?e.message:String(e)}`)}}play(){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}if(!this.currentTrack){this.handleError("PLAY_ERROR","No track selected");return}this.isDebugMode&&console.log("[AudioService] Playing audio:",this.currentTrack.title),this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(t=>{this.handleError("PLAY_ERROR",`Failed to play audio: ${t instanceof Error?t.message:String(t)}`)})}pause(){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log("[AudioService] Pausing audio"),this.audio.pause(),this._isPlaying=!1,this.updateAudioState()}togglePlay(){this._isPlaying?this.pause():this.play()}setVolume(t){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.volume=Math.max(0,Math.min(1,t)),this.audio.volume=this.volume,this.updateAudioState(),this.isDebugMode&&console.log(`[AudioService] Volume set to: ${this.volume}`)}getCurrentState(){return this.audioStateSubject.asObservable()}getAudioEvents(){return this.audioEventSubject.asObservable()}onPlayStateChange(){return this.getCurrentState().pipe(T(t=>t.isPlaying))}onTrackChange(){return this.currentTrack$}onLoadingStateChange(){return this.getCurrentState().pipe(T(t=>t.loading))}getProgress(){return!this.audio||!this.audio.duration?0:this.audio.currentTime/this.audio.duration}getErrors(){return this.errorSubject.asObservable()}isPlaying(){return this._isPlaying}getCurrentTrack(){return this.currentTrackSubject.value}getNextTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t<this.audioFiles.length-1){let e=this.audioFiles[t+1];return this.currentTrackSubject.next(e),e}return null}getPreviousTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t>0){let e=this.audioFiles[t-1];return this.currentTrackSubject.next(e),e}return null}getTrackList(){return this.audioFiles}getCurrentIndex(){return this.audioFiles.indexOf(this.currentTrackSubject.value)}playUISound(t){if(!this.uiSounds[t]){this.handleError("UI_SOUND_ERROR",`UI sound not found: ${t}`);return}try{let e=new Audio(this.uiSounds[t]);e.volume=.5,e.play().catch(a=>{this.handleError("UI_SOUND_ERROR",`Error playing UI sound: ${a instanceof Error?a.message:String(a)}`)})}catch(e){this.handleError("UI_SOUND_ERROR",`Failed to create UI sound: ${e instanceof Error?e.message:String(e)}`)}}playTrack(t){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log(`[AudioService] Playing track from source: ${t}`),this.currentTrackSubject.next(t),this.isLoading=!0,this.updateAudioState(),this.audio.src=t,this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(e=>{this.handleError("PLAY_ERROR",`Error playing track: ${e instanceof Error?e.message:String(e)}`)})}pauseTrack(){this.pause()}resumeTrack(){this.play()}ngOnDestroy(){this.isDebugMode&&console.log("[AudioService] Destroying service"),this.audio&&(this.audio.onended=null,this.audio.ontimeupdate=null,this.audio.onerror=null,this.audio.oncanplay=null,this.audio.onloadstart=null,this.audio.pause(),this.audio.src="",this.audio=null),this.audioStateSubject.complete(),this.audioEventSubject.complete(),this.currentTrackSubject.complete(),this.errorSubject.complete(),this.destroy$.next(),this.destroy$.complete()}};Ot.\u0275fac=function(e){return new(e||Ot)($(Rt))},Ot.\u0275prov=j({token:Ot,factory:Ot.\u0275fac,providedIn:"root"});var fe=Ot;var St=class St{constructor(t,e,a){this.dynamicArtistService=t;this.audioService=e;this.artistCreditService=a;this.destroy$=new U;this.musicStateSubject=new P({isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"});this.artistFilteringStateSubject=new P({mode:"no-music",currentArtists:[],allArtists:[],displayTitle:"All Phantasia 2 Artists",displaySubtitle:"Showcasing 31 of 31 artists from the album"});this.musicState$=this.musicStateSubject.asObservable();this.artistFilteringState$=this.artistFilteringStateSubject.asObservable();this.currentArtistsForFiltering$=this.artistFilteringState$.pipe(T(t=>t.currentArtists),Q((t,e)=>this.compareArtistArrays(t,e)),yt(1),E(this.destroy$));this.displayInfo$=this.artistFilteringState$.pipe(T(t=>({title:t.displayTitle,subtitle:t.displaySubtitle,mode:t.mode})),Q((t,e)=>t.title===e.title&&t.subtitle===e.subtitle&&t.mode===e.mode),yt(1),E(this.destroy$));this.subscriptions={};this.stateUpdateQueue=[];this.isProcessingQueue=!1;this.initializeService()}ngOnDestroy(){try{console.log("[MusicStateManager] Starting cleanup..."),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,Object.keys(this.subscriptions).forEach(t=>{try{this.subscriptions[t]&&typeof this.subscriptions[t].unsubscribe=="function"&&this.subscriptions[t].unsubscribe()}catch(e){console.error(`[MusicStateManager] Error unsubscribing from ${t}:`,e)}}),this.destroy$.next(),this.destroy$.complete(),console.log("[MusicStateManager] Cleanup completed")}catch(t){console.error("[MusicStateManager] Error during cleanup:",t)}}initializeService(){try{console.log("[MusicStateManager] Initializing service..."),this.loadAllArtistsForShowcase(),this.subscriptions.currentTrack=this.dynamicArtistService.currentTrack$.pipe(Q((t,e)=>t?.id===e?.id),E(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.handleTrackChange(t,"phantasia2")),error:t=>console.error("[MusicStateManager] Error in currentTrack subscription:",t)}),this.subscriptions.currentTime=this.dynamicArtistService.currentTime$.pipe(mt(50),Q(),E(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateCurrentTime(t)),error:t=>console.error("[MusicStateManager] Error in currentTime subscription:",t)}),this.subscriptions.audioState=this.audioService.audioState$.pipe(Q((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),E(this.destroy$)).subscribe({next:t=>{let e=this.musicStateSubject.value;(!e.currentTrack||e.playbackMode!=="phantasia2")&&this.queueStateUpdate(()=>this.handleAudioStateChange(t))},error:t=>console.error("[MusicStateManager] Error in audioState subscription:",t)}),this.subscriptions.trackCredits=this.artistCreditService.currentTrackCredits$.pipe(E(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateTrackCredits(t)),error:t=>console.error("[MusicStateManager] Error in trackCredits subscription:",t)}),console.log("[MusicStateManager] Service initialized with enhanced error handling")}catch(t){console.error("[MusicStateManager] Error during initialization:",t)}}handleTrackChange(t,e){try{let a=this.musicStateSubject.value;if(t&&a.currentTrack?.id===t.id){console.log(`[MusicStateManager] Track ${t.id} already active, skipping update`);return}if(t){let r=null;try{r=this.artistCreditService.getTrackCredits(t.id)}catch(y){console.warn(`[MusicStateManager] Could not get credits for track ${t.id}:`,y)}let s=this.extractArtistsFromTrack(t,r),p=B(A({},a),{currentTrack:t,currentTrackCredits:r,playbackMode:e});if(this.validateMusicState(p))this.musicStateSubject.next(p);else{console.error("[MusicStateManager] Invalid music state, skipping update");return}let g=this.artistFilteringStateSubject.value.allArtists,h={mode:"music-playing",currentArtists:s,allArtists:g,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${t.title}" - ${s.length} artists are currently featured`};this.validateArtistFilteringState(h)&&this.artistFilteringStateSubject.next(h),console.log(`[MusicStateManager] Track changed to: "${t.title}" with ${s.length} artists`)}else this.switchToNoMusicMode()}catch(a){console.error("[MusicStateManager] Error handling track change:",a),this.switchToNoMusicMode()}}handleAudioStateChange(t){let e=this.musicStateSubject.value;if(t.isPlaying&&t.currentTrack){let a=this.artistCreditService.getTrackCredits(t.currentTrack),r=B(A({},e),{isPlaying:t.isPlaying,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.duration>0?t.currentTime/t.duration:0,playbackMode:"legacy",currentTrackCredits:a});if(this.musicStateSubject.next(r),a){let s={mode:"music-playing",currentArtists:a.allContributions,allArtists:this.artistFilteringStateSubject.value.allArtists,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${a.title}" - ${a.allContributions.length} artists are currently featured`};this.artistFilteringStateSubject.next(s)}}else this.switchToNoMusicMode()}switchToNoMusicMode(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value.allArtists,a=B(A({},t),{isPlaying:!1,currentTrack:null,currentTrackCredits:null,playbackMode:"idle"});this.musicStateSubject.next(a);let r={mode:"no-music",currentArtists:[],allArtists:e,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${e.length} of 31 artists from the album`};this.artistFilteringStateSubject.next(r),console.log("[MusicStateManager] Switched to no-music mode - showing all artists")}updateCurrentTime(t){let e=this.musicStateSubject.value,a=B(A({},e),{currentTime:t,trackProgress:e.duration>0?t/e.duration:0});this.musicStateSubject.next(a)}updateTrackCredits(t){let e=this.musicStateSubject.value,a=B(A({},e),{currentTrackCredits:t});if(this.musicStateSubject.next(a),t&&e.currentTrack){let r=this.artistFilteringStateSubject.value,s=B(A({},r),{currentArtists:t.allContributions,displaySubtitle:`Artists for "${t.title}" - ${t.allContributions.length} artists are currently featured`});this.artistFilteringStateSubject.next(s)}}extractArtistsFromTrack(t,e){if(e)return e.allContributions;let a=[];return t.mainArtist&&a.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features?.forEach((r,s)=>{a.push({id:`${t.id}-featured-${s}`,artistName:r.name,artistDisplayName:r.displayName||r.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:r.socialLinks})}),t.collaborators?.forEach((r,s)=>{a.push({id:`${t.id}-collab-${s}`,artistName:r.name,artistDisplayName:r.displayName||r.name,role:r.role||"Collaborator",participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:r.socialLinks})}),a}loadAllArtistsForShowcase(){let t=this.artistCreditService.getAllPhantasia2Artists(),e=this.artistFilteringStateSubject.value,a=B(A({},e),{allArtists:t,displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`});this.artistFilteringStateSubject.next(a)}forceNoMusicMode(){this.switchToNoMusicMode()}getCurrentMusicState(){return this.musicStateSubject.value}getCurrentArtistFilteringState(){return this.artistFilteringStateSubject.value}setPlayingState(t){let e=this.musicStateSubject.value,a=B(A({},e),{isPlaying:t});this.musicStateSubject.next(a)}updateVolume(t){let e=this.musicStateSubject.value,a=B(A({},e),{volume:t});this.musicStateSubject.next(a)}updateDuration(t){let e=this.musicStateSubject.value,a=B(A({},e),{duration:t,trackProgress:e.currentTime>0?e.currentTime/t:0});this.musicStateSubject.next(a)}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==e[a].id)return!1;return!0}getDebugInfo(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value;return{musicState:{playbackMode:t.playbackMode,isPlaying:t.isPlaying,currentTrackId:t.currentTrack?.id,currentTrackTitle:t.currentTrack?.title,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.trackProgress},filteringState:{mode:e.mode,currentArtistsCount:e.currentArtists.length,allArtistsCount:e.allArtists.length,displayTitle:e.displayTitle,displaySubtitle:e.displaySubtitle},subscriptions:{activeSubscriptions:Object.keys(this.subscriptions).length,subscriptionKeys:Object.keys(this.subscriptions)},stateQueue:{queueLength:this.stateUpdateQueue.length,isProcessing:this.isProcessingQueue}}}queueStateUpdate(t){this.stateUpdateQueue.push(t),this.processStateQueue()}processStateQueue(){return J(this,null,function*(){if(!(this.isProcessingQueue||this.stateUpdateQueue.length===0)){this.isProcessingQueue=!0;try{for(;this.stateUpdateQueue.length>0;){let t=this.stateUpdateQueue.shift();if(t){try{t()}catch(e){console.error("[MusicStateManager] Error processing state update:",e)}yield new Promise(e=>setTimeout(e,10))}}}finally{this.isProcessingQueue=!1}}})}validateMusicState(t){try{return typeof t.isPlaying=="boolean"&&typeof t.currentTime=="number"&&typeof t.duration=="number"&&typeof t.volume=="number"&&typeof t.trackProgress=="number"&&t.volume>=0&&t.volume<=1&&t.trackProgress>=0&&t.trackProgress<=1&&t.currentTime>=0&&t.duration>=0}catch(e){return console.error("[MusicStateManager] Error validating music state:",e),!1}}validateArtistFilteringState(t){try{return["no-music","music-playing"].includes(t.mode)&&Array.isArray(t.currentArtists)&&Array.isArray(t.allArtists)&&typeof t.displayTitle=="string"&&typeof t.displaySubtitle=="string"}catch(e){return console.error("[MusicStateManager] Error validating artist filtering state:",e),!1}}emergencyReset(){console.warn("[MusicStateManager] Performing emergency reset");try{let t=this.artistCreditService.getAllPhantasia2Artists(),e={isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"},a={mode:"no-music",currentArtists:[],allArtists:t,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`};this.musicStateSubject.next(e),this.artistFilteringStateSubject.next(a),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,console.log("[MusicStateManager] Emergency reset completed")}catch(t){console.error("[MusicStateManager] Error during emergency reset:",t)}}};St.\u0275fac=function(e){return new(e||St)($(rt),$(vt),$(bt))},St.\u0275prov=j({token:St,factory:St.\u0275fac,providedIn:"root"});var zt=St;function Fi(c,t){if(c&1&&(f(0,"div",30)(1,"div",31),M(2,"\u26A0"),b(),f(3,"span"),M(4),b()()),c&2){let e=w();v(4),N(e.error)}}function Li(c,t){c&1&&(f(0,"div",32),O(1,"div",33),f(2,"span"),M(3,"Loading audio..."),b()())}function Ri(c,t){if(c&1&&(f(0,"div",38)(1,"div",39)(2,"h4",40),M(3),b(),f(4,"p",41),M(5),b()()()),c&2){let e=w(2);v(3),N(e.currentTrackInfo.title),v(2),N(e.currentTrackInfo.mainArtist)}}function ji(c,t){if(c&1&&(f(0,"div",42)(1,"div",40),M(2),b(),f(3,"div",41),M(4),b()()),c&2){let e=w(2);v(2),N(e.getTrackName(e.currentTrack)),v(2),N(e.getArtistName())}}function zi(c,t){if(c&1&&(f(0,"div",43),M(1),b()),c&2){let e=w(2);v(),at(" ",e.currentSubtitle," ")}}function Ni(c,t){if(c&1&&(f(0,"div",34),I(1,Ri,6,2,"div",35)(2,ji,5,2,"div",36)(3,zi,2,1,"div",37),b()),c&2){let e=w();v(),x("ngIf",e.currentTrackInfo),v(),x("ngIf",!e.currentTrackInfo&&e.currentTrack),v(),x("ngIf",e.currentSubtitle&&!e.trackTitle&&!e.currentTrackInfo)}}var Nt=class Nt{constructor(t,e,a,r){this.audioService=t;this.dynamicArtistService=e;this.musicStateManager=a;this.cdr=r;this.trackTitle="";this.trackArtist="";this.activeTrack=null;this.audio=null;this.destroy$=new U;this.trackLoadingMutex=new U;this.isTrackLoading=!1;this.audioInstances=[];this.lastLoadedTrackId=null;this.isPlaying=!1;this.isLoading=!0;this.currentTrack="";this.currentTime=0;this.duration=0;this.volume=.5;this._isMuted=!1;this._savedVolumeBeforeMute=.5;this._muteStateInitialized=!1;this.error="";this.currentSubtitle="";this.currentTrackInfo=null;this.allTracks=[];this.currentTrackIndex=0;this.currentProject="phantasia1";this.hasUserInteracted=!1;this.lastSuccessfulVolume=.5;this.retryCount=0;this.maxRetries=3;this.audioContext=null;this.eventListeners=[];this.isAudioContextInitialized=!1;this.diagnoseEnvironment(),this.initializeAudioContext(),this.setupGlobalEventListeners()}diagnoseEnvironment(){console.group("[MusicPlayer] Environment Diagnosis"),console.log("User Agent:",navigator.userAgent),console.log("Location:",window.location.href),console.log("Base URL:",document.baseURI),console.log("Protocol:",window.location.protocol),console.log("Host:",window.location.host),console.log("Port:",window.location.port);let t="8. Evin a\u2019k - Trench.ogg";console.log("Unicode Test String:",t),console.log("Unicode Test Encoded:",encodeURIComponent(t)),console.log("Howler Audio Support:",{webAudio:window.Howler?.ctx!==null,html5:!0,codecs:{ogg:window.Howler?.codecs?.("audio/ogg")||"unknown",mp3:window.Howler?.codecs?.("audio/mpeg")||"unknown"}}),console.groupEnd()}getAudioDirectory(){return this.currentProject==="phantasia1"?"Phantasia_1":"Phantasia_2"}ngOnInit(){this.initializeAudio()}ngOnDestroy(){try{this.destroy$.next(),this.destroy$.complete(),this.cleanupAllAudioInstances(),this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupAudioContext(),this.cleanupEventListeners(),console.log("[MusicPlayer] Component destroyed and resources cleaned up")}catch(t){console.error("[MusicPlayer] Error during cleanup:",t)}}initializeAudio(){this.dynamicArtistService.currentProject$.pipe(E(this.destroy$)).subscribe(t=>{this.currentProject=t,console.log(`[MusicPlayer] Project switched to: ${t}`),this.cdr.markForCheck()}),this.dynamicArtistService.tracks$.pipe(E(this.destroy$)).subscribe(t=>{this.allTracks=t,t.length>0&&!this.currentTrackInfo&&(this.currentTrackInfo=t[0],this.currentTrackIndex=0,this.loadTrackFromInfo(this.currentTrackInfo),this.updateDynamicArtistTime()),this.cdr.markForCheck()}),this.dynamicArtistService.currentTrack$.pipe(E(this.destroy$)).subscribe(t=>{t&&t!==this.currentTrackInfo&&(this.currentTrackInfo=t,this.currentTrackIndex=this.allTracks.findIndex(e=>e.id===t.id),this.loadTrackFromInfo(t)),this.cdr.markForCheck()})}loadTrackFromInfo(t){return J(this,null,function*(){if(this.isTrackLoading){console.log("[MusicPlayer] Track loading already in progress, waiting...");return}if(this.lastLoadedTrackId===t.id&&!this.error){console.log(`[MusicPlayer] Track ${t.id} already loaded, skipping`);return}this.isTrackLoading=!0,this.lastLoadedTrackId=t.id,this.retryCount=0;try{this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.error="",this.cdr.markForCheck(),yield this.cleanupCurrentAudio(),console.log(`[MusicPlayer] Starting track load: ${t.title} (${t.id})`)}catch(a){console.error("[MusicPlayer] Error during track loading preparation:",a),this.handleTrackLoadError(t,a);return}let e;if(t.audioFile){let a=t.audioFile;console.log("[MusicPlayer] Original filename:",a),console.log("[MusicPlayer] Filename char codes:",[...a].map(s=>`${s}(${s.charCodeAt(0)})`).join(" "));let r=[()=>`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(a)}`,()=>{let s=a.replace(/'/g,"'");return`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(s)}`},()=>{let s=a.replace(/'/g,"%E2%80%99").replace(/ /g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29");return`assets/audio/${this.getAudioDirectory()}/${s}`},()=>`assets/audio/${this.getAudioDirectory()}/${a}`,()=>`/assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(a)}`];e=r[0](),this._fallbackUrls=r.slice(1).map(s=>s()),this._currentStrategyIndex=0,this._trackInfo=t,console.log("[MusicPlayer] Prepared fallback URLs:"),this._fallbackUrls.forEach((s,p)=>{console.log(`  Strategy ${p+1}: ${s}`)})}else e=`assets/audio/${this.getAudioDirectory()}/${t.id}.ogg`,this._fallbackUrls=[];console.log("[MusicPlayer] Loading audio (Strategy 0):",e),t.id==="8"&&(console.group("[MusicPlayer] Track 8 Diagnostics"),console.log("Track ID:",t.id),console.log("Track Title:",t.title),console.log("Main Artist:",t.mainArtist),console.log("Audio File Mapping:",t.audioFile),console.log("Final Audio Source:",e),console.log("Browser Location:",window.location.href),console.groupEnd()),this.audio=new Zt.Howl({src:[e],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.musicStateManager.setPlayingState(!0),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.musicStateManager.setPlayingState(!1),this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.musicStateManager.setPlayingState(!1),this.nextTrack(),this.cdr.markForCheck()},onloaderror:(a,r)=>{console.error("[MusicPlayer] Error loading (Strategy "+(this._currentStrategyIndex||0)+"):",e,r),console.error("[MusicPlayer] Track info:",t);let s=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(p<s.length){console.log("[MusicPlayer] Attempting fallback strategy",p+1),this._currentStrategyIndex=p+1;let g=s[p];console.log("[MusicPlayer] Trying fallback URL:",g),this.audio&&this.audio.unload(),this.audio=new Zt.Howl({src:[g],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(h,y)=>{if(console.error("[MusicPlayer] Fallback also failed:",g,y),p>=s.length-1)this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. Tried ${s.length+1} different URL encodings. Last error: ${y}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck();else{this._currentStrategyIndex=p+1;let i=s[p+1];i&&(console.log("[MusicPlayer] Trying next fallback strategy:",p+2),this.tryLoadWithUrl(i,t))}}})}else this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${r}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&(this.audioInstances.push(this.audio),this.isTrackLoading=!1)})}tryLoadWithUrl(t,e){return J(this,null,function*(){try{yield this.cleanupCurrentAudio()}catch(a){console.error("[MusicPlayer] Error cleaning up before fallback:",a)}this.audio=new Zt.Howl({src:[t],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(a,r)=>{let s=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(console.error(`[MusicPlayer] Fallback strategy ${p+1} failed:`,t,r),p<s.length-1){this._currentStrategyIndex=p+1;let g=s[p];console.log(`[MusicPlayer] Trying next fallback strategy ${p+2}:`,g),this.tryLoadWithUrl(g,e)}else this.error=`Failed to load track "${e.title}" by ${e.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${r}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&this.audioInstances.push(this.audio)})}loadTrack(t){this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.cdr.markForCheck(),this.audio&&this.audio.unload(),this.audio=new Zt.Howl({src:[t.url||t.title],html5:!0,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(e,a)=>{this.error=`Failed to load track: ${a}`,this.isLoading=!1,this.cdr.markForCheck()}})}togglePlay(){return J(this,null,function*(){if(!this.audio){console.warn("[MusicPlayer] No audio instance available for playback");return}try{yield this.ensureAudioContextReady(),this.isPlaying?(this.audio.pause(),this.isPlaying=!1):(this.hasUserInteracted=!0,this.audio.play(),this.isPlaying=!0),this.musicStateManager.setPlayingState(this.isPlaying),this.cdr.markForCheck(),console.log(`[MusicPlayer] Playback ${this.isPlaying?"started":"paused"}`)}catch(t){console.error("[MusicPlayer] Error toggling playback:",t),this.error="Playback error occurred",this.cdr.markForCheck()}})}setVolume(t){if(!this.audio){this.volume=Math.max(0,Math.min(1,t)),this.lastSuccessfulVolume=this.volume;return}try{let e=Math.max(0,Math.min(1,t));this.volume=e,!this._isMuted&&e>0&&(this._savedVolumeBeforeMute=e,this.lastSuccessfulVolume=e),this.audio.volume(e),this.musicStateManager.updateVolume(e),this.cdr.markForCheck(),console.log(`[MusicPlayer] Volume set to ${e}, muted: ${this._isMuted}`)}catch(e){console.error("[MusicPlayer] Error setting volume:",e),this.handleVolumeError(t)}}toggleMute(){if(!this.audio){console.warn("[MusicPlayer] Cannot toggle mute: no audio instance available");return}try{if(this.hasUserInteracted=!0,this._muteStateInitialized||(this._savedVolumeBeforeMute=this.volume>0?this.volume:.5,this._muteStateInitialized=!0),this._isMuted){this._isMuted=!1;let t=this._savedVolumeBeforeMute>0?this._savedVolumeBeforeMute:.5;this.volume=t,this.audio.volume(t),this.musicStateManager.updateVolume(t),console.log(`[MusicPlayer] Unmuted, restored volume to ${t}`)}else this._isMuted=!0,this.volume>0&&(this._savedVolumeBeforeMute=this.volume),this.audio.volume(0),this.musicStateManager.updateVolume(0),console.log(`[MusicPlayer] Muted, saved volume ${this._savedVolumeBeforeMute}`);this.cdr.markForCheck()}catch(t){console.error("[MusicPlayer] Error toggling mute:",t),this.handleMuteError()}}seek(t){this.audio&&(this.audio.seek(t),this.currentTime=t,this.cdr.markForCheck())}updateSubtitleFromFilename(t){if(t){let a=(t.split("/").pop()||"").replace(".mp3","").split(" - ");a.length>1?this.currentSubtitle=a[0]:this.currentSubtitle=""}}updateTime(){if(this.audio&&this.isPlaying){let t=this.audio.seek();this.currentTime=typeof t=="number"?t:0,this.updateDynamicArtistTime(),this.cdr.markForCheck(),requestAnimationFrame(()=>this.updateTime())}}updateDynamicArtistTime(){if(this.currentTrackInfo){let t=this.currentTrackInfo.startTime+this.currentTime;this.dynamicArtistService.updateCurrentTime(t)}}nextTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=(this.currentTrackIndex+1)%this.allTracks.length,a=this.allTracks[e];if(a&&a.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=a,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(a.startTime),this.loadTrackFromInfo(a),t)){let r=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(r,100)};r()}}previousTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=this.currentTrackIndex===0?this.allTracks.length-1:this.currentTrackIndex-1,a=this.allTracks[e];if(a&&a.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=a,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(a.startTime),this.loadTrackFromInfo(a),t)){let r=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(r,100)};r()}}formatTime(t){if(isNaN(t)||!isFinite(t)||t<0)return"0:00";let e=Math.floor(t/60),a=Math.floor(t%60);return`${e}:${a.toString().padStart(2,"0")}`}getTrackName(t){if(this.currentTrackInfo)return this.currentTrackInfo.title;if(this.trackTitle)return this.trackTitle;if(t){let e=t.split("/"),a=e[e.length-1].replace(/\.(mp3|ogg)$/,""),r=a.split(" - ");return r.length>1?r[1]:a}return"Unknown Track"}getArtistName(){if(this.currentTrackInfo)return this.currentTrackInfo.mainArtist;if(this.trackArtist)return this.trackArtist;if(this.currentTrack){let e=(this.currentTrack.split("/").pop()||"").replace(/\.(mp3|ogg)$/,"").split(" - ");if(e.length>1)return e[0]}return this.currentSubtitle||"Unknown Artist"}cleanupCurrentAudio(){return J(this,null,function*(){if(this.audio)try{this.isPlaying&&this.audio.pause(),this.audio.unload();let t=this.audioInstances.indexOf(this.audio);t>-1&&this.audioInstances.splice(t,1),this.audio=null,console.log("[MusicPlayer] Current audio instance cleaned up")}catch(t){console.error("[MusicPlayer] Error during audio cleanup:",t)}})}cleanupAllAudioInstances(){try{this.audio&&(this.audio.unload(),this.audio=null),this.audioInstances.forEach(t=>{try{t.unload()}catch(e){console.error("[MusicPlayer] Error unloading audio instance:",e)}}),this.audioInstances=[],console.log("[MusicPlayer] All audio instances cleaned up")}catch(t){console.error("[MusicPlayer] Error during comprehensive cleanup:",t)}}handleVolumeError(t){console.warn(`[MusicPlayer] Volume error, attempting recovery with value ${t}`),this.retryCount<this.maxRetries?(this.retryCount++,setTimeout(()=>{if(this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume,this.cdr.markForCheck()}catch(e){console.error("[MusicPlayer] Volume recovery failed:",e)}},100)):(this.error="Volume control temporarily unavailable",this.cdr.markForCheck())}handleMuteError(){if(console.warn("[MusicPlayer] Mute toggle error, attempting recovery"),this._isMuted=!1,this._muteStateInitialized=!1,this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume}catch(t){console.error("[MusicPlayer] Mute recovery failed:",t),this.error="Mute control temporarily unavailable"}this.cdr.markForCheck()}handleTrackLoadError(t,e){console.error(`[MusicPlayer] Track loading error for ${t.title}:`,e),this.error=`Failed to load "${t.title}" - ${e.message||e}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupCurrentAudio(),this.cdr.markForCheck()}get isMuted(){return this._isMuted}get displayVolume(){return this._isMuted?0:this.volume}get savedVolumeBeforeMute(){return this._savedVolumeBeforeMute}getDebugState(){return{isPlaying:this.isPlaying,isLoading:this.isLoading,isTrackLoading:this.isTrackLoading,isMuted:this._isMuted,volume:this.volume,savedVolumeBeforeMute:this._savedVolumeBeforeMute,currentTrackId:this.currentTrackInfo?.id,audioInstancesCount:this.audioInstances.length,lastLoadedTrackId:this.lastLoadedTrackId,error:this.error,audioContextState:this.audioContext?.state,eventListenersCount:this.eventListeners.length}}initializeAudioContext(){try{typeof window<"u"&&"AudioContext"in window?(this.audioContext=new AudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] AudioContext initialized")):typeof window<"u"&&"webkitAudioContext"in window?(this.audioContext=new window.webkitAudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] WebKit AudioContext initialized")):console.warn("[MusicPlayer] AudioContext not supported")}catch(t){console.error("[MusicPlayer] Error initializing AudioContext:",t)}}setupGlobalEventListeners(){if(!(typeof window>"u"))try{let t=()=>J(this,null,function*(){if(this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed")}catch(a){console.error("[MusicPlayer] Error resuming AudioContext:",a)}}),e=()=>{document.hidden?this.audioContext&&this.audioContext.state==="running"&&this.audioContext.suspend().catch(a=>{console.error("[MusicPlayer] Error suspending AudioContext:",a)}):t()};this.addTrackedEventListener(document,"click",t,{passive:!0}),this.addTrackedEventListener(document,"keydown",t,{passive:!0}),this.addTrackedEventListener(document,"visibilitychange",e,{passive:!0}),console.log("[MusicPlayer] Global event listeners setup completed")}catch(t){console.error("[MusicPlayer] Error setting up global event listeners:",t)}}addTrackedEventListener(t,e,a,r){try{t.addEventListener(e,a,r),this.eventListeners.push({element:t,event:e,handler:a})}catch(s){console.error(`[MusicPlayer] Error adding event listener for ${e}:`,s)}}cleanupAudioContext(){try{this.audioContext&&(this.audioContext.state!=="closed"&&this.audioContext.close().catch(t=>{console.error("[MusicPlayer] Error closing AudioContext:",t)}),this.audioContext=null,this.isAudioContextInitialized=!1,console.log("[MusicPlayer] AudioContext cleaned up"))}catch(t){console.error("[MusicPlayer] Error during AudioContext cleanup:",t)}}cleanupEventListeners(){try{this.eventListeners.forEach(({element:t,event:e,handler:a})=>{try{t.removeEventListener(e,a)}catch(r){console.error(`[MusicPlayer] Error removing event listener for ${e}:`,r)}}),this.eventListeners=[],console.log("[MusicPlayer] Event listeners cleaned up")}catch(t){console.error("[MusicPlayer] Error during event listener cleanup:",t)}}ensureAudioContextReady(){return J(this,null,function*(){if(this.audioContext||this.initializeAudioContext(),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed for playback")}catch(t){console.error("[MusicPlayer] Error resuming AudioContext for playback:",t)}})}};Nt.\u0275fac=function(e){return new(e||Nt)(z(fe),z(rt),z(zt),z(Kt))},Nt.\u0275cmp=R({type:Nt,selectors:[["app-music-player"]],inputs:{trackTitle:"trackTitle",trackArtist:"trackArtist",activeTrack:"activeTrack"},decls:32,vars:34,consts:[[1,"music-player-container"],[1,"player-backdrop"],[1,"music-player"],[1,"status-section"],["class","error-message",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["class","track-section",4,"ngIf"],[1,"progress-section"],[1,"time-display"],[1,"current-time"],[1,"duration"],[1,"progress-container"],[1,"progress-track"],[1,"progress-fill"],["type","range","aria-label","Seek",1,"progress-slider",3,"input","min","max","step","value","disabled"],[1,"controls-section"],[1,"volume-section"],[1,"volume-icon-container",3,"click"],["alt","Volume",1,"volume-icon",3,"src"],[1,"volume-control"],[1,"volume-track"],[1,"volume-fill"],["type","range","aria-label","Volume",1,"volume-slider",3,"input","min","max","step","value","disabled"],[1,"playback-controls"],["aria-label","Previous track",1,"control-button","previous-button",3,"click","disabled"],["src","assets/icons/music-player/skip-back.svg","alt","Previous",1,"control-icon"],[1,"control-button","play-pause-button",3,"click","disabled"],[1,"control-icon",3,"src","alt"],["aria-label","Next track",1,"control-button","next-button",3,"click","disabled"],["src","assets/icons/music-player/skip-forward.svg","alt","Next",1,"control-icon"],[1,"error-message"],[1,"error-icon"],[1,"loading-indicator"],[1,"loading-spinner"],[1,"track-section"],["class","track-details",4,"ngIf"],["class","track-info",4,"ngIf"],["class","current-subtitle",4,"ngIf"],[1,"track-details"],[1,"track-info-content"],[1,"track-title"],[1,"track-artist"],[1,"track-info"],[1,"current-subtitle"]],template:function(e,a){e&1&&(f(0,"div",0),O(1,"div",1),f(2,"div",2)(3,"div",3),I(4,Fi,5,1,"div",4)(5,Li,4,0,"div",5),b(),I(6,Ni,4,3,"div",6),f(7,"div",7)(8,"div",8)(9,"span",9),M(10),b(),f(11,"span",10),M(12),b()(),f(13,"div",11)(14,"div",12),O(15,"div",13),f(16,"input",14),F("input",function(s){return a.seek(s.target.value)}),b()()()(),f(17,"div",15)(18,"div",16)(19,"div",17),F("click",function(){return a.toggleMute()}),O(20,"img",18),b(),f(21,"div",19)(22,"div",20),O(23,"div",21),f(24,"input",22),F("input",function(s){return a.setVolume(s.target.value)}),b()()()(),f(25,"div",23)(26,"button",24),F("click",function(){return a.previousTrack()}),O(27,"img",25),b(),f(28,"button",26),F("click",function(){return a.togglePlay()}),O(29,"img",27),b(),f(30,"button",28),F("click",function(){return a.nextTrack()}),O(31,"img",29),b()()()()()),e&2&&(v(4),x("ngIf",a.error),v(),x("ngIf",a.isLoading),v(),x("ngIf",!a.isLoading),v(),V("disabled",a.isLoading),v(3),N(a.formatTime(a.currentTime)),v(2),N(a.formatTime(a.duration)),v(3),W("width",a.currentTime/a.duration*100,"%"),v(),x("min",0)("max",a.duration)("step",.01)("value",a.currentTime)("disabled",a.isLoading),v(),V("disabled",a.isLoading),v(3),V("muted",a.isMuted),x("src",a.isMuted?"assets/icons/music-player/volume-mute.svg":"assets/icons/music-player/volume.svg",ht),v(3),W("width",a.displayVolume*100,"%"),v(),x("min",0)("max",1)("step",.01)("value",a.displayVolume)("disabled",a.isLoading),v(2),x("disabled",a.isLoading),v(2),V("playing",a.isPlaying),x("disabled",a.isLoading),q("aria-label",a.isPlaying?"Pause":"Play"),v(),x("src",a.isPlaying?"assets/icons/music-player/pause.svg":"assets/icons/music-player/play.svg",ht)("alt",a.isPlaying?"Pause":"Play"),v(),x("disabled",a.isLoading))},dependencies:[nt,ft,jt],styles:[".music-player-container[_ngcontent-%COMP%]{position:relative;width:100%;margin:0 0 2rem;padding:0;isolation:isolate;box-sizing:border-box!important;max-width:100%!important}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]{position:absolute;inset:-4px 0;box-sizing:border-box!important;background:linear-gradient(135deg,#00000026,#0000002e,#00000038 50%,#00000040);backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);-webkit-backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);border-radius:20px;opacity:.8;z-index:-1}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{display:none!important}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:1}to{left:100%;opacity:0}}.music-player[_ngcontent-%COMP%]{position:relative;width:100%;background:linear-gradient(135deg,#ffffff1f,#ffffff14 25%,#ffffff0f 75%,#ffffff0a);backdrop-filter:blur(24px) saturate(1.6);-webkit-backdrop-filter:blur(24px) saturate(1.6);border:1px solid rgba(255,255,255,.15);border-radius:16px;box-sizing:border-box!important;max-width:100%!important;box-shadow:0 12px 40px #00000040,0 4px 16px #00000026,0 2px 8px #0000001a,inset 0 1px #fff3,inset 0 -1px #ffffff1a;display:flex;flex-direction:column;gap:clamp(12px,2vw,20px);padding:clamp(16px,3vw,24px);font-family:Inter,Roboto,sans-serif;color:#fffffff2;font-size:16px;line-height:1.5;letter-spacing:.01em;transition:all .4s cubic-bezier(.19,1,.22,1)}.music-player[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 48px #0000004d,0 6px 20px #0003,0 2px 8px #0000001a,inset 0 1px #ffffff40,inset 0 -1px #ffffff26}.status-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;min-height:0}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#dc354526,#dc354514);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(220,53,69,.3);border-radius:8px;color:#ffffffe6;font-size:clamp(.85rem,1vw,1.1rem);font-weight:500}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:16px;color:#ffc107e6}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px;color:#fffc;font-size:clamp(.85rem,1vw,1.1rem);font-weight:400}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.2);border-top:2px solid rgba(255,255,255,.8);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.track-section[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:8px}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 2px 8px rgba(255,255,255,.1);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-section[_ngcontent-%COMP%]   .current-subtitle[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem);color:#fff9;font-weight:300;line-height:1.4;letter-spacing:.01em}.progress-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.progress-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:clamp(.75rem,.9vw,.95rem);font-weight:400;color:#ffffffb3;font-variant-numeric:tabular-nums;letter-spacing:.02em}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%], .progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{padding:2px 4px;background:#ffffff0d;border-radius:4px;min-width:45px;text-align:center;font-family:Inter,monospace}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{position:relative;height:32px;display:flex;align-items:center}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{position:relative;width:100%;height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border-radius:3px;overflow:hidden;cursor:pointer;box-shadow:inset 0 1px 2px #0003,0 0 8px #ffffff0d}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffe6,#ffffffb3,#ffffffe6);border-radius:3px;transition:width .1s ease-out;box-shadow:0 0 12px #fff6,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{display:none!important}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:32px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:grab;transition:all .3s cubic-bezier(.19,1,.22,1);margin-top:-5px;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:active{cursor:grabbing;transform:scale(1.1)}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:6px;background:transparent;border-radius:3px}@keyframes _ngcontent-%COMP%_progressShimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:.6}to{left:100%;opacity:0}}.controls-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:clamp(16px,3vw,24px)}.controls-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:100px;flex:0 0 auto}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]{cursor:pointer;padding:6px;border-radius:6px;transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.05)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.85);transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon.muted[_ngcontent-%COMP%]{filter:invert(1) opacity(.6);transform:scale(.9)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{flex:1;max-width:80px}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]{position:relative;width:100%;height:4px;background:linear-gradient(90deg,#ffffff26,#fff3,#ffffff26);border-radius:2px;overflow:hidden;cursor:pointer}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffb3,#ffffffe6);border-radius:2px;transition:width .2s ease-out;box-shadow:0 0 6px #ffffff4d}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]{position:absolute;top:-6px;left:0;width:100%;height:16px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#ffffffe6;border-radius:50%;cursor:pointer;transition:all .2s cubic-bezier(.19,1,.22,1);margin-top:-4px;box-shadow:0 2px 6px #0000004d,inset 0 1px #ffffff80}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.3);background:#fff;box-shadow:0 3px 10px #0006,0 0 12px #fff9,inset 0 1px #ffffffb3}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:4px;background:transparent;border-radius:2px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:clamp(14px,2.2vw,18px);flex:1;max-width:180px;width:100%;margin:0 auto;position:relative}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{position:relative;border:none;background:linear-gradient(135deg,#ffffff26,#ffffff14,#ffffff0d);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .4s cubic-bezier(.19,1,.22,1);box-shadow:0 6px 20px #00000040,0 2px 8px #00000026,inset 0 1px #ffffff4d,inset 0 -1px #ffffff1a}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.9);transition:all .3s cubic-bezier(.19,1,.22,1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:40px;height:40px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:hover, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:linear-gradient(135deg,#fff3,#ffffff1f,#ffffff14);box-shadow:0 8px 28px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 20px #ffffff26}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:active, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:active{transform:scale(1.05);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:52px;height:52px;background:linear-gradient(135deg,#ffffff2e,#ffffff1f,#ffffff14);border-width:1.5px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:22px;height:22px;filter:invert(1) opacity(.95)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:hover{transform:scale(1.08);background:linear-gradient(135deg,#ffffff40,#ffffff2e,#ffffff1f);box-shadow:0 12px 36px #00000059,0 6px 16px #00000040,inset 0 1px #ffffff80,inset 0 -1px #fff3,0 0 32px #fff3}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:active{transform:scale(1.02);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff38,#ffffff26,#ffffff1a);box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e;animation:_ngcontent-%COMP%_playingPulse 2s ease-in-out infinite}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled:hover{transform:none;background:linear-gradient(135deg,#ffffff14,#ffffff0d)}@keyframes _ngcontent-%COMP%_playingPulse{0%,to{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e}50%{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 32px #ffffff40}}@media (max-width: 768px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:clamp(14px,4vw,20px);gap:clamp(10px,2.5vw,16px);border-radius:14px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(.95rem,1.2vw,1.3rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{height:8px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{width:18px;height:18px;margin-top:-5px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{gap:clamp(8px,3vw,16px)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{min-width:80px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:60px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{gap:clamp(8px,2.5vw,12px);max-width:160px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:36px;height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:16px;height:16px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:46px;height:46px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:20px;height:20px}}@media (max-width: 480px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:12px 16px;gap:8px;border-radius:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{order:2;align-self:stretch;min-width:auto}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:none;flex:1}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{order:1;max-width:none;justify-content:center}}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:pointer;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb:hover{background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3;transform:scale(1.2)}input[type=range][_ngcontent-%COMP%]::-moz-range-track{height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border:none;border-radius:3px;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}@media (prefers-reduced-motion: reduce){.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{animation:none}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{animation:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{transition-duration:.2s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{animation:none}@keyframes shimmer{0%,to{opacity:0}}@keyframes progressShimmer{0%,to{opacity:0}}@keyframes playingPulse{0%,to{opacity:1}}@keyframes spin{0%,to{transform:rotate(0)}}}"],changeDetection:0});var mi=Nt;function Bi(c,t){if(c&1&&O(0,"div",24),c&2){let e=t.$implicit;W("left",e.x+"vw")("top",e.y+"vh")("--move-x",e.moveX+"px")("--move-y",e.moveY+"px")("--scale",e.scale)("--base-opacity",e.opacity)("--rotation-offset",e.rotationOffset)("--delay",e.delay),V("clockwise",e.clockwise)("counter-clockwise",!e.clockwise)}}var Bt=class Bt{constructor(t,e,a){this.cdr=t;this.renderer=e;this.document=a;this._progress=0;this.progressText="0%";this.runes=[];this.originalHeaderStyles=new Map}set progress(t){this._progress=t,this.progressText=`${Math.floor(t)}%`,this.cdr.markForCheck()}get progress(){return this._progress}ngOnInit(){this.generateRunePositions(),this.suppressHighZIndexHeaders()}ngOnDestroy(){this.restoreHeaderStyles()}suppressHighZIndexHeaders(){console.log("\u{1F527} LoadingScreen: Starting header suppression");let t=["app-site-header",".site-header",'header[class*="header"]',".cd-cases-container",".debug-toggle",".debug-panel",".right-side-menu",".mobile-navbar",'[class*="z-index"]','[style*="z-index"]'],e=this.document.querySelectorAll(t.join(", "));console.log(`\u{1F50D} Found ${e.length} potential interfering elements`),e.forEach((a,r)=>{let s=a,p=getComputedStyle(s),g=p.zIndex||"auto",h=p.visibility||"visible";console.log(`\u{1F4DD} Element ${r}: ${s.tagName}.${s.className} - z-index: ${g}`),this.originalHeaderStyles.set(s,JSON.stringify({zIndex:g,visibility:h,display:p.display||"block"})),this.renderer.setStyle(s,"z-index","1",Ct.Important),this.renderer.setStyle(s,"visibility","hidden",Ct.Important),console.log(`\u2705 Suppressed element ${r}`)}),this.renderer.addClass(this.document.body,"loading-screen-active"),console.log("\u{1F3AF} Header suppression completed")}restoreHeaderStyles(){console.log("\u{1F527} LoadingScreen: Restoring header styles"),this.renderer.removeClass(this.document.body,"loading-screen-active"),console.log("\u{1F4DD} Removed loading-screen-active class from body"),this.originalHeaderStyles.forEach((e,a)=>{try{let r=JSON.parse(e);r.zIndex==="auto"||r.zIndex===""?this.renderer.removeStyle(a,"z-index"):this.renderer.setStyle(a,"z-index",r.zIndex),a.tagName.toLowerCase()==="app-site-header"||a.classList.contains("site-header")?(this.renderer.setStyle(a,"visibility","visible",Ct.Important),console.log("\u{1F3AF} Forced header visibility to visible")):r.visibility==="visible"?this.renderer.removeStyle(a,"visibility"):this.renderer.setStyle(a,"visibility",r.visibility)}catch(r){console.warn("\u26A0\uFE0F Failed to restore styles for element:",a,r),this.renderer.removeStyle(a,"z-index"),this.renderer.removeStyle(a,"visibility"),(a.tagName.toLowerCase()==="app-site-header"||a.classList.contains("site-header"))&&this.renderer.setStyle(a,"visibility","visible",Ct.Important)}}),this.document.querySelectorAll("app-site-header, .site-header, header").forEach(e=>{let a=e;this.renderer.setStyle(a,"visibility","visible",Ct.Important),this.renderer.setStyle(a,"z-index","1000",Ct.Important)}),this.originalHeaderStyles.clear(),console.log("\u2705 Header styles restored with enhanced visibility enforcement")}generateRunePositions(){this.runes=Array.from({length:48},()=>({x:Math.random()*100,y:Math.random()*100,scale:.6+Math.random()*1.4,delay:Math.random()*8,opacity:.3+Math.random()*.5,moveX:15+Math.random()*20,moveY:15+Math.random()*20,rotationOffset:Math.random()*360,clockwise:Math.random()<.5}))}};Bt.\u0275fac=function(e){return new(e||Bt)(z(Kt),z(te),z(Ut))},Bt.\u0275cmp=R({type:Bt,selectors:[["app-loading-screen"]],inputs:{progress:"progress"},decls:25,vars:3,consts:[[1,"loader-container"],[1,"magical-circle","outer"],[1,"magical-circle"],[1,"rune-effects"],[1,"decorative-elements"],[1,"corner-line","top-left"],[1,"corner-line","top-right"],[1,"corner-line","bottom-left"],[1,"corner-line","bottom-right"],[1,"mid-line","left"],[1,"mid-line","right"],[1,"mid-line","top"],[1,"mid-line","bottom"],[1,"light-beams"],[1,"beam","beam-1"],[1,"beam","beam-2"],[1,"beam","beam-3"],[1,"beam","beam-4"],[1,"rune-circle"],["class","rune",3,"clockwise","counter-clockwise","left","top","--move-x","--move-y","--scale","--base-opacity","--rotation-offset","--delay",4,"ngFor","ngForOf"],[1,"content"],[1,"logo-container"],["src","/assets/images/logos/prismcoll.svg","alt","Prismatic Collections",1,"logo"],[1,"loading-text"],[1,"rune"]],template:function(e,a){e&1&&(f(0,"div",0),O(1,"div",1)(2,"div",2)(3,"div",3),f(4,"div",4),O(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),b(),f(13,"div",13),O(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",17),b(),f(18,"div",18),I(19,Bi,1,20,"div",19),b(),f(20,"div",20)(21,"div",21),O(22,"img",22),b(),f(23,"div",23),M(24,"NOW LOADING"),b()()()),e&2&&(V("visible",!0),v(19),x("ngForOf",a.runes))},dependencies:[nt,ae],styles:['.loader-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#fff;opacity:0;pointer-events:none;transition:opacity .5s ease;z-index:2147483647;isolation:isolate;transform:translateZ(0);will-change:opacity,transform;position:fixed!important;z-index:2147483647!important;contain:layout size style}.loader-container.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]{position:relative;z-index:2147483647}.loader-container.visible[_ngcontent-%COMP%] ~ *[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   header[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}.logo-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:30px}.logo[_ngcontent-%COMP%]{width:240px;height:auto;display:block;margin:0 auto}.magical-circle[_ngcontent-%COMP%]{position:absolute;width:800px;height:800px;border:1px solid rgba(0,0,0,.1);border-radius:50%;animation:_ngcontent-%COMP%_rotate 20s linear infinite}.magical-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border:2px solid transparent;border-top-color:#0003;border-radius:50%}.magical-circle[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-10px;border:1px solid transparent;border-left-color:#00000026;border-radius:50%}.magical-circle.outer[_ngcontent-%COMP%]{width:1000px;height:1000px;animation:_ngcontent-%COMP%_rotate 30s linear infinite reverse;opacity:.5}.decorative-elements[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}.corner-line[_ngcontent-%COMP%]{position:absolute;width:150px;height:150px;border:2px solid rgba(0,0,0,.15);border-radius:4px}.corner-line[_ngcontent-%COMP%]:before, .corner-line[_ngcontent-%COMP%]:after{content:"";position:absolute;background:linear-gradient(90deg,#0000001a,#0003)}.corner-line.top-left[_ngcontent-%COMP%]{top:50px;left:50px;border-right:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite}.corner-line.top-right[_ngcontent-%COMP%]{top:50px;right:50px;border-left:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite .75s}.corner-line.bottom-left[_ngcontent-%COMP%]{bottom:50px;left:50px;border-right:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 1.5s}.corner-line.bottom-right[_ngcontent-%COMP%]{bottom:50px;right:50px;border-left:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 2.25s}.mid-line[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;border:2px solid rgba(0,0,0,.15);border-radius:4px;animation:_ngcontent-%COMP%_pulse 3s infinite}.mid-line.left[_ngcontent-%COMP%]{left:50px;top:50%;transform:translateY(-50%);border-right:none;animation-delay:.5s}.mid-line.right[_ngcontent-%COMP%]{right:50px;top:50%;transform:translateY(-50%);border-left:none;animation-delay:1s}.mid-line.top[_ngcontent-%COMP%]{top:50px;left:50%;transform:translate(-50%);border-bottom:none;animation-delay:1.5s}.mid-line.bottom[_ngcontent-%COMP%]{bottom:50px;left:50%;transform:translate(-50%);border-top:none;animation-delay:2s}.rune-circle[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;left:0;top:0}.rune[_ngcontent-%COMP%]{position:absolute;width:18px;height:18px;background:linear-gradient(135deg,#0006,#3c3c3c4d);clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);transform-origin:center center;transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg));opacity:var(--base-opacity);will-change:transform;animation:none}.rune.clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-clockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune.counter-clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-counterclockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.6));mix-blend-mode:screen;animation:_ngcontent-%COMP%_sparkle 4s infinite linear}.rune[_ngcontent-%COMP%]:after{content:"";position:absolute;width:140%;height:140%;top:-20%;left:-20%;background:radial-gradient(circle at center,rgba(120,200,255,.15) 0%,rgba(70,150,255,.1) 30%,transparent 70%);mix-blend-mode:screen;opacity:.5}.rune-effects[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;mix-blend-mode:multiply;background:radial-gradient(circle at center,transparent 0%,rgba(0,0,0,.02) 50%,transparent 100%);animation:_ngcontent-%COMP%_effect-pulse-safe 8s infinite ease-in-out;left:0;top:0;contain:layout}.light-beams[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none;mix-blend-mode:multiply}.beam[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(90deg,#0000001a,#28282826,#0000001a);mix-blend-mode:multiply}.beam.beam-1[_ngcontent-%COMP%]{width:600px;height:2px;animation:_ngcontent-%COMP%_beam-rotate 8s infinite linear,_ngcontent-%COMP%_beam-pulse 4s infinite ease-in-out}.beam.beam-2[_ngcontent-%COMP%]{width:400px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 12s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 6s infinite ease-in-out 1s}.beam.beam-3[_ngcontent-%COMP%]{width:300px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 10s infinite linear,_ngcontent-%COMP%_beam-pulse 5s infinite ease-in-out 2s}.beam.beam-4[_ngcontent-%COMP%]{width:200px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 14s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 7s infinite ease-in-out 3s}.content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-text[_ngcontent-%COMP%]{margin-top:2rem;font-size:1rem;letter-spacing:.3em;text-transform:uppercase;color:#000000b3;font-family:Arial,sans-serif;font-weight:500}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.2}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_rune-move-clockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((90 + var(--rotation-offset)) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((180 + var(--rotation-offset)) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((270 + var(--rotation-offset)) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((360 + var(--rotation-offset)) * 1deg))}}@keyframes _ngcontent-%COMP%_rune-move-counterclockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 90) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 180) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 270) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 360) * 1deg))}}@keyframes _ngcontent-%COMP%_beam-rotate{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@keyframes _ngcontent-%COMP%_beam-pulse{0%,to{opacity:.2;width:100%}50%{opacity:.5;width:120%}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.4;transform:scale(1)}50%{opacity:.8;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_effect-pulse-safe{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_effect-pulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}'],changeDetection:0});var ui=Bt;function $i(c,t){if(c&1){let e=it();f(0,"img",11),F("error",function(){tt(e);let r=w();return et(r.onAvatarError())}),b()}if(c&2){let e=w();x("src",e.avatarUrl,ht)("alt",e.artistName+" avatar")}}function Vi(c,t){if(c&1&&(f(0,"div",12),M(1),b()),c&2){let e=w();W("background",e.cardThemeColor()),v(),at(" ",e.artistInitials()," ")}}function Hi(c,t){if(c&1&&(f(0,"div",13)(1,"div",14),O(2,"span",15),f(3,"span",16),M(4,"Currently Playing"),b()()()),c&2){let e=w();v(),x("@playingIndicator",e.playingIndicatorState)}}function Ui(c,t){if(c&1){let e=it();f(0,"button",22),F("click",function(r){tt(e);let s=w(2);return et(s.onSocialLinkClick("youtube",r))}),f(1,"mat-icon"),M(2,"smart_display"),b(),f(3,"span",23),M(4,"YouTube"),b()()}if(c&2){let e=w(2);q("aria-label",e.artistName+" YouTube channel")}}function Gi(c,t){if(c&1){let e=it();f(0,"button",24),F("click",function(r){tt(e);let s=w(2);return et(s.onSocialLinkClick("twitter",r))}),f(1,"span",25),M(2,"\u{1D54F}"),b(),f(3,"span",23),M(4,"Twitter/X"),b()()}if(c&2){let e=w(2);q("aria-label",e.artistName+" Twitter profile")}}function Wi(c,t){if(c&1){let e=it();f(0,"button",26),F("click",function(r){tt(e);let s=w(2);return et(s.onSocialLinkClick("linktr",r))}),f(1,"mat-icon"),M(2,"link"),b(),f(3,"span",23),M(4,"Links"),b()()}if(c&2){let e=w(2);q("aria-label",e.artistName+" Linktr.ee profile")}}function Ki(c,t){if(c&1){let e=it();f(0,"button",27),F("click",function(r){tt(e);let s=w(2);return et(s.onSocialLinkClick("instagram",r))}),f(1,"span",28),M(2,"\u{1F4F7}"),b(),f(3,"span",23),M(4,"Instagram"),b()()}if(c&2){let e=w(2);q("aria-label",e.artistName+" Instagram profile")}}function qi(c,t){if(c&1&&(f(0,"div",17),I(1,Ui,5,1,"button",18)(2,Gi,5,1,"button",19)(3,Wi,5,1,"button",20)(4,Ki,5,1,"button",21),b()),c&2){let e=w();v(),x("ngIf",e.hasYoutube),v(),x("ngIf",e.hasTwitter),v(),x("ngIf",e.hasLinktr),v(),x("ngIf",e.hasInstagram)}}var $t=class $t{constructor(){this.enableAnimations=!0;this.isHovered=G(!1);this.avatarError=G(!1);this.artistInitials=st(()=>{let e=(this.cardData?.artist?.artistDisplayName||"").split(" ").filter(a=>a.length>0);return e.length===0?"?":e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()});this.roleDisplayText=st(()=>{if(!this.cardData?.artist?.role)return"";let t=this.cardData.artist.role;switch(t){case"Main Artist":return"MAIN ARTIST";case"Featured Artist":return"FEATURED ARTIST";case"Vocalist":return"VOCALIST";case"Producer":return"PRODUCER";case"Composer":return"COMPOSER";case"Arranger":return"ARRANGER";case"Instrumentalist":return"INSTRUMENTALIST";case"Violin":return"VIOLIN";case"Viola":return"VIOLA";case"Cello":return"CELLO";case"Accordion":return"ACCORDION";case"Piano":return"PIANO";case"Keyboard":return"KEYBOARD";case"Guitar":return"GUITAR";case"Bass":return"BASS";case"Drums":return"DRUMS";case"Electronic Producer":return"ELECTRONIC PRODUCER";case"Sound Designer":return"SOUND DESIGNER";case"Synthesizer V Operator":return"SYNTHESIZER V";case"Voice Actor":return"VOICE ACTOR";case"Vocalist, Lyricist":return"VOCALIST, LYRICIST";case"Accordionist":return"ACCORDIONIST";case"Violinist":return"VIOLINIST";case"Violist":return"VIOLIST";case"Cellist":return"CELLIST";default:return t.toUpperCase()}});this.participationLevelClass=st(()=>`participation-${this.cardData?.participationLevel||"additional"}`);this.cardThemeColor=st(()=>this.cardData?.artist?.color||"#ffffff")}get hasYoutube(){return!!this.cardData?.artist?.socialLinks?.youtube}get hasTwitter(){return!!this.cardData?.artist?.socialLinks?.twitter}get hasLinktr(){return!!this.cardData?.artist?.socialLinks?.linktr}get hasInstagram(){return!!this.cardData?.artist?.socialLinks?.instagram}get youtubeUrl(){return this.cardData?.artist?.socialLinks?.youtube||""}get twitterUrl(){return this.cardData?.artist?.socialLinks?.twitter||""}get linktrUrl(){return this.cardData?.artist?.socialLinks?.linktr||""}get instagramUrl(){return this.cardData?.artist?.socialLinks?.instagram||""}get artistName(){return this.cardData?.artist?.artistDisplayName||"Unknown Artist"}get avatarUrl(){return this.cardData?.artist?.avatar||""}get isCurrentlyPlaying(){return this.cardData?.isCurrentlyPlaying||!1}onMouseEnter(){this.enableAnimations&&this.isHovered.set(!0)}onMouseLeave(){this.enableAnimations&&this.isHovered.set(!1)}onAvatarError(){this.avatarError.set(!0)}onSocialLinkClick(t,e){e.stopPropagation();let a="";t==="youtube"?a=this.youtubeUrl:t==="twitter"?a=this.twitterUrl:t==="linktr"?a=this.linktrUrl:t==="instagram"&&(a=this.instagramUrl),a&&window.open(a,"_blank","noopener,noreferrer")}onCardClick(){console.log("Artist card clicked:",this.cardData?.artist?.artistDisplayName)}get hoverState(){return this.isHovered()?"hovered":"default"}get playingIndicatorState(){return this.isCurrentlyPlaying?"playing":"not-playing"}};$t.\u0275fac=function(e){return new(e||$t)},$t.\u0275cmp=R({type:$t,selectors:[["app-artist-card"]],inputs:{cardData:"cardData",enableAnimations:"enableAnimations"},decls:13,vars:13,consts:[[1,"artist-card",3,"mouseenter","mouseleave","click"],[1,"artist-avatar-section"],[1,"avatar-container"],["class","artist-avatar","loading","lazy",3,"src","alt","error",4,"ngIf"],["class","artist-initials",3,"background",4,"ngIf"],[1,"artist-info-section"],[1,"artist-name"],[1,"role-label"],["class","playing-status",4,"ngIf"],["class","social-links-section",4,"ngIf"],[1,"card-accent"],["loading","lazy",1,"artist-avatar",3,"error","src","alt"],[1,"artist-initials"],[1,"playing-status"],[1,"playing-indicator"],[1,"playing-dot"],[1,"playing-text"],[1,"social-links-section"],["class","social-link youtube-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link twitter-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link linktr-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link instagram-link","mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",1,"social-link","youtube-link",3,"click"],[1,"social-label"],["mat-icon-button","",1,"social-link","twitter-link",3,"click"],[1,"twitter-x-icon"],["mat-icon-button","",1,"social-link","linktr-link",3,"click"],["mat-icon-button","",1,"social-link","instagram-link",3,"click"],[1,"instagram-icon"]],template:function(e,a){e&1&&(f(0,"div",0),F("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(){return a.onMouseLeave()})("click",function(){return a.onCardClick()}),f(1,"div",1)(2,"div",2),I(3,$i,1,2,"img",3)(4,Vi,2,3,"div",4),b()(),f(5,"div",5)(6,"h3",6),M(7),b(),f(8,"div",7),M(9),b(),I(10,Hi,5,1,"div",8),b(),I(11,qi,5,4,"div",9),O(12,"div",10),b()),e&2&&(Wt(a.participationLevelClass()),W("--theme-color",a.cardThemeColor()),x("@cardHover",a.hoverState),v(3),x("ngIf",a.avatarUrl&&!a.avatarError()),v(),x("ngIf",!a.avatarUrl||a.avatarError()),v(3),N(a.artistName),v(2),at(" ",a.roleDisplayText()," "),v(),x("ngIf",a.isCurrentlyPlaying),v(),x("ngIf",a.hasYoutube||a.hasTwitter||a.hasLinktr||a.hasInstagram),v(),W("background",a.cardThemeColor()))},dependencies:[nt,ft,jt,Ue,ue,Qt],styles:['[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.artist-card[_ngcontent-%COMP%]{--mdc-theme-primary: var(--artist-card-text-primary) !important;--mat-primary-color: var(--artist-card-text-primary) !important;--theme-color: var(--artist-card-text-primary) !important;--color: var(--artist-card-text-primary) !important}.artist-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--artist-card-text-primary)!important}.artist-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--artist-card-bg-primary) 0%,var(--artist-card-bg-secondary) 100%);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid var(--artist-card-border-primary);border-radius:12px;color:var(--artist-card-text-primary);box-shadow:0 4px 16px var(--artist-card-shadow-base);transition:all .3s cubic-bezier(.25,.46,.45,.94);padding:1.75rem;cursor:pointer;min-height:300px;display:flex;flex-direction:column;align-items:center;text-align:center}.artist-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:var(--artist-card-bg-overlay);pointer-events:none;z-index:-1;opacity:.7;transition:opacity .3s ease}.artist-card[_ngcontent-%COMP%]:hover:hover{background:linear-gradient(135deg,var(--artist-card-hover-bg) 0%,var(--artist-card-bg-secondary) 100%);border-color:var(--artist-card-border-hover);box-shadow:0 8px 24px var(--artist-card-shadow-elevated);transform:translateY(-2px)}.artist-card[_ngcontent-%COMP%]:hover:before{opacity:.9}.artist-card[_ngcontent-%COMP%]:hover   .card-accent[_ngcontent-%COMP%]{opacity:1;transform:scaleX(1.05)}.artist-card[_ngcontent-%COMP%]:hover   .artist-avatar[_ngcontent-%COMP%]{transform:scale(1.08)}.artist-card[_ngcontent-%COMP%]:hover   .social-link[_ngcontent-%COMP%]{transform:translateY(-2px)}.artist-card.participation-main[_ngcontent-%COMP%]{border-color:var(--artist-card-text-primary);background:#000c;box-shadow:0 6px 24px #ffffff26}.artist-card.participation-main[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-primary);height:4px}.artist-card.participation-featured[_ngcontent-%COMP%]{border-color:var(--artist-card-text-secondary);background:var(--artist-card-bg-secondary)}.artist-card.participation-featured[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-secondary)}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{position:relative;width:80px;height:80px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid rgba(255,255,255,.2);transition:border-color .3s ease}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--theme-color, #666666);color:#fff;font-size:1.5rem;font-weight:700;border:3px solid rgba(255,255,255,.2);text-shadow:0 1px 2px rgba(0,0,0,.3)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{color:#fff!important;font-size:1.1rem;font-weight:600;margin:0 0 .5rem;line-height:1.3;text-shadow:0 1px 2px rgba(0,0,0,.4)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;letter-spacing:.8px;color:#fff!important;margin-bottom:.75rem;opacity:1;text-shadow:0 1px 4px rgba(0,0,0,.8);text-transform:uppercase;background:#0006;padding:.3rem .6rem;border-radius:6px;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.15);display:inline-block;box-shadow:0 2px 8px #0000004d;transition:all .2s ease;--color: #ffffff !important;--mdc-theme-primary: #ffffff !important;--mat-primary: #ffffff !important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[style*=color][_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.mat-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.theme-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[color=primary][_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]:hover{background:#00000080;border-color:#ffffff40;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0009,#141414b3);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:.4rem .8rem;margin-top:.5rem;box-shadow:0 2px 8px #0000004d}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#d40808!important;animation:_ngcontent-%COMP%_pulse 2s infinite}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem;color:#fff!important;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.5)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;flex-wrap:nowrap}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.375rem;padding:.5rem .875rem;background:#ffffff1a;border:1px solid rgba(255,255,255,.15);border-radius:8px;color:#fff;font-size:.7rem;transition:all .2s ease;text-decoration:none;min-width:90px;height:36px;white-space:nowrap;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;line-height:1;flex-shrink:0;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem;font-weight:500;flex-shrink:0;text-overflow:ellipsis;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[_ngcontent-%COMP%]:hover{background:#f003;border-color:#f006;color:#f44}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:110px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;flex-shrink:0;width:.85rem;height:.85rem;display:flex;align-items:center;justify-content:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]:hover{background:#1da1f233;border-color:#1da1f266;color:#1da1f2}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--text-primary),rgba(255,255,255,.6));border-radius:var(--border-radius-card) var(--border-radius-card) 0 0;opacity:.7;transition:var(--transition-smooth);box-shadow:0 0 8px #fff3;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.8),transparent);animation:_ngcontent-%COMP%_shimmerAccent 3s infinite}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#fff3!important;background:#fff3!important;border-color:#ffffff4d!important;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]{background-color:#ffffff26!important;background:#ffffff26!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important;outline:none!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#f003!important;background:#f003!important;border-color:#f006!important;color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#1da1f233!important;background:#1da1f233!important;border-color:#1da1f266!important;color:#1da1f2!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#1da1f2!important}@keyframes _ngcontent-%COMP%_shimmerAccent{0%{left:-100%}50%{left:-100%}to{left:100%}}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}50%{opacity:.6;transform:scale(1.3);box-shadow:0 0 16px #fffc}to{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.artist-card[_ngcontent-%COMP%]{padding:1.5rem;min-height:280px;border-radius:12px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.4rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1.05rem;margin-bottom:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .7rem;letter-spacing:.7px;margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{padding:.4rem .8rem;margin-top:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{gap:.4rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{padding:.5rem .8rem;min-width:85px;height:34px;font-size:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:100px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}}@media (max-width: 480px){.artist-card[_ngcontent-%COMP%]{padding:1.25rem;min-height:260px;border-radius:10px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:65px;height:65px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.3rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.7rem;padding:.3rem .6rem;letter-spacing:.6px;margin-bottom:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{flex-direction:column;gap:.3rem;align-items:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{width:100%;max-width:150px;justify-content:center;min-width:unset;padding:.5rem 1rem;height:36px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:unset;max-width:160px}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{height:2px}.artist-card[_ngcontent-%COMP%]{animation:fadeInUp .6s ease-out;animation-fill-mode:both}}'],data:{animation:[wt("cardHover",[lt("default",H({transform:"translateY(0) scale(1)"})),lt("hovered",H({transform:"translateY(-4px) scale(1.02)"})),dt("default <=> hovered",ct("200ms ease-out"))]),wt("playingIndicator",[lt("playing",H({opacity:1,transform:"scale(1)",background:"transparent"})),lt("not-playing",H({opacity:.3,transform:"scale(0.8)",background:"transparent"})),dt("playing <=> not-playing",ct("300ms ease-out"))])]},changeDetection:0});var _e=$t;var Tt=class Tt{constructor(t,e,a){this.artistCreditService=t;this.audioService=e;this.dynamicArtistService=a;this.destroy$=new U;this.currentlyPlayingArtistsSubject=new P([]);this.trackArtistCacheMap=new Map;this.maxCacheSize=50;this.cacheAccessOrder=[];this.isDebugMode=!1;this.currentlyPlayingArtists$=this.currentlyPlayingArtistsSubject.asObservable();this.currentlyPlayingArtistsWithContext$=Dt([this.audioService.audioState$,this.currentlyPlayingArtists$]).pipe(T(([t,e])=>this.enhanceArtistsWithContext(t,e)),Q((t,e)=>this.compareArtistArrays(t,e)),mt(50),yt(1),E(this.destroy$));this.initializeService()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearCache(),this.isDebugMode&&console.log("[CurrentlyPlayingArtistsService] Service destroyed, cache cleared")}initializeService(){this.populateTrackArtistCache(),this.dynamicArtistService.currentTrack$.pipe(Q((t,e)=>t?.id===e?.id),mt(25),E(this.destroy$)).subscribe(t=>{this.updateCurrentlyPlayingArtistsFromDynamicService(t)}),this.audioService.audioState$.pipe(Q((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),mt(25),Re(t=>this.dynamicArtistService.currentTrack$.pipe(T(e=>({audioState:t,noDynamicTrack:e===null})),Le({audioState:t,noDynamicTrack:!0}))),E(this.destroy$)).subscribe(({audioState:t,noDynamicTrack:e})=>{e&&this.updateCurrentlyPlayingArtists(t)})}populateTrackArtistCache(){try{this.artistCreditService.tracksWithCredits$.subscribe(t=>{t.forEach(e=>{let a=this.sortArtistsByPriority(e.allContributions);if(this.trackArtistCacheMap.set(e.id,a),this.trackArtistCacheMap.set(e.trackNumber.toString(),a),e.audioFile){let r=this.extractAudioKey(e.audioFile);this.trackArtistCacheMap.set(r,a)}})})}catch(t){console.error("[CurrentlyPlayingArtistsService] Error populating cache:",t)}}updateCurrentlyPlayingArtistsFromDynamicService(t){if(!t){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.id);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e),console.log(`[CurrentlyPlayingArtistsService] Updated artists for track "${t.title}":`,e.map(a=>a.artistDisplayName));else{let a=this.getArtistsFromTrackData(t);this.currentlyPlayingArtistsSubject.next(a),console.log(`[CurrentlyPlayingArtistsService] Using direct track data for "${t.title}":`,a.map(r=>r.artistDisplayName))}}getArtistsFromTrackData(t){let e=[];return t.mainArtist&&e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features&&t.features.length>0&&t.features.forEach((a,r)=>{e.push({id:`${t.id}-featured-${r}`,artistName:a.name,artistDisplayName:a.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:{}})}),this.sortArtistsByPriority(e)}updateCurrentlyPlayingArtists(t){if(!t.isPlaying||!t.currentTrack){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.currentTrack);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e);else{let a=this.tryFallbackArtistLookup(t.currentTrack);this.currentlyPlayingArtistsSubject.next(a)}}getArtistsForTrack(t){let e=this.trackArtistCacheMap.get(t);if(e)return this.updateCacheAccess(t),e;let a=this.artistCreditService.getTrackCredits(t);if(a){let r=this.sortArtistsByPriority(a.allContributions);return this.setCacheWithLRU(t,r),r}return[]}tryFallbackArtistLookup(t){if(/^\d+$/.test(t)){let s=this.trackArtistCacheMap.get(t);if(s)return s}let e=t.match(/\b(\d+)\b/);if(e){let s=this.trackArtistCacheMap.get(e[1]);if(s)return s}let a=this.extractAudioKey(t),r=this.trackArtistCacheMap.get(a);return r||(console.warn(`[CurrentlyPlayingArtistsService] No artists found for track: ${t}`),[])}sortArtistsByPriority(t){return[...t].sort((e,a)=>{let r={"Main Artist":1e3,"Featured Artist":900,Vocalist:800,Producer:700,Composer:600,Arranger:500,Instrumentalist:400},s=r[e.role]||100,p=r[a.role]||100;return s!==p?p-s:e.percentageContribution!==a.percentageContribution?a.percentageContribution-e.percentageContribution:e.artistDisplayName.localeCompare(a.artistDisplayName)})}enhanceArtistsWithContext(t,e){if(!t.currentTrack)return[];let a=this.artistCreditService.getTrackCredits(t.currentTrack);return e.map(r=>B(A({},r),{isMainArtist:r.role==="Main Artist",isFeaturedArtist:r.role==="Featured Artist"||r.role==="Vocalist",playingContext:{trackId:t.currentTrack,trackTitle:a?.title||"Unknown Track",startTime:a?.startTime||0,currentTime:t.currentTime}}))}extractAudioKey(t){return t.replace(/\.[^/.]+$/,"").replace(/^.*[\\\/]/,"").toLowerCase()}getAllContributingArtists(){let t=new Map;return this.trackArtistCacheMap.forEach(e=>{e.forEach(a=>{t.has(a.artistName)||t.set(a.artistName,a)})}),Array.from(t.values()).sort((e,a)=>e.artistDisplayName.localeCompare(a.artistDisplayName))}getFeaturedArtistsForShowcase(t=8){let a=this.getAllContributingArtists().filter(r=>r.role==="Main Artist"||r.role==="Featured Artist"||r.role==="Vocalist"||r.percentageContribution>=15);return this.sortArtistsByPriority(a).slice(0,t)}setCurrentlyPlayingArtists(t){let e=this.sortArtistsByPriority(t);this.currentlyPlayingArtistsSubject.next(e)}clearCurrentlyPlayingArtists(){this.currentlyPlayingArtistsSubject.next([])}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==e[a].id)return!1;return!0}updateCacheAccess(t){let e=this.cacheAccessOrder.indexOf(t);e>-1&&this.cacheAccessOrder.splice(e,1),this.cacheAccessOrder.push(t)}setCacheWithLRU(t,e){if(this.trackArtistCacheMap.size>=this.maxCacheSize){let a=this.cacheAccessOrder.shift();a&&(this.trackArtistCacheMap.delete(a),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Evicted cache entry: ${a}`))}this.trackArtistCacheMap.set(t,e),this.updateCacheAccess(t),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Cached artists for track: ${t}`)}clearCache(){this.trackArtistCacheMap.clear(),this.cacheAccessOrder=[]}getCacheStats(){return{size:this.trackArtistCacheMap.size,maxSize:this.maxCacheSize,hitRate:this.cacheAccessOrder.length>0?this.trackArtistCacheMap.size/this.cacheAccessOrder.length:0}}setDebugMode(t){this.isDebugMode=t}};Tt.\u0275fac=function(e){return new(e||Tt)($(bt),$(vt),$(rt))},Tt.\u0275prov=j({token:Tt,factory:Tt.\u0275fac,providedIn:"root"});var ye=Tt;function Qi(c,t){if(c&1&&O(0,"app-artist-card",11),c&2){let e=t.$implicit,a=w(3);x("cardData",e)("enableAnimations",a.enableAnimations)("@cardUpdate",void 0)}}function Zi(c,t){if(c&1&&(f(0,"div",9),I(1,Qi,1,3,"app-artist-card",10),b()),c&2){let e=w(2);V("single-card",e.artistCards().length===1),x("@cardsContainer",void 0)("@modeTransition",e.animationState()),v(),x("ngForOf",e.artistCards())("ngForTrackBy",e.trackByCardId)}}function Xi(c,t){c&1&&(f(0,"div",12)(1,"div",13)(2,"div",14),M(3,"\u266A"),b(),f(4,"h3"),M(5,"No Artists to Display"),b(),f(6,"p"),M(7,"Play a track to see contributing artists."),b()()())}function Ji(c,t){if(c&1&&(f(0,"div",15)(1,"div",16),M(2,"\u2139"),b(),f(3,"span",17),M(4),b()()),c&2){let e=w(2);v(4),at(" Artist cards update in real-time as different tracks play. ",e.currentlyPlayingArtists().length," artists are currently featured. ")}}function ta(c,t){if(c&1&&(f(0,"div",2)(1,"div",3)(2,"h2",4),M(3),b(),f(4,"p",5),M(5),b()(),I(6,Zi,2,6,"div",6)(7,Xi,8,0,"div",7)(8,Ji,5,1,"div",8),b()),c&2){let e=w();v(3),N(e.displayTitle),v(2),N(e.displaySubtitle),v(),x("ngIf",e.artistCards().length>0),v(),x("ngIf",e.artistCards().length===0),v(),x("ngIf",e.currentTrack())}}function ea(c,t){c&1&&(f(0,"div",18)(1,"div",19),O(2,"div",20),f(3,"p"),M(4,"Loading artist cards..."),b()()())}var Vt=class Vt{constructor(t,e,a,r,s,p){this.artistCreditService=t;this.audioService=e;this.currentlyPlayingService=a;this.dynamicArtistService=r;this.musicStateManager=s;this.router=p;this.showAllArtists=!1;this.maxVisibleCards=8;this.enableAnimations=!0;this._displayMode="currently-playing";this.artistCards=G([]);this.currentlyPlayingArtists=G([]);this.showcaseArtists=G([]);this.isLoading=G(!0);this.currentTrack=G(null);this.totalArtistsCount=G(0);this.animationState=G("showcase");this.artistCardIds=new Map([["SpiralFlip","artist-card-spiralflip-001"],["eili","artist-card-eili-002"],["Ariatec","artist-card-ariatec-003"],["MB","artist-card-mbgov-004"],["Iku Hoshifuri","artist-card-iku-hoshifuri-005"],["Justin Thornburgh","artist-card-justin-thornburgh-006"],["v1ris","artist-card-v1ris-007"],["Rita Kamishiro","artist-card-rita-kamishiro-008"],["Marcus Ho","artist-card-marcus-ho-009"],["AZALI","artist-card-azali-010"],["Aloysius","artist-card-aloysius-011"],["potatoTeto","artist-card-potatoteto-012"],["Artisan","artist-card-artisan-013"],["Mei Naganowa","artist-card-mei-naganowa-014"],["Evin a'k","artist-card-evin-ak-015"],["BilliumMoto","artist-card-billiummoto-016"],["Elliot Hsu","artist-card-elliot-hsu-017"],["Yuzuki","artist-card-yuzuki-018"],["LucaProject","artist-card-lucaproject-019"],["Koway","artist-card-koway-020"],["\u4F0D\u4E00","artist-card-wuyi-021"],["Nstryder","artist-card-nstryder-022"],["MoAE","artist-card-moae-023"],["dystopian tanuki","artist-card-dystopian-tanuki-024"],["Heem","artist-card-heem-025"],["Woojinee","artist-card-woojinee-026"],["Bigg Milk","artist-card-bigg-milk-027"],["Gardens","artist-card-gardens-028"],["Sad Keyboard Guy","artist-card-sad-keyboard-guy-029"],["Futsuunohito","artist-card-futsuunohito-030"],["shishishiena","artist-card-shishishiena-031"]]);this.destroy$=new U;this.currentProject=G("phantasia2")}set displayMode(t){let e=this._displayMode;this._displayMode=t,e!==t&&!this.isLoading()&&this.handleDisplayModeChange(t)}get displayMode(){return this._displayMode}ngOnInit(){this.detectCurrentProject(),this.initializeArtistCards(),this.setupRealtimeUpdates()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}detectCurrentProject(){let t=this.router.url;t.includes("phantasia1")?this.currentProject.set("phantasia1"):t.includes("phantasia2")?this.currentProject.set("phantasia2"):this.currentProject.set("phantasia2")}getCurrentProjectArtists(){return this.currentProject()==="phantasia1"?this.artistCreditService.getAllPhantasia1Artists():this.artistCreditService.getAllPhantasia2Artists()}initializeArtistCards(){try{let t=this.getCurrentProjectArtists();this.totalArtistsCount.set(t.length);let e=this.createShowcaseSelection(t);this.showcaseArtists.set(e);let a=this.musicStateManager.getCurrentArtistFilteringState();this.updateCardsFromFilteringState(a),this.isLoading.set(!1)}catch(t){console.error("[DynamicArtistCards] Error initializing artist cards:",t),this.isLoading.set(!1)}}setupRealtimeUpdates(){this.musicStateManager.artistFilteringState$.pipe(E(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Artist filtering state changed:",`Mode: ${t.mode}, Current artists: ${t.currentArtists.length}, All artists: ${t.allArtists.length}`),this.updateCardsFromFilteringState(t)}),this.musicStateManager.displayInfo$.pipe(E(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Display info updated:",t)}),this.displayMode!=="currently-playing"&&this.setupLegacyFallbackUpdates()}updateCardsForCurrentTrack(t){let e=[];e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features.forEach((r,s)=>{e.push({id:`${t.id}-featured-${s}`,artistName:r.name,artistDisplayName:r.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:r.socialLinks})}),t.collaborators.forEach((r,s)=>{e.push({id:`${t.id}-collab-${s}`,artistName:r.name,artistDisplayName:r.name,role:r.role,participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:r.socialLinks})});let a=e.map(r=>this.createArtistCard(r,!0));this.currentlyPlayingArtists.set(a),this.artistCards.set(a.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Updated cards for track:",t.title,"Artists:",e.map(r=>r.artistDisplayName))}createArtistCard(t,e=!1){return{id:this.artistCardIds.get(t.artistName)||`artist-card-${this.generateSlug(t.artistName)}`,artist:t,isCurrentlyPlaying:e,participationLevel:this.determineParticipationLevel(t),displayPriority:this.calculateDisplayPriority(t,e)}}createAllArtistCards(t){return t.map(e=>this.createArtistCard(e,!1)).sort((e,a)=>a.displayPriority-e.displayPriority)}createShowcaseSelection(t){return t.filter(a=>{let r=a.role;return r==="Main Artist"||r==="Featured Artist"||r==="Vocalist"||a.percentageContribution>=15}).map(a=>this.createArtistCard(a,!1)).sort((a,r)=>r.displayPriority-a.displayPriority).slice(0,Math.max(this.maxVisibleCards,8))}determineParticipationLevel(t){return t.role==="Main Artist"?"main":t.role==="Featured Artist"||t.role==="Vocalist"?"featured":t.percentageContribution>=10?"collaboration":"additional"}calculateDisplayPriority(t,e){let a=0;switch(e&&(a+=1e3),t.role){case"Main Artist":a+=500;break;case"Featured Artist":a+=400;break;case"Vocalist":a+=350;break;case"Producer":a+=300;break;case"Composer":a+=250;break;default:a+=100;break}return a+=t.percentageContribution,a}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}getCardById(t){return this.artistCards().find(e=>e.id===t)}handleDisplayModeChange(t){if(console.log("[DynamicArtistCards] Display mode changed to:",t),t==="showcase"){this.animationState.set("showcase");let e=this.showcaseArtists();this.artistCards.set(e),console.log("[DynamicArtistCards] Switched to showcase mode - showing",e.length,"featured artists")}else if(t==="currently-playing"){this.animationState.set("currently-playing");let e=this.currentlyPlayingArtists();e.length>0?(this.artistCards.set(e.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Switched to currently-playing mode - showing",e.length,"artists")):(console.log("[DynamicArtistCards] No currently playing artists - falling back to showcase"),this.handleDisplayModeChange("showcase"))}else if(t==="all"){this.animationState.set("showcase");let e=this.getCurrentProjectArtists();this.artistCards.set(this.createAllArtistCards(e))}}updateCardsFromFilteringState(t){if(t.mode==="music-playing"&&t.currentArtists.length>0){let e=t.currentArtists.map(r=>this.createArtistCard(r,!0));this.currentlyPlayingArtists.set(e),this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.animationState.set("currently-playing");let a=this.musicStateManager.getCurrentMusicState();this.currentTrack.set(a.currentTrack?.id||null),console.log("[DynamicArtistCards] Updated to music-playing mode with",e.length,"artists")}else{let e=t.allArtists.map(a=>this.createArtistCard(a,!1));this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.showcaseArtists.set(e),this.currentlyPlayingArtists.set([]),this.animationState.set("showcase"),this.currentTrack.set(null),console.log("[DynamicArtistCards] Updated to no-music mode with",e.length,"artists")}}setupLegacyFallbackUpdates(){this.currentlyPlayingService.currentlyPlayingArtists$.pipe(E(this.destroy$)).subscribe(t=>{this.musicStateManager.getCurrentArtistFilteringState().mode==="no-music"&&t.length>0&&console.log("[DynamicArtistCards] Using legacy fallback for",t.length,"artists")})}trackByCardId(t,e){return e.id}get displayTitle(){return this.musicStateManager.getCurrentArtistFilteringState().displayTitle}get displaySubtitle(){return this.musicStateManager.getCurrentArtistFilteringState().displaySubtitle}};Vt.\u0275fac=function(e){return new(e||Vt)(z(bt),z(vt),z(ye),z(rt),z(zt),z(Ne))},Vt.\u0275cmp=R({type:Vt,selectors:[["app-dynamic-artist-cards"]],inputs:{showAllArtists:"showAllArtists",maxVisibleCards:"maxVisibleCards",enableAnimations:"enableAnimations",displayMode:"displayMode"},decls:2,vars:2,consts:[["class","dynamic-artist-cards-container",4,"ngIf"],["class","cards-loading-container",4,"ngIf"],[1,"dynamic-artist-cards-container"],[1,"cards-header"],[1,"cards-title"],[1,"cards-subtitle"],["class","artist-cards-grid",3,"single-card",4,"ngIf"],["class","no-artists-state",4,"ngIf"],["class","artist-cards-info-panel",4,"ngIf"],[1,"artist-cards-grid"],["class","artist-card",3,"cardData","enableAnimations",4,"ngFor","ngForOf","ngForTrackBy"],[1,"artist-card",3,"cardData","enableAnimations"],[1,"no-artists-state"],[1,"no-artists-content"],[1,"no-artists-icon"],[1,"artist-cards-info-panel"],[1,"info-icon"],[1,"info-text"],[1,"cards-loading-container"],[1,"loading-content"],[1,"loading-spinner"]],template:function(e,a){e&1&&I(0,ta,9,5,"div",0)(1,ea,5,0,"div",1),e&2&&(x("ngIf",!a.isLoading()),v(),x("ngIf",a.isLoading()))},dependencies:[nt,ae,ft,_e],styles:["[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.dynamic-artist-cards-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto;padding:var(--artist-card-spacing-xxl) var(--artist-card-spacing-lg);background:var(--artist-card-container-bg);border:1px solid var(--artist-card-border-secondary);border-radius:var(--artist-card-radius-large);backdrop-filter:var(--artist-card-glass-blur);-webkit-backdrop-filter:var(--artist-card-glass-blur);box-shadow:var(--artist-card-shadow-container)}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:0;backdrop-filter:none;-webkit-backdrop-filter:none;box-shadow:none;max-width:100%;padding:1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem;padding:1rem 0}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-title[_ngcontent-%COMP%]{font-size:clamp(1.6rem,3vw,2.8rem);font-weight:700;color:var(--text-primary);margin:0 0 .75rem;text-shadow:0 3px 8px rgba(0,0,0,.7);letter-spacing:-.02em;line-height:1.1}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);max-width:640px;margin:0 auto;line-height:1.6;font-weight:400;text-shadow:0 2px 4px rgba(0,0,0,.5)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin:0 1rem 2rem;justify-content:start;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box;container-type:inline-size}@media (min-width: 1024px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.2rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (min-width: 1200px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:320px}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:320px}@media (min-width: 769px) and (max-width: 1199px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}}@media (min-width: 1200px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);justify-content:start;box-sizing:border-box}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}}@media (min-width: 1440px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 800px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 1000px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]{background:var(--card-bg-primary);border-radius:16px;padding:2.5rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);border:1px solid rgba(255,255,255,.12);box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#fff3;transform:translateY(-2px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   .no-artists-icon[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--text-secondary);margin-bottom:1.5rem;display:block;opacity:.8}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .75rem;font-size:1.4rem;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.6)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0;font-size:1rem;line-height:1.5}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;background:var(--card-bg-primary);border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:1.25rem 1.75rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);margin-top:2rem;box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#ffffff40;transform:translateY(-1px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.4rem;flex-shrink:0;opacity:.9}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.95rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{padding:.875rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:.8rem}}.cards-loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:240px;padding:3rem;background:var(--container-bg);border-radius:12px}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary)}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:3px solid rgba(255,255,255,.15);border-top:3px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem;box-shadow:0 0 12px #ffffff1a}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:var(--text-primary);text-shadow:0 2px 4px rgba(0,0,0,.5)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.artist-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.artist-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.02);box-shadow:var(--shadow-elevated)}.artist-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.artist-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.artist-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.artist-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.artist-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.artist-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.artist-card[_ngcontent-%COMP%]:nth-child(7){animation-delay:.7s}.artist-card[_ngcontent-%COMP%]:nth-child(8){animation-delay:.8s}"],data:{animation:[wt("cardsContainer",[dt(":enter",[Ge(".artist-card",[H({opacity:0,transform:"translateY(20px)"}),We(100,[ct("300ms ease-out",H({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]),wt("cardUpdate",[lt("in",H({opacity:1,transform:"scale(1)"})),dt("void => *",[H({opacity:0,transform:"scale(0.9)"}),ct("250ms ease-out")]),dt("* => void",[ct("200ms ease-in",H({opacity:0,transform:"scale(0.9)"}))])]),wt("modeTransition",[lt("showcase",H({opacity:1,transform:"translateY(0)"})),lt("currently-playing",H({opacity:1,transform:"translateY(0)"})),dt("showcase => currently-playing",[ct("400ms cubic-bezier(0.4, 0.0, 0.2, 1)",H({opacity:1,transform:"translateY(0)"}))]),dt("currently-playing => showcase",[ct("600ms cubic-bezier(0.4, 0.0, 0.2, 1)",H({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0});var pi=Vt;var It=class It{constructor(t){this.http=t;this.phantasia2Artists$=new P([]);this.phantasia2Album$=new P(null);this.prismaticCollection$=new P(null);this.twitterUsers$=new P([]);this.twitterTweets$=new P([]);this.twitterApiUsage$=new P([]);this.artistAvatarMap={SpiralFlip:{avatarPath:"/assets/images/artists/SpiralFlip.png",displayName:"SpiralFlip",color:"#FF6B6B",genre:"Organiser"},eili:{avatarPath:"/assets/images/artists/Eili.png",displayName:"eili",color:"#ffffff",genre:"Vocal, Electronic"},Ariatec:{avatarPath:"/assets/images/artists/Ariatec.png",displayName:"Ariatec",color:"#45B7D1",genre:"Ambient, Cinematic"},MB:{avatarPath:"/assets/images/artists/MBgov.png",displayName:"MBgov",color:"#96CEB4",genre:"Orchestral, Classical"},"Iku Hoshifuri":{avatarPath:"/assets/images/artists/Iku Hoshifuri.png",displayName:"Iku Hoshifuri",color:"#FFEAA7",genre:"Vocal, J-Pop"},"Justin Thornburgh":{avatarPath:"/assets/images/artists/Justin Thornburgh.png",displayName:"Justin Thornburgh",color:"#DDA0DD",genre:"Folk, Accordion"},v1ris:{avatarPath:"/assets/images/artists/v1ris.png",displayName:"v1ris",color:"#F8B500",genre:"Classical, Violin"},"Rita Kamishiro":{avatarPath:"/assets/images/artists/Rita Kamishiro.png",displayName:"Rita Kamishiro",color:"#E17055",genre:"Classical, Viola"},"Marcus Ho":{avatarPath:"/assets/images/artists/Marcus Ho.png",displayName:"Marcus Ho",color:"#6C5CE7",genre:"Classical, Cello"},AZALI:{avatarPath:"/assets/images/artists/AZALI.png",displayName:"AZALI",color:"#A29BFE",genre:"Electronic, Experimental"},Aloysius:{avatarPath:"/assets/images/artists/Aloysius.png",displayName:"Aloysius",color:"#FD79A8",genre:"Electronic, Ambient"},potatoTeto:{avatarPath:"/assets/images/artists/potatoTeto.png",displayName:"potatoTeto",color:"#00B894",genre:"Ambient, Experimental"},Artisan:{avatarPath:"/assets/images/artists/Artisan.png",displayName:"Artisan",color:"#E84393",genre:"Electronic, Melodic"},"Mei Naganowa":{avatarPath:"/assets/images/artists/Mei Naganowa.png",displayName:"Mei Naganowa",color:"#00CEC9",genre:"Electronic, Synthesizer V"},"Evin a'k":{avatarPath:"/assets/images/artists/Evin a'k.png",displayName:"Evin a'k",color:"#FDCB6E",genre:"Electronic, Bass"},BilliumMoto:{avatarPath:"/assets/images/artists/BilliumMoto.png",displayName:"BilliumMoto",color:"#74B9FF",genre:"Lofi, Chill"},"Elliot Hsu":{avatarPath:"/assets/images/artists/Elliot Hsu.png",displayName:"Elliot Hsu",color:"#55A3FF",genre:"Electronic, Ambient"},Yuzuki:{avatarPath:"/assets/images/artists/Yuzuki.png",displayName:"Yuzuki",color:"#FF7675",genre:"Electronic, Synthesizer V"},LucaProject:{avatarPath:"/assets/images/artists/LucaProject.png",displayName:"LucaProject",color:"#6C5CE7",genre:"Electronic, Melodic"},Koway:{avatarPath:"/assets/images/artists/Koway.png",displayName:"Koway",color:"#A29BFE",genre:"Electronic, Experimental"},\u4F0D\u4E00:{avatarPath:"/assets/images/artists/\u4F0D\u4E00.png",displayName:"\u4F0D\u4E00",color:"#FFEAA7",genre:"Vocal, Electronic"},Nstryder:{avatarPath:"/assets/images/artists/Nstryder.png",displayName:"Nstryder",color:"#E17055",genre:"Electronic, Hardcore"},MoAE:{avatarPath:"/assets/images/artists/MoAE:..png",displayName:"MoAE:.",color:"#00B894",genre:"Electronic, Ambient"},"dystopian tanuki":{avatarPath:"/assets/images/artists/dystopian tanuki.png",displayName:"dystopian tanuki",color:"#636E72",genre:"Experimental, Ambient"},Heem:{avatarPath:"/assets/images/artists/Heem.png",displayName:"Heem",color:"#FD79A8",genre:"Electronic, Melodic"},Woojinee:{avatarPath:"/assets/images/artists/Woojinee.png",displayName:"Woojinee",color:"#E84393",genre:"Violinist"},"Bigg Milk":{avatarPath:"/assets/images/artists/Bigg Milk.png",displayName:"Bigg Milk",color:"#00CEC9",genre:"Electronic, Chill"},Gardens:{avatarPath:"/assets/images/artists/Gardens.png",displayName:"Gardens",color:"#00B894",genre:"Electronic, Ambient"},"Sad Keyboard Guy":{avatarPath:"/assets/images/artists/Sad Keyboard Guy.png",displayName:"Sad Keyboard Guy",color:"#74B9FF",genre:"Lofi, Emotional"},Futsuunohito:{avatarPath:"/assets/images/artists/Futsuunohito.png",displayName:"Futsuunohito",color:"#A29BFE",genre:"Electronic, Cinematic"},shishishiena:{avatarPath:"/assets/images/artists/shishishiena.png",displayName:"shishishiena",color:"#FFEAA7",genre:"Voice Acting, Vocal"},PliXoR:{avatarPath:"/assets/images/artists/PliXoR.png",displayName:"PliXoR",color:"#ff6b6b",genre:"Mastering Engineer"},NapaL:{avatarPath:"/assets/images/artists/NapaL.png",displayName:"\uB098\uD314 NapaL",color:"#4ecdc4",genre:"Cover Illustration"},yy_artwork:{avatarPath:"/assets/images/artists/yy_artwork.png",displayName:"yy_artwork",color:"#45b7d1",genre:"Logo/Jacket Design"},"Elegant Sister":{avatarPath:"/assets/images/artists/Elegant Sister.png",displayName:"Elegant Sister",color:"#f7b733",genre:"Album Stream MV"},Len:{avatarPath:"/assets/images/artists/Len Licht.png",displayName:"Len",color:"#5f27cd",genre:"Crossfade MV/Live2D"},Daph:{avatarPath:"/assets/images/artists/Daph Shoo.png",displayName:"Daph",color:"#00d2d3",genre:"Live2D"},honabai:{avatarPath:"/assets/images/artists/honabai.png",displayName:"honabai",color:"#ff9ff3",genre:"Special Thanks"},shironill:{avatarPath:"/assets/images/artists/shironill.png",displayName:"shironill",color:"#f368e0",genre:"Special Thanks"},Prower:{avatarPath:"/assets/images/artists/Prower.png",displayName:"Prower",color:"#9b59b6",genre:"Electronic Producer"},Seycara:{avatarPath:"/assets/images/artists/Seycara.png",displayName:"Seycara",color:"#e74c3c",genre:"Electronic Producer"},Qyubey:{avatarPath:"/assets/images/artists/Qyubey.png",displayName:"Qyubey",color:"#f39c12",genre:"Electronic Producer"},Luscinia:{avatarPath:"/assets/images/artists/Luscinia.png",displayName:"Luscinia",color:"#2ecc71",genre:"Electronic Producer"},\u306F\u304C\u306D:{avatarPath:"/assets/images/artists/Hagane.png",displayName:"\u306F\u304C\u306D",color:"#34495e",genre:"Electronic Producer"},satella:{avatarPath:"/assets/images/artists/satella.png",displayName:"satella",color:"#8e44ad",genre:"Electronic Producer"},sleepy:{avatarPath:"/assets/images/artists/Sleepless.png",displayName:"sleepy",color:"#B0E0E6",genre:"Electronic Producer"},tikaal:{avatarPath:"/assets/images/artists/tikaal.png",displayName:"tikaal",color:"#FF9F40",genre:"Bass Guitarist"},"Miyamai Moca":{avatarPath:"/assets/images/artists/Miyamai-Moca.png",displayName:"Miyamai Moca",color:"#FFB347",genre:"Synthesizer V Operator"}};this.initializeGelDbData(),this.loadTwitterDataFromLocalStorage()}getPhantasia2Artists(){return this.phantasia2Artists$.asObservable()}getPhantasia2Album(){return this.phantasia2Album$.asObservable()}getPrismaticCollection(){return this.prismaticCollection$.asObservable()}getArtistAvatar(t){return this.artistAvatarMap[t]?.avatarPath||"/assets/images/artists/default-avatar.png"}getArtistDisplayName(t){return this.artistAvatarMap[t]?.displayName||t}getArtistColor(t){return this.artistAvatarMap[t]?.color||"#74B9FF"}getArtistAvatarMap(){return this.artistAvatarMap}getArtistSocialLinks(t){let a={SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},Heem:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},Prower:{twitter:"https://x.com/prowerrr_"},Seycara:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},Qyubey:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},Luscinia:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},\u306F\u304C\u306D:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},Hagane:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",twitter:"https://x.com/LucaProject6108",carrd:"https://lucaproject.carrd.co/"},satella:{twitter:"https://x.com/satella0w0",youtube:"https://www.youtube.com/@satella0w0"},sleepy:{twitter:"https://x.com/sleeplessgamign"},PliXoR:{twitter:"https://x.com/plixormusic"},NapaL:{twitter:"https://x.com/Ve_Xillum"},yy_artwork:{twitter:"https://x.com/yy_artwork"},"Elegant Sister":{twitter:"https://x.com/ElegantSister"},Len:{twitter:"https://x.com/Len_licht"},Daph:{twitter:"https://x.com/daphshoo"},honabai:{twitter:"https://x.com/honabai"},shironill:{twitter:"https://x.com/shironill"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee/?igsh=czUwcXg3aWh6NmM5&utm_source=qr#"},tikaal:{twitter:"https://x.com/tikaal"},"Miyamai Moca":{twitter:"https://x.com/ReeKDoesDTM"}}[t];return a?A({id:`social-${t.toLowerCase().replace(/\s+/g,"-")}`},a):null}searchArtists(t){return this.phantasia2Artists$.pipe(T(e=>e.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.display_name?.toLowerCase().includes(t.toLowerCase())||a.genre?.toLowerCase().includes(t.toLowerCase()))))}getFeaturedArtists(){return this.prismaticCollection$.pipe(T(t=>t?.featured_artists||[]))}initializeGelDbData(){try{let t=Object.entries(this.artistAvatarMap).map(([r,s],p)=>({id:`artist-${p+1}`,name:r,display_name:s.displayName,avatar:s.avatarPath,color:s.color,genre:s.genre,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));this.phantasia2Artists$.next(t);let e={id:"phantasia-2",title:"Phantasia 2",artist:t.find(r=>r.name==="SpiralFlip"),release_date:"2025-01-01",genre:"Electronic Compilation",description:"The second installment of the Phantasia compilation series",cover_art_url:"/assets/images/covers/phantasia2-cover.jpg",track_count:20,duration_seconds:4567,songs:[]};this.phantasia2Album$.next(e);let a={id:"prismatic-collections",name:"Prismatic Collections",description:"A multi-faceted music collection celebrating diverse electronic artists",color_scheme:"prismatic",theme:"electronic-fusion",is_featured:!0,collections:[],featured_artists:t.slice(0,10)};this.prismaticCollection$.next(a)}catch(t){console.error("Failed to initialize geldb data:",t)}}refreshData(){return this.initializeGelDbData(),Fe(!0)}getTwitterUsers(){return this.twitterUsers$.asObservable()}getTwitterTweets(){return this.twitterTweets$.asObservable()}getTwitterApiUsage(){return this.twitterApiUsage$.asObservable()}cacheTwitterUser(t){let e=this.twitterUsers$.value,a=e.findIndex(p=>p.twitter_id===t.twitter_id),r=new Date().toISOString(),s={id:t.id||`twitter_user_${t.twitter_id}`,twitter_id:t.twitter_id,username:t.username,display_name:t.display_name,profile_image_url:t.profile_image_url,verified:t.verified,followers_count:t.followers_count,following_count:t.following_count,tweet_count:t.tweet_count,cached_at:r,updated_at:r};a>=0?e[a]=s:e.push(s),this.twitterUsers$.next([...e]),this.saveTwitterDataToLocalStorage(),console.log(`\u{1F4CB} Cached Twitter user: @${s.username}`)}cacheTwitterTweets(t){let e=this.twitterTweets$.value,a=new Date().toISOString();t.forEach(r=>{let s=e.findIndex(i=>i.tweet_id===r.tweet_id),p=(r.text.match(/#\w+/g)||[]).map(i=>i.substring(1)),g=(r.text.match(/@\w+/g)||[]).map(i=>i.substring(1)),h=r.text.match(/https?:\/\/[^\s]+/g)||[],y={id:r.id||`twitter_tweet_${r.tweet_id}`,tweet_id:r.tweet_id,user_id:r.user_id,text:r.text,created_at:r.created_at,retweet_count:r.retweet_count,like_count:r.like_count,reply_count:r.reply_count,quote_count:r.quote_count,hashtags:p,mentions:g,urls:h,cached_at:a,updated_at:a};s>=0?e[s]=y:e.push(y)}),e.sort((r,s)=>new Date(s.created_at).getTime()-new Date(r.created_at).getTime()),this.twitterTweets$.next([...e]),this.saveTwitterDataToLocalStorage(),console.log(`\u{1F4CB} Cached ${t.length} Twitter tweets`)}logTwitterApiUsage(t){let e=this.twitterApiUsage$.value,a=new Date().toISOString(),r=new Date().getMonth(),s=new Date().getFullYear(),p=e.filter(h=>{let y=new Date(h.timestamp);return y.getMonth()===r&&y.getFullYear()===s}).length+1,g={id:t.id||`api_call_${Date.now()}_${Math.random().toString(36).substring(2,8)}`,endpoint:t.endpoint,method:t.method,timestamp:a,success:t.success,rate_limit_remaining:t.rate_limit_remaining,error_message:t.error_message,monthly_calls_used:p};e.push(g),e.length>1e3&&e.splice(0,e.length-1e3),this.twitterApiUsage$.next([...e]),this.saveTwitterDataToLocalStorage(),console.log(`\u{1F4CA} Logged Twitter API call: ${g.method} ${g.endpoint} (${g.success?"Success":"Failed"})`)}getCachedTwitterUser(t){return this.twitterUsers$.pipe(T(e=>e.find(a=>a.username.toLowerCase()===t.toLowerCase())||null))}getCachedTwitterTweetsForUser(t){return this.twitterTweets$.pipe(T(e=>e.filter(a=>a.user_id===t)))}getMonthlyApiUsageStats(){return this.twitterApiUsage$.pipe(T(t=>{let e=new Date().getMonth(),a=new Date().getFullYear(),r=t.filter(n=>{let o=new Date(n.timestamp);return o.getMonth()===e&&o.getFullYear()===a}),s=r.length,p=r.filter(n=>n.success).length,g=s-p,h=s>0?p/s*100:0,y=Math.max(0,100-s),i=r.length>0?r[r.length-1].timestamp:null;return{totalCalls:s,successfulCalls:p,failedCalls:g,successRate:h,remainingCalls:y,lastCallTimestamp:i}}))}isTwitterDataFresh(t,e=24){return this.getCachedTwitterUser(t).pipe(T(a=>{if(!a)return!1;let r=Date.now()-new Date(a.cached_at).getTime(),s=e*60*60*1e3;return r<s}))}clearTwitterCache(){this.twitterUsers$.next([]),this.twitterTweets$.next([]),this.twitterApiUsage$.next([]),localStorage.removeItem("geldb_twitter_cache"),console.log("\u{1F5D1}\uFE0F Twitter cache cleared")}saveTwitterDataToLocalStorage(){try{let t={users:this.twitterUsers$.value,tweets:this.twitterTweets$.value,usage:this.twitterApiUsage$.value,timestamp:Date.now()};localStorage.setItem("geldb_twitter_cache",JSON.stringify(t))}catch(t){console.warn("Failed to save Twitter data to localStorage:",t)}}loadTwitterDataFromLocalStorage(){try{let t=localStorage.getItem("geldb_twitter_cache");if(!t)return;let e=JSON.parse(t);if(Date.now()-e.timestamp>10080*60*1e3){localStorage.removeItem("geldb_twitter_cache");return}this.twitterUsers$.next(e.users||[]),this.twitterTweets$.next(e.tweets||[]),this.twitterApiUsage$.next(e.usage||[]),console.log(`\u{1F4CB} Loaded Twitter cache: ${e.users?.length||0} users, ${e.tweets?.length||0} tweets, ${e.usage?.length||0} API calls`)}catch(t){console.warn("Failed to load Twitter data from localStorage:",t),localStorage.removeItem("geldb_twitter_cache")}}};It.\u0275fac=function(e){return new(e||It)($(Rt))},It.\u0275prov=j({token:It,factory:It.\u0275fac,providedIn:"root"});var Ce=It;var aa=["*"],hi=(c,t)=>t.id;function na(c,t){if(c&1&&O(0,"img",20),c&2){let e=w().$implicit;x("src",e.avatar,ht)("alt",e.name+" avatar")}}function ra(c,t){if(c&1&&(f(0,"div",21),M(1),b()),c&2){let e=w().$implicit;W("background",e.color),v(),at(" ",e.initials," ")}}function oa(c,t){c&1&&(f(0,"span",26),M(1,"\u{1D54F}"),b())}function sa(c,t){c&1&&(f(0,"span",27),M(1,"\u{1F4F7}"),b())}function ca(c,t){if(c&1){let e=it();f(0,"div",22)(1,"button",23),F("click",function(r){tt(e);let s=w().$implicit,p=w();return et(s.socialLinks.twitter?p.onSocialLinkClick(s.socialLinks.twitter,r):p.onSocialLinkClick(s.socialLinks.instagram,r))}),I(2,oa,2,0,"span",24)(3,sa,2,0,"span",25),b()()}if(c&2){let e=w().$implicit;v(),q("aria-label",e.name+" social link"),v(),x("ngIf",e.socialLinks.twitter),v(),x("ngIf",e.socialLinks.instagram&&!e.socialLinks.twitter)}}function la(c,t){if(c&1){let e=it();f(0,"div",11),F("click",function(){let r=tt(e).$implicit,s=w();return et(s.onCardClick(r))}),f(1,"div",12),I(2,na,1,2,"img",13)(3,ra,2,3,"div",14),b(),f(4,"div",15)(5,"div",16),M(6),b(),f(7,"div",17),M(8),b()(),I(9,ca,4,3,"div",18),O(10,"div",19),b()}if(c&2){let e=t.$implicit;W("--accent-color",e.color),v(2),x("ngIf",e.avatar),v(),x("ngIf",!e.avatar),v(3),N(e.name),v(2),N(e.role),v(),x("ngIf",e.socialLinks.twitter||e.socialLinks.instagram)}}function da(c,t){if(c&1&&O(0,"img",20),c&2){let e=w().$implicit;x("src",e.avatar,ht)("alt",e.name+" avatar")}}function ma(c,t){if(c&1&&(f(0,"div",21),M(1),b()),c&2){let e=w().$implicit;W("background",e.color),v(),at(" ",e.initials," ")}}function ua(c,t){c&1&&(f(0,"span",26),M(1,"\u{1D54F}"),b())}function pa(c,t){c&1&&(f(0,"span",27),M(1,"\u{1F4F7}"),b())}function ha(c,t){if(c&1){let e=it();f(0,"div",22)(1,"button",23),F("click",function(r){tt(e);let s=w().$implicit,p=w();return et(s.socialLinks.twitter?p.onSocialLinkClick(s.socialLinks.twitter,r):p.onSocialLinkClick(s.socialLinks.instagram,r))}),I(2,ua,2,0,"span",24)(3,pa,2,0,"span",25),b()()}if(c&2){let e=w().$implicit;v(),q("aria-label",e.name+" social link"),v(),x("ngIf",e.socialLinks.twitter),v(),x("ngIf",e.socialLinks.instagram&&!e.socialLinks.twitter)}}function ga(c,t){if(c&1){let e=it();f(0,"div",11),F("click",function(){let r=tt(e).$implicit,s=w();return et(s.onCardClick(r))}),f(1,"div",12),I(2,da,1,2,"img",13)(3,ma,2,3,"div",14),b(),f(4,"div",15)(5,"div",16),M(6),b(),f(7,"div",17),M(8),b()(),I(9,ha,4,3,"div",18),O(10,"div",19),b()}if(c&2){let e=t.$implicit;W("--accent-color",e.color),v(2),x("ngIf",e.avatar),v(),x("ngIf",!e.avatar),v(3),N(e.name),v(2),N(e.role),v(),x("ngIf",e.socialLinks.twitter||e.socialLinks.instagram)}}var Ht=class Ht{constructor(t){this.gelDbService=t;this.specialMentions=G([]);this.displayedMentions=st(()=>this.specialMentions().map(t=>B(A({},t),{initials:this.getInitials(t.name)})));this.leftSideCards=st(()=>{let t=this.displayedMentions(),e=Math.ceil(t.length/2);return t.slice(0,e)});this.rightSideCards=st(()=>{let t=this.displayedMentions(),e=Math.ceil(t.length/2);return t.slice(e)})}ngOnInit(){this.loadSpecialMentionsFromDatabase()}loadSpecialMentionsFromDatabase(){let e=["SpiralFlip","PliXoR","NapaL","yy_artwork","Elegant Sister","Len","Daph","honabai","shironill"].map(a=>{let r=this.gelDbService.getArtistAvatar(a),s=this.gelDbService.getArtistDisplayName(a),p=this.gelDbService.getArtistColor(a),g=this.gelDbService.getArtistSocialLinks(a),y=this.gelDbService.getArtistAvatarMap()[a]?.genre||"Production Team";return{id:a.toLowerCase().replace(/\s+/g,"-"),name:s,role:y,avatar:r,color:p,socialLinks:{twitter:g?.twitter,youtube:g?.youtube,instagram:g?.instagram,website:g?.website}}});this.specialMentions.set(e)}getInitials(t){let e=t.split(" ").filter(a=>a.length>0);return e.length===0?"?":e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}onCardClick(t){t.socialLinks.twitter?window.open(t.socialLinks.twitter,"_blank","noopener,noreferrer"):t.socialLinks.instagram?window.open(t.socialLinks.instagram,"_blank","noopener,noreferrer"):t.socialLinks.youtube?window.open(t.socialLinks.youtube,"_blank","noopener,noreferrer"):t.socialLinks.website&&window.open(t.socialLinks.website,"_blank","noopener,noreferrer")}onSocialLinkClick(t,e){e.stopPropagation(),window.open(t,"_blank","noopener,noreferrer")}};Ht.\u0275fac=function(e){return new(e||Ht)(z(Ce))},Ht.\u0275cmp=R({type:Ht,selectors:[["app-special-mentions"]],ngContentSelectors:aa,decls:18,vars:0,consts:[[1,"special-mentions-container"],[1,"section-header"],[1,"section-title"],[1,"section-subtitle"],[1,"three-column-layout"],[1,"cards-column","left-column"],[1,"column-cards"],[1,"compact-card","vertical-card",3,"--accent-color"],[1,"main-content-column"],[1,"content-placeholder"],[1,"cards-column","right-column"],[1,"compact-card","vertical-card",3,"click"],[1,"compact-avatar"],["class","avatar-image","loading","lazy",3,"src","alt",4,"ngIf"],["class","avatar-initials",3,"background",4,"ngIf"],[1,"compact-info"],[1,"artist-name"],[1,"artist-role"],["class","compact-social",4,"ngIf"],[1,"card-accent"],["loading","lazy",1,"avatar-image",3,"src","alt"],[1,"avatar-initials"],[1,"compact-social"],["mat-icon-button","",1,"social-btn",3,"click"],["class","twitter-x-icon",4,"ngIf"],["class","instagram-icon",4,"ngIf"],[1,"twitter-x-icon"],[1,"instagram-icon"]],template:function(e,a){e&1&&(xt(),f(0,"div",0)(1,"div",1)(2,"h3",2),M(3,"Special Thanks"),b(),f(4,"p",3),M(5,"Production Team"),b()(),f(6,"div",4)(7,"div",5)(8,"div",6),xe(9,la,11,7,"div",7,hi),b()(),f(11,"div",8)(12,"div",9),Mt(13),b()(),f(14,"div",10)(15,"div",6),xe(16,ga,11,7,"div",7,hi),b()()()()),e&2&&(v(9),Me(a.leftSideCards()),v(7),Me(a.rightSideCards()))},dependencies:[nt,ft,jt,ue,Qt],styles:['.special-mentions-container[_ngcontent-%COMP%]{width:100%;padding:1rem 0;min-height:100vh}.section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;position:relative;z-index:10}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fffffff2;margin:0 0 .5rem;text-shadow:0 2px 8px rgba(0,0,0,.4);letter-spacing:.5px}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#ffffffbf;margin:0;text-transform:uppercase;letter-spacing:1px;font-weight:500}.three-column-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr 250px;gap:2rem;max-width:1400px;margin:0 auto;padding:0 2rem;min-height:80vh;align-items:start;overflow-x:hidden;grid-template-rows:auto;width:100%;max-width:100%;box-sizing:border-box}@media (min-width: 1200px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:280px 1fr 280px;gap:3rem;max-width:1600px}}@media (min-width: 1600px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:320px 1fr 320px;gap:4rem;max-width:1800px}}.cards-column[_ngcontent-%COMP%]{position:sticky;top:2rem;height:fit-content;max-height:calc(100vh - 4rem);overflow:visible}.cards-column.left-column[_ngcontent-%COMP%]{justify-self:end}.cards-column.right-column[_ngcontent-%COMP%]{justify-self:start}.column-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;overflow:visible;width:100%}.main-content-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;min-height:60vh;padding:2rem 1rem;width:100%;box-sizing:border-box}.main-content-column[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.content-placeholder[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;min-height:400px;background:#1e1e284d;border:2px dashed rgba(255,255,255,.2);border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);max-width:100%;overflow:visible;box-sizing:border-box;container-type:inline-size}.content-placeholder[_ngcontent-%COMP%]:empty:before{content:"Main Content Area";color:#ffffff80;font-size:1.2rem;font-weight:500;text-align:center;margin:auto}.content-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;max-width:100%;flex:1;box-sizing:border-box}.content-placeholder[_ngcontent-%COMP%] > *.dynamic-artist-cards-container[_ngcontent-%COMP%]{width:100%;max-width:none}.content-placeholder[_ngcontent-%COMP%] > *.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{width:100%;max-width:none}.compact-card[_ngcontent-%COMP%]{--accent-color: #ffffff;position:relative;background:#0f0f19f2;border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:1rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);overflow:hidden;width:100%}.compact-card.vertical-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;min-height:80px;max-width:100%;box-sizing:border-box}.compact-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);background:#191928fa;border-color:var(--accent-color);box-shadow:0 12px 35px #0006,0 0 25px rgba(var(--accent-color-rgb, 255, 255, 255),.15),inset 0 1px #ffffff1a}.compact-card[_ngcontent-%COMP%]:hover   .card-accent[_ngcontent-%COMP%]{opacity:1}.compact-card[_ngcontent-%COMP%]:hover   .compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{transform:scale(1.05)}.compact-card[_ngcontent-%COMP%]:hover   .artist-name[_ngcontent-%COMP%]{color:var(--accent-color);text-shadow:0 0 8px rgba(var(--accent-color-rgb, 255, 255, 255),.3)}.compact-card[_ngcontent-%COMP%]:hover   .social-btn[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1) translateY(-1px)}.compact-card[_ngcontent-%COMP%]:active{transform:translateY(-2px) scale(.98)}.compact-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:44px;height:44px;border-radius:50%;overflow:hidden;background:#ffffff1a;position:relative;border:2px solid rgba(255,255,255,.2);transition:all .3s ease}.compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s cubic-bezier(.4,0,.2,1)}.compact-avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:700;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.6);letter-spacing:.5px}.compact-info[_ngcontent-%COMP%]{flex:1;min-width:0;padding:0 .25rem}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#fffffff5;margin:0 0 .15rem;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.2}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.75rem;color:#ffffffa6;margin:0;text-transform:uppercase;letter-spacing:.5px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.1}.compact-social[_ngcontent-%COMP%]{flex-shrink:0}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;background:#ffffff14;border:1px solid rgba(255,255,255,.25);opacity:.8;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover{background:var(--accent-color);border-color:var(--accent-color);opacity:1;box-shadow:0 4px 12px rgba(var(--accent-color-rgb, 255, 255, 255),.3)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover   .twitter-x-icon[_ngcontent-%COMP%], .compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover   .instagram-icon[_ngcontent-%COMP%]{color:#000;transform:scale(1.1)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#ffffffe6;transition:all .3s ease}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .instagram-icon[_ngcontent-%COMP%]{font-size:.9rem;color:#ffffffe6;transition:all .3s ease}.card-accent[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent-color),transparent);opacity:0;transition:opacity .3s ease;border-radius:0 0 16px 16px}@media (max-width: 1199px){.three-column-layout[_ngcontent-%COMP%]{gap:1.5rem;padding:0 1.5rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.6rem}}@media (max-width: 991px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:200px 1fr 200px;gap:1rem;padding:0 1rem}.compact-card.vertical-card[_ngcontent-%COMP%]{padding:.8rem;gap:.6rem;min-height:70px}.compact-avatar[_ngcontent-%COMP%]{width:38px;height:38px}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.85rem}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 768px){.special-mentions-container[_ngcontent-%COMP%]{padding:.5rem 0}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.4rem}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:.9rem}.three-column-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:0 1rem;min-height:auto}.cards-column[_ngcontent-%COMP%]{position:static;max-height:none;width:100%}.cards-column.left-column[_ngcontent-%COMP%], .cards-column.right-column[_ngcontent-%COMP%]{justify-self:auto}.column-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:.75rem;padding:0}.main-content-column[_ngcontent-%COMP%]{order:-1;min-height:300px;padding:1rem 0}.content-placeholder[_ngcontent-%COMP%]{min-height:250px;border-radius:12px}.content-placeholder[_ngcontent-%COMP%]:empty:before{font-size:1rem}}@media (max-width: 480px){.special-mentions-container[_ngcontent-%COMP%]{padding:.25rem 0}.section-header[_ngcontent-%COMP%]{margin-bottom:1rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.2rem}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.three-column-layout[_ngcontent-%COMP%]{padding:0 .5rem;gap:1rem}.column-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.6rem}.compact-card.vertical-card[_ngcontent-%COMP%]{padding:.7rem;gap:.5rem;min-height:60px;border-radius:12px}.compact-avatar[_ngcontent-%COMP%]{width:34px;height:34px}.compact-avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{font-size:.8rem}.compact-info[_ngcontent-%COMP%]{padding:0 .15rem}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.8rem}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.65rem}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:6px}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.75rem}.main-content-column[_ngcontent-%COMP%]{padding:.5rem 0}.content-placeholder[_ngcontent-%COMP%]{min-height:200px;padding:1rem .5rem}}.cards-column[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3) transparent}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:2px}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}@media (prefers-reduced-motion: reduce){.compact-card[_ngcontent-%COMP%], .compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%], .social-btn[_ngcontent-%COMP%], .card-accent[_ngcontent-%COMP%], .cards-column[_ngcontent-%COMP%]{transition:none!important;transform:none!important}.compact-card[_ngcontent-%COMP%]:hover{transform:none!important}}@media (prefers-contrast: high){.compact-card[_ngcontent-%COMP%]{border-color:#fff9;background:#000000f2}.compact-avatar[_ngcontent-%COMP%]{border-color:#ffffff80}.artist-name[_ngcontent-%COMP%]{color:#fff!important}.artist-role[_ngcontent-%COMP%]{color:#ffffffd9!important}.content-placeholder[_ngcontent-%COMP%]{border-color:#ffffff80;background:#000c}}.compact-card[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:2px}.social-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:1px}']});var gi=Ht;export{ba as a,ue as b,qn as c,rt as d,vt as e,mi as f,ui as g,pi as h,gi as i};
