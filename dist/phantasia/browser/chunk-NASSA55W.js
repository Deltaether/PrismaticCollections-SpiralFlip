import{a as ut}from"./chunk-VHLSQL36.js";import{c as ht,d as at,f as N,g as ot,h as st,i as me,j as fe}from"./chunk-W6LHCHNP.js";import{n as Nt,p as Vt}from"./chunk-QQVNMPIH.js";import{v as Jt,w as ge,x as At}from"./chunk-GHTJI5BA.js";import{$ as le,$b as $t,A as ct,Aa as X,Ba as ue,C as G,Ea as T,Fb as Ft,H as mt,J as oe,K as se,Ka as J,L as E,Mb as jt,Nb as dt,Oa as qt,Pa as Xt,Q as z,Qa as v,R as ce,Ra as h,Rb as et,Sa as _,T as $,Ta as A,W as K,X as q,Xb as wt,Ya as Q,_a as D,a as S,ab as x,b as j,bb as Qt,ca as R,cb as Zt,d as we,e as Ae,f as Y,i as V,j as w,lb as H,mb as Z,n as ae,nb as pe,ob as C,p as O,pa as lt,pb as F,q as kt,qb as tt,ra as y,sa as ft,va as de,wa as L,zb as rt}from"./chunk-X2YULANI.js";var _e=we(Ht=>{"use strict";(function(){"use strict";var p=function(){this.init()};p.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window<"u"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var r=this||t;if(i=parseFloat(i),r.ctx||P(),typeof i<"u"&&i>=0&&i<=1){if(r._volume=i,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var a=0;a<r._howls.length;a++)if(!r._howls[a]._webAudio)for(var c=r._howls[a]._getSoundIds(),d=0;d<c.length;d++){var u=r._howls[a]._soundById(c[d]);u&&u._node&&(u._node.volume=u._volume*i)}return r}return r._volume},mute:function(i){var r=this||t;r.ctx||P(),r._muted=i,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(i?0:r._volume,t.ctx.currentTime);for(var a=0;a<r._howls.length;a++)if(!r._howls[a]._webAudio)for(var c=r._howls[a]._getSoundIds(),d=0;d<c.length;d++){var u=r._howls[a]._soundById(c[d]);u&&u._node&&(u._node.muted=i?!0:u._muted)}return r},stop:function(){for(var i=this||t,r=0;r<i._howls.length;r++)i._howls[r].stop();return i},unload:function(){for(var i=this||t,r=i._howls.length-1;r>=0;r--)i._howls[r].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close<"u"&&(i.ctx.close(),i.ctx=null,P()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio<"u")try{var r=new Audio;typeof r.oncanplaythrough>"u"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var r=new Audio;r.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return i}if(!r||typeof r.canPlayType!="function")return i;var a=r.canPlayType("audio/mpeg;").replace(/^no$/,""),c=i._navigator?i._navigator.userAgent:"",d=c.match(/OPR\/(\d+)/g),u=d&&parseInt(d[0].split("/")[1],10)<33,l=c.indexOf("Safari")!==-1&&c.indexOf("Chrome")===-1,b=c.match(/Version\/(.*?) /),M=l&&b&&parseInt(b[1],10)<15;return i._codecs={mp3:!!(!u&&(a||r.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!a,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!M&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!M&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var r=function(a){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var c=new Audio;c._unlocked=!0,i._releaseHtml5Audio(c)}catch{i.noAudio=!0;break}for(var d=0;d<i._howls.length;d++)if(!i._howls[d]._webAudio)for(var u=i._howls[d]._getSoundIds(),l=0;l<u.length;l++){var b=i._howls[d]._soundById(u[l]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}i._autoResume();var M=i.ctx.createBufferSource();M.buffer=i._scratchBuffer,M.connect(i.ctx.destination),typeof M.start>"u"?M.noteOn(0):M.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),M.onended=function(){M.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var I=0;I<i._howls.length;I++)i._howls[I]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var r=new Audio().play();return r&&typeof Promise<"u"&&(r instanceof Promise||typeof r.then=="function")&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var r=this||t;return i._unlocked&&r._html5AudioPool.push(i),r},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend>"u"||!t.usingWebAudio)){for(var r=0;r<i._howls.length;r++)if(i._howls[r]._webAudio){for(var a=0;a<i._howls[r]._sounds.length;a++)if(!i._howls[r]._sounds[a]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(i.autoSuspend){i._suspendTimer=null,i.state="suspending";var c=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(c,c)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume>"u"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var r=0;r<i._howls.length;r++)i._howls[r]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new p,e=function(i){var r=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}r.init(i)};e.prototype={init:function(i){var r=this;return t.ctx||P(),r._autoplay=i.autoplay||!1,r._format=typeof i.format!="string"?i.format:[i.format],r._html5=i.html5||!1,r._muted=i.mute||!1,r._loop=i.loop||!1,r._pool=i.pool||5,r._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,r._rate=i.rate||1,r._sprite=i.sprite||{},r._src=typeof i.src!="string"?i.src:[i.src],r._volume=i.volume!==void 0?i.volume:1,r._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=i.onend?[{fn:i.onend}]:[],r._onfade=i.onfade?[{fn:i.onfade}]:[],r._onload=i.onload?[{fn:i.onload}]:[],r._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],r._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],r._onpause=i.onpause?[{fn:i.onpause}]:[],r._onplay=i.onplay?[{fn:i.onplay}]:[],r._onstop=i.onstop?[{fn:i.onstop}]:[],r._onmute=i.onmute?[{fn:i.onmute}]:[],r._onvolume=i.onvolume?[{fn:i.onvolume}]:[],r._onrate=i.onrate?[{fn:i.onrate}]:[],r._onseek=i.onseek?[{fn:i.onseek}]:[],r._onunlock=i.onunlock?[{fn:i.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r._preload!=="none"&&r.load(),r},load:function(){var i=this,r=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var a=0;a<i._src.length;a++){var c,d;if(i._format&&i._format[a])c=i._format[a];else{if(d=i._src[a],typeof d!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}c=/^data:audio\/([^;,]+);/i.exec(d),c||(c=/\.([^.]+)$/.exec(d.split("?",1)[0])),c&&(c=c[1].toLowerCase())}if(c||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),c&&t.codecs(c)){r=i._src[a];break}}if(!r){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=r,i._state="loading",window.location.protocol==="https:"&&r.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new n(i),i._webAudio&&s(i),i},play:function(i,r){var a=this,c=null;if(typeof i=="number")c=i,i=null;else{if(typeof i=="string"&&a._state==="loaded"&&!a._sprite[i])return null;if(typeof i>"u"&&(i="__default",!a._playLock)){for(var d=0,u=0;u<a._sounds.length;u++)a._sounds[u]._paused&&!a._sounds[u]._ended&&(d++,c=a._sounds[u]._id);d===1?i=null:c=null}}var l=c?a._soundById(c):a._inactiveSound();if(!l)return null;if(c&&!i&&(i=l._sprite||"__default"),a._state!=="loaded"){l._sprite=i,l._ended=!1;var b=l._id;return a._queue.push({event:"play",action:function(){a.play(b)}}),b}if(c&&!l._paused)return r||a._loadQueue("play"),l._id;a._webAudio&&t._autoResume();var M=Math.max(0,l._seek>0?l._seek:a._sprite[i][0]/1e3),I=Math.max(0,(a._sprite[i][0]+a._sprite[i][1])/1e3-M),U=I*1e3/Math.abs(l._rate),nt=a._sprite[i][0]/1e3,gt=(a._sprite[i][0]+a._sprite[i][1])/1e3;l._sprite=i,l._ended=!1;var B=function(){l._paused=!1,l._seek=M,l._start=nt,l._stop=gt,l._loop=!!(l._loop||a._sprite[i][2])};if(M>=gt){a._ended(l);return}var k=l._node;if(a._webAudio){var ie=function(){a._playLock=!1,B(),a._refreshBuffer(l);var xt=l._muted||a._muted?0:l._volume;k.gain.setValueAtTime(xt,t.ctx.currentTime),l._playStart=t.ctx.currentTime,typeof k.bufferSource.start>"u"?l._loop?k.bufferSource.noteGrainOn(0,M,86400):k.bufferSource.noteGrainOn(0,M,I):l._loop?k.bufferSource.start(0,M,86400):k.bufferSource.start(0,M,I),U!==1/0&&(a._endTimers[l._id]=setTimeout(a._ended.bind(a,l),U)),r||setTimeout(function(){a._emit("play",l._id),a._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?ie():(a._playLock=!0,a.once("resume",ie),a._clearTimer(l._id))}else{var ne=function(){k.currentTime=M,k.muted=l._muted||a._muted||t._muted||k.muted,k.volume=l._volume*t.volume(),k.playbackRate=l._rate;try{var xt=k.play();if(xt&&typeof Promise<"u"&&(xt instanceof Promise||typeof xt.then=="function")?(a._playLock=!0,B(),xt.then(function(){a._playLock=!1,k._unlocked=!0,r?a._loadQueue():a._emit("play",l._id)}).catch(function(){a._playLock=!1,a._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0})):r||(a._playLock=!1,B(),a._emit("play",l._id)),k.playbackRate=l._rate,k.paused){a._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||l._loop?a._endTimers[l._id]=setTimeout(a._ended.bind(a,l),U):(a._endTimers[l._id]=function(){a._ended(l),k.removeEventListener("ended",a._endTimers[l._id],!1)},k.addEventListener("ended",a._endTimers[l._id],!1))}catch(ke){a._emit("playerror",l._id,ke)}};k.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(k.src=a._src,k.load());var xe=window&&window.ejecta||!k.readyState&&t._navigator.isCocoonJS;if(k.readyState>=3||xe)ne();else{a._playLock=!0,a._state="loading";var re=function(){a._state="loaded",ne(),k.removeEventListener(t._canPlayEvent,re,!1)};k.addEventListener(t._canPlayEvent,re,!1),a._clearTimer(l._id)}}return l._id},pause:function(i){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(i)}}),r;for(var a=r._getSoundIds(i),c=0;c<a.length;c++){r._clearTimer(a[c]);var d=r._soundById(a[c]);if(d&&!d._paused&&(d._seek=r.seek(a[c]),d._rateSeek=0,d._paused=!0,r._stopFade(a[c]),d._node))if(r._webAudio){if(!d._node.bufferSource)continue;typeof d._node.bufferSource.stop>"u"?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),r._cleanBuffer(d._node)}else(!isNaN(d._node.duration)||d._node.duration===1/0)&&d._node.pause();arguments[1]||r._emit("pause",d?d._id:null)}return r},stop:function(i,r){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"stop",action:function(){a.stop(i)}}),a;for(var c=a._getSoundIds(i),d=0;d<c.length;d++){a._clearTimer(c[d]);var u=a._soundById(c[d]);u&&(u._seek=u._start||0,u._rateSeek=0,u._paused=!0,u._ended=!0,a._stopFade(c[d]),u._node&&(a._webAudio?u._node.bufferSource&&(typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),a._cleanBuffer(u._node)):(!isNaN(u._node.duration)||u._node.duration===1/0)&&(u._node.currentTime=u._start||0,u._node.pause(),u._node.duration===1/0&&a._clearSound(u._node))),r||a._emit("stop",u._id))}return a},mute:function(i,r){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"mute",action:function(){a.mute(i,r)}}),a;if(typeof r>"u")if(typeof i=="boolean")a._muted=i;else return a._muted;for(var c=a._getSoundIds(r),d=0;d<c.length;d++){var u=a._soundById(c[d]);u&&(u._muted=i,u._interval&&a._stopFade(u._id),a._webAudio&&u._node?u._node.gain.setValueAtTime(i?0:u._volume,t.ctx.currentTime):u._node&&(u._node.muted=t._muted?!0:i),a._emit("mute",u._id))}return a},volume:function(){var i=this,r=arguments,a,c;if(r.length===0)return i._volume;if(r.length===1||r.length===2&&typeof r[1]>"u"){var d=i._getSoundIds(),u=d.indexOf(r[0]);u>=0?c=parseInt(r[0],10):a=parseFloat(r[0])}else r.length>=2&&(a=parseFloat(r[0]),c=parseInt(r[1],10));var l;if(typeof a<"u"&&a>=0&&a<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;typeof c>"u"&&(i._volume=a),c=i._getSoundIds(c);for(var b=0;b<c.length;b++)l=i._soundById(c[b]),l&&(l._volume=a,r[2]||i._stopFade(c[b]),i._webAudio&&l._node&&!l._muted?l._node.gain.setValueAtTime(a,t.ctx.currentTime):l._node&&!l._muted&&(l._node.volume=a*t.volume()),i._emit("volume",l._id))}else return l=c?i._soundById(c):i._sounds[0],l?l._volume:0;return i},fade:function(i,r,a,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"fade",action:function(){d.fade(i,r,a,c)}}),d;i=Math.min(Math.max(0,parseFloat(i)),1),r=Math.min(Math.max(0,parseFloat(r)),1),a=parseFloat(a),d.volume(i,c);for(var u=d._getSoundIds(c),l=0;l<u.length;l++){var b=d._soundById(u[l]);if(b){if(c||d._stopFade(u[l]),d._webAudio&&!b._muted){var M=t.ctx.currentTime,I=M+a/1e3;b._volume=i,b._node.gain.setValueAtTime(i,M),b._node.gain.linearRampToValueAtTime(r,I)}d._startFadeInterval(b,i,r,a,u[l],typeof c>"u")}}return d},_startFadeInterval:function(i,r,a,c,d,u){var l=this,b=r,M=a-r,I=Math.abs(M/.01),U=Math.max(4,I>0?c/I:c),nt=Date.now();i._fadeTo=a,i._interval=setInterval(function(){var gt=(Date.now()-nt)/c;nt=Date.now(),b+=M*gt,b=Math.round(b*100)/100,M<0?b=Math.max(a,b):b=Math.min(a,b),l._webAudio?i._volume=b:l.volume(b,i._id,!0),u&&(l._volume=b),(a<r&&b<=a||a>r&&b>=a)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,l.volume(a,i._id),l._emit("fade",i._id))},U)},_stopFade:function(i){var r=this,a=r._soundById(i);return a&&a._interval&&(r._webAudio&&a._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(a._interval),a._interval=null,r.volume(a._fadeTo,i),a._fadeTo=null,r._emit("fade",i)),r},loop:function(){var i=this,r=arguments,a,c,d;if(r.length===0)return i._loop;if(r.length===1)if(typeof r[0]=="boolean")a=r[0],i._loop=a;else return d=i._soundById(parseInt(r[0],10)),d?d._loop:!1;else r.length===2&&(a=r[0],c=parseInt(r[1],10));for(var u=i._getSoundIds(c),l=0;l<u.length;l++)d=i._soundById(u[l]),d&&(d._loop=a,i._webAudio&&d._node&&d._node.bufferSource&&(d._node.bufferSource.loop=a,a&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop,i.playing(u[l])&&(i.pause(u[l],!0),i.play(u[l],!0)))));return i},rate:function(){var i=this,r=arguments,a,c;if(r.length===0)c=i._sounds[0]._id;else if(r.length===1){var d=i._getSoundIds(),u=d.indexOf(r[0]);u>=0?c=parseInt(r[0],10):a=parseFloat(r[0])}else r.length===2&&(a=parseFloat(r[0]),c=parseInt(r[1],10));var l;if(typeof a=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,r)}}),i;typeof c>"u"&&(i._rate=a),c=i._getSoundIds(c);for(var b=0;b<c.length;b++)if(l=i._soundById(c[b]),l){i.playing(c[b])&&(l._rateSeek=i.seek(c[b]),l._playStart=i._webAudio?t.ctx.currentTime:l._playStart),l._rate=a,i._webAudio&&l._node&&l._node.bufferSource?l._node.bufferSource.playbackRate.setValueAtTime(a,t.ctx.currentTime):l._node&&(l._node.playbackRate=a);var M=i.seek(c[b]),I=(i._sprite[l._sprite][0]+i._sprite[l._sprite][1])/1e3-M,U=I*1e3/Math.abs(l._rate);(i._endTimers[c[b]]||!l._paused)&&(i._clearTimer(c[b]),i._endTimers[c[b]]=setTimeout(i._ended.bind(i,l),U)),i._emit("rate",l._id)}}else return l=i._soundById(c),l?l._rate:i._rate;return i},seek:function(){var i=this,r=arguments,a,c;if(r.length===0)i._sounds.length&&(c=i._sounds[0]._id);else if(r.length===1){var d=i._getSoundIds(),u=d.indexOf(r[0]);u>=0?c=parseInt(r[0],10):i._sounds.length&&(c=i._sounds[0]._id,a=parseFloat(r[0]))}else r.length===2&&(a=parseFloat(r[0]),c=parseInt(r[1],10));if(typeof c>"u")return 0;if(typeof a=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,r)}}),i;var l=i._soundById(c);if(l)if(typeof a=="number"&&a>=0){var b=i.playing(c);b&&i.pause(c,!0),l._seek=a,l._ended=!1,i._clearTimer(c),!i._webAudio&&l._node&&!isNaN(l._node.duration)&&(l._node.currentTime=a);var M=function(){b&&i.play(c,!0),i._emit("seek",c)};if(b&&!i._webAudio){var I=function(){i._playLock?setTimeout(I,0):M()};setTimeout(I,0)}else M()}else if(i._webAudio){var U=i.playing(c)?t.ctx.currentTime-l._playStart:0,nt=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(nt+U*Math.abs(l._rate))}else return l._node.currentTime;return i},playing:function(i){var r=this;if(typeof i=="number"){var a=r._soundById(i);return a?!a._paused:!1}for(var c=0;c<r._sounds.length;c++)if(!r._sounds[c]._paused)return!0;return!1},duration:function(i){var r=this,a=r._duration,c=r._soundById(i);return c&&(a=r._sprite[c._sprite][1]/1e3),a},state:function(){return this._state},unload:function(){for(var i=this,r=i._sounds,a=0;a<r.length;a++)r[a]._paused||i.stop(r[a]._id),i._webAudio||(i._clearSound(r[a]._node),r[a]._node.removeEventListener("error",r[a]._errorFn,!1),r[a]._node.removeEventListener(t._canPlayEvent,r[a]._loadFn,!1),r[a]._node.removeEventListener("ended",r[a]._endFn,!1),t._releaseHtml5Audio(r[a]._node)),delete r[a]._node,i._clearTimer(r[a]._id);var c=t._howls.indexOf(i);c>=0&&t._howls.splice(c,1);var d=!0;for(a=0;a<t._howls.length;a++)if(t._howls[a]._src===i._src||i._src.indexOf(t._howls[a]._src)>=0){d=!1;break}return o&&d&&delete o[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,r,a,c){var d=this,u=d["_on"+i];return typeof r=="function"&&u.push(c?{id:a,fn:r,once:c}:{id:a,fn:r}),d},off:function(i,r,a){var c=this,d=c["_on"+i],u=0;if(typeof r=="number"&&(a=r,r=null),r||a)for(u=0;u<d.length;u++){var l=a===d[u].id;if(r===d[u].fn&&l||!r&&l){d.splice(u,1);break}}else if(i)c["_on"+i]=[];else{var b=Object.keys(c);for(u=0;u<b.length;u++)b[u].indexOf("_on")===0&&Array.isArray(c[b[u]])&&(c[b[u]]=[])}return c},once:function(i,r,a){var c=this;return c.on(i,r,a,1),c},_emit:function(i,r,a){for(var c=this,d=c["_on"+i],u=d.length-1;u>=0;u--)(!d[u].id||d[u].id===r||i==="load")&&(setTimeout((function(l){l.call(this,r,a)}).bind(c,d[u].fn),0),d[u].once&&c.off(i,d[u].fn,d[u].id));return c._loadQueue(i),c},_loadQueue:function(i){var r=this;if(r._queue.length>0){var a=r._queue[0];a.event===i&&(r._queue.shift(),r._loadQueue()),i||a.action()}return r},_ended:function(i){var r=this,a=i._sprite;if(!r._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(r._ended.bind(r,i),100),r;var c=!!(i._loop||r._sprite[a][2]);if(r._emit("end",i._id),!r._webAudio&&c&&r.stop(i._id,!0).play(i._id),r._webAudio&&c){r._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var d=(i._stop-i._start)*1e3/Math.abs(i._rate);r._endTimers[i._id]=setTimeout(r._ended.bind(r,i),d)}return r._webAudio&&!c&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,r._clearTimer(i._id),r._cleanBuffer(i._node),t._autoSuspend()),!r._webAudio&&!c&&r.stop(i._id,!0),r},_clearTimer:function(i){var r=this;if(r._endTimers[i]){if(typeof r._endTimers[i]!="function")clearTimeout(r._endTimers[i]);else{var a=r._soundById(i);a&&a._node&&a._node.removeEventListener("ended",r._endTimers[i],!1)}delete r._endTimers[i]}return r},_soundById:function(i){for(var r=this,a=0;a<r._sounds.length;a++)if(i===r._sounds[a]._id)return r._sounds[a];return null},_inactiveSound:function(){var i=this;i._drain();for(var r=0;r<i._sounds.length;r++)if(i._sounds[r]._ended)return i._sounds[r].reset();return new n(i)},_drain:function(){var i=this,r=i._pool,a=0,c=0;if(!(i._sounds.length<r)){for(c=0;c<i._sounds.length;c++)i._sounds[c]._ended&&a++;for(c=i._sounds.length-1;c>=0;c--){if(a<=r)return;i._sounds[c]._ended&&(i._webAudio&&i._sounds[c]._node&&i._sounds[c]._node.disconnect(0),i._sounds.splice(c,1),a--)}}},_getSoundIds:function(i){var r=this;if(typeof i>"u"){for(var a=[],c=0;c<r._sounds.length;c++)a.push(r._sounds[c]._id);return a}else return[i]},_refreshBuffer:function(i){var r=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=o[r._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),r},_cleanBuffer:function(i){var r=this,a=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!i.bufferSource)return r;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),a))try{i.bufferSource.buffer=t._scratchBuffer}catch{}return i.bufferSource=null,r},_clearSound:function(i){var r=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);r||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(i){this._parent=i,this.init()};n.prototype={init:function(){var i=this,r=i._parent;return i._muted=r._muted,i._loop=r._loop,i._volume=r._volume,i._rate=r._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,r._sounds.push(i),i.create(),i},create:function(){var i=this,r=i._parent,a=t._muted||i._muted||i._parent._muted?0:i._volume;return r._webAudio?(i._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(a,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=r._src,i._node.preload=r._preload===!0?"auto":r._preload,i._node.volume=a*t.volume(),i._node.load()),i},reset:function(){var i=this,r=i._parent;return i._muted=r._muted,i._loop=r._loop,i._volume=r._volume,i._rate=r._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,r=i._parent;r._duration=Math.ceil(i._node.duration*10)/10,Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,r=i._parent;r._duration===1/0&&(r._duration=Math.ceil(i._node.duration*10)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=r._duration*1e3),r._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var o={},s=function(i){var r=i._src;if(o[r]){i._duration=o[r].duration,m(i);return}if(/^data:[^;]+;base64,/.test(r)){for(var a=atob(r.split(",")[1]),c=new Uint8Array(a.length),d=0;d<a.length;++d)c[d]=a.charCodeAt(d);f(c.buffer,i)}else{var u=new XMLHttpRequest;u.open(i._xhr.method,r,!0),u.withCredentials=i._xhr.withCredentials,u.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(l){u.setRequestHeader(l,i._xhr.headers[l])}),u.onload=function(){var l=(u.status+"")[0];if(l!=="0"&&l!=="2"&&l!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".");return}f(u.response,i)},u.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete o[r],i.load())},g(u)}},g=function(i){try{i.send()}catch{i.onerror()}},f=function(i,r){var a=function(){r._emit("loaderror",null,"Decoding audio data failed.")},c=function(d){d&&r._sounds.length>0?(o[r._src]=d,m(r,d)):a()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(c).catch(a):t.ctx.decodeAudioData(i,c,a)},m=function(i,r){r&&!i._duration&&(i._duration=r.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},P=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=r?parseInt(r[1],10):null;if(i&&a&&a<9){var c=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!c&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:e}}),typeof Ht<"u"&&(Ht.Howler=t,Ht.Howl=e),typeof global<"u"?(global.HowlerGlobal=p,global.Howler=t,global.Howl=e,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=p,window.Howler=t,window.Howl=e,window.Sound=n)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(e=typeof e!="number"?o._pos[1]:e,n=typeof n!="number"?o._pos[2]:n,typeof t=="number")o._pos=[t,e,n],typeof o.ctx.listener.positionX<"u"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(t,e,n,o,s,g){var f=this;if(!f.ctx||!f.ctx.listener)return f;var m=f._orientation;if(e=typeof e!="number"?m[1]:e,n=typeof n!="number"?m[2]:n,o=typeof o!="number"?m[3]:o,s=typeof s!="number"?m[4]:s,g=typeof g!="number"?m[5]:g,typeof t=="number")f._orientation=[t,e,n,o,s,g],typeof f.ctx.listener.forwardX<"u"?(f.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),f.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),f.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),f.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),f.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),f.ctx.listener.upZ.setTargetAtTime(g,Howler.ctx.currentTime,.1)):f.ctx.listener.setOrientation(t,e,n,o,s,g);else return m;return f},Howl.prototype.init=(function(t){return function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:typeof e.coneInnerAngle<"u"?e.coneInnerAngle:360,coneOuterAngle:typeof e.coneOuterAngle<"u"?e.coneOuterAngle:360,coneOuterGain:typeof e.coneOuterGain<"u"?e.coneOuterGain:0,distanceModel:typeof e.distanceModel<"u"?e.distanceModel:"inverse",maxDistance:typeof e.maxDistance<"u"?e.maxDistance:1e4,panningModel:typeof e.panningModel<"u"?e.panningModel:"HRTF",refDistance:typeof e.refDistance<"u"?e.refDistance:1,rolloffFactor:typeof e.rolloffFactor<"u"?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,e){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(t,e)}}),n;var o=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof e>"u")if(typeof t=="number")n._stereo=t,n._pos=[t,0,0];else return n._stereo;for(var s=n._getSoundIds(e),g=0;g<s.length;g++){var f=n._soundById(s[g]);if(f)if(typeof t=="number")f._stereo=t,f._pos=[t,0,0],f._node&&(f._pannerAttr.panningModel="equalpower",(!f._panner||!f._panner.pan)&&p(f,o),o==="spatial"?typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):f._panner.setPosition(t,0,0):f._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",f._id);else return f._stereo}return n},Howl.prototype.pos=function(t,e,n,o){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,e,n,o)}}),s;if(e=typeof e!="number"?0:e,n=typeof n!="number"?-.5:n,typeof o>"u")if(typeof t=="number")s._pos=[t,e,n];else return s._pos;for(var g=s._getSoundIds(o),f=0;f<g.length;f++){var m=s._soundById(g[f]);if(m)if(typeof t=="number")m._pos=[t,e,n],m._node&&((!m._panner||m._panner.pan)&&p(m,"spatial"),typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):m._panner.setPosition(t,e,n)),s._emit("pos",m._id);else return m._pos}return s},Howl.prototype.orientation=function(t,e,n,o){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,e,n,o)}}),s;if(e=typeof e!="number"?s._orientation[1]:e,n=typeof n!="number"?s._orientation[2]:n,typeof o>"u")if(typeof t=="number")s._orientation=[t,e,n];else return s._orientation;for(var g=s._getSoundIds(o),f=0;f<g.length;f++){var m=s._soundById(g[f]);if(m)if(typeof t=="number")m._orientation=[t,e,n],m._node&&(m._panner||(m._pos||(m._pos=s._pos||[0,0,-.5]),p(m,"spatial")),typeof m._panner.orientationX<"u"?(m._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),m._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):m._panner.setOrientation(t,e,n)),s._emit("orientation",m._id);else return m._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,e=arguments,n,o,s;if(!t._webAudio)return t;if(e.length===0)return t._pannerAttr;if(e.length===1)if(typeof e[0]=="object")n=e[0],typeof o>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),t._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(e[0],10)),s?s._pannerAttr:t._pannerAttr;else e.length===2&&(n=e[0],o=parseInt(e[1],10));for(var g=t._getSoundIds(o),f=0;f<g.length;f++)if(s=t._soundById(g[f]),s){var m=s._pannerAttr;m={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:m.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:m.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:m.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:m.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:m.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:m.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:m.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:m.panningModel};var P=s._panner;P||(s._pos||(s._pos=t._pos||[0,0,-.5]),p(s,"spatial"),P=s._panner),P.coneInnerAngle=m.coneInnerAngle,P.coneOuterAngle=m.coneOuterAngle,P.coneOuterGain=m.coneOuterGain,P.distanceModel=m.distanceModel,P.maxDistance=m.maxDistance,P.refDistance=m.refDistance,P.rolloffFactor=m.rolloffFactor,P.panningModel=m.panningModel}return t},Sound.prototype.init=(function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,e._stereo?n.stereo(e._stereo):e._pos?n.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,n._refreshBuffer(e)),t.call(this)}})(Sound.prototype.reset);var p=function(t,e){e=e||"spatial",e==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var yi=(()=>{class p{static \u0275fac=function(n){return new(n||p)};static \u0275mod=ue({type:p});static \u0275inj=ce({imports:[Jt,Jt]})}return p})();var _t=class _t{constructor(){this.artistVerificationsSubject=new w([]);this.trackVerificationsSubject=new w([]);this.projectVerificationSubject=new w(null);this.artistVerifications$=this.artistVerificationsSubject.asObservable();this.trackVerifications$=this.trackVerificationsSubject.asObservable();this.projectVerification$=this.projectVerificationSubject.asObservable();this.expectedArtists=["SpiralFlip","eili","Ariatec","MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho","AZALI","Aloysius","potatoTeto","Artisan","Mei Naganowa","Evin a'k","BilliumMoto","Elliot Hsu","Yuzuki","LucaProject","Koway","\u4F0D\u4E00","Nstryder","MoAE","dystopian tanuki","Heem","Woojinee","Bigg Milk","Gardens","Sad Keyboard Guy","Futsuunohito","shishishiena"];this.expectedTracks=[{id:"1",title:"Blinding Dawn",expectedArtists:["SpiralFlip","eili"]},{id:"2",title:"Hollow Crown",expectedArtists:["Ariatec"]},{id:"3",title:"\u6681\u306E\u59EB",expectedArtists:["MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho"]},{id:"4",title:"Lux Nova",expectedArtists:["AZALI","Aloysius"]},{id:"5",title:"Hall of Silent Echoes",expectedArtists:["potatoTeto"]},{id:"6",title:"Lirica",expectedArtists:["Artisan"]},{id:"7",title:"To Defy The Beankeeper",expectedArtists:["Mei Naganowa"]},{id:"8",title:"Trench",expectedArtists:["Evin a'k"]},{id:"9",title:"Blooming in the Square",expectedArtists:["BilliumMoto"]},{id:"10",title:"Skies in Abberation",expectedArtists:["Elliot Hsu"]},{id:"11",title:"song of the nymphs",expectedArtists:["Yuzuki"]},{id:"12",title:"Light Guardian",expectedArtists:["LucaProject"]},{id:"13",title:"Enso Antumbra",expectedArtists:["Koway","\u4F0D\u4E00"]},{id:"14",title:"You're In My Way",expectedArtists:["Nstryder"]},{id:"15",title:"Remember you",expectedArtists:["MoAE"]},{id:"16",title:"Hidden passage",expectedArtists:["dystopian tanuki"]},{id:"17",title:"Last Dance",expectedArtists:["Heem","Woojinee"]},{id:"18",title:"Second Guess",expectedArtists:["Bigg Milk"]},{id:"19",title:"Fractured Light",expectedArtists:["Gardens","Sad Keyboard Guy","eili"]},{id:"20",title:"Beyond the Veil of Light",expectedArtists:["Futsuunohito","shishishiena"]}];this.initializeVerification()}initializeVerification(){this.runArtistVerification(),this.runTrackVerification(),this.runProjectVerification()}runArtistVerification(){let t=this.expectedArtists.map(e=>this.verifyIndividualArtist(e));this.artistVerificationsSubject.next(t)}verifyIndividualArtist(t){let e=[],n=this.checkAvatarExists(t);n||e.push(`Avatar missing for ${t}`);let o=this.verifySocialLinks(t);o||e.push(`Social links need verification for ${t}`);let s=this.verifyArtistRoles(t);s||e.push(`Role definitions need review for ${t}`);let g=this.verifyContributions(t);return g||e.push(`Contributions not fully documented for ${t}`),{artistName:t,avatarExists:n,socialLinksVerified:o,rolesAccurate:s,contributionsDocumented:g,fullyVerified:n&&o&&s&&g,issues:e}}checkAvatarExists(t){let e=`/assets/images/artists/${t}.png`;return this.expectedArtists.includes(t)}verifySocialLinks(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!1,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyArtistRoles(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!0,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyContributions(t){return this.expectedTracks.filter(n=>n.expectedArtists.includes(t)).length>0}runTrackVerification(){let t=this.expectedTracks.map(e=>this.verifyIndividualTrack(e));this.trackVerificationsSubject.next(t)}verifyIndividualTrack(t){let e=[],n=0,o=this.verifyTrackArtists(t);o?n+=20:e.push(`Missing artists in ${t.title}`);let s=this.verifyMainArtist(t);s?n+=20:e.push(`Main artist incorrect for ${t.title}`);let g=this.verifyFeaturedArtists(t);g?n+=15:e.push(`Featured artists incomplete for ${t.title}`);let f=this.verifyInstrumentalists(t);f?n+=15:e.push(`Instrumentalists incomplete for ${t.title}`);let m=this.verifyTechnicalCredits(t);m?n+=10:e.push(`Technical credits incomplete for ${t.title}`);let P=this.verifyPercentages(t);P?n+=10:e.push(`Contribution percentages don't add up for ${t.title}`);let i=this.verifySocialLinksWorking(t);i?n+=5:e.push(`Social links need verification for ${t.title}`);let r=this.verifyAvatarsLinked(t);r?n+=5:e.push(`Avatars not properly linked for ${t.title}`);let a=n===100;return{trackId:t.id,trackTitle:t.title,allArtistsIdentified:o,mainArtistCorrect:s,featuredArtistsComplete:g,instrumentalistsComplete:f,technicalCreditsComplete:m,percentagesAddUp:P,socialLinksWorking:i,avatarsLinked:r,fullyVerified:a,verificationScore:n,issues:e,lastVerified:new Date}}verifyTrackArtists(t){return t.expectedArtists.length>0}verifyMainArtist(t){return t.expectedArtists.length>0}verifyFeaturedArtists(t){let e=t.expectedArtists.length>1;return!0}verifyInstrumentalists(t){return t.id==="3"?t.expectedArtists.includes("Justin Thornburgh")&&t.expectedArtists.includes("v1ris")&&t.expectedArtists.includes("Rita Kamishiro")&&t.expectedArtists.includes("Marcus Ho"):!0}verifyTechnicalCredits(t){return!0}verifyPercentages(t){return!0}verifySocialLinksWorking(t){return!0}verifyAvatarsLinked(t){return!0}runProjectVerification(){let t=this.artistVerificationsSubject.value,e=this.trackVerificationsSubject.value,n=this.expectedArtists.length,o=t.filter(r=>r.fullyVerified).length,s=this.expectedTracks.length,g=e.filter(r=>r.fullyVerified).length,f=Math.round(o/n*50+g/s*50),m=[],P=[];o<n&&m.push(`${n-o} artists need verification`),g<s&&m.push(`${s-g} tracks need verification`),f<100&&(P.push("Review all artist social links for accuracy"),P.push("Verify all avatar images are properly linked"),P.push("Check contribution percentages add up correctly"),P.push("Ensure all instrumentalists are credited"));let i={totalArtists:n,verifiedArtists:o,totalTracks:s,verifiedTracks:g,overallScore:f,criticalIssues:m,recommendations:P};this.projectVerificationSubject.next(i)}getDetailedVerificationReport(){return this.projectVerification$.pipe(O(t=>{let e=this.artistVerificationsSubject.value,n=this.trackVerificationsSubject.value,o=t?.criticalIssues.length||0,s=t?.recommendations.length||0,g="Excellent";return t&&t.overallScore<80?g="Needs Work":t&&t.overallScore<95&&(g="Good"),{artistReport:e,trackReport:n,projectReport:t,summary:{overallHealth:g,criticalIssueCount:o,recommendationCount:s}}}))}refreshVerification(){this.initializeVerification()}};_t.\u0275fac=function(e){return new(e||_t)},_t.\u0275prov=z({token:_t,factory:_t.\u0275fac,providedIn:"root"});var zt=_t;var yt=class yt{constructor(t,e,n){this.http=t;this.artistCreditService=e;this.creditVerificationService=n;this.destroy$=new V;this.currentTimeSubject=new w(0);this.tracksSubject=new w([]);this.currentTrackSubject=new w(null);this.currentProjectSubject=new w("phantasia1");this.allProjectTracksSubject=new w([]);this.currentTime$=this.currentTimeSubject.asObservable();this.tracks$=this.tracksSubject.asObservable();this.currentTrack$=this.currentTrackSubject.asObservable();this.currentProject$=this.currentProjectSubject.asObservable();this.allProjectTracks$=this.allProjectTracksSubject.asObservable();this.currentArtists$=kt([this.currentTime$,this.tracks$]).pipe(ct(25),O(([t,e])=>this.getCurrentArtists(t,e)),G((t,e)=>this.arraysEqual(t,e)),mt(1),E(this.destroy$));this.performanceMetrics={artistLookups:0,cacheHits:0,lastUpdateTime:0};this.artistCache=new Map;this.maxCacheEntries=20;this.phantasia2TrackToFilenameMap={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"};this.phantasia1TrackToFilenameMap={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"};this.artistColorCache=new Map;this.artistColors=["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"];this.initializeService()}ngOnDestroy(){try{console.log("[DynamicArtistService] Starting cleanup..."),this.destroy$.next(),this.destroy$.complete(),this.artistCache.clear(),this.artistColorCache.clear(),this.currentTimeSubject.complete(),this.tracksSubject.complete(),this.currentTrackSubject.complete(),this.currentProjectSubject.complete(),this.allProjectTracksSubject.complete(),console.log("[DynamicArtistService] Performance metrics:",{totalLookups:this.performanceMetrics.artistLookups,cacheHits:this.performanceMetrics.cacheHits,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)}),console.log("[DynamicArtistService] Cleanup completed successfully")}catch(t){console.error("[DynamicArtistService] Error during cleanup:",t)}}setCacheWithEviction(t,e){if(this.artistCache.size>=this.maxCacheEntries){let n=this.artistCache.keys().next().value;n!==void 0&&this.artistCache.delete(n)}this.artistCache.set(t,e)}getPerformanceMetrics(){return j(S({},this.performanceMetrics),{cacheSize:this.artistCache.size,colorCacheSize:this.artistColorCache.size,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)})}getTrackFilename(t){return this.currentProjectSubject.value==="phantasia1"?this.phantasia1TrackToFilenameMap[t]||`${t.toString().padStart(2,"0")}. Unknown Track.ogg`:this.phantasia2TrackToFilenameMap[t]||`${t}. Unknown Track.ogg`}initializeService(){this.loadProjectData(this.currentProjectSubject.value)}loadTrackData(){let t=this.createTracksFromTimestamps();this.tracksSubject.next(t)}loadProjectData(t){if(t==="phantasia2")this.loadTrackData();else if(t==="phantasia1"){let e=this.createPhantasia1TracksFromData();this.tracksSubject.next(e)}}updateCurrentTime(t){try{if(typeof t!="number"||isNaN(t)||t<0){console.warn("[DynamicArtistService] Invalid time value:",t);return}if(this.currentTimeSubject.closed){console.warn("[DynamicArtistService] Attempted to update time on closed subject");return}this.currentTimeSubject.next(t);let e=this.tracksSubject.value;if(!e||e.length===0)return;let n=this.findTrackByTime(t,e),o=this.currentTrackSubject.value;if(n!==o){if(this.currentTrackSubject.closed||this.currentTrackSubject.next(n),n)try{this.artistCreditService.updateCurrentTrack(n.id)}catch(s){console.error("[DynamicArtistService] Error updating artist credits:",s)}console.log(`[DynamicArtistService] Track changed from ${o?.id||"none"} to ${n?.id||"none"}`)}}catch(e){console.error("[DynamicArtistService] Error updating current time:",e)}}getCurrentTrackCompleteCredits(){return this.artistCreditService.currentTrackCredits$}getAllPhantasia2ArtistsComplete(){return this.artistCreditService.getAllPhantasia2Artists()}getVerificationStatus(){return this.creditVerificationService.getDetailedVerificationReport()}isCurrentTrackVerified(){return kt([this.currentTrack$,this.creditVerificationService.trackVerifications$]).pipe(O(([t,e])=>t&&e.find(o=>o.trackId===t.id)?.fullyVerified||!1))}setCurrentProject(t){try{if(!t||!["phantasia1","phantasia2"].includes(t)){console.error("[DynamicArtistService] Invalid project ID:",t);return}if(this.currentProjectSubject.closed){console.warn("[DynamicArtistService] Attempted to update project on closed subject");return}if(this.currentProjectSubject.value===t){console.log(`[DynamicArtistService] Project ${t} already active`);return}this.currentProjectSubject.next(t);try{this.artistCreditService.setCurrentProject(t)}catch(n){console.error("[DynamicArtistService] Error updating artist credit service:",n)}try{this.loadProjectData(t)}catch(n){console.error("[DynamicArtistService] Error loading project data:",n)}console.log(`[DynamicArtistService] Successfully switched to project: ${t}`)}catch(e){console.error("[DynamicArtistService] Error setting current project:",e)}}getCurrentProjectMetadata(){return kt([this.currentProject$,this.artistCreditService.projectMetadata$]).pipe(O(([t,e])=>e.find(n=>n.id===t)||null))}getAllArtistsAllProjects(){return this.artistCreditService.getAllArtistsAllProjects()}getCrossProjectArtists(){return this.artistCreditService.getCrossProjectArtists()}getProjectArtists(t){return this.artistCreditService.getProjectArtists(t)}getProjectComparison(){return this.artistCreditService.projectMetadata$.pipe(O(t=>{let e=this.getProjectArtists("phantasia1"),n=this.getProjectArtists("phantasia2"),o=this.getCrossProjectArtists(),s=t.find(m=>m.id==="phantasia1")||null,g=t.find(m=>m.id==="phantasia2")||null,f=new Set([...e.map(m=>m.artistName),...n.map(m=>m.artistName)]);return{phantasia1:{artists:e.length,tracks:s?.totalTracks||0,metadata:s},phantasia2:{artists:n.length,tracks:g?.totalTracks||0,metadata:g},crossProjectArtists:o.length,totalUniqueArtists:f.size}}))}getCurrentArtists(t,e){this.performanceMetrics.artistLookups++,this.performanceMetrics.lastUpdateTime=Date.now();let n=this.findTrackByTime(t,e);if(!n)return[];let o=`${n.id}-${t.toFixed(0)}`,s=this.artistCache.get(o);if(s)return this.performanceMetrics.cacheHits++,s;let g=this.buildArtistArray(n);return this.setCacheWithEviction(o,g),g}buildArtistArray(t){let e=[],n=1+t.features.length+t.collaborators.length;e.length=n;let o=0;e[o++]=this.createArtistCardData(t.mainArtist,"Main Artist");for(let s of t.features)e[o++]=this.createArtistCardData(s.name,"Featured Artist",s.socialLinks);for(let s of t.collaborators)e[o++]=this.createArtistCardData(s.name,"Collaborator",s.socialLinks);return e.length=o,e}findTrackByTime(t,e){return e.find(n=>t>=n.startTime&&t<n.endTime)||null}createArtistCardData(t,e,n={}){return{id:this.generateArtistId(t),name:t,displayName:t,role:e,socialLinks:n,color:this.generateColorForArtist(t)}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}generateColorForArtist(t){let e=this.artistColorCache.get(t);if(e)return e;let n=0;for(let s=0;s<t.length;s++)n=(n<<5)-n+t.charCodeAt(s)&4294967295;let o=this.artistColors[Math.abs(n)%this.artistColors.length];return this.artistColorCache.set(t,o),o}arraysEqual(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n]?.id)return!1;return!0}createTracksFromTimestamps(){let t=`0:00 SpiralFlip feat. eili: Blinding Dawn
2:48 Ariatec: Hollow Crown
5:44 MB feat. Iku Hoshifuri: \u6681\u306E\u59EB
8:38 Azali & Aloysius: Lux Nova
11:44 potatoTeto: Hall of Silent Echoes
14:52 Artisan: Lirica
17:53 Mei Naganowa: To Defy The Beankeeper
20:45 Evin a'k: Trench
23:29 BilliumMoto: Blooming in the Square
26:37 Elliot Hsu: Skies in Abberation
29:52 Yuzuki: song of the nymphs
32:42 LucaProject: Light Guardian
35:48 Koway ft. \u4F0D: Enso Antumbra
38:57 Nstryder: You're In My Way
42:05 MoAE.: Remember you
45:09 dystopian tanuki: Hidden passage
48:22 Heem feat. woojinee: Last Dance (detune version)
51:25 Bigg Milk: Second Guess
54:15 Gardens & Sad Keyboard Guy ft. eili: Fractured Light
57:04 Futsuunohito: Beyond the Veil of Light`,e=[],n=t.split(`
`);return n.forEach((o,s)=>{let g=o.match(/(\d+):(\d+)\s+(.+?):\s+(.+)/);if(g){let[,f,m,P,i]=g,r=parseInt(f)*60+parseInt(m),a=n[s+1],c=3600;if(a){let B=a.match(/(\d+):(\d+)/);B&&(c=parseInt(B[1])*60+parseInt(B[2]))}let d=[],u=[],l=s+1,b=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,M=P.match(b);if(M){let[,B,k]=M;d.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(k)})}let I=/(.+?)\s+&\s+(.+)/,U=P.match(I);if(U&&!M){let[,B,k]=U;u.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(k)})}switch(l){case 3:u.push({id:"justin-thornburgh",name:"Justin Thornburgh",displayName:"Justin Thornburgh",role:"Accordion",socialLinks:this.getSocialLinksForArtist("Justin Thornburgh")},{id:"v1ris",name:"v1ris",displayName:"v1ris",role:"Violin",socialLinks:this.getSocialLinksForArtist("v1ris")},{id:"rita-kamishiro",name:"Rita Kamishiro",displayName:"Rita Kamishiro",role:"Viola",socialLinks:this.getSocialLinksForArtist("Rita Kamishiro")},{id:"marcus-ho",name:"Marcus Ho",displayName:"Marcus Ho",role:"Cello",socialLinks:this.getSocialLinksForArtist("Marcus Ho")});break;case 7:u.push({id:"anri-arcane",name:"Anri Arcane",displayName:"Anri Arcane",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"hxvoc",name:"HXVOC",displayName:"HXVOC",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"miyamai-moca",name:"Miyamai Moca",displayName:"Miyamai Moca",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"ninezero",name:"Ninezero",displayName:"Ninezero",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 11:u.push({id:"hanakuma-chifuyu",name:"Hanakuma Chifuyu",displayName:"Hanakuma Chifuyu",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 17:d.some(B=>B.name.toLowerCase()==="woojinee")||d.push({id:this.generateArtistId("woojinee"),name:"woojinee",displayName:"Woojinee",role:"Violin",socialLinks:this.getSocialLinksForArtist("woojinee")});break;case 19:u.some(B=>B.name==="Sad Keyboard Guy")||u.push({id:this.generateArtistId("Sad Keyboard Guy"),name:"Sad Keyboard Guy",displayName:"Sad Keyboard Guy",role:"Main Artist",socialLinks:this.getSocialLinksForArtist("Sad Keyboard Guy")});break;case 20:u.push({id:this.generateArtistId("shishishiena"),name:"shishishiena",displayName:"shishishiena",role:"Voice Actor",socialLinks:this.getSocialLinksForArtist("shishishiena")});break}let nt=P.replace(/\s+(?:feat\.|ft\.)\s+.+/,""),gt=nt;s===0&&d.length>0&&(gt=`${nt} (feat. ${d[0].name})`),e.push({id:(s+1).toString(),title:i,mainArtist:gt,startTime:r,endTime:c,artists:[],features:d,collaborators:u,audioFile:this.getTrackFilename(s+1)})}}),e}getSocialLinksForArtist(t){return{SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},"Justin Thornburgh":{twitter:"https://x.com/JustinThornbur7"},v1ris:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},"Rita Kamishiro":{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},"Marcus Ho":{website:"https://www.marcushomusic.com/"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},potatoTeto:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},Artisan:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},"Mei Naganowa":{twitter:"https://x.com/ReeKDoesDTM"},"Evin a'k":{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},BilliumMoto:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},"Elliot Hsu":{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},Yuzuki:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",twitter:"https://x.com/LucaProject6108",carrd:"https://lucaproject.carrd.co/"},Koway:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},\u4F0D\u4E00:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},\u4F0D:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},Nstryder:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},"MoAE.":{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},"dystopian tanuki":{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},"Bigg Milk":{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},Gardens:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},"Sad Keyboard Guy":{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},Futsuunohito:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},shishishiena:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"},Heem:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},Prower:{twitter:"https://x.com/prowerrr_"},Seycara:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},Qyubey:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},Luscinia:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},\u306F\u304C\u306D:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},Hagane:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},satella:{twitter:"https://x.com/satella0w0",youtube:"https://www.youtube.com/@satella0w0"},sleepy:{twitter:"https://x.com/sleeplessgamign"},Sleepless:{twitter:"https://x.com/sleeplessgamign"},PliXoR:{twitter:"https://x.com/plixormusic"},NapaL:{twitter:"https://x.com/Ve_Xillum"},"\uB098\uD314 NapaL":{twitter:"https://x.com/Ve_Xillum"},yy_artwork:{twitter:"https://x.com/yy_artwork"},"Elegant Sister":{twitter:"https://x.com/ElegantSister"},Len:{twitter:"https://x.com/Len_licht"},Daph:{twitter:"https://x.com/daphshoo"}}[t]||{}}getPhantasia1AudioFilename(t,e,n){return{1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t]||`${String(t).padStart(2,"0")}. ${e} - ${n}.ogg`}createPhantasia1TracksFromData(){let t=[{time:"0:00",artist:"SpiralFlip feat. eili",title:"Phantasia"},{time:"3:00",artist:"Bigg Milk",title:"First Steps"},{time:"6:00",artist:"Heem",title:"Altar of the Sword"},{time:"9:00",artist:"futsuunohito",title:"A Voyage on the Winds of Change"},{time:"12:00",artist:"Prower",title:"Rohkeutta Etsi\xE4"},{time:"15:00",artist:"AZALI & Seycara",title:"Ivory Flowers"},{time:"18:00",artist:"Qyubey",title:"Outer Bygone Ruins"},{time:"21:00",artist:"Luscinia",title:"Spiral Into the Abyss!"},{time:"24:00",artist:"Gardens & sleepy",title:"Wandering Breeze"},{time:"27:00",artist:"\u306F\u304C\u306D",title:"Mystic Nebula"},{time:"30:00",artist:"LucaProject",title:"Iris"},{time:"33:00",artist:"Mei Naganowa",title:"Half-Asleep in the Middle of Bumfuck Nowhere"},{time:"36:00",artist:"satella",title:"The Traveller"},{time:"39:00",artist:"dystopian tanuki",title:"Childhood memories"}],e=[];return t.forEach((n,o)=>{let[s,g]=n.time.split(":").map(Number),f=s*60+g,m=t[o+1],P=2700;if(m){let[b,M]=m.time.split(":").map(Number);P=b*60+M}let i=[],r=[],a=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,c=n.artist.match(a);if(c){let[,b,M]=c;i.push({id:this.generateArtistId(M),name:M,displayName:M,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(M)})}let d=/(.+?)\s+&\s+(.+)/,u=n.artist.match(d);if(u&&!c){let[,b,M]=u;r.push({id:this.generateArtistId(M),name:M,displayName:M,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(M)})}let l=n.artist.replace(/\s+(?:feat\.|ft\.)\s+.+/,"");u&&!c&&(l=u[1]),e.push({id:`p1-${o+1}`,title:n.title,mainArtist:l,startTime:f,endTime:P,artists:[],features:i,collaborators:r,audioFile:this.getPhantasia1AudioFilename(o+1,n.artist,n.title)})}),e}};yt.\u0275fac=function(e){return new(e||yt)($(wt),$(ut),$(zt))},yt.\u0275prov=z({token:yt,factory:yt.\u0275fac,providedIn:"root"});var it=yt;var bt=class bt{constructor(){this.tracksMap=new Map;this.audioStateSubject=new w({isPlaying:!1,currentTrack:null,currentTime:0,duration:0,volume:.5});this.audioState$=this.audioStateSubject.asObservable();this.audioElement=new Audio,this.initializeTracksMap(),this.setupEventListeners()}initializeTracksMap(){this.tracksMap.set("introduction","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-1","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-2","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("pv","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("information","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("phantasia","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg");for(let t=1;t<=14;t++){let n={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t];n&&(this.tracksMap.set(t.toString(),`assets/audio/Phantasia_1/${n}`),this.tracksMap.set(`track-${t}`,`assets/audio/Phantasia_1/${n}`),this.tracksMap.set(`p1-${t}`,`assets/audio/Phantasia_1/${n}`))}for(let t=1;t<=20;t++){let n={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"}[t];n&&(this.tracksMap.set(`p2-${t}`,`assets/audio/Phantasia_2/${n}`),this.tracksMap.set(`phantasia2-${t}`,`assets/audio/Phantasia_2/${n}`))}}setupEventListeners(){this.audioElement.addEventListener("timeupdate",()=>{this.updateAudioState({currentTime:this.audioElement.currentTime})}),this.audioElement.addEventListener("loadedmetadata",()=>{this.updateAudioState({duration:this.audioElement.duration})}),this.audioElement.addEventListener("ended",()=>{this.updateAudioState({isPlaying:!1,currentTime:0}),this.audioElement.currentTime=0}),this.audioElement.addEventListener("error",t=>{console.error("[AudioService] Error playing audio:",t),this.updateAudioState({isPlaying:!1,currentTrack:null})})}updateAudioState(t){let e=this.audioStateSubject.getValue(),n=S(S({},e),t);this.audioStateSubject.next(n)}playTrack(t){let e=this.tracksMap.get(t);if(!e){console.error(`[AudioService] Track not found: ${t}`);return}this.audioStateSubject.getValue().currentTrack!==t&&(this.audioElement.src=e,this.audioElement.load(),this.updateAudioState({currentTrack:t,currentTime:0})),this.audioElement.play().then(()=>{this.updateAudioState({isPlaying:!0})}).catch(n=>{console.error("[AudioService] Error playing track:",n)})}pause(){this.audioElement.pause(),this.updateAudioState({isPlaying:!1})}togglePlayPause(){let t=this.audioStateSubject.getValue();t.isPlaying?this.pause():t.currentTrack&&this.playTrack(t.currentTrack)}setVolume(t){let e=Math.min(1,Math.max(0,t));this.audioElement.volume=e,this.updateAudioState({volume:e})}seekTo(t){if(this.audioElement.readyState>0){let e=Math.min(this.audioElement.duration,Math.max(0,t));this.audioElement.currentTime=e,this.updateAudioState({currentTime:e})}}setTrackForSection(t){let e=this.audioStateSubject.getValue();this.tracksMap.get(t)&&e.currentTrack!==t&&this.playTrack(t)}};bt.\u0275fac=function(e){return new(e||bt)},bt.\u0275prov=z({token:bt,factory:bt.\u0275fac,providedIn:"root"});var pt=bt;var Dt=Ae(_e());var vt=class vt{constructor(t){this.http=t;this.destroy$=new V;this.isDebugMode=!0;this.audio=null;this.currentTrack=null;this._isPlaying=!1;this.volume=1;this.progress=0;this.isLoading=!1;this.TRACKS={introduction:{title:"Introduction",artist:"An",id:"intro",url:"assets/audio/An - Incident.mp3"},"disc-1":{title:"I can avoid it",artist:"Feryquitous",id:"disc1",url:"assets/audio/Feryquitous - i can avoid it.mp3"},"disc-2":{title:"Quantum Resonance",artist:"An",id:"disc2",url:"assets/audio/An - Quantum Resonance.mp3"},pv:{title:"Neural Network",artist:"Feryquitous",id:"pv",url:"assets/audio/Feryquitous - Neural Network.mp3"},information:{title:"Digital Entropy",artist:"An \xD7 Feryquitous",id:"info",url:"assets/audio/An \xD7 Feryquitous - Digital Entropy.mp3"}};this.audioStateSubject=new w({isPlaying:!1,currentTrack:null,volume:1,progress:0,loading:!1});this.audioEventSubject=new w({type:"pause"});this.errorSubject=new V;this.currentTrackSubject=new w("");this.currentTrack$=this.currentTrackSubject.asObservable();this.audioFiles=[];this.sectionTracks={introduction:"An - Incident.mp3","disc-1":"Feryquitous - i can avoid it.mp3","disc-2":"An - Quantum Resonance.mp3",pv:"Feryquitous - Neural Network.mp3",information:"An \xD7 Feryquitous - Digital Entropy.mp3"};this.uiSounds={"menu-click":"assets/audio/ui/menu-click.mp3","page-turn":"assets/audio/ui/page-turn.mp3",success:"assets/audio/ui/success.mp3",error:"assets/audio/ui/error.mp3"};this.loadAudioFiles(),this.initializeAudio(),this.isDebugMode&&console.log("[AudioService] Initialized")}loadAudioFiles(){return Y(this,null,function*(){try{this.audioFiles.push(...Object.values(this.sectionTracks).map(t=>`assets/audio/${t}`)),this.audioFiles.length>0&&this.currentTrackSubject.next(this.audioFiles[0]),this.isDebugMode&&console.log("[AudioService] Audio files loaded:",this.audioFiles)}catch(t){this.handleError("LOAD_ERROR",`Failed to load audio files: ${t instanceof Error?t.message:String(t)}`)}})}initializeAudio(){this.audio=new Audio,this.setupAudioEventListeners()}setupAudioEventListeners(){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.audio.addEventListener("timeupdate",()=>{this.audio&&(this.progress=this.audio.duration?this.audio.currentTime/this.audio.duration*100:0,this.updateAudioState(),this.audioEventSubject.next({type:"timeupdate",data:this.progress}))}),this.audio.addEventListener("ended",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"ended"})}),this.audio.addEventListener("error",t=>{let e=t;this.handleError("LOAD_ERROR",`Failed to load audio: ${e.message||"Unknown error"}`),this.audioEventSubject.next({type:"error",data:e.message})}),this.audio.addEventListener("loadstart",()=>{this.isLoading=!0,this.updateAudioState(),this.audioEventSubject.next({type:"loading"})}),this.audio.addEventListener("canplay",()=>{this.isLoading=!1,this.updateAudioState(),this.audioEventSubject.next({type:"loaded"})}),this.audio.addEventListener("play",()=>{this._isPlaying=!0,this.updateAudioState(),this.audioEventSubject.next({type:"play"})}),this.audio.addEventListener("pause",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"pause"})})}updateAudioState(){this.audioStateSubject.next({isPlaying:this._isPlaying,currentTrack:this.currentTrack,volume:this.volume,progress:this.progress,loading:this.isLoading})}handleError(t,e){this.isDebugMode&&console.error(`[AudioService] ${t}: ${e}`),this.errorSubject.next({type:t,message:e})}setTrackForSection(t){let e=this.TRACKS[t];if(!e){this.handleError("LOAD_ERROR",`No track found for section: ${t}`);return}this.currentTrack?.id!==e.id&&(this.isDebugMode&&console.log(`[AudioService] Setting track for section: ${t}`,e),this.currentTrack=e,this.loadTrack(e),this.currentTrackSubject.next(e.url))}loadTrack(t){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.isLoading=!0,this.updateAudioState(),this.audio.src=t.url;try{this.audio.load()}catch(e){this.handleError("LOAD_ERROR",`Failed to load track: ${e instanceof Error?e.message:String(e)}`)}}play(){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}if(!this.currentTrack){this.handleError("PLAY_ERROR","No track selected");return}this.isDebugMode&&console.log("[AudioService] Playing audio:",this.currentTrack.title),this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(t=>{this.handleError("PLAY_ERROR",`Failed to play audio: ${t instanceof Error?t.message:String(t)}`)})}pause(){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log("[AudioService] Pausing audio"),this.audio.pause(),this._isPlaying=!1,this.updateAudioState()}togglePlay(){this._isPlaying?this.pause():this.play()}setVolume(t){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.volume=Math.max(0,Math.min(1,t)),this.audio.volume=this.volume,this.updateAudioState(),this.isDebugMode&&console.log(`[AudioService] Volume set to: ${this.volume}`)}getCurrentState(){return this.audioStateSubject.asObservable()}getAudioEvents(){return this.audioEventSubject.asObservable()}onPlayStateChange(){return this.getCurrentState().pipe(O(t=>t.isPlaying))}onTrackChange(){return this.currentTrack$}onLoadingStateChange(){return this.getCurrentState().pipe(O(t=>t.loading))}getProgress(){return!this.audio||!this.audio.duration?0:this.audio.currentTime/this.audio.duration}getErrors(){return this.errorSubject.asObservable()}isPlaying(){return this._isPlaying}getCurrentTrack(){return this.currentTrackSubject.value}getNextTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t<this.audioFiles.length-1){let e=this.audioFiles[t+1];return this.currentTrackSubject.next(e),e}return null}getPreviousTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t>0){let e=this.audioFiles[t-1];return this.currentTrackSubject.next(e),e}return null}getTrackList(){return this.audioFiles}getCurrentIndex(){return this.audioFiles.indexOf(this.currentTrackSubject.value)}playUISound(t){if(!this.uiSounds[t]){this.handleError("UI_SOUND_ERROR",`UI sound not found: ${t}`);return}try{let e=new Audio(this.uiSounds[t]);e.volume=.5,e.play().catch(n=>{this.handleError("UI_SOUND_ERROR",`Error playing UI sound: ${n instanceof Error?n.message:String(n)}`)})}catch(e){this.handleError("UI_SOUND_ERROR",`Failed to create UI sound: ${e instanceof Error?e.message:String(e)}`)}}playTrack(t){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log(`[AudioService] Playing track from source: ${t}`),this.currentTrackSubject.next(t),this.isLoading=!0,this.updateAudioState(),this.audio.src=t,this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(e=>{this.handleError("PLAY_ERROR",`Error playing track: ${e instanceof Error?e.message:String(e)}`)})}pauseTrack(){this.pause()}resumeTrack(){this.play()}ngOnDestroy(){this.isDebugMode&&console.log("[AudioService] Destroying service"),this.audio&&(this.audio.onended=null,this.audio.ontimeupdate=null,this.audio.onerror=null,this.audio.oncanplay=null,this.audio.onloadstart=null,this.audio.pause(),this.audio.src="",this.audio=null),this.audioStateSubject.complete(),this.audioEventSubject.complete(),this.currentTrackSubject.complete(),this.errorSubject.complete(),this.destroy$.next(),this.destroy$.complete()}};vt.\u0275fac=function(e){return new(e||vt)($(wt))},vt.\u0275prov=z({token:vt,factory:vt.\u0275fac,providedIn:"root"});var Bt=vt;var Ct=class Ct{constructor(t,e,n){this.dynamicArtistService=t;this.audioService=e;this.artistCreditService=n;this.destroy$=new V;this.musicStateSubject=new w({isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"});this.artistFilteringStateSubject=new w({mode:"no-music",currentArtists:[],allArtists:[],displayTitle:"All Phantasia 2 Artists",displaySubtitle:"Showcasing 31 of 31 artists from the album"});this.musicState$=this.musicStateSubject.asObservable();this.artistFilteringState$=this.artistFilteringStateSubject.asObservable();this.currentArtistsForFiltering$=this.artistFilteringState$.pipe(O(t=>t.currentArtists),G((t,e)=>this.compareArtistArrays(t,e)),mt(1),E(this.destroy$));this.displayInfo$=this.artistFilteringState$.pipe(O(t=>({title:t.displayTitle,subtitle:t.displaySubtitle,mode:t.mode})),G((t,e)=>t.title===e.title&&t.subtitle===e.subtitle&&t.mode===e.mode),mt(1),E(this.destroy$));this.subscriptions={};this.stateUpdateQueue=[];this.isProcessingQueue=!1;this.initializeService()}ngOnDestroy(){try{console.log("[MusicStateManager] Starting cleanup..."),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,Object.keys(this.subscriptions).forEach(t=>{try{this.subscriptions[t]&&typeof this.subscriptions[t].unsubscribe=="function"&&this.subscriptions[t].unsubscribe()}catch(e){console.error(`[MusicStateManager] Error unsubscribing from ${t}:`,e)}}),this.destroy$.next(),this.destroy$.complete(),console.log("[MusicStateManager] Cleanup completed")}catch(t){console.error("[MusicStateManager] Error during cleanup:",t)}}initializeService(){try{console.log("[MusicStateManager] Initializing service..."),this.loadAllArtistsForShowcase(),this.subscriptions.currentTrack=this.dynamicArtistService.currentTrack$.pipe(G((t,e)=>t?.id===e?.id),E(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.handleTrackChange(t,"phantasia2")),error:t=>console.error("[MusicStateManager] Error in currentTrack subscription:",t)}),this.subscriptions.currentTime=this.dynamicArtistService.currentTime$.pipe(ct(50),G(),E(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateCurrentTime(t)),error:t=>console.error("[MusicStateManager] Error in currentTime subscription:",t)}),this.subscriptions.audioState=this.audioService.audioState$.pipe(G((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),E(this.destroy$)).subscribe({next:t=>{let e=this.musicStateSubject.value;(!e.currentTrack||e.playbackMode!=="phantasia2")&&this.queueStateUpdate(()=>this.handleAudioStateChange(t))},error:t=>console.error("[MusicStateManager] Error in audioState subscription:",t)}),this.subscriptions.trackCredits=this.artistCreditService.currentTrackCredits$.pipe(E(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateTrackCredits(t)),error:t=>console.error("[MusicStateManager] Error in trackCredits subscription:",t)}),console.log("[MusicStateManager] Service initialized with enhanced error handling")}catch(t){console.error("[MusicStateManager] Error during initialization:",t)}}handleTrackChange(t,e){try{let n=this.musicStateSubject.value;if(t&&n.currentTrack?.id===t.id){console.log(`[MusicStateManager] Track ${t.id} already active, skipping update`);return}if(t){let o=null;try{o=this.artistCreditService.getTrackCredits(t.id)}catch(P){console.warn(`[MusicStateManager] Could not get credits for track ${t.id}:`,P)}let s=this.extractArtistsFromTrack(t,o),g=j(S({},n),{currentTrack:t,currentTrackCredits:o,playbackMode:e});if(this.validateMusicState(g))this.musicStateSubject.next(g);else{console.error("[MusicStateManager] Invalid music state, skipping update");return}let f=this.artistFilteringStateSubject.value.allArtists,m={mode:"music-playing",currentArtists:s,allArtists:f,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${t.title}" - ${s.length} artists are currently featured`};this.validateArtistFilteringState(m)&&this.artistFilteringStateSubject.next(m),console.log(`[MusicStateManager] Track changed to: "${t.title}" with ${s.length} artists`)}else this.switchToNoMusicMode()}catch(n){console.error("[MusicStateManager] Error handling track change:",n),this.switchToNoMusicMode()}}handleAudioStateChange(t){let e=this.musicStateSubject.value;if(t.isPlaying&&t.currentTrack){let n=this.artistCreditService.getTrackCredits(t.currentTrack),o=j(S({},e),{isPlaying:t.isPlaying,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.duration>0?t.currentTime/t.duration:0,playbackMode:"legacy",currentTrackCredits:n});if(this.musicStateSubject.next(o),n){let s={mode:"music-playing",currentArtists:n.allContributions,allArtists:this.artistFilteringStateSubject.value.allArtists,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${n.title}" - ${n.allContributions.length} artists are currently featured`};this.artistFilteringStateSubject.next(s)}}else this.switchToNoMusicMode()}switchToNoMusicMode(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value.allArtists,n=j(S({},t),{isPlaying:!1,currentTrack:null,currentTrackCredits:null,playbackMode:"idle"});this.musicStateSubject.next(n);let o={mode:"no-music",currentArtists:[],allArtists:e,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${e.length} of 31 artists from the album`};this.artistFilteringStateSubject.next(o),console.log("[MusicStateManager] Switched to no-music mode - showing all artists")}updateCurrentTime(t){let e=this.musicStateSubject.value,n=j(S({},e),{currentTime:t,trackProgress:e.duration>0?t/e.duration:0});this.musicStateSubject.next(n)}updateTrackCredits(t){let e=this.musicStateSubject.value,n=j(S({},e),{currentTrackCredits:t});if(this.musicStateSubject.next(n),t&&e.currentTrack){let o=this.artistFilteringStateSubject.value,s=j(S({},o),{currentArtists:t.allContributions,displaySubtitle:`Artists for "${t.title}" - ${t.allContributions.length} artists are currently featured`});this.artistFilteringStateSubject.next(s)}}extractArtistsFromTrack(t,e){if(e)return e.allContributions;let n=[];return t.mainArtist&&n.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features?.forEach((o,s)=>{n.push({id:`${t.id}-featured-${s}`,artistName:o.name,artistDisplayName:o.displayName||o.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:o.socialLinks})}),t.collaborators?.forEach((o,s)=>{n.push({id:`${t.id}-collab-${s}`,artistName:o.name,artistDisplayName:o.displayName||o.name,role:o.role||"Collaborator",participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:o.socialLinks})}),n}loadAllArtistsForShowcase(){let t=this.artistCreditService.getAllPhantasia2Artists(),e=this.artistFilteringStateSubject.value,n=j(S({},e),{allArtists:t,displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`});this.artistFilteringStateSubject.next(n)}forceNoMusicMode(){this.switchToNoMusicMode()}getCurrentMusicState(){return this.musicStateSubject.value}getCurrentArtistFilteringState(){return this.artistFilteringStateSubject.value}setPlayingState(t){let e=this.musicStateSubject.value,n=j(S({},e),{isPlaying:t});this.musicStateSubject.next(n)}updateVolume(t){let e=this.musicStateSubject.value,n=j(S({},e),{volume:t});this.musicStateSubject.next(n)}updateDuration(t){let e=this.musicStateSubject.value,n=j(S({},e),{duration:t,trackProgress:e.currentTime>0?e.currentTime/t:0});this.musicStateSubject.next(n)}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id)return!1;return!0}getDebugInfo(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value;return{musicState:{playbackMode:t.playbackMode,isPlaying:t.isPlaying,currentTrackId:t.currentTrack?.id,currentTrackTitle:t.currentTrack?.title,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.trackProgress},filteringState:{mode:e.mode,currentArtistsCount:e.currentArtists.length,allArtistsCount:e.allArtists.length,displayTitle:e.displayTitle,displaySubtitle:e.displaySubtitle},subscriptions:{activeSubscriptions:Object.keys(this.subscriptions).length,subscriptionKeys:Object.keys(this.subscriptions)},stateQueue:{queueLength:this.stateUpdateQueue.length,isProcessing:this.isProcessingQueue}}}queueStateUpdate(t){this.stateUpdateQueue.push(t),this.processStateQueue()}processStateQueue(){return Y(this,null,function*(){if(!(this.isProcessingQueue||this.stateUpdateQueue.length===0)){this.isProcessingQueue=!0;try{for(;this.stateUpdateQueue.length>0;){let t=this.stateUpdateQueue.shift();if(t){try{t()}catch(e){console.error("[MusicStateManager] Error processing state update:",e)}yield new Promise(e=>setTimeout(e,10))}}}finally{this.isProcessingQueue=!1}}})}validateMusicState(t){try{return typeof t.isPlaying=="boolean"&&typeof t.currentTime=="number"&&typeof t.duration=="number"&&typeof t.volume=="number"&&typeof t.trackProgress=="number"&&t.volume>=0&&t.volume<=1&&t.trackProgress>=0&&t.trackProgress<=1&&t.currentTime>=0&&t.duration>=0}catch(e){return console.error("[MusicStateManager] Error validating music state:",e),!1}}validateArtistFilteringState(t){try{return["no-music","music-playing"].includes(t.mode)&&Array.isArray(t.currentArtists)&&Array.isArray(t.allArtists)&&typeof t.displayTitle=="string"&&typeof t.displaySubtitle=="string"}catch(e){return console.error("[MusicStateManager] Error validating artist filtering state:",e),!1}}emergencyReset(){console.warn("[MusicStateManager] Performing emergency reset");try{let t=this.artistCreditService.getAllPhantasia2Artists(),e={isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"},n={mode:"no-music",currentArtists:[],allArtists:t,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`};this.musicStateSubject.next(e),this.artistFilteringStateSubject.next(n),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,console.log("[MusicStateManager] Emergency reset completed")}catch(t){console.error("[MusicStateManager] Error during emergency reset:",t)}}};Ct.\u0275fac=function(e){return new(e||Ct)($(it),$(pt),$(ut))},Ct.\u0275prov=z({token:Ct,factory:Ct.\u0275fac,providedIn:"root"});var Ot=Ct;function Te(p,t){if(p&1&&(h(0,"div",30)(1,"div",31),C(2,"\u26A0"),_(),h(3,"span"),C(4),_()()),p&2){let e=x();y(4),F(e.error)}}function Ie(p,t){p&1&&(h(0,"div",32),A(1,"div",33),h(2,"span"),C(3,"Loading audio..."),_()())}function Ee(p,t){if(p&1&&(h(0,"div",38)(1,"div",39)(2,"h4",40),C(3),_(),h(4,"p",41),C(5),_()()()),p&2){let e=x(2);y(3),F(e.currentTrackInfo.title),y(2),F(e.currentTrackInfo.mainArtist)}}function Le(p,t){if(p&1&&(h(0,"div",42)(1,"div",40),C(2),_(),h(3,"div",41),C(4),_()()),p&2){let e=x(2);y(2),F(e.getTrackName(e.currentTrack)),y(2),F(e.getArtistName())}}function De(p,t){if(p&1&&(h(0,"div",43),C(1),_()),p&2){let e=x(2);y(),tt(" ",e.currentSubtitle," ")}}function Fe(p,t){if(p&1&&(h(0,"div",34),T(1,Ee,6,2,"div",35)(2,Le,5,2,"div",36)(3,De,2,1,"div",37),_()),p&2){let e=x();y(),v("ngIf",e.currentTrackInfo),y(),v("ngIf",!e.currentTrackInfo&&e.currentTrack),y(),v("ngIf",e.currentSubtitle&&!e.trackTitle&&!e.currentTrackInfo)}}var St=class St{constructor(t,e,n,o){this.audioService=t;this.dynamicArtistService=e;this.musicStateManager=n;this.cdr=o;this.trackTitle="";this.trackArtist="";this.activeTrack=null;this.audio=null;this.destroy$=new V;this.trackLoadingMutex=new V;this.isTrackLoading=!1;this.audioInstances=[];this.lastLoadedTrackId=null;this.isPlaying=!1;this.isLoading=!0;this.currentTrack="";this.currentTime=0;this.duration=0;this.volume=.5;this._isMuted=!1;this._savedVolumeBeforeMute=.5;this._muteStateInitialized=!1;this.error="";this.currentSubtitle="";this.currentTrackInfo=null;this.allTracks=[];this.currentTrackIndex=0;this.currentProject="phantasia1";this.hasUserInteracted=!1;this.lastSuccessfulVolume=.5;this.retryCount=0;this.maxRetries=3;this.audioContext=null;this.eventListeners=[];this.isAudioContextInitialized=!1;this.diagnoseEnvironment(),this.initializeAudioContext(),this.setupGlobalEventListeners()}diagnoseEnvironment(){console.group("[MusicPlayer] Environment Diagnosis"),console.log("User Agent:",navigator.userAgent),console.log("Location:",window.location.href),console.log("Base URL:",document.baseURI),console.log("Protocol:",window.location.protocol),console.log("Host:",window.location.host),console.log("Port:",window.location.port);let t="8. Evin a\u2019k - Trench.ogg";console.log("Unicode Test String:",t),console.log("Unicode Test Encoded:",encodeURIComponent(t)),console.log("Howler Audio Support:",{webAudio:window.Howler?.ctx!==null,html5:!0,codecs:{ogg:window.Howler?.codecs?.("audio/ogg")||"unknown",mp3:window.Howler?.codecs?.("audio/mpeg")||"unknown"}}),console.groupEnd()}getAudioDirectory(){return this.currentProject==="phantasia1"?"Phantasia_1":"Phantasia_2"}ngOnInit(){this.initializeAudio()}ngOnDestroy(){try{this.destroy$.next(),this.destroy$.complete(),this.cleanupAllAudioInstances(),this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupAudioContext(),this.cleanupEventListeners(),console.log("[MusicPlayer] Component destroyed and resources cleaned up")}catch(t){console.error("[MusicPlayer] Error during cleanup:",t)}}initializeAudio(){this.dynamicArtistService.currentProject$.pipe(E(this.destroy$)).subscribe(t=>{this.currentProject=t,console.log(`[MusicPlayer] Project switched to: ${t}`),this.cdr.markForCheck()}),this.dynamicArtistService.tracks$.pipe(E(this.destroy$)).subscribe(t=>{this.allTracks=t,t.length>0&&!this.currentTrackInfo&&(this.currentTrackInfo=t[0],this.currentTrackIndex=0,this.loadTrackFromInfo(this.currentTrackInfo),this.updateDynamicArtistTime()),this.cdr.markForCheck()}),this.dynamicArtistService.currentTrack$.pipe(E(this.destroy$)).subscribe(t=>{t&&t!==this.currentTrackInfo&&(this.currentTrackInfo=t,this.currentTrackIndex=this.allTracks.findIndex(e=>e.id===t.id),this.loadTrackFromInfo(t)),this.cdr.markForCheck()})}loadTrackFromInfo(t){return Y(this,null,function*(){if(this.isTrackLoading){console.log("[MusicPlayer] Track loading already in progress, waiting...");return}if(this.lastLoadedTrackId===t.id&&!this.error){console.log(`[MusicPlayer] Track ${t.id} already loaded, skipping`);return}this.isTrackLoading=!0,this.lastLoadedTrackId=t.id,this.retryCount=0;try{this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.error="",this.cdr.markForCheck(),yield this.cleanupCurrentAudio(),console.log(`[MusicPlayer] Starting track load: ${t.title} (${t.id})`)}catch(n){console.error("[MusicPlayer] Error during track loading preparation:",n),this.handleTrackLoadError(t,n);return}let e;if(t.audioFile){let n=t.audioFile;console.log("[MusicPlayer] Original filename:",n),console.log("[MusicPlayer] Filename char codes:",[...n].map(s=>`${s}(${s.charCodeAt(0)})`).join(" "));let o=[()=>`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(n)}`,()=>{let s=n.replace(/'/g,"'");return`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(s)}`},()=>{let s=n.replace(/'/g,"%E2%80%99").replace(/ /g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29");return`assets/audio/${this.getAudioDirectory()}/${s}`},()=>`assets/audio/${this.getAudioDirectory()}/${n}`,()=>`/assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(n)}`];e=o[0](),this._fallbackUrls=o.slice(1).map(s=>s()),this._currentStrategyIndex=0,this._trackInfo=t,console.log("[MusicPlayer] Prepared fallback URLs:"),this._fallbackUrls.forEach((s,g)=>{console.log(`  Strategy ${g+1}: ${s}`)})}else e=`assets/audio/${this.getAudioDirectory()}/${t.id}.ogg`,this._fallbackUrls=[];console.log("[MusicPlayer] Loading audio (Strategy 0):",e),t.id==="8"&&(console.group("[MusicPlayer] Track 8 Diagnostics"),console.log("Track ID:",t.id),console.log("Track Title:",t.title),console.log("Main Artist:",t.mainArtist),console.log("Audio File Mapping:",t.audioFile),console.log("Final Audio Source:",e),console.log("Browser Location:",window.location.href),console.groupEnd()),this.audio=new Dt.Howl({src:[e],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.musicStateManager.setPlayingState(!0),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.musicStateManager.setPlayingState(!1),this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.musicStateManager.setPlayingState(!1),this.nextTrack(),this.cdr.markForCheck()},onloaderror:(n,o)=>{console.error("[MusicPlayer] Error loading (Strategy "+(this._currentStrategyIndex||0)+"):",e,o),console.error("[MusicPlayer] Track info:",t);let s=this._fallbackUrls||[],g=this._currentStrategyIndex||0;if(g<s.length){console.log("[MusicPlayer] Attempting fallback strategy",g+1),this._currentStrategyIndex=g+1;let f=s[g];console.log("[MusicPlayer] Trying fallback URL:",f),this.audio&&this.audio.unload(),this.audio=new Dt.Howl({src:[f],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(m,P)=>{if(console.error("[MusicPlayer] Fallback also failed:",f,P),g>=s.length-1)this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. Tried ${s.length+1} different URL encodings. Last error: ${P}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck();else{this._currentStrategyIndex=g+1;let i=s[g+1];i&&(console.log("[MusicPlayer] Trying next fallback strategy:",g+2),this.tryLoadWithUrl(i,t))}}})}else this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${o}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&(this.audioInstances.push(this.audio),this.isTrackLoading=!1)})}tryLoadWithUrl(t,e){return Y(this,null,function*(){try{yield this.cleanupCurrentAudio()}catch(n){console.error("[MusicPlayer] Error cleaning up before fallback:",n)}this.audio=new Dt.Howl({src:[t],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(n,o)=>{let s=this._fallbackUrls||[],g=this._currentStrategyIndex||0;if(console.error(`[MusicPlayer] Fallback strategy ${g+1} failed:`,t,o),g<s.length-1){this._currentStrategyIndex=g+1;let f=s[g];console.log(`[MusicPlayer] Trying next fallback strategy ${g+2}:`,f),this.tryLoadWithUrl(f,e)}else this.error=`Failed to load track "${e.title}" by ${e.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${o}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&this.audioInstances.push(this.audio)})}loadTrack(t){this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.cdr.markForCheck(),this.audio&&this.audio.unload(),this.audio=new Dt.Howl({src:[t.url||t.title],html5:!0,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(e,n)=>{this.error=`Failed to load track: ${n}`,this.isLoading=!1,this.cdr.markForCheck()}})}togglePlay(){return Y(this,null,function*(){if(!this.audio){console.warn("[MusicPlayer] No audio instance available for playback");return}try{yield this.ensureAudioContextReady(),this.isPlaying?(this.audio.pause(),this.isPlaying=!1):(this.hasUserInteracted=!0,this.audio.play(),this.isPlaying=!0),this.musicStateManager.setPlayingState(this.isPlaying),this.cdr.markForCheck(),console.log(`[MusicPlayer] Playback ${this.isPlaying?"started":"paused"}`)}catch(t){console.error("[MusicPlayer] Error toggling playback:",t),this.error="Playback error occurred",this.cdr.markForCheck()}})}setVolume(t){if(!this.audio){this.volume=Math.max(0,Math.min(1,t)),this.lastSuccessfulVolume=this.volume;return}try{let e=Math.max(0,Math.min(1,t));this.volume=e,!this._isMuted&&e>0&&(this._savedVolumeBeforeMute=e,this.lastSuccessfulVolume=e),this.audio.volume(e),this.musicStateManager.updateVolume(e),this.cdr.markForCheck(),console.log(`[MusicPlayer] Volume set to ${e}, muted: ${this._isMuted}`)}catch(e){console.error("[MusicPlayer] Error setting volume:",e),this.handleVolumeError(t)}}toggleMute(){if(!this.audio){console.warn("[MusicPlayer] Cannot toggle mute: no audio instance available");return}try{if(this.hasUserInteracted=!0,this._muteStateInitialized||(this._savedVolumeBeforeMute=this.volume>0?this.volume:.5,this._muteStateInitialized=!0),this._isMuted){this._isMuted=!1;let t=this._savedVolumeBeforeMute>0?this._savedVolumeBeforeMute:.5;this.volume=t,this.audio.volume(t),this.musicStateManager.updateVolume(t),console.log(`[MusicPlayer] Unmuted, restored volume to ${t}`)}else this._isMuted=!0,this.volume>0&&(this._savedVolumeBeforeMute=this.volume),this.audio.volume(0),this.musicStateManager.updateVolume(0),console.log(`[MusicPlayer] Muted, saved volume ${this._savedVolumeBeforeMute}`);this.cdr.markForCheck()}catch(t){console.error("[MusicPlayer] Error toggling mute:",t),this.handleMuteError()}}seek(t){this.audio&&(this.audio.seek(t),this.currentTime=t,this.cdr.markForCheck())}updateSubtitleFromFilename(t){if(t){let n=(t.split("/").pop()||"").replace(".mp3","").split(" - ");n.length>1?this.currentSubtitle=n[0]:this.currentSubtitle=""}}updateTime(){if(this.audio&&this.isPlaying){let t=this.audio.seek();this.currentTime=typeof t=="number"?t:0,this.updateDynamicArtistTime(),this.cdr.markForCheck(),requestAnimationFrame(()=>this.updateTime())}}updateDynamicArtistTime(){if(this.currentTrackInfo){let t=this.currentTrackInfo.startTime+this.currentTime;this.dynamicArtistService.updateCurrentTime(t)}}nextTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=(this.currentTrackIndex+1)%this.allTracks.length,n=this.allTracks[e];if(n&&n.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=n,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(n.startTime),this.loadTrackFromInfo(n),t)){let o=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(o,100)};o()}}previousTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=this.currentTrackIndex===0?this.allTracks.length-1:this.currentTrackIndex-1,n=this.allTracks[e];if(n&&n.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=n,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(n.startTime),this.loadTrackFromInfo(n),t)){let o=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(o,100)};o()}}formatTime(t){if(isNaN(t)||!isFinite(t)||t<0)return"0:00";let e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`}getTrackName(t){if(this.currentTrackInfo)return this.currentTrackInfo.title;if(this.trackTitle)return this.trackTitle;if(t){let e=t.split("/"),n=e[e.length-1].replace(/\.(mp3|ogg)$/,""),o=n.split(" - ");return o.length>1?o[1]:n}return"Unknown Track"}getArtistName(){if(this.currentTrackInfo)return this.currentTrackInfo.mainArtist;if(this.trackArtist)return this.trackArtist;if(this.currentTrack){let e=(this.currentTrack.split("/").pop()||"").replace(/\.(mp3|ogg)$/,"").split(" - ");if(e.length>1)return e[0]}return this.currentSubtitle||"Unknown Artist"}cleanupCurrentAudio(){return Y(this,null,function*(){if(this.audio)try{this.isPlaying&&this.audio.pause(),this.audio.unload();let t=this.audioInstances.indexOf(this.audio);t>-1&&this.audioInstances.splice(t,1),this.audio=null,console.log("[MusicPlayer] Current audio instance cleaned up")}catch(t){console.error("[MusicPlayer] Error during audio cleanup:",t)}})}cleanupAllAudioInstances(){try{this.audio&&(this.audio.unload(),this.audio=null),this.audioInstances.forEach(t=>{try{t.unload()}catch(e){console.error("[MusicPlayer] Error unloading audio instance:",e)}}),this.audioInstances=[],console.log("[MusicPlayer] All audio instances cleaned up")}catch(t){console.error("[MusicPlayer] Error during comprehensive cleanup:",t)}}handleVolumeError(t){console.warn(`[MusicPlayer] Volume error, attempting recovery with value ${t}`),this.retryCount<this.maxRetries?(this.retryCount++,setTimeout(()=>{if(this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume,this.cdr.markForCheck()}catch(e){console.error("[MusicPlayer] Volume recovery failed:",e)}},100)):(this.error="Volume control temporarily unavailable",this.cdr.markForCheck())}handleMuteError(){if(console.warn("[MusicPlayer] Mute toggle error, attempting recovery"),this._isMuted=!1,this._muteStateInitialized=!1,this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume}catch(t){console.error("[MusicPlayer] Mute recovery failed:",t),this.error="Mute control temporarily unavailable"}this.cdr.markForCheck()}handleTrackLoadError(t,e){console.error(`[MusicPlayer] Track loading error for ${t.title}:`,e),this.error=`Failed to load "${t.title}" - ${e.message||e}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupCurrentAudio(),this.cdr.markForCheck()}get isMuted(){return this._isMuted}get displayVolume(){return this._isMuted?0:this.volume}get savedVolumeBeforeMute(){return this._savedVolumeBeforeMute}getDebugState(){return{isPlaying:this.isPlaying,isLoading:this.isLoading,isTrackLoading:this.isTrackLoading,isMuted:this._isMuted,volume:this.volume,savedVolumeBeforeMute:this._savedVolumeBeforeMute,currentTrackId:this.currentTrackInfo?.id,audioInstancesCount:this.audioInstances.length,lastLoadedTrackId:this.lastLoadedTrackId,error:this.error,audioContextState:this.audioContext?.state,eventListenersCount:this.eventListeners.length}}initializeAudioContext(){try{typeof window<"u"&&"AudioContext"in window?(this.audioContext=new AudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] AudioContext initialized")):typeof window<"u"&&"webkitAudioContext"in window?(this.audioContext=new window.webkitAudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] WebKit AudioContext initialized")):console.warn("[MusicPlayer] AudioContext not supported")}catch(t){console.error("[MusicPlayer] Error initializing AudioContext:",t)}}setupGlobalEventListeners(){if(!(typeof window>"u"))try{let t=()=>Y(this,null,function*(){if(this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed")}catch(n){console.error("[MusicPlayer] Error resuming AudioContext:",n)}}),e=()=>{document.hidden?this.audioContext&&this.audioContext.state==="running"&&this.audioContext.suspend().catch(n=>{console.error("[MusicPlayer] Error suspending AudioContext:",n)}):t()};this.addTrackedEventListener(document,"click",t,{passive:!0}),this.addTrackedEventListener(document,"keydown",t,{passive:!0}),this.addTrackedEventListener(document,"visibilitychange",e,{passive:!0}),console.log("[MusicPlayer] Global event listeners setup completed")}catch(t){console.error("[MusicPlayer] Error setting up global event listeners:",t)}}addTrackedEventListener(t,e,n,o){try{t.addEventListener(e,n,o),this.eventListeners.push({element:t,event:e,handler:n})}catch(s){console.error(`[MusicPlayer] Error adding event listener for ${e}:`,s)}}cleanupAudioContext(){try{this.audioContext&&(this.audioContext.state!=="closed"&&this.audioContext.close().catch(t=>{console.error("[MusicPlayer] Error closing AudioContext:",t)}),this.audioContext=null,this.isAudioContextInitialized=!1,console.log("[MusicPlayer] AudioContext cleaned up"))}catch(t){console.error("[MusicPlayer] Error during AudioContext cleanup:",t)}}cleanupEventListeners(){try{this.eventListeners.forEach(({element:t,event:e,handler:n})=>{try{t.removeEventListener(e,n)}catch(o){console.error(`[MusicPlayer] Error removing event listener for ${e}:`,o)}}),this.eventListeners=[],console.log("[MusicPlayer] Event listeners cleaned up")}catch(t){console.error("[MusicPlayer] Error during event listener cleanup:",t)}}ensureAudioContextReady(){return Y(this,null,function*(){if(this.audioContext||this.initializeAudioContext(),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed for playback")}catch(t){console.error("[MusicPlayer] Error resuming AudioContext for playback:",t)}})}};St.\u0275fac=function(e){return new(e||St)(L(Bt),L(it),L(Ot),L(Ft))},St.\u0275cmp=X({type:St,selectors:[["app-music-player"]],inputs:{trackTitle:"trackTitle",trackArtist:"trackArtist",activeTrack:"activeTrack"},decls:32,vars:34,consts:[[1,"music-player-container"],[1,"player-backdrop"],[1,"music-player"],[1,"status-section"],["class","error-message",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["class","track-section",4,"ngIf"],[1,"progress-section"],[1,"time-display"],[1,"current-time"],[1,"duration"],[1,"progress-container"],[1,"progress-track"],[1,"progress-fill"],["type","range","aria-label","Seek",1,"progress-slider",3,"input","min","max","step","value","disabled"],[1,"controls-section"],[1,"volume-section"],[1,"volume-icon-container",3,"click"],["alt","Volume",1,"volume-icon",3,"src"],[1,"volume-control"],[1,"volume-track"],[1,"volume-fill"],["type","range","aria-label","Volume",1,"volume-slider",3,"input","min","max","step","value","disabled"],[1,"playback-controls"],["aria-label","Previous track",1,"control-button","previous-button",3,"click","disabled"],["src","assets/icons/music-player/skip-back.svg","alt","Previous",1,"control-icon"],[1,"control-button","play-pause-button",3,"click","disabled"],[1,"control-icon",3,"src","alt"],["aria-label","Next track",1,"control-button","next-button",3,"click","disabled"],["src","assets/icons/music-player/skip-forward.svg","alt","Next",1,"control-icon"],[1,"error-message"],[1,"error-icon"],[1,"loading-indicator"],[1,"loading-spinner"],[1,"track-section"],["class","track-details",4,"ngIf"],["class","track-info",4,"ngIf"],["class","current-subtitle",4,"ngIf"],[1,"track-details"],[1,"track-info-content"],[1,"track-title"],[1,"track-artist"],[1,"track-info"],[1,"current-subtitle"]],template:function(e,n){e&1&&(h(0,"div",0),A(1,"div",1),h(2,"div",2)(3,"div",3),T(4,Te,5,1,"div",4)(5,Ie,4,0,"div",5),_(),T(6,Fe,4,3,"div",6),h(7,"div",7)(8,"div",8)(9,"span",9),C(10),_(),h(11,"span",10),C(12),_()(),h(13,"div",11)(14,"div",12),A(15,"div",13),h(16,"input",14),D("input",function(s){return n.seek(s.target.value)}),_()()()(),h(17,"div",15)(18,"div",16)(19,"div",17),D("click",function(){return n.toggleMute()}),A(20,"img",18),_(),h(21,"div",19)(22,"div",20),A(23,"div",21),h(24,"input",22),D("input",function(s){return n.setVolume(s.target.value)}),_()()()(),h(25,"div",23)(26,"button",24),D("click",function(){return n.previousTrack()}),A(27,"img",25),_(),h(28,"button",26),D("click",function(){return n.togglePlay()}),A(29,"img",27),_(),h(30,"button",28),D("click",function(){return n.nextTrack()}),A(31,"img",29),_()()()()()),e&2&&(y(4),v("ngIf",n.error),y(),v("ngIf",n.isLoading),y(),v("ngIf",!n.isLoading),y(),Z("disabled",n.isLoading),y(3),F(n.formatTime(n.currentTime)),y(2),F(n.formatTime(n.duration)),y(3),H("width",n.currentTime/n.duration*100,"%"),y(),v("min",0)("max",n.duration)("step",.01)("value",n.currentTime)("disabled",n.isLoading),y(),Z("disabled",n.isLoading),y(3),Z("muted",n.isMuted),v("src",n.isMuted?"assets/icons/music-player/volume-mute.svg":"assets/icons/music-player/volume.svg",lt),y(3),H("width",n.displayVolume*100,"%"),y(),v("min",0)("max",1)("step",.01)("value",n.displayVolume)("disabled",n.isLoading),y(2),v("disabled",n.isLoading),y(2),Z("playing",n.isPlaying),v("disabled",n.isLoading),J("aria-label",n.isPlaying?"Pause":"Play"),y(),v("src",n.isPlaying?"assets/icons/music-player/pause.svg":"assets/icons/music-player/play.svg",lt)("alt",n.isPlaying?"Pause":"Play"),y(),v("disabled",n.isLoading))},dependencies:[et,dt,At],styles:[".music-player-container[_ngcontent-%COMP%]{position:relative;width:100%;margin:0 0 2rem;padding:0;isolation:isolate;box-sizing:border-box!important;max-width:100%!important}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]{position:absolute;inset:-4px 0;box-sizing:border-box!important;background:linear-gradient(135deg,#00000026,#0000002e,#00000038 50%,#00000040);backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);-webkit-backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);border-radius:20px;opacity:.8;z-index:-1}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{display:none!important}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:1}to{left:100%;opacity:0}}.music-player[_ngcontent-%COMP%]{position:relative;width:100%;background:linear-gradient(135deg,#ffffff1f,#ffffff14 25%,#ffffff0f 75%,#ffffff0a);backdrop-filter:blur(24px) saturate(1.6);-webkit-backdrop-filter:blur(24px) saturate(1.6);border:1px solid rgba(255,255,255,.15);border-radius:16px;box-sizing:border-box!important;max-width:100%!important;box-shadow:0 12px 40px #00000040,0 4px 16px #00000026,0 2px 8px #0000001a,inset 0 1px #fff3,inset 0 -1px #ffffff1a;display:flex;flex-direction:column;gap:clamp(12px,2vw,20px);padding:clamp(16px,3vw,24px);font-family:Inter,Roboto,sans-serif;color:#fffffff2;font-size:16px;line-height:1.5;letter-spacing:.01em;transition:all .4s cubic-bezier(.19,1,.22,1)}.music-player[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 48px #0000004d,0 6px 20px #0003,0 2px 8px #0000001a,inset 0 1px #ffffff40,inset 0 -1px #ffffff26}.status-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;min-height:0}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#dc354526,#dc354514);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(220,53,69,.3);border-radius:8px;color:#ffffffe6;font-size:clamp(.85rem,1vw,1.1rem);font-weight:500}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:16px;color:#ffc107e6}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px;color:#fffc;font-size:clamp(.85rem,1vw,1.1rem);font-weight:400}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.2);border-top:2px solid rgba(255,255,255,.8);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.track-section[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:8px}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 2px 8px rgba(255,255,255,.1);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-section[_ngcontent-%COMP%]   .current-subtitle[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem);color:#fff9;font-weight:300;line-height:1.4;letter-spacing:.01em}.progress-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.progress-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:clamp(.75rem,.9vw,.95rem);font-weight:400;color:#ffffffb3;font-variant-numeric:tabular-nums;letter-spacing:.02em}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%], .progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{padding:2px 4px;background:#ffffff0d;border-radius:4px;min-width:45px;text-align:center;font-family:Inter,monospace}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{position:relative;height:32px;display:flex;align-items:center}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{position:relative;width:100%;height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border-radius:3px;overflow:hidden;cursor:pointer;box-shadow:inset 0 1px 2px #0003,0 0 8px #ffffff0d}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffe6,#ffffffb3,#ffffffe6);border-radius:3px;transition:width .1s ease-out;box-shadow:0 0 12px #fff6,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{display:none!important}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:32px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:grab;transition:all .3s cubic-bezier(.19,1,.22,1);margin-top:-5px;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:active{cursor:grabbing;transform:scale(1.1)}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:6px;background:transparent;border-radius:3px}@keyframes _ngcontent-%COMP%_progressShimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:.6}to{left:100%;opacity:0}}.controls-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:clamp(16px,3vw,24px)}.controls-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:100px;flex:0 0 auto}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]{cursor:pointer;padding:6px;border-radius:6px;transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.05)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.85);transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon.muted[_ngcontent-%COMP%]{filter:invert(1) opacity(.6);transform:scale(.9)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{flex:1;max-width:80px}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]{position:relative;width:100%;height:4px;background:linear-gradient(90deg,#ffffff26,#fff3,#ffffff26);border-radius:2px;overflow:hidden;cursor:pointer}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffb3,#ffffffe6);border-radius:2px;transition:width .2s ease-out;box-shadow:0 0 6px #ffffff4d}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]{position:absolute;top:-6px;left:0;width:100%;height:16px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#ffffffe6;border-radius:50%;cursor:pointer;transition:all .2s cubic-bezier(.19,1,.22,1);margin-top:-4px;box-shadow:0 2px 6px #0000004d,inset 0 1px #ffffff80}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.3);background:#fff;box-shadow:0 3px 10px #0006,0 0 12px #fff9,inset 0 1px #ffffffb3}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:4px;background:transparent;border-radius:2px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:clamp(14px,2.2vw,18px);flex:1;max-width:180px;width:100%;margin:0 auto;position:relative}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{position:relative;border:none;background:linear-gradient(135deg,#ffffff26,#ffffff14,#ffffff0d);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .4s cubic-bezier(.19,1,.22,1);box-shadow:0 6px 20px #00000040,0 2px 8px #00000026,inset 0 1px #ffffff4d,inset 0 -1px #ffffff1a}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.9);transition:all .3s cubic-bezier(.19,1,.22,1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:40px;height:40px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:hover, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:linear-gradient(135deg,#fff3,#ffffff1f,#ffffff14);box-shadow:0 8px 28px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 20px #ffffff26}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:active, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:active{transform:scale(1.05);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:52px;height:52px;background:linear-gradient(135deg,#ffffff2e,#ffffff1f,#ffffff14);border-width:1.5px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:22px;height:22px;filter:invert(1) opacity(.95)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:hover{transform:scale(1.08);background:linear-gradient(135deg,#ffffff40,#ffffff2e,#ffffff1f);box-shadow:0 12px 36px #00000059,0 6px 16px #00000040,inset 0 1px #ffffff80,inset 0 -1px #fff3,0 0 32px #fff3}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:active{transform:scale(1.02);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff38,#ffffff26,#ffffff1a);box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e;animation:_ngcontent-%COMP%_playingPulse 2s ease-in-out infinite}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled:hover{transform:none;background:linear-gradient(135deg,#ffffff14,#ffffff0d)}@keyframes _ngcontent-%COMP%_playingPulse{0%,to{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e}50%{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 32px #ffffff40}}@media (max-width: 768px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:clamp(14px,4vw,20px);gap:clamp(10px,2.5vw,16px);border-radius:14px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(.95rem,1.2vw,1.3rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{height:8px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{width:18px;height:18px;margin-top:-5px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{gap:clamp(8px,3vw,16px)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{min-width:80px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:60px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{gap:clamp(8px,2.5vw,12px);max-width:160px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:36px;height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:16px;height:16px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:46px;height:46px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:20px;height:20px}}@media (max-width: 480px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:12px 16px;gap:8px;border-radius:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{order:2;align-self:stretch;min-width:auto}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:none;flex:1}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{order:1;max-width:none;justify-content:center}}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:pointer;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb:hover{background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3;transform:scale(1.2)}input[type=range][_ngcontent-%COMP%]::-moz-range-track{height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border:none;border-radius:3px;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}@media (prefers-reduced-motion: reduce){.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{animation:none}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{animation:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{transition-duration:.2s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{animation:none}@keyframes shimmer{0%,to{opacity:0}}@keyframes progressShimmer{0%,to{opacity:0}}@keyframes playingPulse{0%,to{opacity:1}}@keyframes spin{0%,to{transform:rotate(0)}}}"],changeDetection:0});var be=St;function je(p,t){if(p&1&&A(0,"div",24),p&2){let e=t.$implicit;H("left",e.x+"vw")("top",e.y+"vh")("--move-x",e.moveX+"px")("--move-y",e.moveY+"px")("--scale",e.scale)("--base-opacity",e.opacity)("--rotation-offset",e.rotationOffset)("--delay",e.delay),Z("clockwise",e.clockwise)("counter-clockwise",!e.clockwise)}}var Tt=class Tt{constructor(t,e,n){this.cdr=t;this.renderer=e;this.document=n;this._progress=0;this.progressText="0%";this.runes=[];this.originalHeaderStyles=new Map}set progress(t){this._progress=t,this.progressText=`${Math.floor(t)}%`,this.cdr.markForCheck()}get progress(){return this._progress}ngOnInit(){this.generateRunePositions(),this.suppressHighZIndexHeaders()}ngOnDestroy(){this.restoreHeaderStyles()}suppressHighZIndexHeaders(){console.log("\u{1F527} LoadingScreen: Starting header suppression");let t=["app-site-header",".site-header",'header[class*="header"]',".cd-cases-container",".debug-toggle",".debug-panel",".right-side-menu",".mobile-navbar",'[class*="z-index"]','[style*="z-index"]'],e=this.document.querySelectorAll(t.join(", "));console.log(`\u{1F50D} Found ${e.length} potential interfering elements`),e.forEach((n,o)=>{let s=n,g=getComputedStyle(s),f=g.zIndex||"auto",m=g.visibility||"visible";console.log(`\u{1F4DD} Element ${o}: ${s.tagName}.${s.className} - z-index: ${f}`),this.originalHeaderStyles.set(s,JSON.stringify({zIndex:f,visibility:m,display:g.display||"block"})),this.renderer.setStyle(s,"z-index","1",ft.Important),this.renderer.setStyle(s,"visibility","hidden",ft.Important),console.log(`\u2705 Suppressed element ${o}`)}),this.renderer.addClass(this.document.body,"loading-screen-active"),console.log("\u{1F3AF} Header suppression completed")}restoreHeaderStyles(){console.log("\u{1F527} LoadingScreen: Restoring header styles"),this.renderer.removeClass(this.document.body,"loading-screen-active"),console.log("\u{1F4DD} Removed loading-screen-active class from body"),this.originalHeaderStyles.forEach((e,n)=>{try{let o=JSON.parse(e);o.zIndex==="auto"||o.zIndex===""?this.renderer.removeStyle(n,"z-index"):this.renderer.setStyle(n,"z-index",o.zIndex),n.tagName.toLowerCase()==="app-site-header"||n.classList.contains("site-header")?(this.renderer.setStyle(n,"visibility","visible",ft.Important),console.log("\u{1F3AF} Forced header visibility to visible")):o.visibility==="visible"?this.renderer.removeStyle(n,"visibility"):this.renderer.setStyle(n,"visibility",o.visibility)}catch(o){console.warn("\u26A0\uFE0F Failed to restore styles for element:",n,o),this.renderer.removeStyle(n,"z-index"),this.renderer.removeStyle(n,"visibility"),(n.tagName.toLowerCase()==="app-site-header"||n.classList.contains("site-header"))&&this.renderer.setStyle(n,"visibility","visible",ft.Important)}}),this.document.querySelectorAll("app-site-header, .site-header, header").forEach(e=>{let n=e;this.renderer.setStyle(n,"visibility","visible",ft.Important),this.renderer.setStyle(n,"z-index","1000",ft.Important)}),this.originalHeaderStyles.clear(),console.log("\u2705 Header styles restored with enhanced visibility enforcement")}generateRunePositions(){this.runes=Array.from({length:48},()=>({x:Math.random()*100,y:Math.random()*100,scale:.6+Math.random()*1.4,delay:Math.random()*8,opacity:.3+Math.random()*.5,moveX:15+Math.random()*20,moveY:15+Math.random()*20,rotationOffset:Math.random()*360,clockwise:Math.random()<.5}))}};Tt.\u0275fac=function(e){return new(e||Tt)(L(Ft),L(de),L(le))},Tt.\u0275cmp=X({type:Tt,selectors:[["app-loading-screen"]],inputs:{progress:"progress"},decls:25,vars:3,consts:[[1,"loader-container"],[1,"magical-circle","outer"],[1,"magical-circle"],[1,"rune-effects"],[1,"decorative-elements"],[1,"corner-line","top-left"],[1,"corner-line","top-right"],[1,"corner-line","bottom-left"],[1,"corner-line","bottom-right"],[1,"mid-line","left"],[1,"mid-line","right"],[1,"mid-line","top"],[1,"mid-line","bottom"],[1,"light-beams"],[1,"beam","beam-1"],[1,"beam","beam-2"],[1,"beam","beam-3"],[1,"beam","beam-4"],[1,"rune-circle"],["class","rune",3,"clockwise","counter-clockwise","left","top","--move-x","--move-y","--scale","--base-opacity","--rotation-offset","--delay",4,"ngFor","ngForOf"],[1,"content"],[1,"logo-container"],["src","/assets/images/logos/prismcoll.svg","alt","Prismatic Collections",1,"logo"],[1,"loading-text"],[1,"rune"]],template:function(e,n){e&1&&(h(0,"div",0),A(1,"div",1)(2,"div",2)(3,"div",3),h(4,"div",4),A(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),_(),h(13,"div",13),A(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",17),_(),h(18,"div",18),T(19,je,1,20,"div",19),_(),h(20,"div",20)(21,"div",21),A(22,"img",22),_(),h(23,"div",23),C(24,"NOW LOADING"),_()()()),e&2&&(Z("visible",!0),y(19),v("ngForOf",n.runes))},dependencies:[et,jt],styles:['.loader-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#fff;opacity:0;pointer-events:none;transition:opacity .5s ease;z-index:2147483647;isolation:isolate;transform:translateZ(0);will-change:opacity,transform;position:fixed!important;z-index:2147483647!important;contain:layout size style}.loader-container.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]{position:relative;z-index:2147483647}.loader-container.visible[_ngcontent-%COMP%] ~ *[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   header[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}.logo-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:30px}.logo[_ngcontent-%COMP%]{width:240px;height:auto;display:block;margin:0 auto}.magical-circle[_ngcontent-%COMP%]{position:absolute;width:800px;height:800px;border:1px solid rgba(0,0,0,.1);border-radius:50%;animation:_ngcontent-%COMP%_rotate 20s linear infinite}.magical-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border:2px solid transparent;border-top-color:#0003;border-radius:50%}.magical-circle[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-10px;border:1px solid transparent;border-left-color:#00000026;border-radius:50%}.magical-circle.outer[_ngcontent-%COMP%]{width:1000px;height:1000px;animation:_ngcontent-%COMP%_rotate 30s linear infinite reverse;opacity:.5}.decorative-elements[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}.corner-line[_ngcontent-%COMP%]{position:absolute;width:150px;height:150px;border:2px solid rgba(0,0,0,.15);border-radius:4px}.corner-line[_ngcontent-%COMP%]:before, .corner-line[_ngcontent-%COMP%]:after{content:"";position:absolute;background:linear-gradient(90deg,#0000001a,#0003)}.corner-line.top-left[_ngcontent-%COMP%]{top:50px;left:50px;border-right:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite}.corner-line.top-right[_ngcontent-%COMP%]{top:50px;right:50px;border-left:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite .75s}.corner-line.bottom-left[_ngcontent-%COMP%]{bottom:50px;left:50px;border-right:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 1.5s}.corner-line.bottom-right[_ngcontent-%COMP%]{bottom:50px;right:50px;border-left:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 2.25s}.mid-line[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;border:2px solid rgba(0,0,0,.15);border-radius:4px;animation:_ngcontent-%COMP%_pulse 3s infinite}.mid-line.left[_ngcontent-%COMP%]{left:50px;top:50%;transform:translateY(-50%);border-right:none;animation-delay:.5s}.mid-line.right[_ngcontent-%COMP%]{right:50px;top:50%;transform:translateY(-50%);border-left:none;animation-delay:1s}.mid-line.top[_ngcontent-%COMP%]{top:50px;left:50%;transform:translate(-50%);border-bottom:none;animation-delay:1.5s}.mid-line.bottom[_ngcontent-%COMP%]{bottom:50px;left:50%;transform:translate(-50%);border-top:none;animation-delay:2s}.rune-circle[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;left:0;top:0}.rune[_ngcontent-%COMP%]{position:absolute;width:18px;height:18px;background:linear-gradient(135deg,#0006,#3c3c3c4d);clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);transform-origin:center center;transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg));opacity:var(--base-opacity);will-change:transform;animation:none}.rune.clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-clockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune.counter-clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-counterclockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.6));mix-blend-mode:screen;animation:_ngcontent-%COMP%_sparkle 4s infinite linear}.rune[_ngcontent-%COMP%]:after{content:"";position:absolute;width:140%;height:140%;top:-20%;left:-20%;background:radial-gradient(circle at center,rgba(120,200,255,.15) 0%,rgba(70,150,255,.1) 30%,transparent 70%);mix-blend-mode:screen;opacity:.5}.rune-effects[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;mix-blend-mode:multiply;background:radial-gradient(circle at center,transparent 0%,rgba(0,0,0,.02) 50%,transparent 100%);animation:_ngcontent-%COMP%_effect-pulse-safe 8s infinite ease-in-out;left:0;top:0;contain:layout}.light-beams[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none;mix-blend-mode:multiply}.beam[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(90deg,#0000001a,#28282826,#0000001a);mix-blend-mode:multiply}.beam.beam-1[_ngcontent-%COMP%]{width:600px;height:2px;animation:_ngcontent-%COMP%_beam-rotate 8s infinite linear,_ngcontent-%COMP%_beam-pulse 4s infinite ease-in-out}.beam.beam-2[_ngcontent-%COMP%]{width:400px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 12s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 6s infinite ease-in-out 1s}.beam.beam-3[_ngcontent-%COMP%]{width:300px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 10s infinite linear,_ngcontent-%COMP%_beam-pulse 5s infinite ease-in-out 2s}.beam.beam-4[_ngcontent-%COMP%]{width:200px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 14s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 7s infinite ease-in-out 3s}.content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-text[_ngcontent-%COMP%]{margin-top:2rem;font-size:1rem;letter-spacing:.3em;text-transform:uppercase;color:#000000b3;font-family:Arial,sans-serif;font-weight:500}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.2}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_rune-move-clockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((90 + var(--rotation-offset)) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((180 + var(--rotation-offset)) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((270 + var(--rotation-offset)) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((360 + var(--rotation-offset)) * 1deg))}}@keyframes _ngcontent-%COMP%_rune-move-counterclockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 90) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 180) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 270) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 360) * 1deg))}}@keyframes _ngcontent-%COMP%_beam-rotate{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@keyframes _ngcontent-%COMP%_beam-pulse{0%,to{opacity:.2;width:100%}50%{opacity:.5;width:120%}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.4;transform:scale(1)}50%{opacity:.8;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_effect-pulse-safe{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_effect-pulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}'],changeDetection:0});var ve=Tt;function Ne(p,t){if(p&1){let e=Q();h(0,"img",11),D("error",function(){K(e);let o=x();return q(o.onAvatarError())}),_()}if(p&2){let e=x();v("src",e.avatarUrl,lt)("alt",e.artistName+" avatar")}}function Ve(p,t){if(p&1&&(h(0,"div",12),C(1),_()),p&2){let e=x();H("background",e.cardThemeColor()),y(),tt(" ",e.artistInitials()," ")}}function ze(p,t){if(p&1&&(h(0,"div",13)(1,"div",14),A(2,"span",15),h(3,"span",16),C(4,"Currently Playing"),_()()()),p&2){let e=x();y(),v("@playingIndicator",e.playingIndicatorState)}}function Re(p,t){if(p&1){let e=Q();h(0,"button",22),D("click",function(o){K(e);let s=x(2);return q(s.onSocialLinkClick("youtube",o))}),h(1,"mat-icon"),C(2,"smart_display"),_(),h(3,"span",23),C(4,"YouTube"),_()()}if(p&2){let e=x(2);J("aria-label",e.artistName+" YouTube channel")}}function He(p,t){if(p&1){let e=Q();h(0,"button",24),D("click",function(o){K(e);let s=x(2);return q(s.onSocialLinkClick("twitter",o))}),h(1,"span",25),C(2,"\u{1D54F}"),_(),h(3,"span",23),C(4,"Twitter/X"),_()()}if(p&2){let e=x(2);J("aria-label",e.artistName+" Twitter profile")}}function Be(p,t){if(p&1){let e=Q();h(0,"button",26),D("click",function(o){K(e);let s=x(2);return q(s.onSocialLinkClick("linktr",o))}),h(1,"mat-icon"),C(2,"link"),_(),h(3,"span",23),C(4,"Links"),_()()}if(p&2){let e=x(2);J("aria-label",e.artistName+" Linktr.ee profile")}}function Ue(p,t){if(p&1){let e=Q();h(0,"button",27),D("click",function(o){K(e);let s=x(2);return q(s.onSocialLinkClick("instagram",o))}),h(1,"span",28),C(2,"\u{1F4F7}"),_(),h(3,"span",23),C(4,"Instagram"),_()()}if(p&2){let e=x(2);J("aria-label",e.artistName+" Instagram profile")}}function Ge(p,t){if(p&1&&(h(0,"div",17),T(1,Re,5,1,"button",18)(2,He,5,1,"button",19)(3,Be,5,1,"button",20)(4,Ue,5,1,"button",21),_()),p&2){let e=x();y(),v("ngIf",e.hasYoutube),y(),v("ngIf",e.hasTwitter),y(),v("ngIf",e.hasLinktr),y(),v("ngIf",e.hasInstagram)}}var It=class It{constructor(){this.enableAnimations=!0;this.isHovered=R(!1);this.avatarError=R(!1);this.artistInitials=rt(()=>{let e=(this.cardData?.artist?.artistDisplayName||"").split(" ").filter(n=>n.length>0);return e.length===0?"?":e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()});this.roleDisplayText=rt(()=>{if(!this.cardData?.artist?.role)return"";let t=this.cardData.artist.role;switch(t){case"Main Artist":return"MAIN ARTIST";case"Featured Artist":return"FEATURED ARTIST";case"Vocalist":return"VOCALIST";case"Producer":return"PRODUCER";case"Composer":return"COMPOSER";case"Arranger":return"ARRANGER";case"Instrumentalist":return"INSTRUMENTALIST";case"Violin":return"VIOLIN";case"Viola":return"VIOLA";case"Cello":return"CELLO";case"Accordion":return"ACCORDION";case"Piano":return"PIANO";case"Keyboard":return"KEYBOARD";case"Guitar":return"GUITAR";case"Bass":return"BASS";case"Drums":return"DRUMS";case"Electronic Producer":return"ELECTRONIC PRODUCER";case"Sound Designer":return"SOUND DESIGNER";case"Synthesizer V Operator":return"SYNTHESIZER V";case"Voice Actor":return"VOICE ACTOR";case"Vocalist, Lyricist":return"VOCALIST, LYRICIST";case"Accordionist":return"ACCORDIONIST";case"Violinist":return"VIOLINIST";case"Violist":return"VIOLIST";case"Cellist":return"CELLIST";default:return t.toUpperCase()}});this.participationLevelClass=rt(()=>`participation-${this.cardData?.participationLevel||"additional"}`);this.cardThemeColor=rt(()=>this.cardData?.artist?.color||"#ffffff")}get hasYoutube(){return!!this.cardData?.artist?.socialLinks?.youtube}get hasTwitter(){return!!this.cardData?.artist?.socialLinks?.twitter}get hasLinktr(){return!!this.cardData?.artist?.socialLinks?.linktr}get hasInstagram(){return!!this.cardData?.artist?.socialLinks?.instagram}get youtubeUrl(){return this.cardData?.artist?.socialLinks?.youtube||""}get twitterUrl(){return this.cardData?.artist?.socialLinks?.twitter||""}get linktrUrl(){return this.cardData?.artist?.socialLinks?.linktr||""}get instagramUrl(){return this.cardData?.artist?.socialLinks?.instagram||""}get artistName(){return this.cardData?.artist?.artistDisplayName||"Unknown Artist"}get avatarUrl(){return this.cardData?.artist?.avatar||""}get isCurrentlyPlaying(){return this.cardData?.isCurrentlyPlaying||!1}onMouseEnter(){this.enableAnimations&&this.isHovered.set(!0)}onMouseLeave(){this.enableAnimations&&this.isHovered.set(!1)}onAvatarError(){this.avatarError.set(!0)}onSocialLinkClick(t,e){e.stopPropagation();let n="";t==="youtube"?n=this.youtubeUrl:t==="twitter"?n=this.twitterUrl:t==="linktr"?n=this.linktrUrl:t==="instagram"&&(n=this.instagramUrl),n&&window.open(n,"_blank","noopener,noreferrer")}onCardClick(){console.log("Artist card clicked:",this.cardData?.artist?.artistDisplayName)}get hoverState(){return this.isHovered()?"hovered":"default"}get playingIndicatorState(){return this.isCurrentlyPlaying?"playing":"not-playing"}};It.\u0275fac=function(e){return new(e||It)},It.\u0275cmp=X({type:It,selectors:[["app-artist-card"]],inputs:{cardData:"cardData",enableAnimations:"enableAnimations"},decls:13,vars:13,consts:[[1,"artist-card",3,"mouseenter","mouseleave","click"],[1,"artist-avatar-section"],[1,"avatar-container"],["class","artist-avatar","loading","lazy",3,"src","alt","error",4,"ngIf"],["class","artist-initials",3,"background",4,"ngIf"],[1,"artist-info-section"],[1,"artist-name"],[1,"role-label"],["class","playing-status",4,"ngIf"],["class","social-links-section",4,"ngIf"],[1,"card-accent"],["loading","lazy",1,"artist-avatar",3,"error","src","alt"],[1,"artist-initials"],[1,"playing-status"],[1,"playing-indicator"],[1,"playing-dot"],[1,"playing-text"],[1,"social-links-section"],["class","social-link youtube-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link twitter-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link linktr-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link instagram-link","mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",1,"social-link","youtube-link",3,"click"],[1,"social-label"],["mat-icon-button","",1,"social-link","twitter-link",3,"click"],[1,"twitter-x-icon"],["mat-icon-button","",1,"social-link","linktr-link",3,"click"],["mat-icon-button","",1,"social-link","instagram-link",3,"click"],[1,"instagram-icon"]],template:function(e,n){e&1&&(h(0,"div",0),D("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})("click",function(){return n.onCardClick()}),h(1,"div",1)(2,"div",2),T(3,Ne,1,2,"img",3)(4,Ve,2,3,"div",4),_()(),h(5,"div",5)(6,"h3",6),C(7),_(),h(8,"div",7),C(9),_(),T(10,ze,5,1,"div",8),_(),T(11,Ge,5,4,"div",9),A(12,"div",10),_()),e&2&&(pe(n.participationLevelClass()),H("--theme-color",n.cardThemeColor()),v("@cardHover",n.hoverState),y(3),v("ngIf",n.avatarUrl&&!n.avatarError()),y(),v("ngIf",!n.avatarUrl||n.avatarError()),y(3),F(n.artistName),y(2),tt(" ",n.roleDisplayText()," "),y(),v("ngIf",n.isCurrentlyPlaying),y(),v("ngIf",n.hasYoutube||n.hasTwitter||n.hasLinktr||n.hasInstagram),y(),H("background",n.cardThemeColor()))},dependencies:[et,dt,At,ge,Vt,Nt],styles:['[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.artist-card[_ngcontent-%COMP%]{--mdc-theme-primary: var(--artist-card-text-primary) !important;--mat-primary-color: var(--artist-card-text-primary) !important;--theme-color: var(--artist-card-text-primary) !important;--color: var(--artist-card-text-primary) !important}.artist-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--artist-card-text-primary)!important}.artist-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--artist-card-bg-primary) 0%,var(--artist-card-bg-secondary) 100%);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid var(--artist-card-border-primary);border-radius:12px;color:var(--artist-card-text-primary);box-shadow:0 4px 16px var(--artist-card-shadow-base);transition:all .3s cubic-bezier(.25,.46,.45,.94);padding:1.75rem;cursor:pointer;min-height:300px;display:flex;flex-direction:column;align-items:center;text-align:center}.artist-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:var(--artist-card-bg-overlay);pointer-events:none;z-index:-1;opacity:.7;transition:opacity .3s ease}.artist-card[_ngcontent-%COMP%]:hover:hover{background:linear-gradient(135deg,var(--artist-card-hover-bg) 0%,var(--artist-card-bg-secondary) 100%);border-color:var(--artist-card-border-hover);box-shadow:0 8px 24px var(--artist-card-shadow-elevated);transform:translateY(-2px)}.artist-card[_ngcontent-%COMP%]:hover:before{opacity:.9}.artist-card[_ngcontent-%COMP%]:hover   .card-accent[_ngcontent-%COMP%]{opacity:1;transform:scaleX(1.05)}.artist-card[_ngcontent-%COMP%]:hover   .artist-avatar[_ngcontent-%COMP%]{transform:scale(1.08)}.artist-card[_ngcontent-%COMP%]:hover   .social-link[_ngcontent-%COMP%]{transform:translateY(-2px)}.artist-card.participation-main[_ngcontent-%COMP%]{border-color:var(--artist-card-text-primary);background:#000c;box-shadow:0 6px 24px #ffffff26}.artist-card.participation-main[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-primary);height:4px}.artist-card.participation-featured[_ngcontent-%COMP%]{border-color:var(--artist-card-text-secondary);background:var(--artist-card-bg-secondary)}.artist-card.participation-featured[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-secondary)}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{position:relative;width:80px;height:80px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid rgba(255,255,255,.2);transition:border-color .3s ease}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--theme-color, #666666);color:#fff;font-size:1.5rem;font-weight:700;border:3px solid rgba(255,255,255,.2);text-shadow:0 1px 2px rgba(0,0,0,.3)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{color:#fff!important;font-size:1.1rem;font-weight:600;margin:0 0 .5rem;line-height:1.3;text-shadow:0 1px 2px rgba(0,0,0,.4)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;letter-spacing:.8px;color:#fff!important;margin-bottom:.75rem;opacity:1;text-shadow:0 1px 4px rgba(0,0,0,.8);text-transform:uppercase;background:#0006;padding:.3rem .6rem;border-radius:6px;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.15);display:inline-block;box-shadow:0 2px 8px #0000004d;transition:all .2s ease;--color: #ffffff !important;--mdc-theme-primary: #ffffff !important;--mat-primary: #ffffff !important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[style*=color][_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.mat-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.theme-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[color=primary][_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]:hover{background:#00000080;border-color:#ffffff40;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0009,#141414b3);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:.4rem .8rem;margin-top:.5rem;box-shadow:0 2px 8px #0000004d}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#d40808!important;animation:_ngcontent-%COMP%_pulse 2s infinite}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem;color:#fff!important;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.5)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;flex-wrap:nowrap}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.375rem;padding:.5rem .875rem;background:#ffffff1a;border:1px solid rgba(255,255,255,.15);border-radius:8px;color:#fff;font-size:.7rem;transition:all .2s ease;text-decoration:none;min-width:90px;height:36px;white-space:nowrap;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;line-height:1;flex-shrink:0;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem;font-weight:500;flex-shrink:0;text-overflow:ellipsis;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[_ngcontent-%COMP%]:hover{background:#f003;border-color:#f006;color:#f44}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:110px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;flex-shrink:0;width:.85rem;height:.85rem;display:flex;align-items:center;justify-content:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]:hover{background:#1da1f233;border-color:#1da1f266;color:#1da1f2}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--text-primary),rgba(255,255,255,.6));border-radius:var(--border-radius-card) var(--border-radius-card) 0 0;opacity:.7;transition:var(--transition-smooth);box-shadow:0 0 8px #fff3;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.8),transparent);animation:_ngcontent-%COMP%_shimmerAccent 3s infinite}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#fff3!important;background:#fff3!important;border-color:#ffffff4d!important;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]{background-color:#ffffff26!important;background:#ffffff26!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important;outline:none!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#f003!important;background:#f003!important;border-color:#f006!important;color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#1da1f233!important;background:#1da1f233!important;border-color:#1da1f266!important;color:#1da1f2!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#1da1f2!important}@keyframes _ngcontent-%COMP%_shimmerAccent{0%{left:-100%}50%{left:-100%}to{left:100%}}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}50%{opacity:.6;transform:scale(1.3);box-shadow:0 0 16px #fffc}to{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.artist-card[_ngcontent-%COMP%]{padding:1.5rem;min-height:280px;border-radius:12px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.4rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1.05rem;margin-bottom:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .7rem;letter-spacing:.7px;margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{padding:.4rem .8rem;margin-top:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{gap:.4rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{padding:.5rem .8rem;min-width:85px;height:34px;font-size:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:100px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}}@media (max-width: 480px){.artist-card[_ngcontent-%COMP%]{padding:1.25rem;min-height:260px;border-radius:10px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:65px;height:65px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.3rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.7rem;padding:.3rem .6rem;letter-spacing:.6px;margin-bottom:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{flex-direction:column;gap:.3rem;align-items:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{width:100%;max-width:150px;justify-content:center;min-width:unset;padding:.5rem 1rem;height:36px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:unset;max-width:160px}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{height:2px}.artist-card[_ngcontent-%COMP%]{animation:fadeInUp .6s ease-out;animation-fill-mode:both}}'],data:{animation:[ht("cardHover",[ot("default",N({transform:"translateY(0) scale(1)"})),ot("hovered",N({transform:"translateY(-4px) scale(1.02)"})),st("default <=> hovered",at("200ms ease-out"))]),ht("playingIndicator",[ot("playing",N({opacity:1,transform:"scale(1)",background:"transparent"})),ot("not-playing",N({opacity:.3,transform:"scale(0.8)",background:"transparent"})),st("playing <=> not-playing",at("300ms ease-out"))])]},changeDetection:0});var Wt=It;var Mt=class Mt{constructor(t,e,n){this.artistCreditService=t;this.audioService=e;this.dynamicArtistService=n;this.destroy$=new V;this.currentlyPlayingArtistsSubject=new w([]);this.trackArtistCacheMap=new Map;this.maxCacheSize=50;this.cacheAccessOrder=[];this.isDebugMode=!1;this.currentlyPlayingArtists$=this.currentlyPlayingArtistsSubject.asObservable();this.currentlyPlayingArtistsWithContext$=kt([this.audioService.audioState$,this.currentlyPlayingArtists$]).pipe(O(([t,e])=>this.enhanceArtistsWithContext(t,e)),G((t,e)=>this.compareArtistArrays(t,e)),ct(50),mt(1),E(this.destroy$));this.initializeService()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearCache(),this.isDebugMode&&console.log("[CurrentlyPlayingArtistsService] Service destroyed, cache cleared")}initializeService(){this.populateTrackArtistCache(),this.dynamicArtistService.currentTrack$.pipe(G((t,e)=>t?.id===e?.id),ct(25),E(this.destroy$)).subscribe(t=>{this.updateCurrentlyPlayingArtistsFromDynamicService(t)}),this.audioService.audioState$.pipe(G((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),ct(25),se(t=>this.dynamicArtistService.currentTrack$.pipe(O(e=>({audioState:t,noDynamicTrack:e===null})),oe({audioState:t,noDynamicTrack:!0}))),E(this.destroy$)).subscribe(({audioState:t,noDynamicTrack:e})=>{e&&this.updateCurrentlyPlayingArtists(t)})}populateTrackArtistCache(){try{this.artistCreditService.tracksWithCredits$.subscribe(t=>{t.forEach(e=>{let n=this.sortArtistsByPriority(e.allContributions);if(this.trackArtistCacheMap.set(e.id,n),this.trackArtistCacheMap.set(e.trackNumber.toString(),n),e.audioFile){let o=this.extractAudioKey(e.audioFile);this.trackArtistCacheMap.set(o,n)}})})}catch(t){console.error("[CurrentlyPlayingArtistsService] Error populating cache:",t)}}updateCurrentlyPlayingArtistsFromDynamicService(t){if(!t){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.id);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e),console.log(`[CurrentlyPlayingArtistsService] Updated artists for track "${t.title}":`,e.map(n=>n.artistDisplayName));else{let n=this.getArtistsFromTrackData(t);this.currentlyPlayingArtistsSubject.next(n),console.log(`[CurrentlyPlayingArtistsService] Using direct track data for "${t.title}":`,n.map(o=>o.artistDisplayName))}}getArtistsFromTrackData(t){let e=[];return t.mainArtist&&e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features&&t.features.length>0&&t.features.forEach((n,o)=>{e.push({id:`${t.id}-featured-${o}`,artistName:n.name,artistDisplayName:n.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:{}})}),this.sortArtistsByPriority(e)}updateCurrentlyPlayingArtists(t){if(!t.isPlaying||!t.currentTrack){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.currentTrack);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e);else{let n=this.tryFallbackArtistLookup(t.currentTrack);this.currentlyPlayingArtistsSubject.next(n)}}getArtistsForTrack(t){let e=this.trackArtistCacheMap.get(t);if(e)return this.updateCacheAccess(t),e;let n=this.artistCreditService.getTrackCredits(t);if(n){let o=this.sortArtistsByPriority(n.allContributions);return this.setCacheWithLRU(t,o),o}return[]}tryFallbackArtistLookup(t){if(/^\d+$/.test(t)){let s=this.trackArtistCacheMap.get(t);if(s)return s}let e=t.match(/\b(\d+)\b/);if(e){let s=this.trackArtistCacheMap.get(e[1]);if(s)return s}let n=this.extractAudioKey(t),o=this.trackArtistCacheMap.get(n);return o||(console.warn(`[CurrentlyPlayingArtistsService] No artists found for track: ${t}`),[])}sortArtistsByPriority(t){return[...t].sort((e,n)=>{let o={"Main Artist":1e3,"Featured Artist":900,Vocalist:800,Producer:700,Composer:600,Arranger:500,Instrumentalist:400},s=o[e.role]||100,g=o[n.role]||100;return s!==g?g-s:e.percentageContribution!==n.percentageContribution?n.percentageContribution-e.percentageContribution:e.artistDisplayName.localeCompare(n.artistDisplayName)})}enhanceArtistsWithContext(t,e){if(!t.currentTrack)return[];let n=this.artistCreditService.getTrackCredits(t.currentTrack);return e.map(o=>j(S({},o),{isMainArtist:o.role==="Main Artist",isFeaturedArtist:o.role==="Featured Artist"||o.role==="Vocalist",playingContext:{trackId:t.currentTrack,trackTitle:n?.title||"Unknown Track",startTime:n?.startTime||0,currentTime:t.currentTime}}))}extractAudioKey(t){return t.replace(/\.[^/.]+$/,"").replace(/^.*[\\\/]/,"").toLowerCase()}getAllContributingArtists(){let t=new Map;return this.trackArtistCacheMap.forEach(e=>{e.forEach(n=>{t.has(n.artistName)||t.set(n.artistName,n)})}),Array.from(t.values()).sort((e,n)=>e.artistDisplayName.localeCompare(n.artistDisplayName))}getFeaturedArtistsForShowcase(t=8){let n=this.getAllContributingArtists().filter(o=>o.role==="Main Artist"||o.role==="Featured Artist"||o.role==="Vocalist"||o.percentageContribution>=15);return this.sortArtistsByPriority(n).slice(0,t)}setCurrentlyPlayingArtists(t){let e=this.sortArtistsByPriority(t);this.currentlyPlayingArtistsSubject.next(e)}clearCurrentlyPlayingArtists(){this.currentlyPlayingArtistsSubject.next([])}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].id!==e[n].id)return!1;return!0}updateCacheAccess(t){let e=this.cacheAccessOrder.indexOf(t);e>-1&&this.cacheAccessOrder.splice(e,1),this.cacheAccessOrder.push(t)}setCacheWithLRU(t,e){if(this.trackArtistCacheMap.size>=this.maxCacheSize){let n=this.cacheAccessOrder.shift();n&&(this.trackArtistCacheMap.delete(n),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Evicted cache entry: ${n}`))}this.trackArtistCacheMap.set(t,e),this.updateCacheAccess(t),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Cached artists for track: ${t}`)}clearCache(){this.trackArtistCacheMap.clear(),this.cacheAccessOrder=[]}getCacheStats(){return{size:this.trackArtistCacheMap.size,maxSize:this.maxCacheSize,hitRate:this.cacheAccessOrder.length>0?this.trackArtistCacheMap.size/this.cacheAccessOrder.length:0}}setDebugMode(t){this.isDebugMode=t}};Mt.\u0275fac=function(e){return new(e||Mt)($(ut),$(pt),$(it))},Mt.\u0275prov=z({token:Mt,factory:Mt.\u0275fac,providedIn:"root"});var Yt=Mt;function Ke(p,t){if(p&1&&A(0,"app-artist-card",11),p&2){let e=t.$implicit,n=x(3);v("cardData",e)("enableAnimations",n.enableAnimations)("@cardUpdate",void 0)}}function qe(p,t){if(p&1&&(h(0,"div",9),T(1,Ke,1,3,"app-artist-card",10),_()),p&2){let e=x(2);Z("single-card",e.artistCards().length===1),v("@cardsContainer",void 0)("@modeTransition",e.animationState()),y(),v("ngForOf",e.artistCards())("ngForTrackBy",e.trackByCardId)}}function Xe(p,t){p&1&&(h(0,"div",12)(1,"div",13)(2,"div",14),C(3,"\u266A"),_(),h(4,"h3"),C(5,"No Artists to Display"),_(),h(6,"p"),C(7,"Play a track to see contributing artists."),_()()())}function Qe(p,t){if(p&1&&(h(0,"div",15)(1,"div",16),C(2,"\u2139"),_(),h(3,"span",17),C(4),_()()),p&2){let e=x(2);y(4),tt(" Artist cards update in real-time as different tracks play. ",e.currentlyPlayingArtists().length," artists are currently featured. ")}}function Ze(p,t){if(p&1&&(h(0,"div",2)(1,"div",3)(2,"h2",4),C(3),_(),h(4,"p",5),C(5),_()(),T(6,qe,2,6,"div",6)(7,Xe,8,0,"div",7)(8,Qe,5,1,"div",8),_()),p&2){let e=x();y(3),F(e.displayTitle),y(2),F(e.displaySubtitle),y(),v("ngIf",e.artistCards().length>0),y(),v("ngIf",e.artistCards().length===0),y(),v("ngIf",e.currentTrack())}}function Je(p,t){p&1&&(h(0,"div",18)(1,"div",19),A(2,"div",20),h(3,"p"),C(4,"Loading artist cards..."),_()()())}var Et=class Et{constructor(t,e,n,o,s,g){this.artistCreditService=t;this.audioService=e;this.currentlyPlayingService=n;this.dynamicArtistService=o;this.musicStateManager=s;this.router=g;this.showAllArtists=!1;this.maxVisibleCards=8;this.enableAnimations=!0;this._displayMode="currently-playing";this.artistCards=R([]);this.currentlyPlayingArtists=R([]);this.showcaseArtists=R([]);this.isLoading=R(!0);this.currentTrack=R(null);this.totalArtistsCount=R(0);this.animationState=R("showcase");this.artistCardIds=new Map([["SpiralFlip","artist-card-spiralflip-001"],["eili","artist-card-eili-002"],["Ariatec","artist-card-ariatec-003"],["MB","artist-card-mbgov-004"],["Iku Hoshifuri","artist-card-iku-hoshifuri-005"],["Justin Thornburgh","artist-card-justin-thornburgh-006"],["v1ris","artist-card-v1ris-007"],["Rita Kamishiro","artist-card-rita-kamishiro-008"],["Marcus Ho","artist-card-marcus-ho-009"],["AZALI","artist-card-azali-010"],["Aloysius","artist-card-aloysius-011"],["potatoTeto","artist-card-potatoteto-012"],["Artisan","artist-card-artisan-013"],["Mei Naganowa","artist-card-mei-naganowa-014"],["Evin a'k","artist-card-evin-ak-015"],["BilliumMoto","artist-card-billiummoto-016"],["Elliot Hsu","artist-card-elliot-hsu-017"],["Yuzuki","artist-card-yuzuki-018"],["LucaProject","artist-card-lucaproject-019"],["Koway","artist-card-koway-020"],["\u4F0D\u4E00","artist-card-wuyi-021"],["Nstryder","artist-card-nstryder-022"],["MoAE","artist-card-moae-023"],["dystopian tanuki","artist-card-dystopian-tanuki-024"],["Heem","artist-card-heem-025"],["Woojinee","artist-card-woojinee-026"],["Bigg Milk","artist-card-bigg-milk-027"],["Gardens","artist-card-gardens-028"],["Sad Keyboard Guy","artist-card-sad-keyboard-guy-029"],["Futsuunohito","artist-card-futsuunohito-030"],["shishishiena","artist-card-shishishiena-031"]]);this.destroy$=new V;this.currentProject=R("phantasia2")}set displayMode(t){let e=this._displayMode;this._displayMode=t,e!==t&&!this.isLoading()&&this.handleDisplayModeChange(t)}get displayMode(){return this._displayMode}ngOnInit(){this.detectCurrentProject(),this.initializeArtistCards(),this.setupRealtimeUpdates()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}detectCurrentProject(){let t=this.router.url;t.includes("phantasia1")?this.currentProject.set("phantasia1"):t.includes("phantasia2")?this.currentProject.set("phantasia2"):this.currentProject.set("phantasia2")}getCurrentProjectArtists(){return this.currentProject()==="phantasia1"?this.artistCreditService.getAllPhantasia1Artists():this.artistCreditService.getAllPhantasia2Artists()}initializeArtistCards(){try{let t=this.getCurrentProjectArtists();this.totalArtistsCount.set(t.length);let e=this.createShowcaseSelection(t);this.showcaseArtists.set(e);let n=this.musicStateManager.getCurrentArtistFilteringState();this.updateCardsFromFilteringState(n),this.isLoading.set(!1)}catch(t){console.error("[DynamicArtistCards] Error initializing artist cards:",t),this.isLoading.set(!1)}}setupRealtimeUpdates(){this.musicStateManager.artistFilteringState$.pipe(E(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Artist filtering state changed:",`Mode: ${t.mode}, Current artists: ${t.currentArtists.length}, All artists: ${t.allArtists.length}`),this.updateCardsFromFilteringState(t)}),this.musicStateManager.displayInfo$.pipe(E(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Display info updated:",t)}),this.displayMode!=="currently-playing"&&this.setupLegacyFallbackUpdates()}updateCardsForCurrentTrack(t){let e=[];e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features.forEach((o,s)=>{e.push({id:`${t.id}-featured-${s}`,artistName:o.name,artistDisplayName:o.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:o.socialLinks})}),t.collaborators.forEach((o,s)=>{e.push({id:`${t.id}-collab-${s}`,artistName:o.name,artistDisplayName:o.name,role:o.role,participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:o.socialLinks})});let n=e.map(o=>this.createArtistCard(o,!0));this.currentlyPlayingArtists.set(n),this.artistCards.set(n.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Updated cards for track:",t.title,"Artists:",e.map(o=>o.artistDisplayName))}createArtistCard(t,e=!1){return{id:this.artistCardIds.get(t.artistName)||`artist-card-${this.generateSlug(t.artistName)}`,artist:t,isCurrentlyPlaying:e,participationLevel:this.determineParticipationLevel(t),displayPriority:this.calculateDisplayPriority(t,e)}}createAllArtistCards(t){return t.map(e=>this.createArtistCard(e,!1)).sort((e,n)=>n.displayPriority-e.displayPriority)}createShowcaseSelection(t){return t.filter(n=>{let o=n.role;return o==="Main Artist"||o==="Featured Artist"||o==="Vocalist"||n.percentageContribution>=15}).map(n=>this.createArtistCard(n,!1)).sort((n,o)=>o.displayPriority-n.displayPriority).slice(0,Math.max(this.maxVisibleCards,8))}determineParticipationLevel(t){return t.role==="Main Artist"?"main":t.role==="Featured Artist"||t.role==="Vocalist"?"featured":t.percentageContribution>=10?"collaboration":"additional"}calculateDisplayPriority(t,e){let n=0;switch(e&&(n+=1e3),t.role){case"Main Artist":n+=500;break;case"Featured Artist":n+=400;break;case"Vocalist":n+=350;break;case"Producer":n+=300;break;case"Composer":n+=250;break;default:n+=100;break}return n+=t.percentageContribution,n}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}getCardById(t){return this.artistCards().find(e=>e.id===t)}handleDisplayModeChange(t){if(console.log("[DynamicArtistCards] Display mode changed to:",t),t==="showcase"){this.animationState.set("showcase");let e=this.showcaseArtists();this.artistCards.set(e),console.log("[DynamicArtistCards] Switched to showcase mode - showing",e.length,"featured artists")}else if(t==="currently-playing"){this.animationState.set("currently-playing");let e=this.currentlyPlayingArtists();e.length>0?(this.artistCards.set(e.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Switched to currently-playing mode - showing",e.length,"artists")):(console.log("[DynamicArtistCards] No currently playing artists - falling back to showcase"),this.handleDisplayModeChange("showcase"))}else if(t==="all"){this.animationState.set("showcase");let e=this.getCurrentProjectArtists();this.artistCards.set(this.createAllArtistCards(e))}}updateCardsFromFilteringState(t){if(t.mode==="music-playing"&&t.currentArtists.length>0){let e=t.currentArtists.map(o=>this.createArtistCard(o,!0));this.currentlyPlayingArtists.set(e),this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.animationState.set("currently-playing");let n=this.musicStateManager.getCurrentMusicState();this.currentTrack.set(n.currentTrack?.id||null),console.log("[DynamicArtistCards] Updated to music-playing mode with",e.length,"artists")}else{let e=t.allArtists.map(n=>this.createArtistCard(n,!1));this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.showcaseArtists.set(e),this.currentlyPlayingArtists.set([]),this.animationState.set("showcase"),this.currentTrack.set(null),console.log("[DynamicArtistCards] Updated to no-music mode with",e.length,"artists")}}setupLegacyFallbackUpdates(){this.currentlyPlayingService.currentlyPlayingArtists$.pipe(E(this.destroy$)).subscribe(t=>{this.musicStateManager.getCurrentArtistFilteringState().mode==="no-music"&&t.length>0&&console.log("[DynamicArtistCards] Using legacy fallback for",t.length,"artists")})}trackByCardId(t,e){return e.id}get displayTitle(){return this.musicStateManager.getCurrentArtistFilteringState().displayTitle}get displaySubtitle(){return this.musicStateManager.getCurrentArtistFilteringState().displaySubtitle}};Et.\u0275fac=function(e){return new(e||Et)(L(ut),L(pt),L(Yt),L(it),L(Ot),L($t))},Et.\u0275cmp=X({type:Et,selectors:[["app-dynamic-artist-cards"]],inputs:{showAllArtists:"showAllArtists",maxVisibleCards:"maxVisibleCards",enableAnimations:"enableAnimations",displayMode:"displayMode"},decls:2,vars:2,consts:[["class","dynamic-artist-cards-container",4,"ngIf"],["class","cards-loading-container",4,"ngIf"],[1,"dynamic-artist-cards-container"],[1,"cards-header"],[1,"cards-title"],[1,"cards-subtitle"],["class","artist-cards-grid",3,"single-card",4,"ngIf"],["class","no-artists-state",4,"ngIf"],["class","artist-cards-info-panel",4,"ngIf"],[1,"artist-cards-grid"],["class","artist-card",3,"cardData","enableAnimations",4,"ngFor","ngForOf","ngForTrackBy"],[1,"artist-card",3,"cardData","enableAnimations"],[1,"no-artists-state"],[1,"no-artists-content"],[1,"no-artists-icon"],[1,"artist-cards-info-panel"],[1,"info-icon"],[1,"info-text"],[1,"cards-loading-container"],[1,"loading-content"],[1,"loading-spinner"]],template:function(e,n){e&1&&T(0,Ze,9,5,"div",0)(1,Je,5,0,"div",1),e&2&&(v("ngIf",!n.isLoading()),y(),v("ngIf",n.isLoading()))},dependencies:[et,jt,dt,Wt],styles:["[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.dynamic-artist-cards-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto;padding:var(--artist-card-spacing-xxl) var(--artist-card-spacing-lg);background:var(--artist-card-container-bg);border:1px solid var(--artist-card-border-secondary);border-radius:var(--artist-card-radius-large);backdrop-filter:var(--artist-card-glass-blur);-webkit-backdrop-filter:var(--artist-card-glass-blur);box-shadow:var(--artist-card-shadow-container)}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:0;backdrop-filter:none;-webkit-backdrop-filter:none;box-shadow:none;max-width:100%;padding:1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem;padding:1rem 0}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-title[_ngcontent-%COMP%]{font-size:clamp(1.6rem,3vw,2.8rem);font-weight:700;color:var(--text-primary);margin:0 0 .75rem;text-shadow:0 3px 8px rgba(0,0,0,.7);letter-spacing:-.02em;line-height:1.1}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);max-width:640px;margin:0 auto;line-height:1.6;font-weight:400;text-shadow:0 2px 4px rgba(0,0,0,.5)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin:0 1rem 2rem;justify-content:start;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box;container-type:inline-size}@media (min-width: 1024px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.2rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (min-width: 1200px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:320px}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:320px}@media (min-width: 769px) and (max-width: 1199px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}}@media (min-width: 1200px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);justify-content:start;box-sizing:border-box}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}}@media (min-width: 1440px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 800px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 1000px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]{background:var(--card-bg-primary);border-radius:16px;padding:2.5rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);border:1px solid rgba(255,255,255,.12);box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#fff3;transform:translateY(-2px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   .no-artists-icon[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--text-secondary);margin-bottom:1.5rem;display:block;opacity:.8}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .75rem;font-size:1.4rem;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.6)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0;font-size:1rem;line-height:1.5}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;background:var(--card-bg-primary);border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:1.25rem 1.75rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);margin-top:2rem;box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#ffffff40;transform:translateY(-1px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.4rem;flex-shrink:0;opacity:.9}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.95rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{padding:.875rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:.8rem}}.cards-loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:240px;padding:3rem;background:var(--container-bg);border-radius:12px}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary)}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:3px solid rgba(255,255,255,.15);border-top:3px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem;box-shadow:0 0 12px #ffffff1a}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:var(--text-primary);text-shadow:0 2px 4px rgba(0,0,0,.5)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.artist-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.artist-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.02);box-shadow:var(--shadow-elevated)}.artist-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.artist-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.artist-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.artist-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.artist-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.artist-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.artist-card[_ngcontent-%COMP%]:nth-child(7){animation-delay:.7s}.artist-card[_ngcontent-%COMP%]:nth-child(8){animation-delay:.8s}"],data:{animation:[ht("cardsContainer",[st(":enter",[me(".artist-card",[N({opacity:0,transform:"translateY(20px)"}),fe(100,[at("300ms ease-out",N({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]),ht("cardUpdate",[ot("in",N({opacity:1,transform:"scale(1)"})),st("void => *",[N({opacity:0,transform:"scale(0.9)"}),at("250ms ease-out")]),st("* => void",[at("200ms ease-in",N({opacity:0,transform:"scale(0.9)"}))])]),ht("modeTransition",[ot("showcase",N({opacity:1,transform:"translateY(0)"})),ot("currently-playing",N({opacity:1,transform:"translateY(0)"})),st("showcase => currently-playing",[at("400ms cubic-bezier(0.4, 0.0, 0.2, 1)",N({opacity:1,transform:"translateY(0)"}))]),st("currently-playing => showcase",[at("600ms cubic-bezier(0.4, 0.0, 0.2, 1)",N({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0});var Ce=Et;var Pt=class Pt{constructor(t){this.http=t;this.phantasia2Artists$=new w([]);this.phantasia2Album$=new w(null);this.prismaticCollection$=new w(null);this.twitterUsers$=new w([]);this.twitterTweets$=new w([]);this.twitterApiUsage$=new w([]);this.artistAvatarMap={SpiralFlip:{avatarPath:"/assets/images/artists/SpiralFlip.png",displayName:"SpiralFlip",color:"#FF6B6B",genre:"Organiser"},eili:{avatarPath:"/assets/images/artists/Eili.png",displayName:"eili",color:"#ffffff",genre:"Vocal, Electronic"},Ariatec:{avatarPath:"/assets/images/artists/Ariatec.png",displayName:"Ariatec",color:"#45B7D1",genre:"Ambient, Cinematic"},MB:{avatarPath:"/assets/images/artists/MBgov.png",displayName:"MBgov",color:"#96CEB4",genre:"Orchestral, Classical"},"Iku Hoshifuri":{avatarPath:"/assets/images/artists/Iku Hoshifuri.png",displayName:"Iku Hoshifuri",color:"#FFEAA7",genre:"Vocal, J-Pop"},"Justin Thornburgh":{avatarPath:"/assets/images/artists/Justin Thornburgh.png",displayName:"Justin Thornburgh",color:"#DDA0DD",genre:"Folk, Accordion"},v1ris:{avatarPath:"/assets/images/artists/v1ris.png",displayName:"v1ris",color:"#F8B500",genre:"Classical, Violin"},"Rita Kamishiro":{avatarPath:"/assets/images/artists/Rita Kamishiro.png",displayName:"Rita Kamishiro",color:"#E17055",genre:"Classical, Viola"},"Marcus Ho":{avatarPath:"/assets/images/artists/Marcus Ho.png",displayName:"Marcus Ho",color:"#6C5CE7",genre:"Classical, Cello"},AZALI:{avatarPath:"/assets/images/artists/AZALI.png",displayName:"AZALI",color:"#A29BFE",genre:"Electronic, Experimental"},Aloysius:{avatarPath:"/assets/images/artists/Aloysius.png",displayName:"Aloysius",color:"#FD79A8",genre:"Electronic, Ambient"},potatoTeto:{avatarPath:"/assets/images/artists/potatoTeto.png",displayName:"potatoTeto",color:"#00B894",genre:"Ambient, Experimental"},Artisan:{avatarPath:"/assets/images/artists/Artisan.png",displayName:"Artisan",color:"#E84393",genre:"Electronic, Melodic"},"Mei Naganowa":{avatarPath:"/assets/images/artists/Mei Naganowa.png",displayName:"Mei Naganowa",color:"#00CEC9",genre:"Electronic, Synthesizer V"},"Evin a'k":{avatarPath:"/assets/images/artists/Evin a'k.png",displayName:"Evin a'k",color:"#FDCB6E",genre:"Electronic, Bass"},BilliumMoto:{avatarPath:"/assets/images/artists/BilliumMoto.png",displayName:"BilliumMoto",color:"#74B9FF",genre:"Lofi, Chill"},"Elliot Hsu":{avatarPath:"/assets/images/artists/Elliot Hsu.png",displayName:"Elliot Hsu",color:"#55A3FF",genre:"Electronic, Ambient"},Yuzuki:{avatarPath:"/assets/images/artists/Yuzuki.png",displayName:"Yuzuki",color:"#FF7675",genre:"Electronic, Synthesizer V"},LucaProject:{avatarPath:"/assets/images/artists/LucaProject.png",displayName:"LucaProject",color:"#6C5CE7",genre:"Electronic, Melodic"},Koway:{avatarPath:"/assets/images/artists/Koway.png",displayName:"Koway",color:"#A29BFE",genre:"Electronic, Experimental"},\u4F0D\u4E00:{avatarPath:"/assets/images/artists/\u4F0D\u4E00.png",displayName:"\u4F0D\u4E00",color:"#FFEAA7",genre:"Vocal, Electronic"},Nstryder:{avatarPath:"/assets/images/artists/Nstryder.png",displayName:"Nstryder",color:"#E17055",genre:"Electronic, Hardcore"},MoAE:{avatarPath:"/assets/images/artists/MoAE:..png",displayName:"MoAE:.",color:"#00B894",genre:"Electronic, Ambient"},"dystopian tanuki":{avatarPath:"/assets/images/artists/dystopian tanuki.png",displayName:"dystopian tanuki",color:"#636E72",genre:"Experimental, Ambient"},Heem:{avatarPath:"/assets/images/artists/Heem.png",displayName:"Heem",color:"#FD79A8",genre:"Electronic, Melodic"},Woojinee:{avatarPath:"/assets/images/artists/Woojinee.png",displayName:"Woojinee",color:"#E84393",genre:"Violinist"},"Bigg Milk":{avatarPath:"/assets/images/artists/Bigg Milk.png",displayName:"Bigg Milk",color:"#00CEC9",genre:"Electronic, Chill"},Gardens:{avatarPath:"/assets/images/artists/Gardens.png",displayName:"Gardens",color:"#00B894",genre:"Electronic, Ambient"},"Sad Keyboard Guy":{avatarPath:"/assets/images/artists/Sad Keyboard Guy.png",displayName:"Sad Keyboard Guy",color:"#74B9FF",genre:"Lofi, Emotional"},Futsuunohito:{avatarPath:"/assets/images/artists/Futsuunohito.png",displayName:"Futsuunohito",color:"#A29BFE",genre:"Electronic, Cinematic"},shishishiena:{avatarPath:"/assets/images/artists/shishishiena.png",displayName:"shishishiena",color:"#FFEAA7",genre:"Voice Acting, Vocal"},PliXoR:{avatarPath:"/assets/images/artists/PliXoR.png",displayName:"PliXoR",color:"#ff6b6b",genre:"Mastering Engineer"},NapaL:{avatarPath:"/assets/images/artists/NapaL.png",displayName:"\uB098\uD314 NapaL",color:"#4ecdc4",genre:"Cover Illustration"},yy_artwork:{avatarPath:"/assets/images/artists/yy_artwork.png",displayName:"yy_artwork",color:"#45b7d1",genre:"Logo/Jacket Design"},"Elegant Sister":{avatarPath:"/assets/images/artists/Elegant Sister.png",displayName:"Elegant Sister",color:"#f7b733",genre:"Album Stream MV"},Len:{avatarPath:"/assets/images/artists/Len Licht.png",displayName:"Len",color:"#5f27cd",genre:"Crossfade MV/Live2D"},Daph:{avatarPath:"/assets/images/artists/Daph Shoo.png",displayName:"Daph",color:"#00d2d3",genre:"Live2D"},ro\u0259r:{avatarPath:"/assets/images/artists/default-avatar.svg",displayName:"ro\u0259r",color:"#F39C12",genre:"PRODUCTION TEAM"},Len_licht:{avatarPath:"/assets/images/artists/Len Licht.png",displayName:"Len_licht",color:"#5f27cd",genre:"CO-ORGANISER/VIDEO EDITOR"},Prower:{avatarPath:"/assets/images/artists/Prower.png",displayName:"Prower",color:"#9b59b6",genre:"Electronic Producer"},Seycara:{avatarPath:"/assets/images/artists/Seycara.png",displayName:"Seycara",color:"#e74c3c",genre:"Electronic Producer"},Qyubey:{avatarPath:"/assets/images/artists/Qyubey.png",displayName:"Qyubey",color:"#f39c12",genre:"Electronic Producer"},Luscinia:{avatarPath:"/assets/images/artists/Luscinia.png",displayName:"Luscinia",color:"#2ecc71",genre:"Electronic Producer"},\u306F\u304C\u306D:{avatarPath:"/assets/images/artists/Hagane.png",displayName:"\u306F\u304C\u306D",color:"#34495e",genre:"Electronic Producer"},satella:{avatarPath:"/assets/images/artists/satella.png",displayName:"satella",color:"#8e44ad",genre:"Electronic Producer"},sleepy:{avatarPath:"/assets/images/artists/Sleepless.png",displayName:"sleepy",color:"#B0E0E6",genre:"Electronic Producer"},tikaal:{avatarPath:"/assets/images/artists/tikaal.png",displayName:"tikaal",color:"#FF9F40",genre:"Bass Guitarist"},"Miyamai Moca":{avatarPath:"/assets/images/artists/Miyamai-Moca.png",displayName:"Miyamai Moca",color:"#FFB347",genre:"Synthesizer V Operator"}};this.initializeGelDbData(),this.loadTwitterDataFromLocalStorage()}getPhantasia2Artists(){return this.phantasia2Artists$.asObservable()}getPhantasia2Album(){return this.phantasia2Album$.asObservable()}getPrismaticCollection(){return this.prismaticCollection$.asObservable()}getArtistAvatar(t){return this.artistAvatarMap[t]?.avatarPath||"/assets/images/artists/default-avatar.svg"}getArtistDisplayName(t){return this.artistAvatarMap[t]?.displayName||t}getArtistColor(t){return this.artistAvatarMap[t]?.color||"#74B9FF"}getArtistAvatarMap(){return this.artistAvatarMap}getArtistSocialLinks(t){let n={SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},Heem:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},Prower:{twitter:"https://x.com/prowerrr_"},Seycara:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},Qyubey:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},Luscinia:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},\u306F\u304C\u306D:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},Hagane:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",twitter:"https://x.com/LucaProject6108",carrd:"https://lucaproject.carrd.co/"},satella:{twitter:"https://x.com/satella0w0",youtube:"https://www.youtube.com/@satella0w0"},sleepy:{twitter:"https://x.com/sleeplessgamign"},PliXoR:{twitter:"https://x.com/plixormusic"},NapaL:{twitter:"https://x.com/Ve_Xillum"},yy_artwork:{twitter:"https://x.com/yy_artwork"},"Elegant Sister":{twitter:"https://x.com/ElegantSister"},Len:{twitter:"https://x.com/Len_licht"},Daph:{twitter:"https://x.com/daphshoo"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee/?igsh=czUwcXg3aWh6NmM5&utm_source=qr#"},tikaal:{twitter:"https://x.com/tikaal"},"Miyamai Moca":{twitter:"https://x.com/ReeKDoesDTM"}}[t];return n?S({id:`social-${t.toLowerCase().replace(/\s+/g,"-")}`},n):null}searchArtists(t){return this.phantasia2Artists$.pipe(O(e=>e.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())||n.display_name?.toLowerCase().includes(t.toLowerCase())||n.genre?.toLowerCase().includes(t.toLowerCase()))))}getFeaturedArtists(){return this.prismaticCollection$.pipe(O(t=>t?.featured_artists||[]))}initializeGelDbData(){try{let t=Object.entries(this.artistAvatarMap).map(([o,s],g)=>({id:`artist-${g+1}`,name:o,display_name:s.displayName,avatar:s.avatarPath,color:s.color,genre:s.genre,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));this.phantasia2Artists$.next(t);let e={id:"phantasia-2",title:"Phantasia 2",artist:t.find(o=>o.name==="SpiralFlip"),release_date:"2025-01-01",genre:"Electronic Compilation",description:"The second installment of the Phantasia compilation series",cover_art_url:"/assets/images/covers/phantasia2-cover.jpg",track_count:20,duration_seconds:4567,songs:[]};this.phantasia2Album$.next(e);let n={id:"prismatic-collections",name:"Prismatic Collections",description:"A multi-faceted music collection celebrating diverse electronic artists",color_scheme:"prismatic",theme:"electronic-fusion",is_featured:!0,collections:[],featured_artists:t.slice(0,10)};this.prismaticCollection$.next(n)}catch(t){console.error("Failed to initialize geldb data:",t)}}refreshData(){return this.initializeGelDbData(),ae(!0)}getTwitterUsers(){return this.twitterUsers$.asObservable()}getTwitterTweets(){return this.twitterTweets$.asObservable()}getTwitterApiUsage(){return this.twitterApiUsage$.asObservable()}cacheTwitterUser(t){let e=this.twitterUsers$.value,n=e.findIndex(g=>g.twitter_id===t.twitter_id),o=new Date().toISOString(),s={id:t.id||`twitter_user_${t.twitter_id}`,twitter_id:t.twitter_id,username:t.username,display_name:t.display_name,profile_image_url:t.profile_image_url,verified:t.verified,followers_count:t.followers_count,following_count:t.following_count,tweet_count:t.tweet_count,cached_at:o,updated_at:o};n>=0?e[n]=s:e.push(s),this.twitterUsers$.next([...e]),this.saveTwitterDataToLocalStorage(),console.log(`\u{1F4CB} Cached Twitter user: @${s.username}`)}cacheTwitterTweets(t){let e=this.twitterTweets$.value,n=new Date().toISOString();t.forEach(o=>{let s=e.findIndex(i=>i.tweet_id===o.tweet_id),g=(o.text.match(/#\w+/g)||[]).map(i=>i.substring(1)),f=(o.text.match(/@\w+/g)||[]).map(i=>i.substring(1)),m=o.text.match(/https?:\/\/[^\s]+/g)||[],P={id:o.id||`twitter_tweet_${o.tweet_id}`,tweet_id:o.tweet_id,user_id:o.user_id,text:o.text,created_at:o.created_at,retweet_count:o.retweet_count,like_count:o.like_count,reply_count:o.reply_count,quote_count:o.quote_count,hashtags:g,mentions:f,urls:m,cached_at:n,updated_at:n};s>=0?e[s]=P:e.push(P)}),e.sort((o,s)=>new Date(s.created_at).getTime()-new Date(o.created_at).getTime()),this.twitterTweets$.next([...e]),this.saveTwitterDataToLocalStorage(),console.log(`\u{1F4CB} Cached ${t.length} Twitter tweets`)}logTwitterApiUsage(t){let e=this.twitterApiUsage$.value,n=new Date().toISOString(),o=new Date().getMonth(),s=new Date().getFullYear(),g=e.filter(m=>{let P=new Date(m.timestamp);return P.getMonth()===o&&P.getFullYear()===s}).length+1,f={id:t.id||`api_call_${Date.now()}_${Math.random().toString(36).substring(2,8)}`,endpoint:t.endpoint,method:t.method,timestamp:n,success:t.success,rate_limit_remaining:t.rate_limit_remaining,error_message:t.error_message,monthly_calls_used:g};e.push(f),e.length>1e3&&e.splice(0,e.length-1e3),this.twitterApiUsage$.next([...e]),this.saveTwitterDataToLocalStorage(),console.log(`\u{1F4CA} Logged Twitter API call: ${f.method} ${f.endpoint} (${f.success?"Success":"Failed"})`)}getCachedTwitterUser(t){return this.twitterUsers$.pipe(O(e=>e.find(n=>n.username.toLowerCase()===t.toLowerCase())||null))}getCachedTwitterTweetsForUser(t){return this.twitterTweets$.pipe(O(e=>e.filter(n=>n.user_id===t)))}getMonthlyApiUsageStats(){return this.twitterApiUsage$.pipe(O(t=>{let e=new Date().getMonth(),n=new Date().getFullYear(),o=t.filter(r=>{let a=new Date(r.timestamp);return a.getMonth()===e&&a.getFullYear()===n}),s=o.length,g=o.filter(r=>r.success).length,f=s-g,m=s>0?g/s*100:0,P=Math.max(0,100-s),i=o.length>0?o[o.length-1].timestamp:null;return{totalCalls:s,successfulCalls:g,failedCalls:f,successRate:m,remainingCalls:P,lastCallTimestamp:i}}))}isTwitterDataFresh(t,e=24){return this.getCachedTwitterUser(t).pipe(O(n=>{if(!n)return!1;let o=Date.now()-new Date(n.cached_at).getTime(),s=e*60*60*1e3;return o<s}))}clearTwitterCache(){this.twitterUsers$.next([]),this.twitterTweets$.next([]),this.twitterApiUsage$.next([]),localStorage.removeItem("geldb_twitter_cache"),console.log("\u{1F5D1}\uFE0F Twitter cache cleared")}saveTwitterDataToLocalStorage(){try{let t={users:this.twitterUsers$.value,tweets:this.twitterTweets$.value,usage:this.twitterApiUsage$.value,timestamp:Date.now()};localStorage.setItem("geldb_twitter_cache",JSON.stringify(t))}catch(t){console.warn("Failed to save Twitter data to localStorage:",t)}}loadTwitterDataFromLocalStorage(){try{let t=localStorage.getItem("geldb_twitter_cache");if(!t)return;let e=JSON.parse(t);if(Date.now()-e.timestamp>10080*60*1e3){localStorage.removeItem("geldb_twitter_cache");return}this.twitterUsers$.next(e.users||[]),this.twitterTweets$.next(e.tweets||[]),this.twitterApiUsage$.next(e.usage||[]),console.log(`\u{1F4CB} Loaded Twitter cache: ${e.users?.length||0} users, ${e.tweets?.length||0} tweets, ${e.usage?.length||0} API calls`)}catch(t){console.warn("Failed to load Twitter data from localStorage:",t),localStorage.removeItem("geldb_twitter_cache")}}};Pt.\u0275fac=function(e){return new(e||Pt)($(wt))},Pt.\u0275prov=z({token:Pt,factory:Pt.\u0275fac,providedIn:"root"});var Kt=Pt;var ei=["*"],Me=(p,t)=>t.id;function ii(p,t){if(p&1&&A(0,"img",20),p&2){let e=x().$implicit;v("src",e.avatar,lt)("alt",e.name+" avatar")}}function ni(p,t){if(p&1&&(h(0,"div",21),C(1),_()),p&2){let e=x().$implicit;H("background",e.color),y(),tt(" ",e.initials," ")}}function ri(p,t){p&1&&(h(0,"span",26),C(1,"\u{1D54F}"),_())}function ai(p,t){p&1&&(h(0,"span",27),C(1,"\u{1F4F7}"),_())}function oi(p,t){if(p&1){let e=Q();h(0,"div",22)(1,"button",23),D("click",function(o){K(e);let s=x().$implicit,g=x();return q(s.socialLinks.twitter?g.onSocialLinkClick(s.socialLinks.twitter,o):g.onSocialLinkClick(s.socialLinks.instagram,o))}),T(2,ri,2,0,"span",24)(3,ai,2,0,"span",25),_()()}if(p&2){let e=x().$implicit;y(),J("aria-label",e.name+" social link"),y(),v("ngIf",e.socialLinks.twitter),y(),v("ngIf",e.socialLinks.instagram&&!e.socialLinks.twitter)}}function si(p,t){if(p&1){let e=Q();h(0,"div",11),D("click",function(){let o=K(e).$implicit,s=x();return q(s.onCardClick(o))}),h(1,"div",12),T(2,ii,1,2,"img",13)(3,ni,2,3,"div",14),_(),h(4,"div",15)(5,"div",16),C(6),_(),h(7,"div",17),C(8),_()(),T(9,oi,4,3,"div",18),A(10,"div",19),_()}if(p&2){let e=t.$implicit;H("--accent-color",e.color),y(2),v("ngIf",e.avatar),y(),v("ngIf",!e.avatar),y(3),F(e.name),y(2),F(e.role),y(),v("ngIf",e.socialLinks.twitter||e.socialLinks.instagram)}}function ci(p,t){if(p&1&&A(0,"img",20),p&2){let e=x().$implicit;v("src",e.avatar,lt)("alt",e.name+" avatar")}}function li(p,t){if(p&1&&(h(0,"div",21),C(1),_()),p&2){let e=x().$implicit;H("background",e.color),y(),tt(" ",e.initials," ")}}function di(p,t){p&1&&(h(0,"span",26),C(1,"\u{1D54F}"),_())}function ui(p,t){p&1&&(h(0,"span",27),C(1,"\u{1F4F7}"),_())}function pi(p,t){if(p&1){let e=Q();h(0,"div",22)(1,"button",23),D("click",function(o){K(e);let s=x().$implicit,g=x();return q(s.socialLinks.twitter?g.onSocialLinkClick(s.socialLinks.twitter,o):g.onSocialLinkClick(s.socialLinks.instagram,o))}),T(2,di,2,0,"span",24)(3,ui,2,0,"span",25),_()()}if(p&2){let e=x().$implicit;y(),J("aria-label",e.name+" social link"),y(),v("ngIf",e.socialLinks.twitter),y(),v("ngIf",e.socialLinks.instagram&&!e.socialLinks.twitter)}}function gi(p,t){if(p&1){let e=Q();h(0,"div",11),D("click",function(){let o=K(e).$implicit,s=x();return q(s.onCardClick(o))}),h(1,"div",12),T(2,ci,1,2,"img",13)(3,li,2,3,"div",14),_(),h(4,"div",15)(5,"div",16),C(6),_(),h(7,"div",17),C(8),_()(),T(9,pi,4,3,"div",18),A(10,"div",19),_()}if(p&2){let e=t.$implicit;H("--accent-color",e.color),y(2),v("ngIf",e.avatar),y(),v("ngIf",!e.avatar),y(3),F(e.name),y(2),F(e.role),y(),v("ngIf",e.socialLinks.twitter||e.socialLinks.instagram)}}var Lt=class Lt{constructor(t,e){this.gelDbService=t;this.router=e;this.specialMentions=R([]);this.displayedMentions=rt(()=>this.specialMentions().map(t=>j(S({},t),{initials:this.getInitials(t.name)})));this.leftSideCards=rt(()=>{let t=this.displayedMentions(),e=Math.ceil(t.length/2);return t.slice(0,e)});this.rightSideCards=rt(()=>{let t=this.displayedMentions(),e=Math.ceil(t.length/2);return t.slice(e)})}ngOnInit(){this.loadSpecialMentionsFromDatabase()}loadSpecialMentionsFromDatabase(){let t=this.router.url,g=(t.includes("phantasia2")||t.includes("/disc-2")?["SpiralFlip","Len_licht","NapaL","yy_artwork","ro\u0259r","PliXoR"]:["SpiralFlip","PliXoR","NapaL","yy_artwork","Elegant Sister","Len","Daph"]).map(f=>{let m=this.gelDbService.getArtistAvatar(f),P=this.gelDbService.getArtistDisplayName(f),i=this.gelDbService.getArtistColor(f),r=this.gelDbService.getArtistSocialLinks(f),c=this.gelDbService.getArtistAvatarMap()[f]?.genre||"Production Team";return{id:f.toLowerCase().replace(/\s+/g,"-"),name:P,role:c,avatar:m,color:i,socialLinks:{twitter:r?.twitter,youtube:r?.youtube,instagram:r?.instagram,website:r?.website}}});this.specialMentions.set(g)}getInitials(t){let e=t.split(" ").filter(n=>n.length>0);return e.length===0?"?":e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}onCardClick(t){t.socialLinks.twitter?window.open(t.socialLinks.twitter,"_blank","noopener,noreferrer"):t.socialLinks.instagram?window.open(t.socialLinks.instagram,"_blank","noopener,noreferrer"):t.socialLinks.youtube?window.open(t.socialLinks.youtube,"_blank","noopener,noreferrer"):t.socialLinks.website&&window.open(t.socialLinks.website,"_blank","noopener,noreferrer")}onSocialLinkClick(t,e){e.stopPropagation(),window.open(t,"_blank","noopener,noreferrer")}};Lt.\u0275fac=function(e){return new(e||Lt)(L(Kt),L($t))},Lt.\u0275cmp=X({type:Lt,selectors:[["app-special-mentions"]],ngContentSelectors:ei,decls:18,vars:0,consts:[[1,"special-mentions-container"],[1,"section-header"],[1,"section-title"],[1,"section-subtitle"],[1,"three-column-layout"],[1,"cards-column","left-column"],[1,"column-cards"],[1,"compact-card","vertical-card",3,"--accent-color"],[1,"main-content-column"],[1,"content-placeholder"],[1,"cards-column","right-column"],[1,"compact-card","vertical-card",3,"click"],[1,"compact-avatar"],["class","avatar-image","loading","lazy",3,"src","alt",4,"ngIf"],["class","avatar-initials",3,"background",4,"ngIf"],[1,"compact-info"],[1,"artist-name"],[1,"artist-role"],["class","compact-social",4,"ngIf"],[1,"card-accent"],["loading","lazy",1,"avatar-image",3,"src","alt"],[1,"avatar-initials"],[1,"compact-social"],["mat-icon-button","",1,"social-btn",3,"click"],["class","twitter-x-icon",4,"ngIf"],["class","instagram-icon",4,"ngIf"],[1,"twitter-x-icon"],[1,"instagram-icon"]],template:function(e,n){e&1&&(Qt(),h(0,"div",0)(1,"div",1)(2,"h3",2),C(3,"Special Thanks"),_(),h(4,"p",3),C(5,"Production Team"),_()(),h(6,"div",4)(7,"div",5)(8,"div",6),qt(9,si,11,7,"div",7,Me),_()(),h(11,"div",8)(12,"div",9),Zt(13),_()(),h(14,"div",10)(15,"div",6),qt(16,gi,11,7,"div",7,Me),_()()()()),e&2&&(y(9),Xt(n.leftSideCards()),y(7),Xt(n.rightSideCards()))},dependencies:[et,dt,At,Vt,Nt],styles:['.special-mentions-container[_ngcontent-%COMP%]{width:100%;padding:1rem 0;min-height:100vh}.section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;position:relative;z-index:10}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fffffff2;margin:0 0 .5rem;text-shadow:0 2px 8px rgba(0,0,0,.4);letter-spacing:.5px}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#ffffffbf;margin:0;text-transform:uppercase;letter-spacing:1px;font-weight:500}.three-column-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr 250px;gap:2rem;max-width:1400px;margin:0 auto;padding:0 2rem;min-height:80vh;align-items:start;overflow-x:hidden;grid-template-rows:auto;width:100%;max-width:100%;box-sizing:border-box}@media (min-width: 1200px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:280px 1fr 280px;gap:3rem;max-width:1600px}}@media (min-width: 1600px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:320px 1fr 320px;gap:4rem;max-width:1800px}}.cards-column[_ngcontent-%COMP%]{position:sticky;top:2rem;height:fit-content;max-height:calc(100vh - 4rem);overflow:visible}.cards-column.left-column[_ngcontent-%COMP%]{justify-self:end}.cards-column.right-column[_ngcontent-%COMP%]{justify-self:start}.column-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;overflow:visible;width:100%}.main-content-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;min-height:60vh;padding:2rem 1rem;width:100%;box-sizing:border-box}.main-content-column[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.content-placeholder[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;min-height:400px;background:#1e1e284d;border:2px dashed rgba(255,255,255,.2);border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);max-width:100%;overflow:visible;box-sizing:border-box;container-type:inline-size}.content-placeholder[_ngcontent-%COMP%]:empty:before{content:"Main Content Area";color:#ffffff80;font-size:1.2rem;font-weight:500;text-align:center;margin:auto}.content-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;max-width:100%;flex:1;box-sizing:border-box}.content-placeholder[_ngcontent-%COMP%] > *.dynamic-artist-cards-container[_ngcontent-%COMP%]{width:100%;max-width:none}.content-placeholder[_ngcontent-%COMP%] > *.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{width:100%;max-width:none}.compact-card[_ngcontent-%COMP%]{--accent-color: #ffffff;position:relative;background:#0f0f19f2;border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:1rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);overflow:hidden;width:100%}.compact-card.vertical-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;min-height:80px;max-width:100%;box-sizing:border-box}.compact-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);background:#191928fa;border-color:var(--accent-color);box-shadow:0 12px 35px #0006,0 0 25px rgba(var(--accent-color-rgb, 255, 255, 255),.15),inset 0 1px #ffffff1a}.compact-card[_ngcontent-%COMP%]:hover   .card-accent[_ngcontent-%COMP%]{opacity:1}.compact-card[_ngcontent-%COMP%]:hover   .compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{transform:scale(1.05)}.compact-card[_ngcontent-%COMP%]:hover   .artist-name[_ngcontent-%COMP%]{color:var(--accent-color);text-shadow:0 0 8px rgba(var(--accent-color-rgb, 255, 255, 255),.3)}.compact-card[_ngcontent-%COMP%]:hover   .social-btn[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1) translateY(-1px)}.compact-card[_ngcontent-%COMP%]:active{transform:translateY(-2px) scale(.98)}.compact-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:44px;height:44px;border-radius:50%;overflow:hidden;background:#ffffff1a;position:relative;border:2px solid rgba(255,255,255,.2);transition:all .3s ease}.compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s cubic-bezier(.4,0,.2,1)}.compact-avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:700;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.6);letter-spacing:.5px}.compact-info[_ngcontent-%COMP%]{flex:1;min-width:0;padding:0 .25rem}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#fffffff5;margin:0 0 .15rem;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.2}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.75rem;color:#ffffffa6;margin:0;text-transform:uppercase;letter-spacing:.5px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.1}.compact-social[_ngcontent-%COMP%]{flex-shrink:0}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;background:#ffffff14;border:1px solid rgba(255,255,255,.25);opacity:.8;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover{background:var(--accent-color);border-color:var(--accent-color);opacity:1;box-shadow:0 4px 12px rgba(var(--accent-color-rgb, 255, 255, 255),.3)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover   .twitter-x-icon[_ngcontent-%COMP%], .compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover   .instagram-icon[_ngcontent-%COMP%]{color:#000;transform:scale(1.1)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#ffffffe6;transition:all .3s ease}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .instagram-icon[_ngcontent-%COMP%]{font-size:.9rem;color:#ffffffe6;transition:all .3s ease}.card-accent[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent-color),transparent);opacity:0;transition:opacity .3s ease;border-radius:0 0 16px 16px}@media (max-width: 1199px){.three-column-layout[_ngcontent-%COMP%]{gap:1.5rem;padding:0 1.5rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.6rem}}@media (max-width: 991px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:200px 1fr 200px;gap:1rem;padding:0 1rem}.compact-card.vertical-card[_ngcontent-%COMP%]{padding:.8rem;gap:.6rem;min-height:70px}.compact-avatar[_ngcontent-%COMP%]{width:38px;height:38px}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.85rem}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 768px){.special-mentions-container[_ngcontent-%COMP%]{padding:.5rem 0}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.4rem}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:.9rem}.three-column-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:0 1rem;min-height:auto}.cards-column[_ngcontent-%COMP%]{position:static;max-height:none;width:100%}.cards-column.left-column[_ngcontent-%COMP%], .cards-column.right-column[_ngcontent-%COMP%]{justify-self:auto}.column-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:.75rem;padding:0}.main-content-column[_ngcontent-%COMP%]{order:-1;min-height:300px;padding:1rem 0}.content-placeholder[_ngcontent-%COMP%]{min-height:250px;border-radius:12px}.content-placeholder[_ngcontent-%COMP%]:empty:before{font-size:1rem}}@media (max-width: 480px){.special-mentions-container[_ngcontent-%COMP%]{padding:.25rem 0}.section-header[_ngcontent-%COMP%]{margin-bottom:1rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.2rem}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.three-column-layout[_ngcontent-%COMP%]{padding:0 .5rem;gap:1rem}.column-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.6rem}.compact-card.vertical-card[_ngcontent-%COMP%]{padding:.7rem;gap:.5rem;min-height:60px;border-radius:12px}.compact-avatar[_ngcontent-%COMP%]{width:34px;height:34px}.compact-avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{font-size:.8rem}.compact-info[_ngcontent-%COMP%]{padding:0 .15rem}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.8rem}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.65rem}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:6px}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.75rem}.main-content-column[_ngcontent-%COMP%]{padding:.5rem 0}.content-placeholder[_ngcontent-%COMP%]{min-height:200px;padding:1rem .5rem}}.cards-column[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3) transparent}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:2px}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}@media (prefers-reduced-motion: reduce){.compact-card[_ngcontent-%COMP%], .compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%], .social-btn[_ngcontent-%COMP%], .card-accent[_ngcontent-%COMP%], .cards-column[_ngcontent-%COMP%]{transition:none!important;transform:none!important}.compact-card[_ngcontent-%COMP%]:hover{transform:none!important}}@media (prefers-contrast: high){.compact-card[_ngcontent-%COMP%]{border-color:#fff9;background:#000000f2}.compact-avatar[_ngcontent-%COMP%]{border-color:#ffffff80}.artist-name[_ngcontent-%COMP%]{color:#fff!important}.artist-role[_ngcontent-%COMP%]{color:#ffffffd9!important}.content-placeholder[_ngcontent-%COMP%]{border-color:#ffffff80;background:#000c}}.compact-card[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:2px}.social-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:1px}']});var Pe=Lt;export{yi as a,it as b,pt as c,be as d,ve as e,Ce as f,Pe as g};
