import{a as de,b as ue,c as wt,d as Dt,e as Lt,f as me,g as Rt,h as j,j as pe}from"./chunk-GLTUL5G3.js";import{a as Ft,b as le}from"./chunk-2FDJW6KL.js";import{$a as lt,C as V,Ca as It,Ea as q,G as P,Ga as J,H as U,Ha as _t,I as W,Ia as yt,J as B,K as M,Ma as Ct,Na as E,Oa as qt,Pa as R,Q as St,Qa as Y,R as bt,Ra as oe,W as Pt,Y as ne,_a as xt,a as k,aa as Kt,ab as Yt,b as I,ca as C,d as Re,da as X,db as se,e as ze,eb as ce,f as ae,fa as re,fb as Et,ga as Tt,ha as G,i as $,j as A,jb as dt,ka as L,la as K,ma as gt,n as D,na as Ot,o as Wt,oa as st,qa as ct,t as Mt,ta as vt,v as Z,wa as S,xa as y,y as ft,ya as x,za as T}from"./chunk-IDH37QYW.js";var Pe=Re(Ht=>{"use strict";(function(){"use strict";var m=function(){this.init()};m.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;if(e=parseFloat(e),n.ctx||g(),typeof e<"u"&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var s=n._howls[r]._getSoundIds(),d=0;d<s.length;d++){var u=n._howls[r]._soundById(s[d]);u&&u._node&&(u._node.volume=u._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||g(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var s=n._howls[r]._getSoundIds(),d=0;d<s.length;d++){var u=n._howls[r]._soundById(s[d]);u&&u._node&&(u._node.muted=e?!0:u._muted)}return n},stop:function(){for(var e=this||t,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,g()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var n=new Audio;typeof n.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var n=new Audio;n.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return e}if(!n||typeof n.canPlayType!="function")return e;var r=n.canPlayType("audio/mpeg;").replace(/^no$/,""),s=e._navigator?e._navigator.userAgent:"",d=s.match(/OPR\/(\d+)/g),u=d&&parseInt(d[0].split("/")[1],10)<33,l=s.indexOf("Safari")!==-1&&s.indexOf("Chrome")===-1,b=s.match(/Version\/(.*?) /),v=l&&b&&parseInt(b[1],10)<15;return e._codecs={mp3:!!(!u&&(r||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!v&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!v&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var s=new Audio;s._unlocked=!0,e._releaseHtml5Audio(s)}catch{e.noAudio=!0;break}for(var d=0;d<e._howls.length;d++)if(!e._howls[d]._webAudio)for(var u=e._howls[d]._getSoundIds(),l=0;l<u.length;l++){var b=e._howls[d]._soundById(u[l]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}e._autoResume();var v=e.ctx.createBufferSource();v.buffer=e._scratchBuffer,v.connect(e.ctx.destination),typeof v.start>"u"?v.noteOn(0):v.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),v.onended=function(){v.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var w=0;w<e._howls.length;w++)e._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=new Audio().play();return n&&typeof Promise<"u"&&(n instanceof Promise||typeof n.then=="function")&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!t.usingWebAudio)){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio){for(var r=0;r<e._howls[n]._sounds.length;r++)if(!e._howls[n]._sounds[r]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var s=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(s,s)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!t.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var t=new m,i=function(e){var n=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(e)};i.prototype={init:function(e){var n=this;return t.ctx||g(),n._autoplay=e.autoplay||!1,n._format=typeof e.format!="string"?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src=typeof e.src!="string"?e.src:[e.src],n._volume=e.volume!==void 0?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n._preload!=="none"&&n.load(),n},load:function(){var e=this,n=null;if(t.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var s,d;if(e._format&&e._format[r])s=e._format[r];else{if(d=e._src[r],typeof d!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}s=/^data:audio\/([^;,]+);/i.exec(d),s||(s=/\.([^.]+)$/.exec(d.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&t.codecs(s)){n=e._src[r];break}}if(!n){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=n,e._state="loading",window.location.protocol==="https:"&&n.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&c(e),e},play:function(e,n){var r=this,s=null;if(typeof e=="number")s=e,e=null;else{if(typeof e=="string"&&r._state==="loaded"&&!r._sprite[e])return null;if(typeof e>"u"&&(e="__default",!r._playLock)){for(var d=0,u=0;u<r._sounds.length;u++)r._sounds[u]._paused&&!r._sounds[u]._ended&&(d++,s=r._sounds[u]._id);d===1?e=null:s=null}}var l=s?r._soundById(s):r._inactiveSound();if(!l)return null;if(s&&!e&&(e=l._sprite||"__default"),r._state!=="loaded"){l._sprite=e,l._ended=!1;var b=l._id;return r._queue.push({event:"play",action:function(){r.play(b)}}),b}if(s&&!l._paused)return n||r._loadQueue("play"),l._id;r._webAudio&&t._autoResume();var v=Math.max(0,l._seek>0?l._seek:r._sprite[e][0]/1e3),w=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-v),z=w*1e3/Math.abs(l._rate),H=r._sprite[e][0]/1e3,Q=(r._sprite[e][0]+r._sprite[e][1])/1e3;l._sprite=e,l._ended=!1;var F=function(){l._paused=!1,l._seek=v,l._start=H,l._stop=Q,l._loop=!!(l._loop||r._sprite[e][2])};if(v>=Q){r._ended(l);return}var _=l._node;if(r._webAudio){var te=function(){r._playLock=!1,F(),r._refreshBuffer(l);var ot=l._muted||r._muted?0:l._volume;_.gain.setValueAtTime(ot,t.ctx.currentTime),l._playStart=t.ctx.currentTime,typeof _.bufferSource.start>"u"?l._loop?_.bufferSource.noteGrainOn(0,v,86400):_.bufferSource.noteGrainOn(0,v,w):l._loop?_.bufferSource.start(0,v,86400):_.bufferSource.start(0,v,w),z!==1/0&&(r._endTimers[l._id]=setTimeout(r._ended.bind(r,l),z)),n||setTimeout(function(){r._emit("play",l._id),r._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?te():(r._playLock=!0,r.once("resume",te),r._clearTimer(l._id))}else{var ee=function(){_.currentTime=v,_.muted=l._muted||r._muted||t._muted||_.muted,_.volume=l._volume*t.volume(),_.playbackRate=l._rate;try{var ot=_.play();if(ot&&typeof Promise<"u"&&(ot instanceof Promise||typeof ot.then=="function")?(r._playLock=!0,F(),ot.then(function(){r._playLock=!1,_._unlocked=!0,n?r._loadQueue():r._emit("play",l._id)}).catch(function(){r._playLock=!1,r._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0})):n||(r._playLock=!1,F(),r._emit("play",l._id)),_.playbackRate=l._rate,_.paused){r._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||l._loop?r._endTimers[l._id]=setTimeout(r._ended.bind(r,l),z):(r._endTimers[l._id]=function(){r._ended(l),_.removeEventListener("ended",r._endTimers[l._id],!1)},_.addEventListener("ended",r._endTimers[l._id],!1))}catch(Le){r._emit("playerror",l._id,Le)}};_.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(_.src=r._src,_.load());var De=window&&window.ejecta||!_.readyState&&t._navigator.isCocoonJS;if(_.readyState>=3||De)ee();else{r._playLock=!0,r._state="loading";var ie=function(){r._state="loaded",ee(),_.removeEventListener(t._canPlayEvent,ie,!1)};_.addEventListener(t._canPlayEvent,ie,!1),r._clearTimer(l._id)}}return l._id},pause:function(e){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var r=n._getSoundIds(e),s=0;s<r.length;s++){n._clearTimer(r[s]);var d=n._soundById(r[s]);if(d&&!d._paused&&(d._seek=n.seek(r[s]),d._rateSeek=0,d._paused=!0,n._stopFade(r[s]),d._node))if(n._webAudio){if(!d._node.bufferSource)continue;typeof d._node.bufferSource.stop>"u"?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),n._cleanBuffer(d._node)}else(!isNaN(d._node.duration)||d._node.duration===1/0)&&d._node.pause();arguments[1]||n._emit("pause",d?d._id:null)}return n},stop:function(e,n){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var s=r._getSoundIds(e),d=0;d<s.length;d++){r._clearTimer(s[d]);var u=r._soundById(s[d]);u&&(u._seek=u._start||0,u._rateSeek=0,u._paused=!0,u._ended=!0,r._stopFade(s[d]),u._node&&(r._webAudio?u._node.bufferSource&&(typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),r._cleanBuffer(u._node)):(!isNaN(u._node.duration)||u._node.duration===1/0)&&(u._node.currentTime=u._start||0,u._node.pause(),u._node.duration===1/0&&r._clearSound(u._node))),n||r._emit("stop",u._id))}return r},mute:function(e,n){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,n)}}),r;if(typeof n>"u")if(typeof e=="boolean")r._muted=e;else return r._muted;for(var s=r._getSoundIds(n),d=0;d<s.length;d++){var u=r._soundById(s[d]);u&&(u._muted=e,u._interval&&r._stopFade(u._id),r._webAudio&&u._node?u._node.gain.setValueAtTime(e?0:u._volume,t.ctx.currentTime):u._node&&(u._node.muted=t._muted?!0:e),r._emit("mute",u._id))}return r},volume:function(){var e=this,n=arguments,r,s;if(n.length===0)return e._volume;if(n.length===1||n.length===2&&typeof n[1]>"u"){var d=e._getSoundIds(),u=d.indexOf(n[0]);u>=0?s=parseInt(n[0],10):r=parseFloat(n[0])}else n.length>=2&&(r=parseFloat(n[0]),s=parseInt(n[1],10));var l;if(typeof r<"u"&&r>=0&&r<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,n)}}),e;typeof s>"u"&&(e._volume=r),s=e._getSoundIds(s);for(var b=0;b<s.length;b++)l=e._soundById(s[b]),l&&(l._volume=r,n[2]||e._stopFade(s[b]),e._webAudio&&l._node&&!l._muted?l._node.gain.setValueAtTime(r,t.ctx.currentTime):l._node&&!l._muted&&(l._node.volume=r*t.volume()),e._emit("volume",l._id))}else return l=s?e._soundById(s):e._sounds[0],l?l._volume:0;return e},fade:function(e,n,r,s){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"fade",action:function(){d.fade(e,n,r,s)}}),d;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),r=parseFloat(r),d.volume(e,s);for(var u=d._getSoundIds(s),l=0;l<u.length;l++){var b=d._soundById(u[l]);if(b){if(s||d._stopFade(u[l]),d._webAudio&&!b._muted){var v=t.ctx.currentTime,w=v+r/1e3;b._volume=e,b._node.gain.setValueAtTime(e,v),b._node.gain.linearRampToValueAtTime(n,w)}d._startFadeInterval(b,e,n,r,u[l],typeof s>"u")}}return d},_startFadeInterval:function(e,n,r,s,d,u){var l=this,b=n,v=r-n,w=Math.abs(v/.01),z=Math.max(4,w>0?s/w:s),H=Date.now();e._fadeTo=r,e._interval=setInterval(function(){var Q=(Date.now()-H)/s;H=Date.now(),b+=v*Q,b=Math.round(b*100)/100,v<0?b=Math.max(r,b):b=Math.min(r,b),l._webAudio?e._volume=b:l.volume(b,e._id,!0),u&&(l._volume=b),(r<n&&b<=r||r>n&&b>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,l.volume(r,e._id),l._emit("fade",e._id))},z)},_stopFade:function(e){var n=this,r=n._soundById(e);return r&&r._interval&&(n._webAudio&&r._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(r._interval),r._interval=null,n.volume(r._fadeTo,e),r._fadeTo=null,n._emit("fade",e)),n},loop:function(){var e=this,n=arguments,r,s,d;if(n.length===0)return e._loop;if(n.length===1)if(typeof n[0]=="boolean")r=n[0],e._loop=r;else return d=e._soundById(parseInt(n[0],10)),d?d._loop:!1;else n.length===2&&(r=n[0],s=parseInt(n[1],10));for(var u=e._getSoundIds(s),l=0;l<u.length;l++)d=e._soundById(u[l]),d&&(d._loop=r,e._webAudio&&d._node&&d._node.bufferSource&&(d._node.bufferSource.loop=r,r&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop,e.playing(u[l])&&(e.pause(u[l],!0),e.play(u[l],!0)))));return e},rate:function(){var e=this,n=arguments,r,s;if(n.length===0)s=e._sounds[0]._id;else if(n.length===1){var d=e._getSoundIds(),u=d.indexOf(n[0]);u>=0?s=parseInt(n[0],10):r=parseFloat(n[0])}else n.length===2&&(r=parseFloat(n[0]),s=parseInt(n[1],10));var l;if(typeof r=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}}),e;typeof s>"u"&&(e._rate=r),s=e._getSoundIds(s);for(var b=0;b<s.length;b++)if(l=e._soundById(s[b]),l){e.playing(s[b])&&(l._rateSeek=e.seek(s[b]),l._playStart=e._webAudio?t.ctx.currentTime:l._playStart),l._rate=r,e._webAudio&&l._node&&l._node.bufferSource?l._node.bufferSource.playbackRate.setValueAtTime(r,t.ctx.currentTime):l._node&&(l._node.playbackRate=r);var v=e.seek(s[b]),w=(e._sprite[l._sprite][0]+e._sprite[l._sprite][1])/1e3-v,z=w*1e3/Math.abs(l._rate);(e._endTimers[s[b]]||!l._paused)&&(e._clearTimer(s[b]),e._endTimers[s[b]]=setTimeout(e._ended.bind(e,l),z)),e._emit("rate",l._id)}}else return l=e._soundById(s),l?l._rate:e._rate;return e},seek:function(){var e=this,n=arguments,r,s;if(n.length===0)e._sounds.length&&(s=e._sounds[0]._id);else if(n.length===1){var d=e._getSoundIds(),u=d.indexOf(n[0]);u>=0?s=parseInt(n[0],10):e._sounds.length&&(s=e._sounds[0]._id,r=parseFloat(n[0]))}else n.length===2&&(r=parseFloat(n[0]),s=parseInt(n[1],10));if(typeof s>"u")return 0;if(typeof r=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,n)}}),e;var l=e._soundById(s);if(l)if(typeof r=="number"&&r>=0){var b=e.playing(s);b&&e.pause(s,!0),l._seek=r,l._ended=!1,e._clearTimer(s),!e._webAudio&&l._node&&!isNaN(l._node.duration)&&(l._node.currentTime=r);var v=function(){b&&e.play(s,!0),e._emit("seek",s)};if(b&&!e._webAudio){var w=function(){e._playLock?setTimeout(w,0):v()};setTimeout(w,0)}else v()}else if(e._webAudio){var z=e.playing(s)?t.ctx.currentTime-l._playStart:0,H=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(H+z*Math.abs(l._rate))}else return l._node.currentTime;return e},playing:function(e){var n=this;if(typeof e=="number"){var r=n._soundById(e);return r?!r._paused:!1}for(var s=0;s<n._sounds.length;s++)if(!n._sounds[s]._paused)return!0;return!1},duration:function(e){var n=this,r=n._duration,s=n._soundById(e);return s&&(r=n._sprite[s._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,r=0;r<n.length;r++)n[r]._paused||e.stop(n[r]._id),e._webAudio||(e._clearSound(n[r]._node),n[r]._node.removeEventListener("error",n[r]._errorFn,!1),n[r]._node.removeEventListener(t._canPlayEvent,n[r]._loadFn,!1),n[r]._node.removeEventListener("ended",n[r]._endFn,!1),t._releaseHtml5Audio(n[r]._node)),delete n[r]._node,e._clearTimer(n[r]._id);var s=t._howls.indexOf(e);s>=0&&t._howls.splice(s,1);var d=!0;for(r=0;r<t._howls.length;r++)if(t._howls[r]._src===e._src||e._src.indexOf(t._howls[r]._src)>=0){d=!1;break}return o&&d&&delete o[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,r,s){var d=this,u=d["_on"+e];return typeof n=="function"&&u.push(s?{id:r,fn:n,once:s}:{id:r,fn:n}),d},off:function(e,n,r){var s=this,d=s["_on"+e],u=0;if(typeof n=="number"&&(r=n,n=null),n||r)for(u=0;u<d.length;u++){var l=r===d[u].id;if(n===d[u].fn&&l||!n&&l){d.splice(u,1);break}}else if(e)s["_on"+e]=[];else{var b=Object.keys(s);for(u=0;u<b.length;u++)b[u].indexOf("_on")===0&&Array.isArray(s[b[u]])&&(s[b[u]]=[])}return s},once:function(e,n,r){var s=this;return s.on(e,n,r,1),s},_emit:function(e,n,r){for(var s=this,d=s["_on"+e],u=d.length-1;u>=0;u--)(!d[u].id||d[u].id===n||e==="load")&&(setTimeout((function(l){l.call(this,n,r)}).bind(s,d[u].fn),0),d[u].once&&s.off(e,d[u].fn,d[u].id));return s._loadQueue(e),s},_loadQueue:function(e){var n=this;if(n._queue.length>0){var r=n._queue[0];r.event===e&&(n._queue.shift(),n._loadQueue()),e||r.action()}return n},_ended:function(e){var n=this,r=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var s=!!(e._loop||n._sprite[r][2]);if(n._emit("end",e._id),!n._webAudio&&s&&n.stop(e._id,!0).play(e._id),n._webAudio&&s){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var d=(e._stop-e._start)*1e3/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),d)}return n._webAudio&&!s&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),t._autoSuspend()),!n._webAudio&&!s&&n.stop(e._id,!0),n},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if(typeof n._endTimers[e]!="function")clearTimeout(n._endTimers[e]);else{var r=n._soundById(e);r&&r._node&&r._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,r=0;r<n._sounds.length;r++)if(e===n._sounds[r]._id)return n._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new a(e)},_drain:function(){var e=this,n=e._pool,r=0,s=0;if(!(e._sounds.length<n)){for(s=0;s<e._sounds.length;s++)e._sounds[s]._ended&&r++;for(s=e._sounds.length-1;s>=0;s--){if(r<=n)return;e._sounds[s]._ended&&(e._webAudio&&e._sounds[s]._node&&e._sounds[s]._node.disconnect(0),e._sounds.splice(s,1),r--)}}},_getSoundIds:function(e){var n=this;if(typeof e>"u"){for(var r=[],s=0;s<n._sounds.length;s++)r.push(n._sounds[s]._id);return r}else return[e]},_refreshBuffer:function(e){var n=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=o[n._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),n},_cleanBuffer:function(e){var n=this,r=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return n;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=t._scratchBuffer}catch{}return e.bufferSource=null,n},_clearSound:function(e){var n=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);n||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,r=t._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(r,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=n._preload===!0?"auto":n._preload,e._node.volume=r*t.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(e._node.duration*10)/10,Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,n=e._parent;n._duration===1/0&&(n._duration=Math.ceil(e._node.duration*10)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=n._duration*1e3),n._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var o={},c=function(e){var n=e._src;if(o[n]){e._duration=o[n].duration,f(e);return}if(/^data:[^;]+;base64,/.test(n)){for(var r=atob(n.split(",")[1]),s=new Uint8Array(r.length),d=0;d<r.length;++d)s[d]=r.charCodeAt(d);h(s.buffer,e)}else{var u=new XMLHttpRequest;u.open(e._xhr.method,n,!0),u.withCredentials=e._xhr.withCredentials,u.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(l){u.setRequestHeader(l,e._xhr.headers[l])}),u.onload=function(){var l=(u.status+"")[0];if(l!=="0"&&l!=="2"&&l!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".");return}h(u.response,e)},u.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[n],e.load())},p(u)}},p=function(e){try{e.send()}catch{e.onerror()}},h=function(e,n){var r=function(){n._emit("loaderror",null,"Decoding audio data failed.")},s=function(d){d&&n._sounds.length>0?(o[n._src]=d,f(n,d)):r()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(e).then(s).catch(r):t.ctx.decodeAudioData(e,s,r)},f=function(e,n){n&&!e._duration&&(e._duration=n.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},g=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=n?parseInt(n[1],10):null;if(e&&r&&r<9){var s=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!s&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:i}}),typeof Ht<"u"&&(Ht.Howler=t,Ht.Howl=i),typeof global<"u"?(global.HowlerGlobal=m,global.Howler=t,global.Howl=i,global.Sound=a):typeof window<"u"&&(window.HowlerGlobal=m,window.Howler=t,window.Howl=i,window.Sound=a)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var a=i._howls.length-1;a>=0;a--)i._howls[a].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,a){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(i=typeof i!="number"?o._pos[1]:i,a=typeof a!="number"?o._pos[2]:a,typeof t=="number")o._pos=[t,i,a],typeof o.ctx.listener.positionX<"u"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(t,i,a,o,c,p){var h=this;if(!h.ctx||!h.ctx.listener)return h;var f=h._orientation;if(i=typeof i!="number"?f[1]:i,a=typeof a!="number"?f[2]:a,o=typeof o!="number"?f[3]:o,c=typeof c!="number"?f[4]:c,p=typeof p!="number"?f[5]:p,typeof t=="number")h._orientation=[t,i,a,o,c,p],typeof h.ctx.listener.forwardX<"u"?(h.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),h.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),h.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),h.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),h.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),h.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):h.ctx.listener.setOrientation(t,i,a,o,c,p);else return f;return h},Howl.prototype.init=(function(t){return function(i){var a=this;return a._orientation=i.orientation||[1,0,0],a._stereo=i.stereo||null,a._pos=i.pos||null,a._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},a._onstereo=i.onstereo?[{fn:i.onstereo}]:[],a._onpos=i.onpos?[{fn:i.onpos}]:[],a._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(t,i)}}),a;var o=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof t=="number")a._stereo=t,a._pos=[t,0,0];else return a._stereo;for(var c=a._getSoundIds(i),p=0;p<c.length;p++){var h=a._soundById(c[p]);if(h)if(typeof t=="number")h._stereo=t,h._pos=[t,0,0],h._node&&(h._pannerAttr.panningModel="equalpower",(!h._panner||!h._panner.pan)&&m(h,o),o==="spatial"?typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):h._panner.setPosition(t,0,0):h._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",h._id);else return h._stereo}return a},Howl.prototype.pos=function(t,i,a,o){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(t,i,a,o)}}),c;if(i=typeof i!="number"?0:i,a=typeof a!="number"?-.5:a,typeof o>"u")if(typeof t=="number")c._pos=[t,i,a];else return c._pos;for(var p=c._getSoundIds(o),h=0;h<p.length;h++){var f=c._soundById(p[h]);if(f)if(typeof t=="number")f._pos=[t,i,a],f._node&&((!f._panner||f._panner.pan)&&m(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):f._panner.setPosition(t,i,a)),c._emit("pos",f._id);else return f._pos}return c},Howl.prototype.orientation=function(t,i,a,o){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(t,i,a,o)}}),c;if(i=typeof i!="number"?c._orientation[1]:i,a=typeof a!="number"?c._orientation[2]:a,typeof o>"u")if(typeof t=="number")c._orientation=[t,i,a];else return c._orientation;for(var p=c._getSoundIds(o),h=0;h<p.length;h++){var f=c._soundById(p[h]);if(f)if(typeof t=="number")f._orientation=[t,i,a],f._node&&(f._panner||(f._pos||(f._pos=c._pos||[0,0,-.5]),m(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):f._panner.setOrientation(t,i,a)),c._emit("orientation",f._id);else return f._orientation}return c},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,a,o,c;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")a=i[0],typeof o>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),t._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:t._panningModel});else return c=t._soundById(parseInt(i[0],10)),c?c._pannerAttr:t._pannerAttr;else i.length===2&&(a=i[0],o=parseInt(i[1],10));for(var p=t._getSoundIds(o),h=0;h<p.length;h++)if(c=t._soundById(p[h]),c){var f=c._pannerAttr;f={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:f.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:f.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:f.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:f.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:f.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:f.panningModel};var g=c._panner;g||(c._pos||(c._pos=t._pos||[0,0,-.5]),m(c,"spatial"),g=c._panner),g.coneInnerAngle=f.coneInnerAngle,g.coneOuterAngle=f.coneOuterAngle,g.coneOuterGain=f.coneOuterGain,g.distanceModel=f.distanceModel,g.maxDistance=f.maxDistance,g.refDistance=f.refDistance,g.rolloffFactor=f.rolloffFactor,g.panningModel=f.panningModel}return t},Sound.prototype.init=(function(t){return function(){var i=this,a=i._parent;i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,t.call(this),i._stereo?a.stereo(i._stereo):i._pos&&a.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var i=this,a=i._parent;return i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,i._stereo?a.stereo(i._stereo):i._pos?a.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,a._refreshBuffer(i)),t.call(this)}})(Sound.prototype.reset);var m=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var ui=(()=>{class m{static \u0275fac=function(a){return new(a||m)};static \u0275mod=K({type:m});static \u0275inj=U({imports:[j,j]})}return m})();var Ve=new W("MATERIAL_ANIMATIONS");var be=null;function Be(){return M(Ve,{optional:!0})?.animationsDisabled||M(ne,{optional:!0})==="NoopAnimations"?"di-disabled":(be??=M(le).matchMedia("(prefers-reduced-motion)").matches,be?"reduced-motion":"enabled")}function zt(){return Be()!=="enabled"}var N=(function(m){return m[m.FADING_IN=0]="FADING_IN",m[m.VISIBLE=1]="VISIBLE",m[m.FADING_OUT=2]="FADING_OUT",m[m.HIDDEN=3]="HIDDEN",m})(N||{}),Qt=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=N.HIDDEN;constructor(t,i,a,o=!1){this._renderer=t,this.element=i,this.config=a,this._animationForciblyDisabledThroughCss=o}fadeOut(){this._renderer.fadeOutRipple(this)}},ge=Dt({passive:!0,capture:!0}),Zt=class{_events=new Map;addHandler(t,i,a,o){let c=this._events.get(i);if(c){let p=c.get(a);p?p.add(o):c.set(a,new Set([o]))}else this._events.set(i,new Map([[a,new Set([o])]])),t.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,ge)})}removeHandler(t,i,a){let o=this._events.get(t);if(!o)return;let c=o.get(i);c&&(c.delete(a),c.size===0&&o.delete(i),o.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,ge)))}_delegateEventHandler=t=>{let i=wt(t);i&&this._events.get(t.type)?.forEach((a,o)=>{(o===i||o.contains(i))&&a.forEach(c=>c.handleEvent(t))})}},kt={enterDuration:225,exitDuration:150},je=800,ve=Dt({passive:!0,capture:!0}),_e=["mousedown","touchstart"],ye=["mouseup","mouseleave","touchend","touchcancel"],Ne=(()=>{class m{static \u0275fac=function(a){return new(a||m)};static \u0275cmp=L({type:m,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(a,o){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return m})(),Vt=class m{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Zt;constructor(t,i,a,o,c){this._target=t,this._ngZone=i,this._platform=o,o.isBrowser&&(this._containerElement=Lt(a)),c&&c.get(Rt).load(Ne)}fadeInRipple(t,i,a={}){let o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=k(k({},kt),a.animation);a.centered&&(t=o.left+o.width/2,i=o.top+o.height/2);let p=a.radius||He(t,i,o),h=t-o.left,f=i-o.top,g=c.enterDuration,e=document.createElement("div");e.classList.add("mat-ripple-element"),e.style.left=`${h-p}px`,e.style.top=`${f-p}px`,e.style.height=`${p*2}px`,e.style.width=`${p*2}px`,a.color!=null&&(e.style.backgroundColor=a.color),e.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(e);let n=window.getComputedStyle(e),r=n.transitionProperty,s=n.transitionDuration,d=r==="none"||s==="0s"||s==="0s, 0s"||o.width===0&&o.height===0,u=new Qt(this,e,a,d);e.style.transform="scale3d(1, 1, 1)",u.state=N.FADING_IN,a.persistent||(this._mostRecentTransientRipple=u);let l=null;return!d&&(g||c.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>{l&&(l.fallbackTimer=null),clearTimeout(w),this._finishRippleTransition(u)},v=()=>this._destroyRipple(u),w=setTimeout(v,g+100);e.addEventListener("transitionend",b),e.addEventListener("transitioncancel",v),l={onTransitionEnd:b,onTransitionCancel:v,fallbackTimer:w}}),this._activeRipples.set(u,l),(d||!g)&&this._finishRippleTransition(u),u}fadeOutRipple(t){if(t.state===N.FADING_OUT||t.state===N.HIDDEN)return;let i=t.element,a=k(k({},kt),t.config.animation);i.style.transitionDuration=`${a.exitDuration}ms`,i.style.opacity="0",t.state=N.FADING_OUT,(t._animationForciblyDisabledThroughCss||!a.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let i=Lt(t);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,_e.forEach(a=>{m._eventManager.addHandler(this._ngZone,a,i,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ye.forEach(i=>{this._triggerElement.addEventListener(i,this,ve)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===N.FADING_IN?this._startFadeOutTransition(t):t.state===N.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let i=t===this._mostRecentTransientRipple,{persistent:a}=t.config;t.state=N.VISIBLE,!a&&(!i||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let i=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=N.HIDDEN,i!==null&&(t.element.removeEventListener("transitionend",i.onTransitionEnd),t.element.removeEventListener("transitioncancel",i.onTransitionCancel),i.fallbackTimer!==null&&clearTimeout(i.fallbackTimer)),t.element.remove()}_onMousedown(t){let i=de(t),a=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+je;!this._target.rippleDisabled&&!i&&!a&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!ue(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=t.changedTouches;if(i)for(let a=0;a<i.length;a++)this.fadeInRipple(i[a].clientX,i[a].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let i=t.state===N.VISIBLE||t.config.terminateOnPointerUp&&t.state===N.FADING_IN;!t.config.persistent&&i&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(_e.forEach(i=>m._eventManager.removeHandler(i,t,this)),this._pointerUpEventsRegistered&&(ye.forEach(i=>t.removeEventListener(i,this,ve)),this._pointerUpEventsRegistered=!1))}};function He(m,t,i){let a=Math.max(Math.abs(m-i.left),Math.abs(m-i.right)),o=Math.max(Math.abs(t-i.top),Math.abs(t-i.bottom));return Math.sqrt(a*a+o*o)}var Ce=new W("mat-ripple-global-options");var $e={capture:!0},Ge=["focus","mousedown","mouseenter","touchstart"],Xt="mat-ripple-loader-uninitialized",Jt="mat-ripple-loader-class-name",xe="mat-ripple-loader-centered",Bt="mat-ripple-loader-disabled",we=(()=>{class m{_document=M(bt);_animationsDisabled=zt();_globalRippleOptions=M(Ce,{optional:!0});_platform=M(Ft);_ngZone=M(ct);_injector=M(St);_eventCleanups;_hosts=new Map;constructor(){let i=M(re).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Ge.map(a=>i.listen(this._document,a,this._onInteraction,$e)))}ngOnDestroy(){let i=this._hosts.keys();for(let a of i)this.destroyRipple(a);this._eventCleanups.forEach(a=>a())}configureRipple(i,a){i.setAttribute(Xt,this._globalRippleOptions?.namespace??""),(a.className||!i.hasAttribute(Jt))&&i.setAttribute(Jt,a.className||""),a.centered&&i.setAttribute(xe,""),a.disabled&&i.setAttribute(Bt,"")}setDisabled(i,a){let o=this._hosts.get(i);o?(o.target.rippleDisabled=a,!a&&!o.hasSetUpEvents&&(o.hasSetUpEvents=!0,o.renderer.setupTriggerEvents(i))):a?i.setAttribute(Bt,""):i.removeAttribute(Bt)}_onInteraction=i=>{let a=wt(i);if(a instanceof HTMLElement){let o=a.closest(`[${Xt}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}};_createRipple(i){if(!this._document||this._hosts.has(i))return;i.querySelector(".mat-ripple")?.remove();let a=this._document.createElement("span");a.classList.add("mat-ripple",i.getAttribute(Jt)),i.append(a);let o=this._globalRippleOptions,c=this._animationsDisabled?0:o?.animation?.enterDuration??kt.enterDuration,p=this._animationsDisabled?0:o?.animation?.exitDuration??kt.exitDuration,h={rippleDisabled:this._animationsDisabled||o?.disabled||i.hasAttribute(Bt),rippleConfig:{centered:i.hasAttribute(xe),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:c,exitDuration:p}}},f=new Vt(h,this._ngZone,a,this._platform,this._injector),g=!h.rippleDisabled;g&&f.setupTriggerEvents(i),this._hosts.set(i,{target:h,renderer:f,hasSetUpEvents:g}),i.removeAttribute(Xt)}destroyRipple(i){let a=this._hosts.get(i);a&&(a.renderer._removeTriggerEvents(),this._hosts.delete(i))}static \u0275fac=function(a){return new(a||m)};static \u0275prov=P({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();var ke=(()=>{class m{static \u0275fac=function(a){return new(a||m)};static \u0275cmp=L({type:m,selectors:[["structural-styles"]],decls:0,vars:0,template:function(a,o){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return m})();var Ue=["mat-icon-button",""],We=["*"],Ke=new W("MAT_BUTTON_CONFIG");function Ae(m){return m==null?void 0:Yt(m)}var Me=(()=>{class m{_elementRef=M(Pt);_ngZone=M(ct);_animationsDisabled=zt();_config=M(Ke,{optional:!0});_focusMonitor=M(me);_cleanupClick;_renderer=M(Tt);_rippleLoader=M(we);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(i){this.tabIndex=i}constructor(){M(Rt).load(ke);let i=this._elementRef.nativeElement;this._isAnchor=i.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",a){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,a):this._elementRef.nativeElement.focus(a)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",i=>{this.disabled&&(i.preventDefault(),i.stopImmediatePropagation())}))}static \u0275fac=function(a){return new(a||m)};static \u0275dir=gt({type:m,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(a,o){a&2&&(vt("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled())("tabindex",o._getTabIndex()),qt(o.color?"mat-"+o.color:""),E("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("mat-unthemed",!o.color)("_mat-animation-noopable",o._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",lt],disabled:[2,"disabled","disabled",lt],ariaDisabled:[2,"aria-disabled","ariaDisabled",lt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",lt],tabIndex:[2,"tabIndex","tabIndex",Ae],_tabindex:[2,"tabindex","_tabindex",Ae]}})}return m})(),qe=(()=>{class m extends Me{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(a){return new(a||m)};static \u0275cmp=L({type:m,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Ot],attrs:Ue,ngContentSelectors:We,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(a,o){a&1&&(_t(),It(0,"span",0),yt(1),It(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return m})();var jt=(()=>{class m{static \u0275fac=function(a){return new(a||m)};static \u0275mod=K({type:m});static \u0275inj=U({imports:[j,j]})}return m})();var da=(()=>{class m{static \u0275fac=function(a){return new(a||m)};static \u0275mod=K({type:m});static \u0275inj=U({imports:[j,jt,j]})}return m})();var Se=(()=>{class m{isErrorState(i,a){return!!(i&&i.invalid&&(i.touched||a&&a.submitted))}static \u0275fac=function(a){return new(a||m)};static \u0275prov=P({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();var Qe=new W("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var $a=(()=>{class m{static \u0275fac=function(a){return new(a||m)};static \u0275mod=K({type:m});static \u0275inj=U({providers:[Se,{provide:Qe,useValue:{separatorKeyCodes:[13]}}],imports:[j,jt,j]})}return m})();var tt=class tt{constructor(){this.tracksMap=new Map;this.audioStateSubject=new A({isPlaying:!1,currentTrack:null,currentTime:0,duration:0,volume:.5});this.audioState$=this.audioStateSubject.asObservable();this.audioElement=new Audio,this.initializeTracksMap(),this.setupEventListeners()}initializeTracksMap(){this.tracksMap.set("introduction","assets/audio/intro.mp3"),this.tracksMap.set("disc-1","assets/audio/disc1.mp3"),this.tracksMap.set("disc-2","assets/audio/disc2.mp3"),this.tracksMap.set("pv","assets/audio/pv.mp3"),this.tracksMap.set("information","assets/audio/info.mp3")}setupEventListeners(){this.audioElement.addEventListener("timeupdate",()=>{this.updateAudioState({currentTime:this.audioElement.currentTime})}),this.audioElement.addEventListener("loadedmetadata",()=>{this.updateAudioState({duration:this.audioElement.duration})}),this.audioElement.addEventListener("ended",()=>{this.updateAudioState({isPlaying:!1,currentTime:0}),this.audioElement.currentTime=0}),this.audioElement.addEventListener("error",t=>{console.error("[AudioService] Error playing audio:",t),this.updateAudioState({isPlaying:!1,currentTrack:null})})}updateAudioState(t){let i=this.audioStateSubject.getValue(),a=k(k({},i),t);this.audioStateSubject.next(a)}playTrack(t){let i=this.tracksMap.get(t);if(!i){console.error(`[AudioService] Track not found: ${t}`);return}this.audioStateSubject.getValue().currentTrack!==t&&(this.audioElement.src=i,this.audioElement.load(),this.updateAudioState({currentTrack:t,currentTime:0})),this.audioElement.play().then(()=>{this.updateAudioState({isPlaying:!0})}).catch(a=>{console.error("[AudioService] Error playing track:",a)})}pause(){this.audioElement.pause(),this.updateAudioState({isPlaying:!1})}togglePlayPause(){let t=this.audioStateSubject.getValue();t.isPlaying?this.pause():t.currentTrack&&this.playTrack(t.currentTrack)}setVolume(t){let i=Math.min(1,Math.max(0,t));this.audioElement.volume=i,this.updateAudioState({volume:i})}seekTo(t){if(this.audioElement.readyState>0){let i=Math.min(this.audioElement.duration,Math.max(0,t));this.audioElement.currentTime=i,this.updateAudioState({currentTime:i})}}setTrackForSection(t){let i=this.audioStateSubject.getValue();this.tracksMap.get(t)&&i.currentTrack!==t&&this.playTrack(t)}};tt.\u0275fac=function(i){return new(i||tt)},tt.\u0275prov=P({token:tt,factory:tt.\u0275fac,providedIn:"root"});var Nt=tt;var At=ze(Pe());var et=class et{constructor(t){this.http=t;this.destroy$=new $;this.isDebugMode=!0;this.audio=null;this.currentTrack=null;this._isPlaying=!1;this.volume=1;this.progress=0;this.isLoading=!1;this.TRACKS={introduction:{title:"Introduction",artist:"An",id:"intro",url:"assets/audio/An - Incident.mp3"},"disc-1":{title:"I can avoid it",artist:"Feryquitous",id:"disc1",url:"assets/audio/Feryquitous - i can avoid it.mp3"},"disc-2":{title:"Quantum Resonance",artist:"An",id:"disc2",url:"assets/audio/An - Quantum Resonance.mp3"},pv:{title:"Neural Network",artist:"Feryquitous",id:"pv",url:"assets/audio/Feryquitous - Neural Network.mp3"},information:{title:"Digital Entropy",artist:"An \xD7 Feryquitous",id:"info",url:"assets/audio/An \xD7 Feryquitous - Digital Entropy.mp3"}};this.audioStateSubject=new A({isPlaying:!1,currentTrack:null,volume:1,progress:0,loading:!1});this.audioEventSubject=new A({type:"pause"});this.errorSubject=new $;this.currentTrackSubject=new A("");this.currentTrack$=this.currentTrackSubject.asObservable();this.audioFiles=[];this.sectionTracks={introduction:"An - Incident.mp3","disc-1":"Feryquitous - i can avoid it.mp3","disc-2":"An - Quantum Resonance.mp3",pv:"Feryquitous - Neural Network.mp3",information:"An \xD7 Feryquitous - Digital Entropy.mp3"};this.uiSounds={"menu-click":"assets/audio/ui/menu-click.mp3","page-turn":"assets/audio/ui/page-turn.mp3",success:"assets/audio/ui/success.mp3",error:"assets/audio/ui/error.mp3"};this.loadAudioFiles(),this.initializeAudio(),this.isDebugMode&&console.log("[AudioService] Initialized")}loadAudioFiles(){return ae(this,null,function*(){try{this.audioFiles.push(...Object.values(this.sectionTracks).map(t=>`assets/audio/${t}`)),this.audioFiles.length>0&&this.currentTrackSubject.next(this.audioFiles[0]),this.isDebugMode&&console.log("[AudioService] Audio files loaded:",this.audioFiles)}catch(t){this.handleError("LOAD_ERROR",`Failed to load audio files: ${t instanceof Error?t.message:String(t)}`)}})}initializeAudio(){this.audio=new Audio,this.setupAudioEventListeners()}setupAudioEventListeners(){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.audio.addEventListener("timeupdate",()=>{this.audio&&(this.progress=this.audio.duration?this.audio.currentTime/this.audio.duration*100:0,this.updateAudioState(),this.audioEventSubject.next({type:"timeupdate",data:this.progress}))}),this.audio.addEventListener("ended",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"ended"})}),this.audio.addEventListener("error",t=>{let i=t;this.handleError("LOAD_ERROR",`Failed to load audio: ${i.message||"Unknown error"}`),this.audioEventSubject.next({type:"error",data:i.message})}),this.audio.addEventListener("loadstart",()=>{this.isLoading=!0,this.updateAudioState(),this.audioEventSubject.next({type:"loading"})}),this.audio.addEventListener("canplay",()=>{this.isLoading=!1,this.updateAudioState(),this.audioEventSubject.next({type:"loaded"})}),this.audio.addEventListener("play",()=>{this._isPlaying=!0,this.updateAudioState(),this.audioEventSubject.next({type:"play"})}),this.audio.addEventListener("pause",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"pause"})})}updateAudioState(){this.audioStateSubject.next({isPlaying:this._isPlaying,currentTrack:this.currentTrack,volume:this.volume,progress:this.progress,loading:this.isLoading})}handleError(t,i){this.isDebugMode&&console.error(`[AudioService] ${t}: ${i}`),this.errorSubject.next({type:t,message:i})}setTrackForSection(t){let i=this.TRACKS[t];if(!i){this.handleError("LOAD_ERROR",`No track found for section: ${t}`);return}this.currentTrack?.id!==i.id&&(this.isDebugMode&&console.log(`[AudioService] Setting track for section: ${t}`,i),this.currentTrack=i,this.loadTrack(i),this.currentTrackSubject.next(i.url))}loadTrack(t){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.isLoading=!0,this.updateAudioState(),this.audio.src=t.url;try{this.audio.load()}catch(i){this.handleError("LOAD_ERROR",`Failed to load track: ${i instanceof Error?i.message:String(i)}`)}}play(){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}if(!this.currentTrack){this.handleError("PLAY_ERROR","No track selected");return}this.isDebugMode&&console.log("[AudioService] Playing audio:",this.currentTrack.title),this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(t=>{this.handleError("PLAY_ERROR",`Failed to play audio: ${t instanceof Error?t.message:String(t)}`)})}pause(){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log("[AudioService] Pausing audio"),this.audio.pause(),this._isPlaying=!1,this.updateAudioState()}togglePlay(){this._isPlaying?this.pause():this.play()}setVolume(t){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.volume=Math.max(0,Math.min(1,t)),this.audio.volume=this.volume,this.updateAudioState(),this.isDebugMode&&console.log(`[AudioService] Volume set to: ${this.volume}`)}getCurrentState(){return this.audioStateSubject.asObservable()}getAudioEvents(){return this.audioEventSubject.asObservable()}onPlayStateChange(){return this.getCurrentState().pipe(D(t=>t.isPlaying))}onTrackChange(){return this.currentTrack$}onLoadingStateChange(){return this.getCurrentState().pipe(D(t=>t.loading))}getProgress(){return!this.audio||!this.audio.duration?0:this.audio.currentTime/this.audio.duration}getErrors(){return this.errorSubject.asObservable()}isPlaying(){return this._isPlaying}getCurrentTrack(){return this.currentTrackSubject.value}getNextTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t<this.audioFiles.length-1){let i=this.audioFiles[t+1];return this.currentTrackSubject.next(i),i}return null}getPreviousTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t>0){let i=this.audioFiles[t-1];return this.currentTrackSubject.next(i),i}return null}getTrackList(){return this.audioFiles}getCurrentIndex(){return this.audioFiles.indexOf(this.currentTrackSubject.value)}playUISound(t){if(!this.uiSounds[t]){this.handleError("UI_SOUND_ERROR",`UI sound not found: ${t}`);return}try{let i=new Audio(this.uiSounds[t]);i.volume=.5,i.play().catch(a=>{this.handleError("UI_SOUND_ERROR",`Error playing UI sound: ${a instanceof Error?a.message:String(a)}`)})}catch(i){this.handleError("UI_SOUND_ERROR",`Failed to create UI sound: ${i instanceof Error?i.message:String(i)}`)}}playTrack(t){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log(`[AudioService] Playing track from source: ${t}`),this.currentTrackSubject.next(t),this.isLoading=!0,this.updateAudioState(),this.audio.src=t,this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(i=>{this.handleError("PLAY_ERROR",`Error playing track: ${i instanceof Error?i.message:String(i)}`)})}pauseTrack(){this.pause()}resumeTrack(){this.play()}ngOnDestroy(){this.isDebugMode&&console.log("[AudioService] Destroying service"),this.audio&&(this.audio.onended=null,this.audio.ontimeupdate=null,this.audio.onerror=null,this.audio.oncanplay=null,this.audio.onloadstart=null,this.audio.pause(),this.audio.src="",this.audio=null),this.audioStateSubject.complete(),this.audioEventSubject.complete(),this.currentTrackSubject.complete(),this.errorSubject.complete(),this.destroy$.next(),this.destroy$.complete()}};et.\u0275fac=function(i){return new(i||et)(B(dt))},et.\u0275prov=P({token:et,factory:et.\u0275fac,providedIn:"root"});var $t=et;var it=class it{constructor(t){this.http=t;this.tracksWithCreditsSubject=new A([]);this.currentTrackCreditsSubject=new A(null);this.verificationStatusSubject=new A([]);this.tracksWithCredits$=this.tracksWithCreditsSubject.asObservable();this.currentTrackCredits$=this.currentTrackCreditsSubject.asObservable();this.verificationStatus$=this.verificationStatusSubject.asObservable();this.completeArtistDatabase={SpiralFlip:{displayName:"SpiralFlip",avatar:"/assets/images/artists/SpiralFlip.png",color:"#FF6B6B",primaryRoles:["Main Artist","Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},bio:"Electronic music producer and Phantasia compilation curator"},eili:{displayName:"eili",avatar:"/assets/images/artists/Eili.png",color:"#4ECDC4",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},bio:"Versatile vocalist featured on multiple Phantasia tracks"},Ariatec:{displayName:"Ariatec",avatar:"/assets/images/artists/Ariatec.png",color:"#45B7D1",primaryRoles:["Composer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},bio:"Ambient and cinematic composer"},MB:{displayName:"MBgov",avatar:"/assets/images/artists/MBgov.png",color:"#96CEB4",primaryRoles:["Composer","Arranger"],socialLinks:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},bio:"Orchestral composer and arranger"},"Iku Hoshifuri":{displayName:"Iku Hoshifuri",avatar:"/assets/images/artists/Iku-Hoshifuri.png",color:"#FFEAA7",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},bio:"Japanese vocalist and J-Pop artist"},"Justin Thornburgh":{displayName:"Justin Thornburgh",avatar:"/assets/images/artists/Justin-Thornburgh.png",color:"#DDA0DD",primaryRoles:["Accordion","Instrumentalist"],socialLinks:{twitter:"https://x.com/JustinThornbur7"},bio:"Accordion performer and folk musician"},v1ris:{displayName:"v1ris",avatar:"/assets/images/artists/v1ris.png",color:"#F8B500",primaryRoles:["Violin","Instrumentalist"],socialLinks:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},bio:"Classical violinist and string arranger"},"Rita Kamishiro":{displayName:"Rita Kamishiro",avatar:"/assets/images/artists/Rita-Kamishiro.png",color:"#E17055",primaryRoles:["Viola","Instrumentalist"],socialLinks:{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},bio:"Classical viola performer"},"Marcus Ho":{displayName:"Marcus Ho",avatar:"/assets/images/artists/Marcus-Ho.png",color:"#6C5CE7",primaryRoles:["Cello","Instrumentalist"],socialLinks:{website:"https://www.marcushomusic.com/"},bio:"Professional cellist and composer"},AZALI:{displayName:"AZALI",avatar:"/assets/images/artists/AZALI.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},bio:"Experimental electronic music producer"},Aloysius:{displayName:"Aloysius",avatar:"/assets/images/artists/Aloysius.png",color:"#FD79A8",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},bio:"Ambient electronic producer"},potatoTeto:{displayName:"potatoTeto",avatar:"/assets/images/artists/potatoTeto.png",color:"#00B894",primaryRoles:["Sound Designer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},bio:"Ambient and experimental sound designer"},Artisan:{displayName:"Artisan",avatar:"/assets/images/artists/Artisan.png",color:"#E84393",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},bio:"Melodic electronic music producer"},"Mei Naganowa":{displayName:"Mei Naganowa",avatar:"/assets/images/artists/Mei-Naganowa.png",color:"#00CEC9",primaryRoles:["Synthesizer V Operator","Producer"],socialLinks:{twitter:"https://x.com/ReeKDoesDTM"},bio:"Synthesizer V specialist and vocal producer"},"Evin a'k":{displayName:"Evin a'k",avatar:"/assets/images/artists/Evin-ak.png",color:"#FDCB6E",primaryRoles:["Electronic Producer","Bass"],socialLinks:{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},bio:"Bass-heavy electronic music producer"},BilliumMoto:{displayName:"BilliumMoto",avatar:"/assets/images/artists/BilliumMoto.png",color:"#74B9FF",primaryRoles:["Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},bio:"Lofi and chill music producer"},"Elliot Hsu":{displayName:"Elliot Hsu",avatar:"/assets/images/artists/Elliot-Hsu.png",color:"#55A3FF",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},bio:"Ambient electronic producer"},Yuzuki:{displayName:"Yuzuki",avatar:"/assets/images/artists/Yuzuki.png",color:"#FF7675",primaryRoles:["Synthesizer V Operator","Producer"],socialLinks:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},bio:"Synthesizer V producer and composer"},LucaProject:{displayName:"LucaProject",avatar:"/assets/images/artists/LucaProject.png",color:"#6C5CE7",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@lucaproject6108",carrd:"https://lucaproject.carrd.co/"},bio:"Melodic electronic music producer"},Koway:{displayName:"Koway",avatar:"/assets/images/artists/Koway.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},bio:"Experimental electronic composer"},\u4F0D\u4E00:{displayName:"\u4F0D\u4E00",avatar:"/assets/images/artists/Wu-Yi.png",color:"#FFEAA7",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},bio:"Chinese vocalist and electronic artist"},Nstryder:{displayName:"Nstryder",avatar:"/assets/images/artists/Nstryder.png",color:"#E17055",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},bio:"Hardcore electronic music producer"},MoAE:{displayName:"MoAE:.",avatar:"/assets/images/artists/MoAE.png",color:"#00B894",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},bio:"Ambient electronic producer"},"dystopian tanuki":{displayName:"dystopian tanuki",avatar:"/assets/images/artists/dystopian-tanuki.png",color:"#636E72",primaryRoles:["Sound Designer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},bio:"Experimental ambient composer"},Heem:{displayName:"Heem",avatar:"/assets/images/artists/Heem.png",color:"#FD79A8",primaryRoles:["Electronic Producer","Composer"],socialLinks:{linktr:"https://linktr.ee/heeem"},bio:"Melodic electronic producer"},Woojinee:{displayName:"Woojinee",avatar:"/assets/images/artists/Woojinee.png",color:"#E84393",primaryRoles:["Violin","Instrumentalist"],socialLinks:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},bio:"Classical violinist"},"Bigg Milk":{displayName:"Bigg Milk",avatar:"/assets/images/artists/Bigg-Milk.png",color:"#00CEC9",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},bio:"Chill electronic music producer"},Gardens:{displayName:"Gardens",avatar:"/assets/images/artists/Gardens.png",color:"#00B894",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},bio:"Ambient electronic producer"},"Sad Keyboard Guy":{displayName:"Sad Keyboard Guy",avatar:"/assets/images/artists/Sad-Keyboard-Guy.png",color:"#74B9FF",primaryRoles:["Keyboard","Composer"],socialLinks:{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},bio:"Emotional keyboard composer"},Futsuunohito:{displayName:"Futsuunohito",avatar:"/assets/images/artists/Futsuunohito.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},bio:"Cinematic electronic composer"},shishishiena:{displayName:"shishishiena",avatar:"/assets/images/artists/shishishiena.png",color:"#FFEAA7",primaryRoles:["Voice Actor","Vocalist"],socialLinks:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"},bio:"Voice actor and vocal performer"},"Anri Arcane":{displayName:"Anri Arcane",avatar:"/assets/images/artists/Anri-Arcane.png",color:"#FF9FF3",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},HXVOC:{displayName:"HXVOC",avatar:"/assets/images/artists/HXVOC.png",color:"#54C7EC",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},"Miyamai Moca":{displayName:"Miyamai Moca",avatar:"/assets/images/artists/Miyamai-Moca.png",color:"#FFB347",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},Ninezero:{displayName:"Ninezero",avatar:"/assets/images/artists/Ninezero.png",color:"#98FB98",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},"Hanakuma Chifuyu":{displayName:"Hanakuma Chifuyu",avatar:"/assets/images/artists/Hanakuma-Chifuyu.png",color:"#DDA0FF",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"}};this.initializeCompleteCredits()}initializeCompleteCredits(){let t=this.createCompleteTrackCredits();this.tracksWithCreditsSubject.next(t);let i=this.createVerificationStatuses();this.verificationStatusSubject.next(i)}updateCurrentTrack(t){let a=this.tracksWithCreditsSubject.value.find(o=>o.id===t);this.currentTrackCreditsSubject.next(a||null)}getTrackCredits(t){return this.tracksWithCreditsSubject.value.find(a=>a.id===t)||null}getAllPhantasia2Artists(){let t=this.tracksWithCreditsSubject.value,i=new Map;return t.forEach(a=>{a.allContributions.forEach(o=>{i.has(o.artistName)||i.set(o.artistName,o)})}),Array.from(i.values()).sort((a,o)=>a.artistDisplayName.localeCompare(o.artistDisplayName))}getArtistData(t){let i=this.completeArtistDatabase[t];return i?I(k({},i),{avatar:i.avatar}):null}getVerificationReport(){return this.verificationStatus$.pipe(D(t=>{let i=t.length,a=t.filter(h=>h.fullyVerified).length,o=t.filter(h=>!h.fullyVerified&&(h.allContributorsIdentified||h.rolesAccuratelyAssigned)).length,c=i-a-o,p=Math.round(a/i*100);return{totalTracks:i,fullyVerified:a,partiallyVerified:o,needsWork:c,verificationPercentage:p}}))}createCompleteTrackCredits(){return[{id:"1",title:"Blinding Dawn",trackNumber:1,startTime:0,endTime:168,audioFile:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",mainArtist:this.createArtistContribution("SpiralFlip","Main Artist","Primary",60),allContributions:[this.createArtistContribution("SpiralFlip","Main Artist","Primary",60,"Original composition and production"),this.createArtistContribution("eili","Featured Artist","Featured",40,"Lead vocals and melody")],featuredArtists:[this.createArtistContribution("eili","Featured Artist","Featured",40)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("eili","Vocalist","Featured",40)],technicalCredits:[this.createArtistContribution("SpiralFlip","Producer","Primary",100)]},{id:"2",title:"Hollow Crown",trackNumber:2,startTime:168,endTime:344,audioFile:"2. Ariatec - Hollow Crown.ogg",mainArtist:this.createArtistContribution("Ariatec","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Ariatec","Main Artist","Primary",100,"Ambient composition and sound design")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Ariatec","Sound Designer","Primary",100)]},{id:"3",title:"\u6681\u306E\u59EB",trackNumber:3,startTime:344,endTime:518,audioFile:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",mainArtist:this.createArtistContribution("MB","Main Artist","Primary",40),allContributions:[this.createArtistContribution("MB","Main Artist","Primary",40,"Orchestral composition and arrangement"),this.createArtistContribution("Iku Hoshifuri","Featured Artist","Featured",30,"Japanese vocals"),this.createArtistContribution("Justin Thornburgh","Accordion","Additional",10,"Accordion performance"),this.createArtistContribution("v1ris","Violin","Additional",8,"Violin performance"),this.createArtistContribution("Rita Kamishiro","Viola","Additional",7,"Viola performance"),this.createArtistContribution("Marcus Ho","Cello","Additional",5,"Cello performance")],featuredArtists:[this.createArtistContribution("Iku Hoshifuri","Featured Artist","Featured",30)],collaborators:[],instrumentalists:[this.createArtistContribution("Justin Thornburgh","Accordion","Additional",10),this.createArtistContribution("v1ris","Violin","Additional",8),this.createArtistContribution("Rita Kamishiro","Viola","Additional",7),this.createArtistContribution("Marcus Ho","Cello","Additional",5)],vocalists:[this.createArtistContribution("Iku Hoshifuri","Vocalist","Featured",30)],technicalCredits:[this.createArtistContribution("MB","Arranger","Primary",100)]},{id:"4",title:"Lux Nova",trackNumber:4,startTime:518,endTime:704,audioFile:"4. Azali & Aloysius - Lux Nova.ogg",mainArtist:this.createArtistContribution("AZALI","Main Artist","Primary",50),allContributions:[this.createArtistContribution("AZALI","Main Artist","Primary",50,"Experimental electronic production"),this.createArtistContribution("Aloysius","Collaborator","Collaboration",50,"Ambient electronic production")],featuredArtists:[],collaborators:[this.createArtistContribution("Aloysius","Electronic Producer","Collaboration",50)],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("AZALI","Producer","Primary",50),this.createArtistContribution("Aloysius","Producer","Collaboration",50)]},{id:"5",title:"Hall of Silent Echoes",trackNumber:5,startTime:704,endTime:892,audioFile:"5. potatoTeto - Hall of Silent Echoes.ogg",mainArtist:this.createArtistContribution("potatoTeto","Main Artist","Primary",100),allContributions:[this.createArtistContribution("potatoTeto","Main Artist","Primary",100,"Experimental ambient sound design")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("potatoTeto","Sound Designer","Primary",100)]},{id:"6",title:"Lirica",trackNumber:6,startTime:892,endTime:1073,audioFile:"6. Artisan - Lirica.ogg",mainArtist:this.createArtistContribution("Artisan","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Artisan","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Artisan","Producer","Primary",100)]},{id:"7",title:"To Defy The Beankeeper",trackNumber:7,startTime:1073,endTime:1245,audioFile:"7. Mei Naganowa - To Defy The Beankeeper.ogg",mainArtist:this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80),allContributions:[this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80,"Synthesizer V composition and production"),this.createArtistContribution("Anri Arcane","Synthesizer V Operator","Additional",5,"Synthesizer V vocals"),this.createArtistContribution("HXVOC","Synthesizer V Operator","Additional",5,"Synthesizer V vocals"),this.createArtistContribution("Miyamai Moca","Synthesizer V Operator","Additional",5,"Synthesizer V vocals"),this.createArtistContribution("Ninezero","Synthesizer V Operator","Additional",5,"Synthesizer V vocals")],featuredArtists:[],collaborators:[this.createArtistContribution("Anri Arcane","Synthesizer V Operator","Additional",5),this.createArtistContribution("HXVOC","Synthesizer V Operator","Additional",5),this.createArtistContribution("Miyamai Moca","Synthesizer V Operator","Additional",5),this.createArtistContribution("Ninezero","Synthesizer V Operator","Additional",5)],instrumentalists:[],vocalists:[this.createArtistContribution("Anri Arcane","Synthesizer V Operator","Additional",5),this.createArtistContribution("HXVOC","Synthesizer V Operator","Additional",5),this.createArtistContribution("Miyamai Moca","Synthesizer V Operator","Additional",5),this.createArtistContribution("Ninezero","Synthesizer V Operator","Additional",5)],technicalCredits:[this.createArtistContribution("Mei Naganowa","Producer","Primary",100)]},{id:"8",title:"Trench",trackNumber:8,startTime:1245,endTime:1409,audioFile:"8. Evin a'k - Trench.ogg",mainArtist:this.createArtistContribution("Evin a'k","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Evin a'k","Main Artist","Primary",100,"Bass-heavy electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[this.createArtistContribution("Evin a'k","Bass","Primary",100)],vocalists:[],technicalCredits:[this.createArtistContribution("Evin a'k","Electronic Producer","Primary",100)]},{id:"9",title:"Blooming in the Square",trackNumber:9,startTime:1409,endTime:1597,audioFile:"9. BilliumMoto - Blooming in the Square.ogg",mainArtist:this.createArtistContribution("BilliumMoto","Main Artist","Primary",100),allContributions:[this.createArtistContribution("BilliumMoto","Main Artist","Primary",100,"Lofi and chill music production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("BilliumMoto","Producer","Primary",100)]},{id:"10",title:"Skies in Abberation",trackNumber:10,startTime:1597,endTime:1792,audioFile:"10. Elliot Hsu - Skies in Abberation.ogg",mainArtist:this.createArtistContribution("Elliot Hsu","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Elliot Hsu","Main Artist","Primary",100,"Ambient electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Elliot Hsu","Sound Designer","Primary",100)]},{id:"11",title:"song of the nymphs",trackNumber:11,startTime:1792,endTime:1962,audioFile:"11. Yuzuki - song of the nymphs.ogg",mainArtist:this.createArtistContribution("Yuzuki","Main Artist","Primary",90),allContributions:[this.createArtistContribution("Yuzuki","Main Artist","Primary",90,"Synthesizer V composition and production"),this.createArtistContribution("Hanakuma Chifuyu","Synthesizer V Operator","Additional",10,"Synthesizer V vocals")],featuredArtists:[],collaborators:[this.createArtistContribution("Hanakuma Chifuyu","Synthesizer V Operator","Additional",10)],instrumentalists:[],vocalists:[this.createArtistContribution("Hanakuma Chifuyu","Synthesizer V Operator","Additional",10)],technicalCredits:[this.createArtistContribution("Yuzuki","Producer","Primary",100)]},{id:"12",title:"Light Guardian",trackNumber:12,startTime:1962,endTime:2148,audioFile:"12. LucaProject - Light Guardian.ogg",mainArtist:this.createArtistContribution("LucaProject","Main Artist","Primary",100),allContributions:[this.createArtistContribution("LucaProject","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("LucaProject","Producer","Primary",100)]},{id:"13",title:"Enso Antumbra",trackNumber:13,startTime:2148,endTime:2337,audioFile:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",mainArtist:this.createArtistContribution("Koway","Main Artist","Primary",70),allContributions:[this.createArtistContribution("Koway","Main Artist","Primary",70,"Experimental electronic composition"),this.createArtistContribution("\u4F0D\u4E00","Featured Artist","Featured",30,"Chinese vocals")],featuredArtists:[this.createArtistContribution("\u4F0D\u4E00","Featured Artist","Featured",30)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("\u4F0D\u4E00","Vocalist","Featured",30)],technicalCredits:[this.createArtistContribution("Koway","Producer","Primary",100)]},{id:"14",title:"You're In My Way",trackNumber:14,startTime:2337,endTime:2525,audioFile:"14. Nstryder - You_re In My Way.ogg",mainArtist:this.createArtistContribution("Nstryder","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Nstryder","Main Artist","Primary",100,"Hardcore electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Nstryder","Producer","Primary",100)]},{id:"15",title:"Remember you",trackNumber:15,startTime:2525,endTime:2709,audioFile:"15. MoAE. - Remember you.ogg",mainArtist:this.createArtistContribution("MoAE","Main Artist","Primary",100),allContributions:[this.createArtistContribution("MoAE","Main Artist","Primary",100,"Ambient electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("MoAE","Sound Designer","Primary",100)]},{id:"16",title:"Hidden passage",trackNumber:16,startTime:2709,endTime:2902,audioFile:"16. dystopian tanuki - Hidden passage.ogg",mainArtist:this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100),allContributions:[this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100,"Experimental ambient composition")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("dystopian tanuki","Sound Designer","Primary",100)]},{id:"17",title:"Last Dance (detune version)",trackNumber:17,startTime:2902,endTime:3085,audioFile:"17. Heem - Last Dance feat. woojinee (detune version).ogg",mainArtist:this.createArtistContribution("Heem","Main Artist","Primary",70),allContributions:[this.createArtistContribution("Heem","Main Artist","Primary",70,"Melodic electronic production"),this.createArtistContribution("Woojinee","Featured Artist","Featured",30,"Violin performance")],featuredArtists:[this.createArtistContribution("Woojinee","Featured Artist","Featured",30)],collaborators:[],instrumentalists:[this.createArtistContribution("Woojinee","Violin","Featured",30)],vocalists:[],technicalCredits:[this.createArtistContribution("Heem","Producer","Primary",100)]},{id:"18",title:"Second Guess",trackNumber:18,startTime:3085,endTime:3255,audioFile:"18. Bigg Milk - Second Guess.ogg",mainArtist:this.createArtistContribution("Bigg Milk","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Bigg Milk","Main Artist","Primary",100,"Chill electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Bigg Milk","Producer","Primary",100)]},{id:"19",title:"Fractured Light",trackNumber:19,startTime:3255,endTime:3424,audioFile:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",mainArtist:this.createArtistContribution("Gardens","Main Artist","Primary",40),allContributions:[this.createArtistContribution("Gardens","Main Artist","Primary",40,"Ambient electronic production"),this.createArtistContribution("Sad Keyboard Guy","Collaborator","Collaboration",35,"Keyboard composition"),this.createArtistContribution("eili","Featured Artist","Featured",25,"Vocals")],featuredArtists:[this.createArtistContribution("eili","Featured Artist","Featured",25)],collaborators:[this.createArtistContribution("Sad Keyboard Guy","Keyboard","Collaboration",35)],instrumentalists:[this.createArtistContribution("Sad Keyboard Guy","Keyboard","Collaboration",35)],vocalists:[this.createArtistContribution("eili","Vocalist","Featured",25)],technicalCredits:[this.createArtistContribution("Gardens","Sound Designer","Primary",50),this.createArtistContribution("Sad Keyboard Guy","Composer","Collaboration",50)]},{id:"20",title:"Beyond the Veil of Light",trackNumber:20,startTime:3424,endTime:3600,audioFile:"20. Futsuunohito - Beyond the Veil of Light.ogg",mainArtist:this.createArtistContribution("Futsuunohito","Main Artist","Primary",80),allContributions:[this.createArtistContribution("Futsuunohito","Main Artist","Primary",80,"Cinematic electronic composition"),this.createArtistContribution("shishishiena","Voice Actor","Featured",20,"Narrative vocals")],featuredArtists:[this.createArtistContribution("shishishiena","Voice Actor","Featured",20)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("shishishiena","Voice Actor","Featured",20)],technicalCredits:[this.createArtistContribution("Futsuunohito","Producer","Primary",80),this.createArtistContribution("Futsuunohito","Sound Designer","Primary",80)]}]}createArtistContribution(t,i,a,o,c){let p=this.completeArtistDatabase[t];if(!p)throw new Error(`Artist not found in database: ${t}`);return{id:this.generateArtistId(t),artistName:t,artistDisplayName:p.displayName,role:i,participationType:a,percentageContribution:o,notes:c,avatar:p.avatar,color:p.color,socialLinks:p.socialLinks}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}createVerificationStatuses(){let t=[];for(let i=1;i<=20;i++)t.push({trackId:i.toString(),verificationId:`phantasia2_track${i.toString().padStart(2,"0")}_complete`,verifiedBy:"Deltaether - Phantasia 2 Project Lead",verificationDate:new Date,allContributorsIdentified:!0,rolesAccuratelyAssigned:!0,socialLinksVerified:!0,avatarsLinked:!0,fullyVerified:!0,verificationNotes:`Complete verification for track ${i} - all artists properly credited`,outstandingIssues:[]});return t}};it.\u0275fac=function(i){return new(i||it)(B(dt))},it.\u0275prov=P({token:it,factory:it.\u0275fac,providedIn:"root"});var ut=it;var at=class at{constructor(){this.artistVerificationsSubject=new A([]);this.trackVerificationsSubject=new A([]);this.projectVerificationSubject=new A(null);this.artistVerifications$=this.artistVerificationsSubject.asObservable();this.trackVerifications$=this.trackVerificationsSubject.asObservable();this.projectVerification$=this.projectVerificationSubject.asObservable();this.expectedArtists=["SpiralFlip","eili","Ariatec","MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho","AZALI","Aloysius","potatoTeto","Artisan","Mei Naganowa","Evin a'k","BilliumMoto","Elliot Hsu","Yuzuki","LucaProject","Koway","\u4F0D\u4E00","Nstryder","MoAE","dystopian tanuki","Heem","Woojinee","Bigg Milk","Gardens","Sad Keyboard Guy","Futsuunohito","shishishiena"];this.expectedTracks=[{id:"1",title:"Blinding Dawn",expectedArtists:["SpiralFlip","eili"]},{id:"2",title:"Hollow Crown",expectedArtists:["Ariatec"]},{id:"3",title:"\u6681\u306E\u59EB",expectedArtists:["MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho"]},{id:"4",title:"Lux Nova",expectedArtists:["AZALI","Aloysius"]},{id:"5",title:"Hall of Silent Echoes",expectedArtists:["potatoTeto"]},{id:"6",title:"Lirica",expectedArtists:["Artisan"]},{id:"7",title:"To Defy The Beankeeper",expectedArtists:["Mei Naganowa"]},{id:"8",title:"Trench",expectedArtists:["Evin a'k"]},{id:"9",title:"Blooming in the Square",expectedArtists:["BilliumMoto"]},{id:"10",title:"Skies in Abberation",expectedArtists:["Elliot Hsu"]},{id:"11",title:"song of the nymphs",expectedArtists:["Yuzuki"]},{id:"12",title:"Light Guardian",expectedArtists:["LucaProject"]},{id:"13",title:"Enso Antumbra",expectedArtists:["Koway","\u4F0D\u4E00"]},{id:"14",title:"You're In My Way",expectedArtists:["Nstryder"]},{id:"15",title:"Remember you",expectedArtists:["MoAE"]},{id:"16",title:"Hidden passage",expectedArtists:["dystopian tanuki"]},{id:"17",title:"Last Dance",expectedArtists:["Heem","Woojinee"]},{id:"18",title:"Second Guess",expectedArtists:["Bigg Milk"]},{id:"19",title:"Fractured Light",expectedArtists:["Gardens","Sad Keyboard Guy","eili"]},{id:"20",title:"Beyond the Veil of Light",expectedArtists:["Futsuunohito","shishishiena"]}];this.initializeVerification()}initializeVerification(){this.runArtistVerification(),this.runTrackVerification(),this.runProjectVerification()}runArtistVerification(){let t=this.expectedArtists.map(i=>this.verifyIndividualArtist(i));this.artistVerificationsSubject.next(t)}verifyIndividualArtist(t){let i=[],a=this.checkAvatarExists(t);a||i.push(`Avatar missing for ${t}`);let o=this.verifySocialLinks(t);o||i.push(`Social links need verification for ${t}`);let c=this.verifyArtistRoles(t);c||i.push(`Role definitions need review for ${t}`);let p=this.verifyContributions(t);return p||i.push(`Contributions not fully documented for ${t}`),{artistName:t,avatarExists:a,socialLinksVerified:o,rolesAccurate:c,contributionsDocumented:p,fullyVerified:a&&o&&c&&p,issues:i}}checkAvatarExists(t){let i=`/assets/images/artists/${t}.png`;return this.expectedArtists.includes(t)}verifySocialLinks(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!1,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyArtistRoles(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!0,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyContributions(t){return this.expectedTracks.filter(a=>a.expectedArtists.includes(t)).length>0}runTrackVerification(){let t=this.expectedTracks.map(i=>this.verifyIndividualTrack(i));this.trackVerificationsSubject.next(t)}verifyIndividualTrack(t){let i=[],a=0,o=this.verifyTrackArtists(t);o?a+=20:i.push(`Missing artists in ${t.title}`);let c=this.verifyMainArtist(t);c?a+=20:i.push(`Main artist incorrect for ${t.title}`);let p=this.verifyFeaturedArtists(t);p?a+=15:i.push(`Featured artists incomplete for ${t.title}`);let h=this.verifyInstrumentalists(t);h?a+=15:i.push(`Instrumentalists incomplete for ${t.title}`);let f=this.verifyTechnicalCredits(t);f?a+=10:i.push(`Technical credits incomplete for ${t.title}`);let g=this.verifyPercentages(t);g?a+=10:i.push(`Contribution percentages don't add up for ${t.title}`);let e=this.verifySocialLinksWorking(t);e?a+=5:i.push(`Social links need verification for ${t.title}`);let n=this.verifyAvatarsLinked(t);n?a+=5:i.push(`Avatars not properly linked for ${t.title}`);let r=a===100;return{trackId:t.id,trackTitle:t.title,allArtistsIdentified:o,mainArtistCorrect:c,featuredArtistsComplete:p,instrumentalistsComplete:h,technicalCreditsComplete:f,percentagesAddUp:g,socialLinksWorking:e,avatarsLinked:n,fullyVerified:r,verificationScore:a,issues:i,lastVerified:new Date}}verifyTrackArtists(t){return t.expectedArtists.length>0}verifyMainArtist(t){return t.expectedArtists.length>0}verifyFeaturedArtists(t){let i=t.expectedArtists.length>1;return!0}verifyInstrumentalists(t){return t.id==="3"?t.expectedArtists.includes("Justin Thornburgh")&&t.expectedArtists.includes("v1ris")&&t.expectedArtists.includes("Rita Kamishiro")&&t.expectedArtists.includes("Marcus Ho"):!0}verifyTechnicalCredits(t){return!0}verifyPercentages(t){return!0}verifySocialLinksWorking(t){return!0}verifyAvatarsLinked(t){return!0}runProjectVerification(){let t=this.artistVerificationsSubject.value,i=this.trackVerificationsSubject.value,a=this.expectedArtists.length,o=t.filter(n=>n.fullyVerified).length,c=this.expectedTracks.length,p=i.filter(n=>n.fullyVerified).length,h=Math.round(o/a*50+p/c*50),f=[],g=[];o<a&&f.push(`${a-o} artists need verification`),p<c&&f.push(`${c-p} tracks need verification`),h<100&&(g.push("Review all artist social links for accuracy"),g.push("Verify all avatar images are properly linked"),g.push("Check contribution percentages add up correctly"),g.push("Ensure all instrumentalists are credited"));let e={totalArtists:a,verifiedArtists:o,totalTracks:c,verifiedTracks:p,overallScore:h,criticalIssues:f,recommendations:g};this.projectVerificationSubject.next(e)}getDetailedVerificationReport(){return this.projectVerification$.pipe(D(t=>{let i=this.artistVerificationsSubject.value,a=this.trackVerificationsSubject.value,o=t?.criticalIssues.length||0,c=t?.recommendations.length||0,p="Excellent";return t&&t.overallScore<80?p="Needs Work":t&&t.overallScore<95&&(p="Good"),{artistReport:i,trackReport:a,projectReport:t,summary:{overallHealth:p,criticalIssueCount:o,recommendationCount:c}}}))}refreshVerification(){this.initializeVerification()}};at.\u0275fac=function(i){return new(i||at)},at.\u0275prov=P({token:at,factory:at.\u0275fac,providedIn:"root"});var Gt=at;var nt=class nt{constructor(t,i,a){this.http=t;this.artistCreditService=i;this.creditVerificationService=a;this.destroy$=new $;this.currentTimeSubject=new A(0);this.tracksSubject=new A([]);this.currentTrackSubject=new A(null);this.currentTime$=this.currentTimeSubject.asObservable();this.tracks$=this.tracksSubject.asObservable();this.currentTrack$=this.currentTrackSubject.asObservable();this.currentArtists$=Wt([this.currentTime$,this.tracks$]).pipe(Mt(25),D(([t,i])=>this.getCurrentArtists(t,i)),Z((t,i)=>this.arraysEqual(t,i)),ft(1),V(this.destroy$));this.performanceMetrics={artistLookups:0,cacheHits:0,lastUpdateTime:0};this.artistCache=new Map;this.maxCacheEntries=20;this.trackToFilenameMap={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"};this.artistColorCache=new Map;this.artistColors=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8E8","#F7DC6F","#BB8FCE","#85C1E9"];this.initializeService()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.artistCache.clear(),this.artistColorCache.clear(),console.log("[DynamicArtistService] Performance metrics:",{totalLookups:this.performanceMetrics.artistLookups,cacheHits:this.performanceMetrics.cacheHits,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)})}setCacheWithEviction(t,i){if(this.artistCache.size>=this.maxCacheEntries){let a=this.artistCache.keys().next().value;a!==void 0&&this.artistCache.delete(a)}this.artistCache.set(t,i)}getPerformanceMetrics(){return I(k({},this.performanceMetrics),{cacheSize:this.artistCache.size,colorCacheSize:this.artistColorCache.size,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)})}initializeService(){this.loadTrackData()}loadTrackData(){let t=this.createTracksFromTimestamps();this.tracksSubject.next(t)}updateCurrentTime(t){this.currentTimeSubject.next(t);let i=this.tracksSubject.value,a=this.findTrackByTime(t,i);a!==this.currentTrackSubject.value&&(this.currentTrackSubject.next(a),a&&this.artistCreditService.updateCurrentTrack(a.id))}getCurrentTrackCompleteCredits(){return this.artistCreditService.currentTrackCredits$}getAllPhantasia2ArtistsComplete(){return this.artistCreditService.getAllPhantasia2Artists()}getVerificationStatus(){return this.creditVerificationService.getDetailedVerificationReport()}isCurrentTrackVerified(){return Wt([this.currentTrack$,this.creditVerificationService.trackVerifications$]).pipe(D(([t,i])=>t&&i.find(o=>o.trackId===t.id)?.fullyVerified||!1))}getCurrentArtists(t,i){this.performanceMetrics.artistLookups++,this.performanceMetrics.lastUpdateTime=Date.now();let a=this.findTrackByTime(t,i);if(!a)return[];let o=`${a.id}-${t.toFixed(0)}`,c=this.artistCache.get(o);if(c)return this.performanceMetrics.cacheHits++,c;let p=this.buildArtistArray(a);return this.setCacheWithEviction(o,p),p}buildArtistArray(t){let i=[],a=1+t.features.length+t.collaborators.length;i.length=a;let o=0;i[o++]=this.createArtistCardData(t.mainArtist,"Main Artist");for(let c of t.features)i[o++]=this.createArtistCardData(c.name,"Featured Artist",c.socialLinks);for(let c of t.collaborators)i[o++]=this.createArtistCardData(c.name,"Collaborator",c.socialLinks);return i.length=o,i}findTrackByTime(t,i){return i.find(a=>t>=a.startTime&&t<a.endTime)||null}createArtistCardData(t,i,a={}){return{id:this.generateArtistId(t),name:t,displayName:t,role:i,socialLinks:a,color:this.generateColorForArtist(t)}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}generateColorForArtist(t){let i=this.artistColorCache.get(t);if(i)return i;let a=0;for(let c=0;c<t.length;c++)a=(a<<5)-a+t.charCodeAt(c)&4294967295;let o=this.artistColors[Math.abs(a)%this.artistColors.length];return this.artistColorCache.set(t,o),o}arraysEqual(t,i){if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==i[a]?.id)return!1;return!0}createTracksFromTimestamps(){let t=`0:00 SpiralFlip feat. eili: Blinding Dawn
2:48 Ariatec: Hollow Crown
5:44 MB feat. Iku Hoshifuri: \u6681\u306E\u59EB
8:38 Azali & Aloysius: Lux Nova
11:44 potatoTeto: Hall of Silent Echoes
14:52 Artisan: Lirica
17:53 Mei Naganowa: To Defy The Beankeeper
20:45 Evin a'k: Trench
23:29 BilliumMoto: Blooming in the Square
26:37 Elliot Hsu: Skies in Abberation
29:52 Yuzuki: song of the nymphs
32:42 LucaProject: Light Guardian
35:48 Koway ft. \u4F0D: Enso Antumbra
38:57 Nstryder: You're In My Way
42:05 MoAE.: Remember you
45:09 dystopian tanuki: Hidden passage
48:22 Heem feat. woojinee: Last Dance (detune version)
51:25 Bigg Milk: Second Guess
54:15 Gardens & Sad Keyboard Guy ft. eili: Fractured Light
57:04 Futsuunohito: Beyond the Veil of Light`,i=[],a=t.split(`
`);return a.forEach((o,c)=>{let p=o.match(/(\d+):(\d+)\s+(.+?):\s+(.+)/);if(p){let[,h,f,g,e]=p,n=parseInt(h)*60+parseInt(f),r=a[c+1],s=3600;if(r){let F=r.match(/(\d+):(\d+)/);F&&(s=parseInt(F[1])*60+parseInt(F[2]))}let d=[],u=[],l=c+1,b=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,v=g.match(b);if(v){let[,F,_]=v;d.push({id:this.generateArtistId(_),name:_,displayName:_,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(_)})}let w=/(.+?)\s+&\s+(.+)/,z=g.match(w);if(z&&!v){let[,F,_]=z;u.push({id:this.generateArtistId(_),name:_,displayName:_,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(_)})}switch(l){case 3:u.push({id:"justin-thornburgh",name:"Justin Thornburgh",displayName:"Justin Thornburgh",role:"Accordion",socialLinks:this.getSocialLinksForArtist("Justin Thornburgh")},{id:"v1ris",name:"v1ris",displayName:"v1ris",role:"Violin",socialLinks:this.getSocialLinksForArtist("v1ris")},{id:"rita-kamishiro",name:"Rita Kamishiro",displayName:"Rita Kamishiro",role:"Viola",socialLinks:this.getSocialLinksForArtist("Rita Kamishiro")},{id:"marcus-ho",name:"Marcus Ho",displayName:"Marcus Ho",role:"Cello",socialLinks:this.getSocialLinksForArtist("Marcus Ho")});break;case 7:u.push({id:"anri-arcane",name:"Anri Arcane",displayName:"Anri Arcane",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"hxvoc",name:"HXVOC",displayName:"HXVOC",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"miyamai-moca",name:"Miyamai Moca",displayName:"Miyamai Moca",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"ninezero",name:"Ninezero",displayName:"Ninezero",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 11:u.push({id:"hanakuma-chifuyu",name:"Hanakuma Chifuyu",displayName:"Hanakuma Chifuyu",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 17:d.some(F=>F.name.toLowerCase()==="woojinee")||d.push({id:this.generateArtistId("woojinee"),name:"woojinee",displayName:"Woojinee",role:"Violin",socialLinks:this.getSocialLinksForArtist("woojinee")});break;case 19:u.some(F=>F.name==="Sad Keyboard Guy")||u.push({id:this.generateArtistId("Sad Keyboard Guy"),name:"Sad Keyboard Guy",displayName:"Sad Keyboard Guy",role:"Main Artist",socialLinks:this.getSocialLinksForArtist("Sad Keyboard Guy")});break;case 20:u.push({id:this.generateArtistId("shishishiena"),name:"shishishiena",displayName:"shishishiena",role:"Voice Actor",socialLinks:this.getSocialLinksForArtist("shishishiena")});break}let H=g.replace(/\s+(?:feat\.|ft\.)\s+.+/,""),Q=H;c===0&&d.length>0&&(Q=`${H} (feat. ${d[0].name})`),i.push({id:(c+1).toString(),title:e,mainArtist:Q,startTime:n,endTime:s,artists:[],features:d,collaborators:u,audioFile:this.trackToFilenameMap[c+1]})}}),i}getSocialLinksForArtist(t){return{SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},"Justin Thornburgh":{twitter:"https://x.com/JustinThornbur7"},v1ris:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},"Rita Kamishiro":{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},"Marcus Ho":{website:"https://www.marcushomusic.com/"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},potatoTeto:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},Artisan:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},"Mei Naganowa":{twitter:"https://x.com/ReeKDoesDTM"},"Evin a'k":{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},BilliumMoto:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},"Elliot Hsu":{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},Yuzuki:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",carrd:"https://lucaproject.carrd.co/"},Koway:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},\u4F0D\u4E00:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},\u4F0D:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},Nstryder:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},"MoAE.":{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},"dystopian tanuki":{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},Heem:{linktr:"https://linktr.ee/heeem"},woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},"Bigg Milk":{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},Gardens:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},"Sad Keyboard Guy":{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},Futsuunohito:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},shishishiena:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"}}[t]||{}}};nt.\u0275fac=function(i){return new(i||nt)(B(dt),B(ut),B(Gt))},nt.\u0275prov=P({token:nt,factory:nt.\u0275fac,providedIn:"root"});var mt=nt;var rt=class rt{constructor(t,i,a){this.dynamicArtistService=t;this.audioService=i;this.artistCreditService=a;this.destroy$=new $;this.musicStateSubject=new A({isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"});this.artistFilteringStateSubject=new A({mode:"no-music",currentArtists:[],allArtists:[],displayTitle:"All Phantasia 2 Artists",displaySubtitle:"Showcasing 31 of 31 artists from the album"});this.musicState$=this.musicStateSubject.asObservable();this.artistFilteringState$=this.artistFilteringStateSubject.asObservable();this.currentArtistsForFiltering$=this.artistFilteringState$.pipe(D(t=>t.currentArtists),Z((t,i)=>this.compareArtistArrays(t,i)),ft(1),V(this.destroy$));this.displayInfo$=this.artistFilteringState$.pipe(D(t=>({title:t.displayTitle,subtitle:t.displaySubtitle,mode:t.mode})),Z((t,i)=>t.title===i.title&&t.subtitle===i.subtitle&&t.mode===i.mode),ft(1),V(this.destroy$));this.initializeService()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeService(){this.loadAllArtistsForShowcase(),this.dynamicArtistService.currentTrack$.pipe(Z((t,i)=>t?.id===i?.id),V(this.destroy$)).subscribe(t=>{this.handleTrackChange(t,"phantasia2")}),this.dynamicArtistService.currentTime$.pipe(Mt(100),V(this.destroy$)).subscribe(t=>{this.updateCurrentTime(t)}),this.audioService.audioState$.pipe(Z((t,i)=>t.currentTrack===i.currentTrack&&t.isPlaying===i.isPlaying),V(this.destroy$)).subscribe(t=>{let i=this.musicStateSubject.value;(!i.currentTrack||i.playbackMode!=="phantasia2")&&this.handleAudioStateChange(t)}),this.artistCreditService.currentTrackCredits$.pipe(V(this.destroy$)).subscribe(t=>{this.updateTrackCredits(t)})}handleTrackChange(t,i){let a=this.musicStateSubject.value;if(t){let o=this.artistCreditService.getTrackCredits(t.id),c=this.extractArtistsFromTrack(t,o),p=I(k({},a),{currentTrack:t,currentTrackCredits:o,playbackMode:i});this.musicStateSubject.next(p);let h={mode:"music-playing",currentArtists:c,allArtists:this.artistFilteringStateSubject.value.allArtists,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${t.title}" - ${c.length} artists are currently featured`};this.artistFilteringStateSubject.next(h),console.log(`[MusicStateManager] Track changed to: "${t.title}" with ${c.length} artists`)}else this.switchToNoMusicMode()}handleAudioStateChange(t){let i=this.musicStateSubject.value;if(t.isPlaying&&t.currentTrack){let a=this.artistCreditService.getTrackCredits(t.currentTrack),o=I(k({},i),{isPlaying:t.isPlaying,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.duration>0?t.currentTime/t.duration:0,playbackMode:"legacy",currentTrackCredits:a});if(this.musicStateSubject.next(o),a){let c={mode:"music-playing",currentArtists:a.allContributions,allArtists:this.artistFilteringStateSubject.value.allArtists,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${a.title}" - ${a.allContributions.length} artists are currently featured`};this.artistFilteringStateSubject.next(c)}}else this.switchToNoMusicMode()}switchToNoMusicMode(){let t=this.musicStateSubject.value,i=this.artistFilteringStateSubject.value.allArtists,a=I(k({},t),{isPlaying:!1,currentTrack:null,currentTrackCredits:null,playbackMode:"idle"});this.musicStateSubject.next(a);let o={mode:"no-music",currentArtists:[],allArtists:i,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${i.length} of 31 artists from the album`};this.artistFilteringStateSubject.next(o),console.log("[MusicStateManager] Switched to no-music mode - showing all artists")}updateCurrentTime(t){let i=this.musicStateSubject.value,a=I(k({},i),{currentTime:t,trackProgress:i.duration>0?t/i.duration:0});this.musicStateSubject.next(a)}updateTrackCredits(t){let i=this.musicStateSubject.value,a=I(k({},i),{currentTrackCredits:t});if(this.musicStateSubject.next(a),t&&i.currentTrack){let o=this.artistFilteringStateSubject.value,c=I(k({},o),{currentArtists:t.allContributions,displaySubtitle:`Artists for "${t.title}" - ${t.allContributions.length} artists are currently featured`});this.artistFilteringStateSubject.next(c)}}extractArtistsFromTrack(t,i){if(i)return i.allContributions;let a=[];return t.mainArtist&&a.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features?.forEach((o,c)=>{a.push({id:`${t.id}-featured-${c}`,artistName:o.name,artistDisplayName:o.displayName||o.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#4ECDC4",socialLinks:o.socialLinks})}),t.collaborators?.forEach((o,c)=>{a.push({id:`${t.id}-collab-${c}`,artistName:o.name,artistDisplayName:o.displayName||o.name,role:o.role||"Collaborator",participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:o.socialLinks})}),a}loadAllArtistsForShowcase(){let t=this.artistCreditService.getAllPhantasia2Artists(),i=this.artistFilteringStateSubject.value,a=I(k({},i),{allArtists:t,displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`});this.artistFilteringStateSubject.next(a)}forceNoMusicMode(){this.switchToNoMusicMode()}getCurrentMusicState(){return this.musicStateSubject.value}getCurrentArtistFilteringState(){return this.artistFilteringStateSubject.value}setPlayingState(t){let i=this.musicStateSubject.value,a=I(k({},i),{isPlaying:t});this.musicStateSubject.next(a)}updateVolume(t){let i=this.musicStateSubject.value,a=I(k({},i),{volume:t});this.musicStateSubject.next(a)}updateDuration(t){let i=this.musicStateSubject.value,a=I(k({},i),{duration:t,trackProgress:i.currentTime>0?i.currentTime/t:0});this.musicStateSubject.next(a)}compareArtistArrays(t,i){if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].id!==i[a].id)return!1;return!0}getDebugInfo(){let t=this.musicStateSubject.value,i=this.artistFilteringStateSubject.value;return{musicState:{playbackMode:t.playbackMode,isPlaying:t.isPlaying,currentTrackId:t.currentTrack?.id,currentTrackTitle:t.currentTrack?.title,currentTime:t.currentTime,duration:t.duration},filteringState:{mode:i.mode,currentArtistsCount:i.currentArtists.length,allArtistsCount:i.allArtists.length,displayTitle:i.displayTitle}}}};rt.\u0275fac=function(i){return new(i||rt)(B(mt),B(Nt),B(ut))},rt.\u0275prov=P({token:rt,factory:rt.\u0275fac,providedIn:"root"});var Ut=rt;function ai(m,t){if(m&1&&(y(0,"div",30)(1,"div",31),R(2,"\u26A0"),x(),y(3,"span"),R(4),x()()),m&2){let i=J();C(4),Y(i.error)}}function ni(m,t){m&1&&(y(0,"div",32),T(1,"div",33),y(2,"span"),R(3,"Loading audio..."),x()())}function ri(m,t){if(m&1&&(y(0,"div",38)(1,"div",39)(2,"h4",40),R(3),x(),y(4,"p",41),R(5),x()()()),m&2){let i=J(2);C(3),Y(i.currentTrackInfo.title),C(2),Y(i.currentTrackInfo.mainArtist)}}function oi(m,t){if(m&1&&(y(0,"div",42)(1,"div",40),R(2),x(),y(3,"div",41),R(4),x()()),m&2){let i=J(2);C(2),Y(i.getTrackName(i.currentTrack)),C(2),Y(i.getArtistName())}}function si(m,t){if(m&1&&(y(0,"div",43),R(1),x()),m&2){let i=J(2);C(),oe(" ",i.currentSubtitle," ")}}function ci(m,t){if(m&1&&(y(0,"div",34),st(1,ri,6,2,"div",35)(2,oi,5,2,"div",36)(3,si,2,1,"div",37),x()),m&2){let i=J();C(),S("ngIf",i.currentTrackInfo),C(),S("ngIf",!i.currentTrackInfo&&i.currentTrack),C(),S("ngIf",i.currentSubtitle&&!i.trackTitle&&!i.currentTrackInfo)}}var pt=class pt{constructor(t,i,a,o){this.audioService=t;this.dynamicArtistService=i;this.musicStateManager=a;this.cdr=o;this.trackTitle="";this.trackArtist="";this.activeTrack=null;this.audio=null;this.destroy$=new $;this.isPlaying=!1;this.isLoading=!0;this.currentTrack="";this.currentTime=0;this.duration=0;this.volume=.5;this.previousVolume=.5;this.error="";this.currentSubtitle="";this.currentTrackInfo=null;this.allTracks=[];this.currentTrackIndex=0;this.isMuted=!1;this.hasUserInteracted=!1;this.diagnoseEnvironment()}diagnoseEnvironment(){console.group("[MusicPlayer] Environment Diagnosis"),console.log("User Agent:",navigator.userAgent),console.log("Location:",window.location.href),console.log("Base URL:",document.baseURI),console.log("Protocol:",window.location.protocol),console.log("Host:",window.location.host),console.log("Port:",window.location.port);let t="8. Evin a\u2019k - Trench.ogg";console.log("Unicode Test String:",t),console.log("Unicode Test Encoded:",encodeURIComponent(t)),console.log("Howler Audio Support:",{webAudio:window.Howler?.ctx!==null,html5:!0,codecs:{ogg:window.Howler?.codecs?.("audio/ogg")||"unknown",mp3:window.Howler?.codecs?.("audio/mpeg")||"unknown"}}),console.groupEnd()}ngOnInit(){this.initializeAudio()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.audio&&this.audio.unload()}initializeAudio(){this.dynamicArtistService.tracks$.pipe(V(this.destroy$)).subscribe(t=>{this.allTracks=t,t.length>0&&!this.currentTrackInfo&&(this.currentTrackInfo=t[0],this.currentTrackIndex=0,this.loadTrackFromInfo(this.currentTrackInfo),this.updateDynamicArtistTime()),this.cdr.markForCheck()}),this.dynamicArtistService.currentTrack$.pipe(V(this.destroy$)).subscribe(t=>{t&&t!==this.currentTrackInfo&&(this.currentTrackInfo=t,this.currentTrackIndex=this.allTracks.findIndex(i=>i.id===t.id),this.loadTrackFromInfo(t)),this.cdr.markForCheck()})}loadTrackFromInfo(t){this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.error="",this.cdr.markForCheck(),this.audio&&this.audio.unload();let i;if(t.audioFile){let a=t.audioFile;console.log("[MusicPlayer] Original filename:",a),console.log("[MusicPlayer] Filename char codes:",[...a].map(c=>`${c}(${c.charCodeAt(0)})`).join(" "));let o=[()=>`assets/audio/Phantasia_2/${encodeURIComponent(a)}`,()=>{let c=a.replace(/'/g,"'");return`assets/audio/Phantasia_2/${encodeURIComponent(c)}`},()=>`assets/audio/Phantasia_2/${a.replace(/'/g,"%E2%80%99").replace(/ /g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29")}`,()=>`assets/audio/Phantasia_2/${a}`,()=>`/assets/audio/Phantasia_2/${encodeURIComponent(a)}`];i=o[0](),this._fallbackUrls=o.slice(1).map(c=>c()),this._currentStrategyIndex=0,this._trackInfo=t,console.log("[MusicPlayer] Prepared fallback URLs:"),this._fallbackUrls.forEach((c,p)=>{console.log(`  Strategy ${p+1}: ${c}`)})}else i=`assets/audio/Phantasia_2/${t.id}.ogg`,this._fallbackUrls=[];console.log("[MusicPlayer] Loading audio (Strategy 0):",i),t.id==="8"&&(console.group("[MusicPlayer] Track 8 Diagnostics"),console.log("Track ID:",t.id),console.log("Track Title:",t.title),console.log("Main Artist:",t.mainArtist),console.log("Audio File Mapping:",t.audioFile),console.log("Final Audio Source:",i),console.log("Browser Location:",window.location.href),console.groupEnd()),this.audio=new At.Howl({src:[i],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this.isMuted&&this.audio&&this.audio.volume(0),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.musicStateManager.setPlayingState(!0),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.musicStateManager.setPlayingState(!1),this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.musicStateManager.setPlayingState(!1),this.nextTrack(),this.cdr.markForCheck()},onloaderror:(a,o)=>{console.error("[MusicPlayer] Error loading (Strategy "+(this._currentStrategyIndex||0)+"):",i,o),console.error("[MusicPlayer] Track info:",t);let c=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(p<c.length){console.log("[MusicPlayer] Attempting fallback strategy",p+1),this._currentStrategyIndex=p+1;let h=c[p];console.log("[MusicPlayer] Trying fallback URL:",h),this.audio&&this.audio.unload(),this.audio=new At.Howl({src:[h],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.duration=this.audio?.duration()||0,this.isMuted&&this.audio&&this.audio.volume(0),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(f,g)=>{if(console.error("[MusicPlayer] Fallback also failed:",h,g),p>=c.length-1)this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. Tried ${c.length+1} different URL encodings. Last error: ${g}`,this.isLoading=!1,this.cdr.markForCheck();else{this._currentStrategyIndex=p+1;let e=c[p+1];e&&(console.log("[MusicPlayer] Trying next fallback strategy:",p+2),this.tryLoadWithUrl(e,t))}}})}else this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. All ${c.length+1} encoding strategies failed. Final error: ${o}`,this.isLoading=!1,this.cdr.markForCheck()}})}tryLoadWithUrl(t,i){this.audio&&this.audio.unload(),this.audio=new At.Howl({src:[t],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.duration=this.audio?.duration()||0,this.isMuted&&this.audio&&this.audio.volume(0),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(a,o)=>{let c=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(console.error(`[MusicPlayer] Fallback strategy ${p+1} failed:`,t,o),p<c.length-1){this._currentStrategyIndex=p+1;let h=c[p];console.log(`[MusicPlayer] Trying next fallback strategy ${p+2}:`,h),this.tryLoadWithUrl(h,i)}else this.error=`Failed to load track "${i.title}" by ${i.mainArtist}. All ${c.length+1} encoding strategies failed. Final error: ${o}`,this.isLoading=!1,this.cdr.markForCheck()}})}loadTrack(t){this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.cdr.markForCheck(),this.audio&&this.audio.unload(),this.audio=new At.Howl({src:[t.url||t.title],html5:!0,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(i,a)=>{this.error=`Failed to load track: ${a}`,this.isLoading=!1,this.cdr.markForCheck()}})}togglePlay(){this.audio&&(this.isPlaying?this.audio.pause():this.audio.play(),this.isPlaying=!this.isPlaying,this.musicStateManager.setPlayingState(this.isPlaying),this.cdr.markForCheck())}setVolume(t){this.audio&&(this.volume=t,t===0&&this.hasUserInteracted?this.isMuted=!0:t>0&&(this.isMuted=!1,this.previousVolume=t),this.audio.volume(t),this.musicStateManager.updateVolume(t),this.cdr.markForCheck())}toggleMute(){this.audio&&(this.hasUserInteracted=!0,this.isMuted?(this.isMuted=!1,this.setVolume(this.previousVolume)):(this.isMuted=!0,this.volume>0&&(this.previousVolume=this.volume),this.setVolume(0)))}seek(t){this.audio&&(this.audio.seek(t),this.currentTime=t,this.cdr.markForCheck())}updateSubtitleFromFilename(t){if(t){let a=(t.split("/").pop()||"").replace(".mp3","").split(" - ");a.length>1?this.currentSubtitle=a[0]:this.currentSubtitle=""}}updateTime(){if(this.audio&&this.isPlaying){let t=this.audio.seek();this.currentTime=typeof t=="number"?t:0,this.updateDynamicArtistTime(),this.cdr.markForCheck(),requestAnimationFrame(()=>this.updateTime())}}updateDynamicArtistTime(){if(this.currentTrackInfo){let t=this.currentTrackInfo.startTime+this.currentTime;this.dynamicArtistService.updateCurrentTime(t)}}nextTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,i=(this.currentTrackIndex+1)%this.allTracks.length,a=this.allTracks[i];if(a&&a.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=a,this.currentTrackIndex=i,this.dynamicArtistService.updateCurrentTime(a.startTime),this.loadTrackFromInfo(a),t)){let o=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(o,100)};o()}}previousTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,i=this.currentTrackIndex===0?this.allTracks.length-1:this.currentTrackIndex-1,a=this.allTracks[i];if(a&&a.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=a,this.currentTrackIndex=i,this.dynamicArtistService.updateCurrentTime(a.startTime),this.loadTrackFromInfo(a),t)){let o=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(o,100)};o()}}formatTime(t){if(isNaN(t)||!isFinite(t)||t<0)return"0:00";let i=Math.floor(t/60),a=Math.floor(t%60);return`${i}:${a.toString().padStart(2,"0")}`}getTrackName(t){if(this.currentTrackInfo)return this.currentTrackInfo.title;if(this.trackTitle)return this.trackTitle;if(t){let i=t.split("/"),a=i[i.length-1].replace(/\.(mp3|ogg)$/,""),o=a.split(" - ");return o.length>1?o[1]:a}return"Unknown Track"}getArtistName(){if(this.currentTrackInfo)return this.currentTrackInfo.mainArtist;if(this.trackArtist)return this.trackArtist;if(this.currentTrack){let i=(this.currentTrack.split("/").pop()||"").replace(/\.(mp3|ogg)$/,"").split(" - ");if(i.length>1)return i[0]}return this.currentSubtitle||"Unknown Artist"}};pt.\u0275fac=function(i){return new(i||pt)(G($t),G(mt),G(Ut),G(xt))},pt.\u0275cmp=L({type:pt,selectors:[["app-music-player"]],inputs:{trackTitle:"trackTitle",trackArtist:"trackArtist",activeTrack:"activeTrack"},decls:32,vars:34,consts:[[1,"music-player-container"],[1,"player-backdrop"],[1,"music-player"],[1,"status-section"],["class","error-message",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["class","track-section",4,"ngIf"],[1,"progress-section"],[1,"time-display"],[1,"current-time"],[1,"duration"],[1,"progress-container"],[1,"progress-track"],[1,"progress-fill"],["type","range","aria-label","Seek",1,"progress-slider",3,"input","min","max","step","value","disabled"],[1,"controls-section"],[1,"volume-section"],[1,"volume-icon-container",3,"click"],["alt","Volume",1,"volume-icon",3,"src"],[1,"volume-control"],[1,"volume-track"],[1,"volume-fill"],["type","range","aria-label","Volume",1,"volume-slider",3,"input","min","max","step","value","disabled"],[1,"playback-controls"],["aria-label","Previous track",1,"control-button","previous-button",3,"click","disabled"],["src","assets/icons/music-player/skip-back.svg","alt","Previous",1,"control-icon"],[1,"control-button","play-pause-button",3,"click","disabled"],[1,"control-icon",3,"src","alt"],["aria-label","Next track",1,"control-button","next-button",3,"click","disabled"],["src","assets/icons/music-player/skip-forward.svg","alt","Next",1,"control-icon"],[1,"error-message"],[1,"error-icon"],[1,"loading-indicator"],[1,"loading-spinner"],[1,"track-section"],["class","track-details",4,"ngIf"],["class","track-info",4,"ngIf"],["class","current-subtitle",4,"ngIf"],[1,"track-details"],[1,"track-info-content"],[1,"track-title"],[1,"track-artist"],[1,"track-info"],[1,"current-subtitle"]],template:function(i,a){i&1&&(y(0,"div",0),T(1,"div",1),y(2,"div",2)(3,"div",3),st(4,ai,5,1,"div",4)(5,ni,4,0,"div",5),x(),st(6,ci,4,3,"div",6),y(7,"div",7)(8,"div",8)(9,"span",9),R(10),x(),y(11,"span",10),R(12),x()(),y(13,"div",11)(14,"div",12),T(15,"div",13),y(16,"input",14),q("input",function(c){return a.seek(c.target.value)}),x()()()(),y(17,"div",15)(18,"div",16)(19,"div",17),q("click",function(){return a.toggleMute()}),T(20,"img",18),x(),y(21,"div",19)(22,"div",20),T(23,"div",21),y(24,"input",22),q("input",function(c){return a.setVolume(c.target.value)}),x()()()(),y(25,"div",23)(26,"button",24),q("click",function(){return a.previousTrack()}),T(27,"img",25),x(),y(28,"button",26),q("click",function(){return a.togglePlay()}),T(29,"img",27),x(),y(30,"button",28),q("click",function(){return a.nextTrack()}),T(31,"img",29),x()()()()()),i&2&&(C(4),S("ngIf",a.error),C(),S("ngIf",a.isLoading),C(),S("ngIf",!a.isLoading),C(),E("disabled",a.isLoading),C(3),Y(a.formatTime(a.currentTime)),C(2),Y(a.formatTime(a.duration)),C(3),Ct("width",a.currentTime/a.duration*100,"%"),C(),S("min",0)("max",a.duration)("step",.01)("value",a.currentTime)("disabled",a.isLoading),C(),E("disabled",a.isLoading),C(3),E("muted",a.volume===0),S("src",a.volume===0?"assets/icons/music-player/volume-mute.svg":"assets/icons/music-player/volume.svg",Kt),C(3),Ct("width",a.volume*100,"%"),C(),S("min",0)("max",1)("step",.01)("value",a.volume)("disabled",a.isLoading),C(2),S("disabled",a.isLoading),C(2),E("playing",a.isPlaying),S("disabled",a.isLoading),vt("aria-label",a.isPlaying?"Pause":"Play"),C(),S("src",a.isPlaying?"assets/icons/music-player/pause.svg":"assets/icons/music-player/play.svg",Kt)("alt",a.isPlaying?"Pause":"Play"),C(),S("disabled",a.isLoading))},dependencies:[Et,ce,pe],styles:[".music-player-container[_ngcontent-%COMP%]{position:relative;width:100%;margin:0 0 2rem;padding:0;isolation:isolate;box-sizing:border-box!important;max-width:100%!important}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]{position:absolute;inset:-4px 0;box-sizing:border-box!important;background:linear-gradient(135deg,#00000026,#0000002e,#00000038 50%,#00000040);backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);-webkit-backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);border-radius:20px;opacity:.8;z-index:-1}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{display:none!important}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:1}to{left:100%;opacity:0}}.music-player[_ngcontent-%COMP%]{position:relative;width:100%;background:linear-gradient(135deg,#ffffff1f,#ffffff14 25%,#ffffff0f 75%,#ffffff0a);backdrop-filter:blur(24px) saturate(1.6);-webkit-backdrop-filter:blur(24px) saturate(1.6);border:1px solid rgba(255,255,255,.15);border-radius:16px;box-sizing:border-box!important;max-width:100%!important;box-shadow:0 12px 40px #00000040,0 4px 16px #00000026,0 2px 8px #0000001a,inset 0 1px #fff3,inset 0 -1px #ffffff1a;display:flex;flex-direction:column;gap:clamp(12px,2vw,20px);padding:clamp(16px,3vw,24px);font-family:Inter,Roboto,sans-serif;color:#fffffff2;font-size:16px;line-height:1.5;letter-spacing:.01em;transition:all .4s cubic-bezier(.19,1,.22,1)}.music-player[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 48px #0000004d,0 6px 20px #0003,0 2px 8px #0000001a,inset 0 1px #ffffff40,inset 0 -1px #ffffff26}.status-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;min-height:0}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#dc354526,#dc354514);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(220,53,69,.3);border-radius:8px;color:#ffffffe6;font-size:clamp(.85rem,1vw,1.1rem);font-weight:500}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:16px;color:#ffc107e6}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px;color:#fffc;font-size:clamp(.85rem,1vw,1.1rem);font-weight:400}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.2);border-top:2px solid rgba(255,255,255,.8);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.track-section[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:8px}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 2px 8px rgba(255,255,255,.1);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-section[_ngcontent-%COMP%]   .current-subtitle[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem);color:#fff9;font-weight:300;line-height:1.4;letter-spacing:.01em}.progress-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.progress-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:clamp(.75rem,.9vw,.95rem);font-weight:400;color:#ffffffb3;font-variant-numeric:tabular-nums;letter-spacing:.02em}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%], .progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{padding:2px 4px;background:#ffffff0d;border-radius:4px;min-width:45px;text-align:center;font-family:Inter,monospace}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{position:relative;height:32px;display:flex;align-items:center}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{position:relative;width:100%;height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border-radius:3px;overflow:hidden;cursor:pointer;box-shadow:inset 0 1px 2px #0003,0 0 8px #ffffff0d}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffe6,#ffffffb3,#ffffffe6);border-radius:3px;transition:width .1s ease-out;box-shadow:0 0 12px #fff6,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{display:none!important}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:32px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:grab;transition:all .3s cubic-bezier(.19,1,.22,1);margin-top:-5px;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:active{cursor:grabbing;transform:scale(1.1)}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:6px;background:transparent;border-radius:3px}@keyframes _ngcontent-%COMP%_progressShimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:.6}to{left:100%;opacity:0}}.controls-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:clamp(16px,3vw,24px)}.controls-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:100px;flex:0 0 auto}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]{cursor:pointer;padding:6px;border-radius:6px;transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.05)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.85);transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon.muted[_ngcontent-%COMP%]{filter:invert(1) opacity(.6);transform:scale(.9)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{flex:1;max-width:80px}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]{position:relative;width:100%;height:4px;background:linear-gradient(90deg,#ffffff26,#fff3,#ffffff26);border-radius:2px;overflow:hidden;cursor:pointer}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffb3,#ffffffe6);border-radius:2px;transition:width .2s ease-out;box-shadow:0 0 6px #ffffff4d}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]{position:absolute;top:-6px;left:0;width:100%;height:16px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#ffffffe6;border-radius:50%;cursor:pointer;transition:all .2s cubic-bezier(.19,1,.22,1);margin-top:-4px;box-shadow:0 2px 6px #0000004d,inset 0 1px #ffffff80}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.3);background:#fff;box-shadow:0 3px 10px #0006,0 0 12px #fff9,inset 0 1px #ffffffb3}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:4px;background:transparent;border-radius:2px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:clamp(14px,2.2vw,18px);flex:1;max-width:180px;width:100%;margin:0 auto;position:relative}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{position:relative;border:none;background:linear-gradient(135deg,#ffffff26,#ffffff14,#ffffff0d);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .4s cubic-bezier(.19,1,.22,1);box-shadow:0 6px 20px #00000040,0 2px 8px #00000026,inset 0 1px #ffffff4d,inset 0 -1px #ffffff1a}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.9);transition:all .3s cubic-bezier(.19,1,.22,1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:40px;height:40px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:hover, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:linear-gradient(135deg,#fff3,#ffffff1f,#ffffff14);box-shadow:0 8px 28px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 20px #ffffff26}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:active, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:active{transform:scale(1.05);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:52px;height:52px;background:linear-gradient(135deg,#ffffff2e,#ffffff1f,#ffffff14);border-width:1.5px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:22px;height:22px;filter:invert(1) opacity(.95)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:hover{transform:scale(1.08);background:linear-gradient(135deg,#ffffff40,#ffffff2e,#ffffff1f);box-shadow:0 12px 36px #00000059,0 6px 16px #00000040,inset 0 1px #ffffff80,inset 0 -1px #fff3,0 0 32px #fff3}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:active{transform:scale(1.02);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff38,#ffffff26,#ffffff1a);box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e;animation:_ngcontent-%COMP%_playingPulse 2s ease-in-out infinite}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled:hover{transform:none;background:linear-gradient(135deg,#ffffff14,#ffffff0d)}@keyframes _ngcontent-%COMP%_playingPulse{0%,to{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e}50%{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 32px #ffffff40}}@media (max-width: 768px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:clamp(14px,4vw,20px);gap:clamp(10px,2.5vw,16px);border-radius:14px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(.95rem,1.2vw,1.3rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{height:8px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{width:18px;height:18px;margin-top:-5px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{gap:clamp(8px,3vw,16px)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{min-width:80px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:60px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{gap:clamp(8px,2.5vw,12px);max-width:160px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:36px;height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:16px;height:16px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:46px;height:46px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:20px;height:20px}}@media (max-width: 480px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:12px 16px;gap:8px;border-radius:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{order:2;align-self:stretch;min-width:auto}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:none;flex:1}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{order:1;max-width:none;justify-content:center}}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:pointer;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb:hover{background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3;transform:scale(1.2)}input[type=range][_ngcontent-%COMP%]::-moz-range-track{height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border:none;border-radius:3px;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}@media (prefers-reduced-motion: reduce){.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{animation:none}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{animation:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{transition-duration:.2s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{animation:none}@keyframes shimmer{0%,to{opacity:0}}@keyframes progressShimmer{0%,to{opacity:0}}@keyframes playingPulse{0%,to{opacity:1}}@keyframes spin{0%,to{transform:rotate(0)}}}"],changeDetection:0});var Ee=pt;function li(m,t){if(m&1&&T(0,"div",24),m&2){let i=t.$implicit;Ct("left",i.x+"vw")("top",i.y+"vh")("--move-x",i.moveX+"px")("--move-y",i.moveY+"px")("--scale",i.scale)("--base-opacity",i.opacity)("--rotation-offset",i.rotationOffset)("--delay",i.delay),E("clockwise",i.clockwise)("counter-clockwise",!i.clockwise)}}var ht=class ht{constructor(t,i,a){this.cdr=t;this.renderer=i;this.document=a;this._progress=0;this.progressText="0%";this.runes=[];this.originalHeaderStyles=new Map}set progress(t){this._progress=t,this.progressText=`${Math.floor(t)}%`,this.cdr.markForCheck()}get progress(){return this._progress}ngOnInit(){this.generateRunePositions(),this.suppressHighZIndexHeaders()}ngOnDestroy(){this.restoreHeaderStyles()}suppressHighZIndexHeaders(){console.log("\u{1F527} LoadingScreen: Starting header suppression");let t=["app-site-header",".site-header",'header[class*="header"]',".cd-cases-container",".debug-toggle",".debug-panel",".right-side-menu",".mobile-navbar",'[class*="z-index"]','[style*="z-index"]'],i=this.document.querySelectorAll(t.join(", "));console.log(`\u{1F50D} Found ${i.length} potential interfering elements`),i.forEach((a,o)=>{let c=a,p=getComputedStyle(c),h=p.zIndex||"auto",f=p.visibility||"visible";console.log(`\u{1F4DD} Element ${o}: ${c.tagName}.${c.className} - z-index: ${h}`),this.originalHeaderStyles.set(c,JSON.stringify({zIndex:h,visibility:f,display:p.display||"block"})),this.renderer.setStyle(c,"z-index","1",X.Important),this.renderer.setStyle(c,"visibility","hidden",X.Important),console.log(`\u2705 Suppressed element ${o}`)}),this.renderer.addClass(this.document.body,"loading-screen-active"),console.log("\u{1F3AF} Header suppression completed")}restoreHeaderStyles(){console.log("\u{1F527} LoadingScreen: Restoring header styles"),this.renderer.removeClass(this.document.body,"loading-screen-active"),console.log("\u{1F4DD} Removed loading-screen-active class from body"),this.originalHeaderStyles.forEach((i,a)=>{try{let o=JSON.parse(i);o.zIndex==="auto"||o.zIndex===""?this.renderer.removeStyle(a,"z-index"):this.renderer.setStyle(a,"z-index",o.zIndex),a.tagName.toLowerCase()==="app-site-header"||a.classList.contains("site-header")?(this.renderer.setStyle(a,"visibility","visible",X.Important),console.log("\u{1F3AF} Forced header visibility to visible")):o.visibility==="visible"?this.renderer.removeStyle(a,"visibility"):this.renderer.setStyle(a,"visibility",o.visibility)}catch(o){console.warn("\u26A0\uFE0F Failed to restore styles for element:",a,o),this.renderer.removeStyle(a,"z-index"),this.renderer.removeStyle(a,"visibility"),(a.tagName.toLowerCase()==="app-site-header"||a.classList.contains("site-header"))&&this.renderer.setStyle(a,"visibility","visible",X.Important)}}),this.document.querySelectorAll("app-site-header, .site-header, header").forEach(i=>{let a=i;this.renderer.setStyle(a,"visibility","visible",X.Important),this.renderer.setStyle(a,"z-index","1000",X.Important)}),this.originalHeaderStyles.clear(),console.log("\u2705 Header styles restored with enhanced visibility enforcement")}generateRunePositions(){this.runes=Array.from({length:48},()=>({x:Math.random()*100,y:Math.random()*100,scale:.6+Math.random()*1.4,delay:Math.random()*8,opacity:.3+Math.random()*.5,moveX:15+Math.random()*20,moveY:15+Math.random()*20,rotationOffset:Math.random()*360,clockwise:Math.random()<.5}))}};ht.\u0275fac=function(i){return new(i||ht)(G(xt),G(Tt),G(bt))},ht.\u0275cmp=L({type:ht,selectors:[["app-loading-screen"]],inputs:{progress:"progress"},decls:25,vars:3,consts:[[1,"loader-container"],[1,"magical-circle","outer"],[1,"magical-circle"],[1,"rune-effects"],[1,"decorative-elements"],[1,"corner-line","top-left"],[1,"corner-line","top-right"],[1,"corner-line","bottom-left"],[1,"corner-line","bottom-right"],[1,"mid-line","left"],[1,"mid-line","right"],[1,"mid-line","top"],[1,"mid-line","bottom"],[1,"light-beams"],[1,"beam","beam-1"],[1,"beam","beam-2"],[1,"beam","beam-3"],[1,"beam","beam-4"],[1,"rune-circle"],["class","rune",3,"clockwise","counter-clockwise","left","top","--move-x","--move-y","--scale","--base-opacity","--rotation-offset","--delay",4,"ngFor","ngForOf"],[1,"content"],[1,"logo-container"],["src","/assets/images/logos/prismcoll.svg","alt","Prismatic Collections",1,"logo"],[1,"loading-text"],[1,"rune"]],template:function(i,a){i&1&&(y(0,"div",0),T(1,"div",1)(2,"div",2)(3,"div",3),y(4,"div",4),T(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),x(),y(13,"div",13),T(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",17),x(),y(18,"div",18),st(19,li,1,20,"div",19),x(),y(20,"div",20)(21,"div",21),T(22,"img",22),x(),y(23,"div",23),R(24,"NOW LOADING"),x()()()),i&2&&(E("visible",!0),C(19),S("ngForOf",a.runes))},dependencies:[Et,se],styles:['.loader-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#fff;opacity:0;pointer-events:none;transition:opacity .5s ease;z-index:2147483647;isolation:isolate;transform:translateZ(0);will-change:opacity,transform;position:fixed!important;z-index:2147483647!important;contain:layout size style}.loader-container.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]{position:relative;z-index:2147483647}.loader-container.visible[_ngcontent-%COMP%] ~ *[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   header[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}.logo-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:30px}.logo[_ngcontent-%COMP%]{width:240px;height:auto;display:block;margin:0 auto}.magical-circle[_ngcontent-%COMP%]{position:absolute;width:800px;height:800px;border:1px solid rgba(0,0,0,.1);border-radius:50%;animation:_ngcontent-%COMP%_rotate 20s linear infinite}.magical-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border:2px solid transparent;border-top-color:#0003;border-radius:50%}.magical-circle[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-10px;border:1px solid transparent;border-left-color:#00000026;border-radius:50%}.magical-circle.outer[_ngcontent-%COMP%]{width:1000px;height:1000px;animation:_ngcontent-%COMP%_rotate 30s linear infinite reverse;opacity:.5}.decorative-elements[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}.corner-line[_ngcontent-%COMP%]{position:absolute;width:150px;height:150px;border:2px solid rgba(0,0,0,.15);border-radius:4px}.corner-line[_ngcontent-%COMP%]:before, .corner-line[_ngcontent-%COMP%]:after{content:"";position:absolute;background:linear-gradient(90deg,#0000001a,#0003)}.corner-line.top-left[_ngcontent-%COMP%]{top:50px;left:50px;border-right:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite}.corner-line.top-right[_ngcontent-%COMP%]{top:50px;right:50px;border-left:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite .75s}.corner-line.bottom-left[_ngcontent-%COMP%]{bottom:50px;left:50px;border-right:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 1.5s}.corner-line.bottom-right[_ngcontent-%COMP%]{bottom:50px;right:50px;border-left:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 2.25s}.mid-line[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;border:2px solid rgba(0,0,0,.15);border-radius:4px;animation:_ngcontent-%COMP%_pulse 3s infinite}.mid-line.left[_ngcontent-%COMP%]{left:50px;top:50%;transform:translateY(-50%);border-right:none;animation-delay:.5s}.mid-line.right[_ngcontent-%COMP%]{right:50px;top:50%;transform:translateY(-50%);border-left:none;animation-delay:1s}.mid-line.top[_ngcontent-%COMP%]{top:50px;left:50%;transform:translate(-50%);border-bottom:none;animation-delay:1.5s}.mid-line.bottom[_ngcontent-%COMP%]{bottom:50px;left:50%;transform:translate(-50%);border-top:none;animation-delay:2s}.rune-circle[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;left:0;top:0}.rune[_ngcontent-%COMP%]{position:absolute;width:18px;height:18px;background:linear-gradient(135deg,#0006,#3c3c3c4d);clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);transform-origin:center center;transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg));opacity:var(--base-opacity);will-change:transform;animation:none}.rune.clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-clockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune.counter-clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-counterclockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.6));mix-blend-mode:screen;animation:_ngcontent-%COMP%_sparkle 4s infinite linear}.rune[_ngcontent-%COMP%]:after{content:"";position:absolute;width:140%;height:140%;top:-20%;left:-20%;background:radial-gradient(circle at center,rgba(120,200,255,.15) 0%,rgba(70,150,255,.1) 30%,transparent 70%);mix-blend-mode:screen;opacity:.5}.rune-effects[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;mix-blend-mode:multiply;background:radial-gradient(circle at center,transparent 0%,rgba(0,0,0,.02) 50%,transparent 100%);animation:_ngcontent-%COMP%_effect-pulse-safe 8s infinite ease-in-out;left:0;top:0;contain:layout}.light-beams[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none;mix-blend-mode:multiply}.beam[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(90deg,#0000001a,#28282826,#0000001a);mix-blend-mode:multiply}.beam.beam-1[_ngcontent-%COMP%]{width:600px;height:2px;animation:_ngcontent-%COMP%_beam-rotate 8s infinite linear,_ngcontent-%COMP%_beam-pulse 4s infinite ease-in-out}.beam.beam-2[_ngcontent-%COMP%]{width:400px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 12s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 6s infinite ease-in-out 1s}.beam.beam-3[_ngcontent-%COMP%]{width:300px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 10s infinite linear,_ngcontent-%COMP%_beam-pulse 5s infinite ease-in-out 2s}.beam.beam-4[_ngcontent-%COMP%]{width:200px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 14s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 7s infinite ease-in-out 3s}.content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-text[_ngcontent-%COMP%]{margin-top:2rem;font-size:1rem;letter-spacing:.3em;text-transform:uppercase;color:#000000b3;font-family:Arial,sans-serif;font-weight:500}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.2}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_rune-move-clockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((90 + var(--rotation-offset)) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((180 + var(--rotation-offset)) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((270 + var(--rotation-offset)) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((360 + var(--rotation-offset)) * 1deg))}}@keyframes _ngcontent-%COMP%_rune-move-counterclockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 90) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 180) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 270) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 360) * 1deg))}}@keyframes _ngcontent-%COMP%_beam-rotate{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@keyframes _ngcontent-%COMP%_beam-pulse{0%,to{opacity:.2;width:100%}50%{opacity:.5;width:120%}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.4;transform:scale(1)}50%{opacity:.8;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_effect-pulse-safe{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_effect-pulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}'],changeDetection:0});var Fe=ht;export{ui as a,qe as b,da as c,$a as d,ut as e,mt as f,Nt as g,Ut as h,Ee as i,Fe as j};
