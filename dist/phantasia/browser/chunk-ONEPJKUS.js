import{a as D}from"./chunk-FDXNLMBA.js";import"./chunk-INV6E4XJ.js";import{i as T,j as w,k as I}from"./chunk-I6DLYWHU.js";import{$ as k,$a as d,Aa as n,Ga as y,Gb as O,M as b,Ma as C,Qa as h,a as g,aa as x,ab as o,b as f,bb as r,cb as p,ib as M,jb as P,l as v,lb as u,pb as _,qb as m,sb as a,tb as l,wa as S}from"./chunk-PVBC43KC.js";function A(s,i){if(s&1){let e=M();o(0,"div",12),P("click",function(){let z=k(e).$implicit,$=u();return x($.togglePlayPause(z))}),o(1,"div",13),a(2),r(),o(3,"div",14)(4,"div",15),a(5),r(),o(6,"div",16),a(7),r()(),o(8,"div",17)(9,"button",18),p(10,"i",19),r()()()}if(s&2){let e=i.$implicit,t=u();m("active",(t.playerState.currentTrack==null?null:t.playerState.currentTrack.id)===e.id),n(2),l(e.id),n(3),l(e.title),n(2),l(e.duration),n(2),m("playing",t.playerState.isPlaying&&(t.playerState.currentTrack==null?null:t.playerState.currentTrack.id)===e.id),n(),m("play",!(t.playerState.isPlaying&&(t.playerState.currentTrack==null?null:t.playerState.currentTrack.id)===e.id))("pause",t.playerState.isPlaying&&(t.playerState.currentTrack==null?null:t.playerState.currentTrack.id)===e.id)}}function j(s,i){if(s&1&&(o(0,"div",20)(1,"div",21),p(2,"div",22),r()()),s&2){let e=u();n(2),_("width",e.playerState.progress,"%")}}var c=class c{constructor(i,e){this.audioService=i;this.cdr=e;this.destroy$=new v;this.isDebugMode=!1;this.albumInfo={title:"Phantasia",artist:"Project Phantasia",coverSrc:"assets/images/album-covers/phantasia-cover.jpg",releaseYear:"2023"};this.playerState={currentTrack:null,isPlaying:!1,progress:0};this.tracks=[{id:1,title:"Intro - Digital Dawn",duration:"1:30",audioSrc:"assets/audio/tracks/intro.mp3"},{id:2,title:"Neon Dreams",duration:"3:45",audioSrc:"assets/audio/tracks/neon-dreams.mp3"},{id:3,title:"Cyber Pulse",duration:"4:12",audioSrc:"assets/audio/tracks/cyber-pulse.mp3"},{id:4,title:"Quantum Echoes",duration:"5:20",audioSrc:"assets/audio/tracks/quantum-echoes.mp3"},{id:5,title:"Virtual Horizon",duration:"3:58",audioSrc:"assets/audio/tracks/virtual-horizon.mp3"},{id:6,title:"Holographic Memories",duration:"4:30",audioSrc:"assets/audio/tracks/holographic-memories.mp3"},{id:7,title:"Synth Cascade",duration:"3:15",audioSrc:"assets/audio/tracks/synth-cascade.mp3"},{id:8,title:"Outro - Digital Sunset",duration:"2:10",audioSrc:"assets/audio/tracks/outro.mp3"}]}ngOnInit(){this.isDebugMode&&console.log("[MobileMusicComponent] Initializing component"),this.setupAudioServiceSubscriptions()}setupAudioServiceSubscriptions(){this.audioService.currentTrack$.pipe(b(this.destroy$)).subscribe(i=>{this.isDebugMode&&console.log(`[MobileMusicComponent] Track changed: ${i}`);let e=this.tracks.find(t=>t.audioSrc===i);this.playerState=f(g({},this.playerState),{currentTrack:e||null}),this.cdr.markForCheck()}),this.audioService.getCurrentState().pipe(b(this.destroy$)).subscribe(i=>{this.isDebugMode&&console.log("[MobileMusicComponent] Audio state updated:",i),this.playerState=f(g({},this.playerState),{isPlaying:i.isPlaying,progress:i.progress}),this.cdr.markForCheck()})}togglePlayPause(i){let e=this.playerState.currentTrack?.id===i.id;this.isDebugMode&&console.log(`[MobileMusicComponent] Toggle play/pause for track ${i.id}. Current track: ${e}`),e?this.audioService.togglePlay():this.audioService.playTrack(i.audioSrc)}ngOnDestroy(){this.isDebugMode&&console.log("[MobileMusicComponent] Destroying component"),this.destroy$.next(),this.destroy$.complete()}};c.\u0275fac=function(e){return new(e||c)(y(D),y(O))},c.\u0275cmp=C({type:c,selectors:[["app-mobile-music"]],decls:16,vars:7,consts:[[1,"music-player-container"],[1,"album-info"],[1,"album-cover"],[1,"cover-image",3,"src","alt"],[1,"album-details"],[1,"album-title"],[1,"album-artist"],[1,"album-year"],[1,"tracks-list"],[1,"tracks-heading"],["class","track-item",3,"active","click",4,"ngFor","ngForOf"],["class","progress-container",4,"ngIf"],[1,"track-item",3,"click"],[1,"track-number"],[1,"track-info"],[1,"track-title"],[1,"track-duration"],[1,"track-controls"],[1,"play-button"],[1,"icon"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),r(),o(4,"div",4)(5,"h1",5),a(6),r(),o(7,"h2",6),a(8),r(),o(9,"p",7),a(10),r()()(),o(11,"div",8)(12,"h3",9),a(13,"Tracks"),r(),h(14,A,11,11,"div",10),r(),h(15,j,3,2,"div",11),r()),e&2&&(n(3),d("src",t.albumInfo.coverSrc,S)("alt",t.albumInfo.title),n(3),l(t.albumInfo.title),n(2),l(t.albumInfo.artist),n(2),l(t.albumInfo.releaseYear),n(4),d("ngForOf",t.tracks),n(),d("ngIf",t.playerState.currentTrack))},dependencies:[I,T,w],styles:[".music-player-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:linear-gradient(to bottom,#121212,#000);color:#fff;padding:20px;overflow-y:auto;-webkit-overflow-scrolling:touch}.album-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;margin-bottom:30px}.album-cover[_ngcontent-%COMP%]{width:200px;height:200px;margin-bottom:20px;box-shadow:0 10px 30px #0000004d;border-radius:8px;overflow:hidden}.cover-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.album-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0 0 5px}.album-artist[_ngcontent-%COMP%]{font-size:18px;font-weight:400;color:#aaa;margin:0 0 5px}.album-year[_ngcontent-%COMP%]{font-size:14px;color:#888;margin:0}.tracks-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 15px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,.1)}.tracks-list[_ngcontent-%COMP%]{flex:1}.track-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 0;border-bottom:1px solid rgba(255,255,255,.05);cursor:pointer;transition:background-color .2s}.track-item[_ngcontent-%COMP%]:hover, .track-item.active[_ngcontent-%COMP%]{background-color:#ffffff0d}.track-number[_ngcontent-%COMP%]{flex:0 0 40px;font-size:16px;text-align:center;color:#888}.track-info[_ngcontent-%COMP%]{flex:1;margin-right:15px}.track-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:5px}.track-duration[_ngcontent-%COMP%]{font-size:14px;color:#888}.track-controls[_ngcontent-%COMP%]{flex:0 0 40px}.play-button[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#ffffff1a;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .2s,background-color .2s}.play-button[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.play-button.playing[_ngcontent-%COMP%]{background:#1db954}.icon[_ngcontent-%COMP%]{display:inline-block;width:0;height:0;position:relative}.icon.play[_ngcontent-%COMP%]{border-style:solid;border-width:8px 0 8px 12px;border-color:transparent transparent transparent #fff;margin-left:3px}.icon.pause[_ngcontent-%COMP%]{width:12px;height:14px;border-style:solid;border-width:0 4px;border-color:transparent #fff}.progress-container[_ngcontent-%COMP%]{margin-top:20px;padding:0 10px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#ffffff1a;border-radius:2px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:#1db954;transition:width .2s}"],changeDetection:0});var E=c;export{E as MobileMusicComponent};
