import{c as yt,d as rt,f as $,g as ot,h as st,i as we,j as Oe}from"./chunk-W6LHCHNP.js";import{a as Ue,b as We,c as qt,d as oe,e as se,f as Ke,g as ce,h as Z,i as Ye,j as Nt}from"./chunk-JCISJ2DZ.js";import{a as re,b as Ge}from"./chunk-TSLSWDCS.js";import{A as Ve,Aa as b,B as ze,Ba as O,C as D,Ea as ae,Fa as it,G as j,Ga as R,H as pt,I as ht,Ia as A,J as V,Ja as At,K as F,Ka as kt,M as tt,N as et,Oa as W,Pa as H,Q as Jt,Qa as Kt,R as Ut,Ra as M,Sa as B,T as U,Ta as at,W as te,Y as Be,_a as ut,a as w,aa as gt,ab as Yt,b as E,bb as Rt,ca as v,cb as Pe,d as yi,da as xt,e as _i,f as J,fa as He,fb as ne,ga as ee,gb as bt,ha as z,hb as nt,i as G,j as P,ka as N,l as Ne,la as ft,lb as vt,ma as Wt,n as I,na as ie,o as Lt,oa as T,pb as $e,qa as jt,t as mt,ta as Y,v as Q,wa as Ae,xa as ke,y as Mt,ya as C,za as f}from"./chunk-22ZSL6GC.js";var di=yi(be=>{"use strict";(function(){"use strict";var c=function(){this.init()};c.prototype={init:function(){var a=this||t;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var n=this||t;if(a=parseFloat(a),n.ctx||x(),typeof a<"u"&&a>=0&&a<=1){if(n._volume=a,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(a,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var l=n._howls[o]._getSoundIds(),u=0;u<l.length;u++){var m=n._howls[o]._soundById(l[u]);m&&m._node&&(m._node.volume=m._volume*a)}return n}return n._volume},mute:function(a){var n=this||t;n.ctx||x(),n._muted=a,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(a?0:n._volume,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var l=n._howls[o]._getSoundIds(),u=0;u<l.length;u++){var m=n._howls[o]._soundById(l[u]);m&&m._node&&(m._node.muted=a?!0:m._muted)}return n},stop:function(){for(var a=this||t,n=0;n<a._howls.length;n++)a._howls[n].stop();return a},unload:function(){for(var a=this||t,n=a._howls.length-1;n>=0;n--)a._howls[n].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,x()),a},codecs:function(a){return(this||t)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||t;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var n=new Audio;typeof n.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var n=new Audio;n.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||t,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return a}if(!n||typeof n.canPlayType!="function")return a;var o=n.canPlayType("audio/mpeg;").replace(/^no$/,""),l=a._navigator?a._navigator.userAgent:"",u=l.match(/OPR\/(\d+)/g),m=u&&parseInt(u[0].split("/")[1],10)<33,d=l.indexOf("Safari")!==-1&&l.indexOf("Chrome")===-1,y=l.match(/Version\/(.*?) /),_=d&&y&&parseInt(y[1],10)<15;return a._codecs={mp3:!!(!m&&(o||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!o,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||t;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var n=function(o){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var l=new Audio;l._unlocked=!0,a._releaseHtml5Audio(l)}catch{a.noAudio=!0;break}for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var m=a._howls[u]._getSoundIds(),d=0;d<m.length;d++){var y=a._howls[u]._soundById(m[d]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}a._autoResume();var _=a.ctx.createBufferSource();_.buffer=a._scratchBuffer,_.connect(a.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),_.onended=function(){_.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var S=0;S<a._howls.length;S++)a._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),a}},_obtainHtml5Audio:function(){var a=this||t;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var n=new Audio().play();return n&&typeof Promise<"u"&&(n instanceof Promise||typeof n.then=="function")&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var n=this||t;return a._unlocked&&n._html5AudioPool.push(a),n},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!t.usingWebAudio)){for(var n=0;n<a._howls.length;n++)if(a._howls[n]._webAudio){for(var o=0;o<a._howls[n]._sounds.length;o++)if(!a._howls[n]._sounds[o]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(a.autoSuspend){a._suspendTimer=null,a.state="suspending";var l=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(l,l)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!t.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var n=0;n<a._howls.length;n++)a._howls[n]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var t=new c,e=function(a){var n=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(a)};e.prototype={init:function(a){var n=this;return t.ctx||x(),n._autoplay=a.autoplay||!1,n._format=typeof a.format!="string"?a.format:[a.format],n._html5=a.html5||!1,n._muted=a.mute||!1,n._loop=a.loop||!1,n._pool=a.pool||5,n._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,n._rate=a.rate||1,n._sprite=a.sprite||{},n._src=typeof a.src!="string"?a.src:[a.src],n._volume=a.volume!==void 0?a.volume:1,n._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=a.onend?[{fn:a.onend}]:[],n._onfade=a.onfade?[{fn:a.onfade}]:[],n._onload=a.onload?[{fn:a.onload}]:[],n._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],n._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],n._onpause=a.onpause?[{fn:a.onpause}]:[],n._onplay=a.onplay?[{fn:a.onplay}]:[],n._onstop=a.onstop?[{fn:a.onstop}]:[],n._onmute=a.onmute?[{fn:a.onmute}]:[],n._onvolume=a.onvolume?[{fn:a.onvolume}]:[],n._onrate=a.onrate?[{fn:a.onrate}]:[],n._onseek=a.onseek?[{fn:a.onseek}]:[],n._onunlock=a.onunlock?[{fn:a.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n._preload!=="none"&&n.load(),n},load:function(){var a=this,n=null;if(t.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var o=0;o<a._src.length;o++){var l,u;if(a._format&&a._format[o])l=a._format[o];else{if(u=a._src[o],typeof u!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}l=/^data:audio\/([^;,]+);/i.exec(u),l||(l=/\.([^.]+)$/.exec(u.split("?",1)[0])),l&&(l=l[1].toLowerCase())}if(l||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),l&&t.codecs(l)){n=a._src[o];break}}if(!n){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=n,a._state="loading",window.location.protocol==="https:"&&n.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new i(a),a._webAudio&&s(a),a},play:function(a,n){var o=this,l=null;if(typeof a=="number")l=a,a=null;else{if(typeof a=="string"&&o._state==="loaded"&&!o._sprite[a])return null;if(typeof a>"u"&&(a="__default",!o._playLock)){for(var u=0,m=0;m<o._sounds.length;m++)o._sounds[m]._paused&&!o._sounds[m]._ended&&(u++,l=o._sounds[m]._id);u===1?a=null:l=null}}var d=l?o._soundById(l):o._inactiveSound();if(!d)return null;if(l&&!a&&(a=d._sprite||"__default"),o._state!=="loaded"){d._sprite=a,d._ended=!1;var y=d._id;return o._queue.push({event:"play",action:function(){o.play(y)}}),y}if(l&&!d._paused)return n||o._loadQueue("play"),d._id;o._webAudio&&t._autoResume();var _=Math.max(0,d._seek>0?d._seek:o._sprite[a][0]/1e3),S=Math.max(0,(o._sprite[a][0]+o._sprite[a][1])/1e3-_),q=S*1e3/Math.abs(d._rate),dt=o._sprite[a][0]/1e3,Ct=(o._sprite[a][0]+o._sprite[a][1])/1e3;d._sprite=a,d._ended=!1;var K=function(){d._paused=!1,d._seek=_,d._start=dt,d._stop=Ct,d._loop=!!(d._loop||o._sprite[a][2])};if(_>=Ct){o._ended(d);return}var k=d._node;if(o._webAudio){var Le=function(){o._playLock=!1,K(),o._refreshBuffer(d);var Ft=d._muted||o._muted?0:d._volume;k.gain.setValueAtTime(Ft,t.ctx.currentTime),d._playStart=t.ctx.currentTime,typeof k.bufferSource.start>"u"?d._loop?k.bufferSource.noteGrainOn(0,_,86400):k.bufferSource.noteGrainOn(0,_,S):d._loop?k.bufferSource.start(0,_,86400):k.bufferSource.start(0,_,S),q!==1/0&&(o._endTimers[d._id]=setTimeout(o._ended.bind(o,d),q)),n||setTimeout(function(){o._emit("play",d._id),o._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Le():(o._playLock=!0,o.once("resume",Le),o._clearTimer(d._id))}else{var je=function(){k.currentTime=_,k.muted=d._muted||o._muted||t._muted||k.muted,k.volume=d._volume*t.volume(),k.playbackRate=d._rate;try{var Ft=k.play();if(Ft&&typeof Promise<"u"&&(Ft instanceof Promise||typeof Ft.then=="function")?(o._playLock=!0,K(),Ft.then(function(){o._playLock=!1,k._unlocked=!0,n?o._loadQueue():o._emit("play",d._id)}).catch(function(){o._playLock=!1,o._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),d._ended=!0,d._paused=!0})):n||(o._playLock=!1,K(),o._emit("play",d._id)),k.playbackRate=d._rate,k.paused){o._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||d._loop?o._endTimers[d._id]=setTimeout(o._ended.bind(o,d),q):(o._endTimers[d._id]=function(){o._ended(d),k.removeEventListener("ended",o._endTimers[d._id],!1)},k.addEventListener("ended",o._endTimers[d._id],!1))}catch(vi){o._emit("playerror",d._id,vi)}};k.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(k.src=o._src,k.load());var bi=window&&window.ejecta||!k.readyState&&t._navigator.isCocoonJS;if(k.readyState>=3||bi)je();else{o._playLock=!0,o._state="loading";var Re=function(){o._state="loaded",je(),k.removeEventListener(t._canPlayEvent,Re,!1)};k.addEventListener(t._canPlayEvent,Re,!1),o._clearTimer(d._id)}}return d._id},pause:function(a){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(a)}}),n;for(var o=n._getSoundIds(a),l=0;l<o.length;l++){n._clearTimer(o[l]);var u=n._soundById(o[l]);if(u&&!u._paused&&(u._seek=n.seek(o[l]),u._rateSeek=0,u._paused=!0,n._stopFade(o[l]),u._node))if(n._webAudio){if(!u._node.bufferSource)continue;typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),n._cleanBuffer(u._node)}else(!isNaN(u._node.duration)||u._node.duration===1/0)&&u._node.pause();arguments[1]||n._emit("pause",u?u._id:null)}return n},stop:function(a,n){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(a)}}),o;for(var l=o._getSoundIds(a),u=0;u<l.length;u++){o._clearTimer(l[u]);var m=o._soundById(l[u]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,o._stopFade(l[u]),m._node&&(o._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),o._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&o._clearSound(m._node))),n||o._emit("stop",m._id))}return o},mute:function(a,n){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(a,n)}}),o;if(typeof n>"u")if(typeof a=="boolean")o._muted=a;else return o._muted;for(var l=o._getSoundIds(n),u=0;u<l.length;u++){var m=o._soundById(l[u]);m&&(m._muted=a,m._interval&&o._stopFade(m._id),o._webAudio&&m._node?m._node.gain.setValueAtTime(a?0:m._volume,t.ctx.currentTime):m._node&&(m._node.muted=t._muted?!0:a),o._emit("mute",m._id))}return o},volume:function(){var a=this,n=arguments,o,l;if(n.length===0)return a._volume;if(n.length===1||n.length===2&&typeof n[1]>"u"){var u=a._getSoundIds(),m=u.indexOf(n[0]);m>=0?l=parseInt(n[0],10):o=parseFloat(n[0])}else n.length>=2&&(o=parseFloat(n[0]),l=parseInt(n[1],10));var d;if(typeof o<"u"&&o>=0&&o<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,n)}}),a;typeof l>"u"&&(a._volume=o),l=a._getSoundIds(l);for(var y=0;y<l.length;y++)d=a._soundById(l[y]),d&&(d._volume=o,n[2]||a._stopFade(l[y]),a._webAudio&&d._node&&!d._muted?d._node.gain.setValueAtTime(o,t.ctx.currentTime):d._node&&!d._muted&&(d._node.volume=o*t.volume()),a._emit("volume",d._id))}else return d=l?a._soundById(l):a._sounds[0],d?d._volume:0;return a},fade:function(a,n,o,l){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"fade",action:function(){u.fade(a,n,o,l)}}),u;a=Math.min(Math.max(0,parseFloat(a)),1),n=Math.min(Math.max(0,parseFloat(n)),1),o=parseFloat(o),u.volume(a,l);for(var m=u._getSoundIds(l),d=0;d<m.length;d++){var y=u._soundById(m[d]);if(y){if(l||u._stopFade(m[d]),u._webAudio&&!y._muted){var _=t.ctx.currentTime,S=_+o/1e3;y._volume=a,y._node.gain.setValueAtTime(a,_),y._node.gain.linearRampToValueAtTime(n,S)}u._startFadeInterval(y,a,n,o,m[d],typeof l>"u")}}return u},_startFadeInterval:function(a,n,o,l,u,m){var d=this,y=n,_=o-n,S=Math.abs(_/.01),q=Math.max(4,S>0?l/S:l),dt=Date.now();a._fadeTo=o,a._interval=setInterval(function(){var Ct=(Date.now()-dt)/l;dt=Date.now(),y+=_*Ct,y=Math.round(y*100)/100,_<0?y=Math.max(o,y):y=Math.min(o,y),d._webAudio?a._volume=y:d.volume(y,a._id,!0),m&&(d._volume=y),(o<n&&y<=o||o>n&&y>=o)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,d.volume(o,a._id),d._emit("fade",a._id))},q)},_stopFade:function(a){var n=this,o=n._soundById(a);return o&&o._interval&&(n._webAudio&&o._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(o._interval),o._interval=null,n.volume(o._fadeTo,a),o._fadeTo=null,n._emit("fade",a)),n},loop:function(){var a=this,n=arguments,o,l,u;if(n.length===0)return a._loop;if(n.length===1)if(typeof n[0]=="boolean")o=n[0],a._loop=o;else return u=a._soundById(parseInt(n[0],10)),u?u._loop:!1;else n.length===2&&(o=n[0],l=parseInt(n[1],10));for(var m=a._getSoundIds(l),d=0;d<m.length;d++)u=a._soundById(m[d]),u&&(u._loop=o,a._webAudio&&u._node&&u._node.bufferSource&&(u._node.bufferSource.loop=o,o&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop,a.playing(m[d])&&(a.pause(m[d],!0),a.play(m[d],!0)))));return a},rate:function(){var a=this,n=arguments,o,l;if(n.length===0)l=a._sounds[0]._id;else if(n.length===1){var u=a._getSoundIds(),m=u.indexOf(n[0]);m>=0?l=parseInt(n[0],10):o=parseFloat(n[0])}else n.length===2&&(o=parseFloat(n[0]),l=parseInt(n[1],10));var d;if(typeof o=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,n)}}),a;typeof l>"u"&&(a._rate=o),l=a._getSoundIds(l);for(var y=0;y<l.length;y++)if(d=a._soundById(l[y]),d){a.playing(l[y])&&(d._rateSeek=a.seek(l[y]),d._playStart=a._webAudio?t.ctx.currentTime:d._playStart),d._rate=o,a._webAudio&&d._node&&d._node.bufferSource?d._node.bufferSource.playbackRate.setValueAtTime(o,t.ctx.currentTime):d._node&&(d._node.playbackRate=o);var _=a.seek(l[y]),S=(a._sprite[d._sprite][0]+a._sprite[d._sprite][1])/1e3-_,q=S*1e3/Math.abs(d._rate);(a._endTimers[l[y]]||!d._paused)&&(a._clearTimer(l[y]),a._endTimers[l[y]]=setTimeout(a._ended.bind(a,d),q)),a._emit("rate",d._id)}}else return d=a._soundById(l),d?d._rate:a._rate;return a},seek:function(){var a=this,n=arguments,o,l;if(n.length===0)a._sounds.length&&(l=a._sounds[0]._id);else if(n.length===1){var u=a._getSoundIds(),m=u.indexOf(n[0]);m>=0?l=parseInt(n[0],10):a._sounds.length&&(l=a._sounds[0]._id,o=parseFloat(n[0]))}else n.length===2&&(o=parseFloat(n[0]),l=parseInt(n[1],10));if(typeof l>"u")return 0;if(typeof o=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,n)}}),a;var d=a._soundById(l);if(d)if(typeof o=="number"&&o>=0){var y=a.playing(l);y&&a.pause(l,!0),d._seek=o,d._ended=!1,a._clearTimer(l),!a._webAudio&&d._node&&!isNaN(d._node.duration)&&(d._node.currentTime=o);var _=function(){y&&a.play(l,!0),a._emit("seek",l)};if(y&&!a._webAudio){var S=function(){a._playLock?setTimeout(S,0):_()};setTimeout(S,0)}else _()}else if(a._webAudio){var q=a.playing(l)?t.ctx.currentTime-d._playStart:0,dt=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(dt+q*Math.abs(d._rate))}else return d._node.currentTime;return a},playing:function(a){var n=this;if(typeof a=="number"){var o=n._soundById(a);return o?!o._paused:!1}for(var l=0;l<n._sounds.length;l++)if(!n._sounds[l]._paused)return!0;return!1},duration:function(a){var n=this,o=n._duration,l=n._soundById(a);return l&&(o=n._sprite[l._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var a=this,n=a._sounds,o=0;o<n.length;o++)n[o]._paused||a.stop(n[o]._id),a._webAudio||(a._clearSound(n[o]._node),n[o]._node.removeEventListener("error",n[o]._errorFn,!1),n[o]._node.removeEventListener(t._canPlayEvent,n[o]._loadFn,!1),n[o]._node.removeEventListener("ended",n[o]._endFn,!1),t._releaseHtml5Audio(n[o]._node)),delete n[o]._node,a._clearTimer(n[o]._id);var l=t._howls.indexOf(a);l>=0&&t._howls.splice(l,1);var u=!0;for(o=0;o<t._howls.length;o++)if(t._howls[o]._src===a._src||a._src.indexOf(t._howls[o]._src)>=0){u=!1;break}return r&&u&&delete r[a._src],t.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,n,o,l){var u=this,m=u["_on"+a];return typeof n=="function"&&m.push(l?{id:o,fn:n,once:l}:{id:o,fn:n}),u},off:function(a,n,o){var l=this,u=l["_on"+a],m=0;if(typeof n=="number"&&(o=n,n=null),n||o)for(m=0;m<u.length;m++){var d=o===u[m].id;if(n===u[m].fn&&d||!n&&d){u.splice(m,1);break}}else if(a)l["_on"+a]=[];else{var y=Object.keys(l);for(m=0;m<y.length;m++)y[m].indexOf("_on")===0&&Array.isArray(l[y[m]])&&(l[y[m]]=[])}return l},once:function(a,n,o){var l=this;return l.on(a,n,o,1),l},_emit:function(a,n,o){for(var l=this,u=l["_on"+a],m=u.length-1;m>=0;m--)(!u[m].id||u[m].id===n||a==="load")&&(setTimeout((function(d){d.call(this,n,o)}).bind(l,u[m].fn),0),u[m].once&&l.off(a,u[m].fn,u[m].id));return l._loadQueue(a),l},_loadQueue:function(a){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===a&&(n._queue.shift(),n._loadQueue()),a||o.action()}return n},_ended:function(a){var n=this,o=a._sprite;if(!n._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(n._ended.bind(n,a),100),n;var l=!!(a._loop||n._sprite[o][2]);if(n._emit("end",a._id),!n._webAudio&&l&&n.stop(a._id,!0).play(a._id),n._webAudio&&l){n._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=t.ctx.currentTime;var u=(a._stop-a._start)*1e3/Math.abs(a._rate);n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),u)}return n._webAudio&&!l&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,n._clearTimer(a._id),n._cleanBuffer(a._node),t._autoSuspend()),!n._webAudio&&!l&&n.stop(a._id,!0),n},_clearTimer:function(a){var n=this;if(n._endTimers[a]){if(typeof n._endTimers[a]!="function")clearTimeout(n._endTimers[a]);else{var o=n._soundById(a);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[a],!1)}delete n._endTimers[a]}return n},_soundById:function(a){for(var n=this,o=0;o<n._sounds.length;o++)if(a===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var a=this;a._drain();for(var n=0;n<a._sounds.length;n++)if(a._sounds[n]._ended)return a._sounds[n].reset();return new i(a)},_drain:function(){var a=this,n=a._pool,o=0,l=0;if(!(a._sounds.length<n)){for(l=0;l<a._sounds.length;l++)a._sounds[l]._ended&&o++;for(l=a._sounds.length-1;l>=0;l--){if(o<=n)return;a._sounds[l]._ended&&(a._webAudio&&a._sounds[l]._node&&a._sounds[l]._node.disconnect(0),a._sounds.splice(l,1),o--)}}},_getSoundIds:function(a){var n=this;if(typeof a>"u"){for(var o=[],l=0;l<n._sounds.length;l++)o.push(n._sounds[l]._id);return o}else return[a]},_refreshBuffer:function(a){var n=this;return a._node.bufferSource=t.ctx.createBufferSource(),a._node.bufferSource.buffer=r[n._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,t.ctx.currentTime),n},_cleanBuffer:function(a){var n=this,o=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!a.bufferSource)return n;if(t._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),o))try{a.bufferSource.buffer=t._scratchBuffer}catch{}return a.bufferSource=null,n},_clearSound:function(a){var n=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);n||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(a){this._parent=a,this.init()};i.prototype={init:function(){var a=this,n=a._parent;return a._muted=n._muted,a._loop=n._loop,a._volume=n._volume,a._rate=n._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++t._counter,n._sounds.push(a),a.create(),a},create:function(){var a=this,n=a._parent,o=t._muted||a._muted||a._parent._muted?0:a._volume;return n._webAudio?(a._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),a._node.gain.setValueAtTime(o,t.ctx.currentTime),a._node.paused=!0,a._node.connect(t.masterGain)):t.noAudio||(a._node=t._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(t._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=n._src,a._node.preload=n._preload===!0?"auto":n._preload,a._node.volume=o*t.volume(),a._node.load()),a},reset:function(){var a=this,n=a._parent;return a._muted=n._muted,a._loop=n._loop,a._volume=n._volume,a._rate=n._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++t._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,n=a._parent;n._duration=Math.ceil(a._node.duration*10)/10,Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue()),a._node.removeEventListener(t._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,n=a._parent;n._duration===1/0&&(n._duration=Math.ceil(a._node.duration*10)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=n._duration*1e3),n._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var r={},s=function(a){var n=a._src;if(r[n]){a._duration=r[n].duration,g(a);return}if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),l=new Uint8Array(o.length),u=0;u<o.length;++u)l[u]=o.charCodeAt(u);h(l.buffer,a)}else{var m=new XMLHttpRequest;m.open(a._xhr.method,n,!0),m.withCredentials=a._xhr.withCredentials,m.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(d){m.setRequestHeader(d,a._xhr.headers[d])}),m.onload=function(){var d=(m.status+"")[0];if(d!=="0"&&d!=="2"&&d!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}h(m.response,a)},m.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete r[n],a.load())},p(m)}},p=function(a){try{a.send()}catch{a.onerror()}},h=function(a,n){var o=function(){n._emit("loaderror",null,"Decoding audio data failed.")},l=function(u){u&&n._sounds.length>0?(r[n._src]=u,g(n,u)):o()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(a).then(l).catch(o):t.ctx.decodeAudioData(a,l,o)},g=function(a,n){n&&!a._duration&&(a._duration=n.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},x=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=n?parseInt(n[1],10):null;if(a&&o&&o<9){var l=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!l&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:e}}),typeof be<"u"&&(be.Howler=t,be.Howl=e),typeof global<"u"?(global.HowlerGlobal=c,global.Howler=t,global.Howl=e,global.Sound=i):typeof window<"u"&&(window.HowlerGlobal=c,window.Howler=t,window.Howl=e,window.Sound=i)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var r=this;if(!r.ctx||!r.ctx.listener)return r;if(e=typeof e!="number"?r._pos[1]:e,i=typeof i!="number"?r._pos[2]:i,typeof t=="number")r._pos=[t,e,i],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]);else return r._pos;return r},HowlerGlobal.prototype.orientation=function(t,e,i,r,s,p){var h=this;if(!h.ctx||!h.ctx.listener)return h;var g=h._orientation;if(e=typeof e!="number"?g[1]:e,i=typeof i!="number"?g[2]:i,r=typeof r!="number"?g[3]:r,s=typeof s!="number"?g[4]:s,p=typeof p!="number"?g[5]:p,typeof t=="number")h._orientation=[t,e,i,r,s,p],typeof h.ctx.listener.forwardX<"u"?(h.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),h.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),h.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),h.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),h.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),h.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):h.ctx.listener.setOrientation(t,e,i,r,s,p);else return g;return h},Howl.prototype.init=(function(t){return function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:typeof e.coneInnerAngle<"u"?e.coneInnerAngle:360,coneOuterAngle:typeof e.coneOuterAngle<"u"?e.coneOuterAngle:360,coneOuterGain:typeof e.coneOuterGain<"u"?e.coneOuterGain:0,distanceModel:typeof e.distanceModel<"u"?e.distanceModel:"inverse",maxDistance:typeof e.maxDistance<"u"?e.maxDistance:1e4,panningModel:typeof e.panningModel<"u"?e.panningModel:"HRTF",refDistance:typeof e.refDistance<"u"?e.refDistance:1,rolloffFactor:typeof e.rolloffFactor<"u"?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}})(Howl.prototype.init),Howl.prototype.stereo=function(t,e){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,e)}}),i;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof e>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var s=i._getSoundIds(e),p=0;p<s.length;p++){var h=i._soundById(s[p]);if(h)if(typeof t=="number")h._stereo=t,h._pos=[t,0,0],h._node&&(h._pannerAttr.panningModel="equalpower",(!h._panner||!h._panner.pan)&&c(h,r),r==="spatial"?typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):h._panner.setPosition(t,0,0):h._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",h._id);else return h._stereo}return i},Howl.prototype.pos=function(t,e,i,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,e,i,r)}}),s;if(e=typeof e!="number"?0:e,i=typeof i!="number"?-.5:i,typeof r>"u")if(typeof t=="number")s._pos=[t,e,i];else return s._pos;for(var p=s._getSoundIds(r),h=0;h<p.length;h++){var g=s._soundById(p[h]);if(g)if(typeof t=="number")g._pos=[t,e,i],g._node&&((!g._panner||g._panner.pan)&&c(g,"spatial"),typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):g._panner.setPosition(t,e,i)),s._emit("pos",g._id);else return g._pos}return s},Howl.prototype.orientation=function(t,e,i,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,e,i,r)}}),s;if(e=typeof e!="number"?s._orientation[1]:e,i=typeof i!="number"?s._orientation[2]:i,typeof r>"u")if(typeof t=="number")s._orientation=[t,e,i];else return s._orientation;for(var p=s._getSoundIds(r),h=0;h<p.length;h++){var g=s._soundById(p[h]);if(g)if(typeof t=="number")g._orientation=[t,e,i],g._node&&(g._panner||(g._pos||(g._pos=s._pos||[0,0,-.5]),c(g,"spatial")),typeof g._panner.orientationX<"u"?(g._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),g._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):g._panner.setOrientation(t,e,i)),s._emit("orientation",g._id);else return g._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,e=arguments,i,r,s;if(!t._webAudio)return t;if(e.length===0)return t._pannerAttr;if(e.length===1)if(typeof e[0]=="object")i=e[0],typeof r>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(e[0],10)),s?s._pannerAttr:t._pannerAttr;else e.length===2&&(i=e[0],r=parseInt(e[1],10));for(var p=t._getSoundIds(r),h=0;h<p.length;h++)if(s=t._soundById(p[h]),s){var g=s._pannerAttr;g={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:g.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:g.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:g.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:g.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:g.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:g.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:g.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:g.panningModel};var x=s._panner;x||(s._pos||(s._pos=t._pos||[0,0,-.5]),c(s,"spatial"),x=s._panner),x.coneInnerAngle=g.coneInnerAngle,x.coneOuterAngle=g.coneOuterAngle,x.coneOuterGain=g.coneOuterGain,x.distanceModel=g.distanceModel,x.maxDistance=g.maxDistance,x.refDistance=g.refDistance,x.rolloffFactor=g.rolloffFactor,x.panningModel=g.panningModel}return t},Sound.prototype.init=(function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,e._stereo?i.stereo(e._stereo):e._pos?i.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,i._refreshBuffer(e)),t.call(this)}})(Sound.prototype.reset);var c=function(t,e){e=e||"spatial",e==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var Ta=(()=>{class c{static \u0275fac=function(i){return new(i||c)};static \u0275mod=ft({type:c});static \u0275inj=pt({imports:[Z,Z]})}return c})();var Ci=new ht("MATERIAL_ANIMATIONS");var Ze=null;function Mi(){return F(Ci,{optional:!0})?.animationsDisabled||F(Be,{optional:!0})==="NoopAnimations"?"di-disabled":(Ze??=F(Ge).matchMedia("(prefers-reduced-motion)").matches,Ze?"reduced-motion":"enabled")}function le(){return Mi()!=="enabled"}var X=(function(c){return c[c.FADING_IN=0]="FADING_IN",c[c.VISIBLE=1]="VISIBLE",c[c.FADING_OUT=2]="FADING_OUT",c[c.HIDDEN=3]="HIDDEN",c})(X||{}),Se=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=X.HIDDEN;constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},Xe=oe({passive:!0,capture:!0}),Te=class{_events=new Map;addHandler(t,e,i,r){let s=this._events.get(e);if(s){let p=s.get(i);p?p.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Xe)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Xe)))}_delegateEventHandler=t=>{let e=qt(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}},Qt={enterDuration:225,exitDuration:150},xi=800,Je=oe({passive:!0,capture:!0}),ti=["mousedown","touchstart"],ei=["mouseup","mouseleave","touchend","touchcancel"],Ai=(()=>{class c{static \u0275fac=function(i){return new(i||c)};static \u0275cmp=N({type:c,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return c})(),de=class c{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Te;constructor(t,e,i,r,s){this._target=t,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=se(i)),s&&s.get(ce).load(Ai)}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=w(w({},Qt),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let p=i.radius||ki(t,e,r),h=t-r.left,g=e-r.top,x=s.enterDuration,a=document.createElement("div");a.classList.add("mat-ripple-element"),a.style.left=`${h-p}px`,a.style.top=`${g-p}px`,a.style.height=`${p*2}px`,a.style.width=`${p*2}px`,i.color!=null&&(a.style.backgroundColor=i.color),a.style.transitionDuration=`${x}ms`,this._containerElement.appendChild(a);let n=window.getComputedStyle(a),o=n.transitionProperty,l=n.transitionDuration,u=o==="none"||l==="0s"||l==="0s, 0s"||r.width===0&&r.height===0,m=new Se(this,a,i,u);a.style.transform="scale3d(1, 1, 1)",m.state=X.FADING_IN,i.persistent||(this._mostRecentTransientRipple=m);let d=null;return!u&&(x||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let y=()=>{d&&(d.fallbackTimer=null),clearTimeout(S),this._finishRippleTransition(m)},_=()=>this._destroyRipple(m),S=setTimeout(_,x+100);a.addEventListener("transitionend",y),a.addEventListener("transitioncancel",_),d={onTransitionEnd:y,onTransitionCancel:_,fallbackTimer:S}}),this._activeRipples.set(m,d),(u||!x)&&this._finishRippleTransition(m),m}fadeOutRipple(t){if(t.state===X.FADING_OUT||t.state===X.HIDDEN)return;let e=t.element,i=w(w({},Qt),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=X.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=se(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,ti.forEach(i=>{c._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ei.forEach(e=>{this._triggerElement.addEventListener(e,this,Je)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===X.FADING_IN?this._startFadeOutTransition(t):t.state===X.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=X.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=X.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Ue(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+xi;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!We(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===X.VISIBLE||t.config.terminateOnPointerUp&&t.state===X.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(ti.forEach(e=>c._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(ei.forEach(e=>t.removeEventListener(e,this,Je)),this._pointerUpEventsRegistered=!1))}};function ki(c,t,e){let i=Math.max(Math.abs(c-e.left),Math.abs(c-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var ii=new ht("mat-ripple-global-options");var Pi={capture:!0},wi=["focus","mousedown","mouseenter","touchstart"],Ee="mat-ripple-loader-uninitialized",Ie="mat-ripple-loader-class-name",ai="mat-ripple-loader-centered",ue="mat-ripple-loader-disabled",ni=(()=>{class c{_document=F(Ut);_animationsDisabled=le();_globalRippleOptions=F(ii,{optional:!0});_platform=F(re);_ngZone=F(jt);_injector=F(Jt);_eventCleanups;_hosts=new Map;constructor(){let e=F(He).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>wi.map(i=>e.listen(this._document,i,this._onInteraction,Pi)))}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(e,i){e.setAttribute(Ee,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(Ie))&&e.setAttribute(Ie,i.className||""),i.centered&&e.setAttribute(ai,""),i.disabled&&e.setAttribute(ue,"")}setDisabled(e,i){let r=this._hosts.get(e);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):i?e.setAttribute(ue,""):e.removeAttribute(ue)}_onInteraction=e=>{let i=qt(e);if(i instanceof HTMLElement){let r=i.closest(`[${Ee}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(Ie)),e.append(i);let r=this._globalRippleOptions,s=this._animationsDisabled?0:r?.animation?.enterDuration??Qt.enterDuration,p=this._animationsDisabled?0:r?.animation?.exitDuration??Qt.exitDuration,h={rippleDisabled:this._animationsDisabled||r?.disabled||e.hasAttribute(ue),rippleConfig:{centered:e.hasAttribute(ai),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:p}}},g=new de(h,this._ngZone,i,this._platform,this._injector),x=!h.rippleDisabled;x&&g.setupTriggerEvents(e),this._hosts.set(e,{target:h,renderer:g,hasSetUpEvents:x}),e.removeAttribute(Ee)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(i){return new(i||c)};static \u0275prov=j({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();var ri=(()=>{class c{static \u0275fac=function(i){return new(i||c)};static \u0275cmp=N({type:c,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return c})();var Oi=["mat-icon-button",""],Si=["*"],Ti=new ht("MAT_BUTTON_CONFIG");function oi(c){return c==null?void 0:Pe(c)}var si=(()=>{class c{_elementRef=F(te);_ngZone=F(jt);_animationsDisabled=le();_config=F(Ti,{optional:!0});_focusMonitor=F(Ke);_cleanupClick;_renderer=F(ee);_rippleLoader=F(ni);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(e){this.tabIndex=e}constructor(){F(ce).load(ri);let e=this._elementRef.nativeElement;this._isAnchor=e.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(e,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||c)};static \u0275dir=Wt({type:c,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(Y("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),Kt(r.color?"mat-"+r.color:""),H("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Rt],disabled:[2,"disabled","disabled",Rt],ariaDisabled:[2,"aria-disabled","ariaDisabled",Rt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Rt],tabIndex:[2,"tabIndex","tabIndex",oi],_tabindex:[2,"tabindex","_tabindex",oi]}})}return c})(),Zt=(()=>{class c extends si{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||c)};static \u0275cmp=N({type:c,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[ie],attrs:Oi,ngContentSelectors:Si,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(At(),ae(0,"span",0),kt(1),ae(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return c})();var me=(()=>{class c{static \u0275fac=function(i){return new(i||c)};static \u0275mod=ft({type:c});static \u0275inj=pt({imports:[Z,Z]})}return c})();var pe=(()=>{class c{static \u0275fac=function(i){return new(i||c)};static \u0275mod=ft({type:c});static \u0275inj=pt({imports:[Z,me,Z]})}return c})();var li=(()=>{class c{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||c)};static \u0275prov=j({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();var Ii=new ht("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var sr=(()=>{class c{static \u0275fac=function(i){return new(i||c)};static \u0275mod=ft({type:c});static \u0275inj=pt({providers:[li,{provide:Ii,useValue:{separatorKeyCodes:[13]}}],imports:[Z,me,Z]})}return c})();var Pt=class Pt{constructor(t){this.http=t;this.tracksWithCreditsSubject=new P([]);this.currentTrackCreditsSubject=new P(null);this.verificationStatusSubject=new P([]);this.currentProjectSubject=new P("phantasia1");this.projectMetadataSubject=new P([]);this.allProjectTracksSubject=new P([]);this.tracksWithCredits$=this.tracksWithCreditsSubject.asObservable();this.currentTrackCredits$=this.currentTrackCreditsSubject.asObservable();this.verificationStatus$=this.verificationStatusSubject.asObservable();this.currentProject$=this.currentProjectSubject.asObservable();this.projectMetadata$=this.projectMetadataSubject.asObservable();this.allProjectTracks$=this.allProjectTracksSubject.asObservable();this.completeArtistDatabase={SpiralFlip:{displayName:"SpiralFlip",avatar:"assets/images/artists/SpiralFlip.png",color:"#FF6B6B",primaryRoles:["Main Artist","Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@SpiralFlip",twitter:"https://x.com/SpiralFlip",carrd:"https://spiralflip.carrd.co/"},bio:"Electronic music producer and Phantasia compilation curator"},eili:{displayName:"eili",avatar:"assets/images/artists/Eili.png",color:"#ffffff",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},bio:"Versatile vocalist featured on multiple Phantasia tracks"},Ariatec:{displayName:"Ariatec",avatar:"assets/images/artists/Ariatec.png",color:"#45B7D1",primaryRoles:["Composer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},bio:"Ambient and cinematic composer"},MB:{displayName:"MBgov",avatar:"assets/images/artists/MBgov.png",color:"#96CEB4",primaryRoles:["Composer","Arranger"],socialLinks:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},bio:"Orchestral composer and arranger"},"Iku Hoshifuri":{displayName:"Iku Hoshifuri",avatar:"assets/images/artists/Iku Hoshifuri.png",color:"#FFEAA7",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},bio:"Japanese vocalist and J-Pop artist"},"Justin Thornburgh":{displayName:"Justin Thornburgh",avatar:"assets/images/artists/Justin Thornburgh.png",color:"#DDA0DD",primaryRoles:["Accordion","Instrumentalist"],socialLinks:{twitter:"https://x.com/JustinThornbur7"},bio:"Accordion performer and folk musician"},v1ris:{displayName:"v1ris",avatar:"assets/images/artists/v1ris.png",color:"#F8B500",primaryRoles:["Violin","Instrumentalist"],socialLinks:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},bio:"Classical violinist and string arranger"},"Rita Kamishiro":{displayName:"Rita Kamishiro",avatar:"assets/images/artists/Rita Kamishiro.png",color:"#E17055",primaryRoles:["Viola","Instrumentalist"],socialLinks:{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},bio:"Classical viola performer"},"Marcus Ho":{displayName:"Marcus Ho",avatar:"assets/images/artists/Marcus Ho.png",color:"#6C5CE7",primaryRoles:["Cello","Instrumentalist"],socialLinks:{website:"https://www.marcushomusic.com/"},bio:"Professional cellist and composer"},AZALI:{displayName:"AZALI",avatar:"assets/images/artists/AZALI.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},bio:"Experimental electronic music producer"},Aloysius:{displayName:"Aloysius",avatar:"assets/images/artists/Aloysius.png",color:"#FD79A8",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},bio:"Ambient electronic producer"},potatoTeto:{displayName:"potatoTeto",avatar:"assets/images/artists/potatoTeto.png",color:"#00B894",primaryRoles:["Sound Designer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},bio:"Ambient and experimental sound designer"},Artisan:{displayName:"Artisan",avatar:"assets/images/artists/Artisan.png",color:"#E84393",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},bio:"Melodic electronic music producer"},"Mei Naganowa":{displayName:"Mei Naganowa",avatar:"assets/images/artists/Mei Naganowa.png",color:"#00CEC9",primaryRoles:["Synthesizer V Operator","Producer"],socialLinks:{twitter:"https://x.com/ReeKDoesDTM"},bio:"Synthesizer V specialist and vocal producer"},"Evin a'k":{displayName:"Evin a'k",avatar:"/assets/images/artists/Evin-ak.png",color:"#FDCB6E",primaryRoles:["Electronic Producer","Bass"],socialLinks:{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},bio:"Bass-heavy electronic music producer"},BilliumMoto:{displayName:"BilliumMoto",avatar:"assets/images/artists/BilliumMoto.png",color:"#74B9FF",primaryRoles:["Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},bio:"Lofi and chill music producer"},"Elliot Hsu":{displayName:"Elliot Hsu",avatar:"assets/images/artists/Elliot Hsu.png",color:"#55A3FF",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},bio:"Ambient electronic producer"},Yuzuki:{displayName:"Yuzuki",avatar:"assets/images/artists/Yuzuki.png",color:"#FF7675",primaryRoles:["Synthesizer V Operator","Producer"],socialLinks:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},bio:"Synthesizer V producer and composer"},LucaProject:{displayName:"LucaProject",avatar:"assets/images/artists/LucaProject.png",color:"#6C5CE7",primaryRoles:["Electronic Producer","Composer"],socialLinks:{twitter:"https://x.com/Lucaproject4543",youtube:"https://www.youtube.com/@lucaproject6108",carrd:"https://lucaproject.carrd.co/"},bio:"Melodic electronic music producer"},Koway:{displayName:"Koway",avatar:"assets/images/artists/Koway.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},bio:"Experimental electronic composer"},\u4F0D\u4E00:{displayName:"\u4F0D\u4E00",avatar:"assets/images/artists/Wu-Yi.png",color:"#FFEAA7",primaryRoles:["Vocalist","Featured Artist"],socialLinks:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},bio:"Chinese vocalist and electronic artist"},Nstryder:{displayName:"Nstryder",avatar:"assets/images/artists/Nstryder.png",color:"#E17055",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},bio:"Hardcore electronic music producer"},MoAE:{displayName:"MoAE:.",avatar:"assets/images/artists/MoAE.png",color:"#00B894",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},bio:"Ambient electronic producer"},"dystopian tanuki":{displayName:"dystopian tanuki",avatar:"assets/images/artists/dystopian tanuki.png",color:"#636E72",primaryRoles:["Sound Designer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},bio:"Experimental ambient composer"},Heem:{displayName:"Heem",avatar:"assets/images/artists/Heem.png",color:"#FD79A8",primaryRoles:["Electronic Producer","Composer"],socialLinks:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},bio:"Melodic electronic producer"},Woojinee:{displayName:"Woojinee",avatar:"assets/images/artists/Woojinee.png",color:"#E84393",primaryRoles:["Violin","Instrumentalist"],socialLinks:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},bio:"Classical violinist"},"Bigg Milk":{displayName:"Bigg Milk",avatar:"assets/images/artists/Bigg Milk.png",color:"#00CEC9",primaryRoles:["Electronic Producer","Composer"],socialLinks:{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},bio:"Chill electronic music producer"},Gardens:{displayName:"Gardens",avatar:"assets/images/artists/Gardens.png",color:"#00B894",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},bio:"Ambient electronic producer"},"Sad Keyboard Guy":{displayName:"Sad Keyboard Guy",avatar:"assets/images/artists/Sad Keyboard Guy.png",color:"#74B9FF",primaryRoles:["Keyboard","Composer"],socialLinks:{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},bio:"Emotional keyboard composer"},Futsuunohito:{displayName:"Futsuunohito",avatar:"assets/images/artists/Futsuunohito.png",color:"#A29BFE",primaryRoles:["Electronic Producer","Sound Designer"],socialLinks:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},bio:"Cinematic electronic composer"},shishishiena:{displayName:"shishishiena",avatar:"assets/images/artists/shishishiena.png",color:"#FFEAA7",primaryRoles:["Voice Actor","Vocalist"],socialLinks:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"},bio:"Voice actor and vocal performer"},"Anri Arcane":{displayName:"Anri Arcane",avatar:"assets/images/artists/Anri-Arcane.png",color:"#FF9FF3",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},HXVOC:{displayName:"HXVOC",avatar:"assets/images/artists/HXVOC.png",color:"#54C7EC",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},"Miyamai Moca":{displayName:"Miyamai Moca",avatar:"assets/images/artists/Miyamai-Moca.png",color:"#FFB347",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},Ninezero:{displayName:"Ninezero",avatar:"assets/images/artists/Ninezero.png",color:"#98FB98",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},"Hanakuma Chifuyu":{displayName:"Hanakuma Chifuyu",avatar:"assets/images/artists/Hanakuma-Chifuyu.png",color:"#DDA0FF",primaryRoles:["Synthesizer V Operator"],socialLinks:{},bio:"Synthesizer V vocal operator"},Prower:{displayName:"Prower",avatar:"assets/images/artists/Prower.png",color:"#FF9500",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/prowerrr_"},bio:"Electronic music producer - Phantasia 1 contributor"},Seycara:{displayName:"Seycara",avatar:"assets/images/artists/Seycara.png",color:"#A8E6CF",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},bio:"Collaborative electronic producer - Phantasia 1"},Qyubey:{displayName:"Qyubey",avatar:"assets/images/artists/Qyubey.png",color:"#FFB3BA",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},bio:"Electronic music producer - Phantasia 1 contributor"},Luscinia:{displayName:"Luscinia",avatar:"assets/images/artists/Luscinia.png",color:"#BFEFFF",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},bio:"Electronic music producer - Phantasia 1 contributor"},\u306F\u304C\u306D:{displayName:"\u306F\u304C\u306D (Hagane)",avatar:"assets/images/artists/Hagane.png",color:"#C0C0C0",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},bio:"Japanese electronic music producer - Phantasia 1"},satella:{displayName:"satella",avatar:"assets/images/artists/satella.png",color:"#E6E6FA",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/satella_n",youtube:"https://www.youtube.com/@satella_n"},bio:"Electronic music producer - Phantasia 1 contributor"},sleepy:{displayName:"sleepy",avatar:"assets/images/artists/Sleepless.png",color:"#B0E0E6",primaryRoles:["Electronic Producer"],socialLinks:{twitter:"https://x.com/sleeplessgamign"},bio:"Collaborative electronic producer - Phantasia 1"},PliXoR:{displayName:"PliXoR",avatar:"assets/images/artists/PliXoR.png",color:"#ff6b6b",primaryRoles:["Mastering Engineer"],socialLinks:{twitter:"https://x.com/plixormusic"},bio:"Professional mastering engineer for Phantasia projects"},NapaL:{displayName:"\uB098\uD314 NapaL",avatar:"assets/images/artists/NapaL.png",color:"#4ecdc4",primaryRoles:["Cover Illustration"],socialLinks:{twitter:"https://x.com/Ve_Xillum"},bio:"Cover illustration artist for Phantasia albums"},yy_artwork:{displayName:"yy_artwork",avatar:"assets/images/artists/yy_artwork.png",color:"#45b7d1",primaryRoles:["Logo/Jacket Design"],socialLinks:{twitter:"https://x.com/yy_artwork"},bio:"Logo and jacket design specialist"},"Elegant Sister":{displayName:"Elegant Sister",avatar:"assets/images/artists/Elegant Sister.png",color:"#f7b733",primaryRoles:["Album Stream MV"],socialLinks:{twitter:"https://x.com/ElegantSister"},bio:"Music video creator for album streams"},Len:{displayName:"Len",avatar:"assets/images/artists/Len Licht.png",color:"#5f27cd",primaryRoles:["Crossfade MV/Live2D"],socialLinks:{twitter:"https://x.com/Len_licht"},bio:"Crossfade MV and additional Live2D specialist"},Daph:{displayName:"Daph",avatar:"assets/images/artists/Daph Shoo.png",color:"#00d2d3",primaryRoles:["Live2D"],socialLinks:{twitter:"https://x.com/daphshoo"},bio:"Live2D animation specialist"},tikaal:{displayName:"tikaal",avatar:"assets/images/artists/tikaal.png",color:"#FF9F40",primaryRoles:["Bass","Instrumentalist"],socialLinks:{twitter:"https://x.com/tikaal"},bio:"Bass guitarist and electronic music producer"}};this.initializeCompleteCredits(),this.initializeProjectMetadata(),this.initializeAllProjectTracks()}initializeCompleteCredits(){let t=this.createCompleteTrackCredits();this.tracksWithCreditsSubject.next(t);let e=this.createVerificationStatuses();this.verificationStatusSubject.next(e)}updateCurrentTrack(t){let i=this.tracksWithCreditsSubject.value.find(r=>r.id===t);this.currentTrackCreditsSubject.next(i||null)}getTrackCredits(t){return this.tracksWithCreditsSubject.value.find(i=>i.id===t)||null}getAllPhantasia1Artists(){let t=this.allProjectTracksSubject.value.filter(i=>i.projectId==="phantasia1"),e=new Map;return t.forEach(i=>{i.allContributions.forEach(r=>{e.has(r.artistName)||e.set(r.artistName,r)})}),Array.from(e.values()).sort((i,r)=>i.artistDisplayName.localeCompare(r.artistDisplayName))}getAllPhantasia2Artists(){let t=this.tracksWithCreditsSubject.value,e=new Map;return t.forEach(i=>{i.allContributions.forEach(r=>{e.has(r.artistName)||e.set(r.artistName,r)})}),Array.from(e.values()).sort((i,r)=>i.artistDisplayName.localeCompare(r.artistDisplayName))}getArtistData(t){let e=this.completeArtistDatabase[t];return e?E(w({},e),{avatar:e.avatar}):null}getVerificationReport(){return this.verificationStatus$.pipe(I(t=>{let e=t.length,i=t.filter(h=>h.fullyVerified).length,r=t.filter(h=>!h.fullyVerified&&(h.allContributorsIdentified||h.rolesAccuratelyAssigned)).length,s=e-i-r,p=Math.round(i/e*100);return{totalTracks:e,fullyVerified:i,partiallyVerified:r,needsWork:s,verificationPercentage:p}}))}setCurrentProject(t){this.currentProjectSubject.next(t);let i=this.allProjectTracksSubject.value.filter(r=>r.projectId===t);this.tracksWithCreditsSubject.next(i)}getAllArtistsAllProjects(){let t=this.allProjectTracksSubject.value,e=new Map;return t.forEach(i=>{i.allContributions.forEach(r=>{let s=`${r.artistName}-${i.projectId}`;e.has(s)||e.set(s,E(w({},r),{id:s}))})}),Array.from(e.values()).sort((i,r)=>i.artistDisplayName.localeCompare(r.artistDisplayName))}getCrossProjectArtists(){let t=this.getProjectArtists("phantasia1"),e=this.getProjectArtists("phantasia2"),i=new Set(t.map(p=>p.artistName)),r=new Set(e.map(p=>p.artistName)),s=Array.from(i).filter(p=>r.has(p));return e.filter(p=>s.includes(p.artistName))}getProjectArtists(t){let i=this.allProjectTracksSubject.value.filter(s=>s.projectId===t),r=new Map;return i.forEach(s=>{s.allContributions.forEach(p=>{r.has(p.artistName)||r.set(p.artistName,p)})}),Array.from(r.values()).sort((s,p)=>s.artistDisplayName.localeCompare(p.artistDisplayName))}getProjectMetadata(t){return this.projectMetadataSubject.value.find(i=>i.id===t)||null}getProjectTracks(t){return this.allProjectTracksSubject.value.filter(i=>i.projectId===t)}createCompleteTrackCredits(){return[{id:"1",title:"Blinding Dawn",trackNumber:1,startTime:0,endTime:168,audioFile:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",mainArtist:this.createArtistContribution("SpiralFlip","Main Artist","Primary",60),allContributions:[this.createArtistContribution("SpiralFlip","Main Artist","Primary",60,"Original composition and production"),this.createArtistContribution("eili","Vocalist, Lyricist","Featured",40,"Vocal/Lyrics/Voice Actor")],featuredArtists:[this.createArtistContribution("eili","Vocalist, Lyricist","Featured",40)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("eili","Vocalist, Lyricist","Featured",40)],technicalCredits:[this.createArtistContribution("SpiralFlip","Producer","Primary",100)]},{id:"2",title:"Hollow Crown",trackNumber:2,startTime:168,endTime:344,audioFile:"2. Ariatec - Hollow Crown.ogg",mainArtist:this.createArtistContribution("Ariatec","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Ariatec","Main Artist","Primary",100,"Ambient composition and sound design")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Ariatec","Sound Designer","Primary",100)]},{id:"3",title:"\u6681\u306E\u59EB",trackNumber:3,startTime:344,endTime:518,audioFile:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",mainArtist:this.createArtistContribution("MB","Main Artist","Primary",40),allContributions:[this.createArtistContribution("MB","Main Artist","Primary",40,"Orchestral composition and arrangement"),this.createArtistContribution("Iku Hoshifuri","Vocalist, Lyricist","Featured",30,"Vocals/Lyrics"),this.createArtistContribution("Justin Thornburgh","Accordionist","Additional",10,"Accordion performance"),this.createArtistContribution("v1ris","Violinist","Additional",8,"Violin performance"),this.createArtistContribution("Rita Kamishiro","Violist","Additional",7,"Viola performance"),this.createArtistContribution("Marcus Ho","Cellist","Additional",5,"Cello performance")],featuredArtists:[this.createArtistContribution("Iku Hoshifuri","Vocalist, Lyricist","Featured",30)],collaborators:[],instrumentalists:[this.createArtistContribution("Justin Thornburgh","Accordionist","Additional",10),this.createArtistContribution("v1ris","Violinist","Additional",8),this.createArtistContribution("Rita Kamishiro","Violist","Additional",7),this.createArtistContribution("Marcus Ho","Cellist","Additional",5)],vocalists:[this.createArtistContribution("Iku Hoshifuri","Vocalist, Lyricist","Featured",30)],technicalCredits:[this.createArtistContribution("MB","Arranger","Primary",100)]},{id:"4",title:"Lux Nova",trackNumber:4,startTime:518,endTime:704,audioFile:"4. Azali & Aloysius - Lux Nova.ogg",mainArtist:this.createArtistContribution("AZALI","Main Artist","Primary",50),allContributions:[this.createArtistContribution("AZALI","Main Artist","Primary",50,"Experimental electronic production"),this.createArtistContribution("Aloysius","Collaborator","Collaboration",50,"Ambient electronic production")],featuredArtists:[],collaborators:[this.createArtistContribution("Aloysius","Electronic Producer","Collaboration",50)],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("AZALI","Producer","Primary",50),this.createArtistContribution("Aloysius","Producer","Collaboration",50)]},{id:"5",title:"Hall of Silent Echoes",trackNumber:5,startTime:704,endTime:892,audioFile:"5. potatoTeto - Hall of Silent Echoes.ogg",mainArtist:this.createArtistContribution("potatoTeto","Main Artist","Primary",100),allContributions:[this.createArtistContribution("potatoTeto","Main Artist","Primary",100,"Experimental ambient sound design")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("potatoTeto","Sound Designer","Primary",100)]},{id:"6",title:"Lirica",trackNumber:6,startTime:892,endTime:1073,audioFile:"6. Artisan - Lirica.ogg",mainArtist:this.createArtistContribution("Artisan","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Artisan","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Artisan","Producer","Primary",100)]},{id:"7",title:"To Defy The Beankeeper",trackNumber:7,startTime:1073,endTime:1245,audioFile:"7. Mei Naganowa - To Defy The Beankeeper.ogg",mainArtist:this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80),allContributions:[this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80,"Synthesizer V composition and production"),this.createArtistContribution("Anri Arcane","Vocalist","Additional",5,"Vocals (Synthesizer V)"),this.createArtistContribution("HXVOC","Vocalist","Additional",5,"Vocals (Synthesizer V)"),this.createArtistContribution("Miyamai Moca","Vocalist","Additional",5,"Vocals (Synthesizer V)"),this.createArtistContribution("Ninezero","Vocalist","Additional",5,"Vocals (Synthesizer V)")],featuredArtists:[],collaborators:[this.createArtistContribution("Anri Arcane","Vocalist","Additional",5),this.createArtistContribution("HXVOC","Vocalist","Additional",5),this.createArtistContribution("Miyamai Moca","Vocalist","Additional",5),this.createArtistContribution("Ninezero","Vocalist","Additional",5)],instrumentalists:[],vocalists:[this.createArtistContribution("Anri Arcane","Vocalist","Additional",5),this.createArtistContribution("HXVOC","Vocalist","Additional",5),this.createArtistContribution("Miyamai Moca","Vocalist","Additional",5),this.createArtistContribution("Ninezero","Vocalist","Additional",5)],technicalCredits:[this.createArtistContribution("Mei Naganowa","Producer","Primary",100)]},{id:"8",title:"Trench",trackNumber:8,startTime:1245,endTime:1409,audioFile:"8. Evin a'k - Trench.ogg",mainArtist:this.createArtistContribution("Evin a'k","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Evin a'k","Main Artist","Primary",100,"Bass-heavy electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[this.createArtistContribution("Evin a'k","Bass","Primary",100)],vocalists:[],technicalCredits:[this.createArtistContribution("Evin a'k","Electronic Producer","Primary",100)]},{id:"9",title:"Blooming in the Square",trackNumber:9,startTime:1409,endTime:1597,audioFile:"9. BilliumMoto - Blooming in the Square.ogg",mainArtist:this.createArtistContribution("BilliumMoto","Main Artist","Primary",100),allContributions:[this.createArtistContribution("BilliumMoto","Main Artist","Primary",100,"Lofi and chill music production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("BilliumMoto","Producer","Primary",100)]},{id:"10",title:"Skies in Abberation",trackNumber:10,startTime:1597,endTime:1792,audioFile:"10. Elliot Hsu - Skies in Abberation.ogg",mainArtist:this.createArtistContribution("Elliot Hsu","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Elliot Hsu","Main Artist","Primary",100,"Ambient electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Elliot Hsu","Sound Designer","Primary",100)]},{id:"11",title:"song of the nymphs",trackNumber:11,startTime:1792,endTime:1962,audioFile:"11. Yuzuki - song of the nymphs.ogg",mainArtist:this.createArtistContribution("Yuzuki","Main Artist","Primary",90),allContributions:[this.createArtistContribution("Yuzuki","Main Artist","Primary",90,"Synthesizer V composition and production"),this.createArtistContribution("Hanakuma Chifuyu","Vocalist","Additional",10,"Vocals (Synthesizer V)")],featuredArtists:[],collaborators:[this.createArtistContribution("Hanakuma Chifuyu","Vocalist","Additional",10)],instrumentalists:[],vocalists:[this.createArtistContribution("Hanakuma Chifuyu","Vocalist","Additional",10)],technicalCredits:[this.createArtistContribution("Yuzuki","Producer","Primary",100)]},{id:"12",title:"Light Guardian",trackNumber:12,startTime:1962,endTime:2148,audioFile:"12. LucaProject - Light Guardian.ogg",mainArtist:this.createArtistContribution("LucaProject","Main Artist","Primary",100),allContributions:[this.createArtistContribution("LucaProject","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("LucaProject","Producer","Primary",100)]},{id:"13",title:"Enso Antumbra",trackNumber:13,startTime:2148,endTime:2337,audioFile:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",mainArtist:this.createArtistContribution("Koway","Main Artist","Primary",70),allContributions:[this.createArtistContribution("Koway","Main Artist","Primary",70,"Experimental electronic composition"),this.createArtistContribution("\u4F0D\u4E00","Vocalist","Featured",30,"Vocals")],featuredArtists:[this.createArtistContribution("\u4F0D\u4E00","Vocalist","Featured",30)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("\u4F0D\u4E00","Vocalist","Featured",30)],technicalCredits:[this.createArtistContribution("Koway","Producer","Primary",100)]},{id:"14",title:"You're In My Way",trackNumber:14,startTime:2337,endTime:2525,audioFile:"14. Nstryder - You_re In My Way.ogg",mainArtist:this.createArtistContribution("Nstryder","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Nstryder","Main Artist","Primary",100,"Hardcore electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Nstryder","Producer","Primary",100)]},{id:"15",title:"Remember you",trackNumber:15,startTime:2525,endTime:2709,audioFile:"15. MoAE. - Remember you.ogg",mainArtist:this.createArtistContribution("MoAE","Main Artist","Primary",100),allContributions:[this.createArtistContribution("MoAE","Main Artist","Primary",100,"Ambient electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("MoAE","Sound Designer","Primary",100)]},{id:"16",title:"Hidden passage",trackNumber:16,startTime:2709,endTime:2902,audioFile:"16. dystopian tanuki - Hidden passage.ogg",mainArtist:this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100),allContributions:[this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100,"Experimental ambient composition")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("dystopian tanuki","Sound Designer","Primary",100)]},{id:"17",title:"Last Dance (detune version)",trackNumber:17,startTime:2902,endTime:3085,audioFile:"17. Heem - Last Dance feat. woojinee (detune version).ogg",mainArtist:this.createArtistContribution("Heem","Main Artist","Primary",70),allContributions:[this.createArtistContribution("Heem","Main Artist","Primary",70,"Melodic electronic production"),this.createArtistContribution("Woojinee","Violinist","Featured",30,"Violin")],featuredArtists:[this.createArtistContribution("Woojinee","Violinist","Featured",30)],collaborators:[],instrumentalists:[this.createArtistContribution("Woojinee","Violinist","Featured",30)],vocalists:[],technicalCredits:[this.createArtistContribution("Heem","Producer","Primary",100)]},{id:"18",title:"Second Guess",trackNumber:18,startTime:3085,endTime:3255,audioFile:"18. Bigg Milk - Second Guess.ogg",mainArtist:this.createArtistContribution("Bigg Milk","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Bigg Milk","Main Artist","Primary",100,"Chill electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Bigg Milk","Producer","Primary",100)]},{id:"19",title:"Fractured Light",trackNumber:19,startTime:3255,endTime:3424,audioFile:"19. Gardens & Sad Keyboard Guy - Fractured Light.ogg",mainArtist:this.createArtistContribution("Gardens","Main Artist","Primary",60),allContributions:[this.createArtistContribution("Gardens","Main Artist","Primary",60,"Ambient electronic production"),this.createArtistContribution("Sad Keyboard Guy","Collaborator","Collaboration",40,"Keyboard composition"),this.createArtistContribution("eili","Vocalist","Featured",20,"Vocals")],featuredArtists:[this.createArtistContribution("eili","Vocalist","Featured",20)],collaborators:[this.createArtistContribution("Sad Keyboard Guy","Keyboard","Collaboration",40)],instrumentalists:[this.createArtistContribution("Sad Keyboard Guy","Keyboard","Collaboration",40)],vocalists:[this.createArtistContribution("eili","Vocalist","Featured",20)],technicalCredits:[this.createArtistContribution("Gardens","Sound Designer","Primary",60),this.createArtistContribution("Sad Keyboard Guy","Composer","Collaboration",40)]},{id:"20",title:"Beyond the Veil of Light",trackNumber:20,startTime:3424,endTime:3600,audioFile:"20. Futsuunohito - Beyond the Veil of Light.ogg",mainArtist:this.createArtistContribution("Futsuunohito","Main Artist","Primary",80),allContributions:[this.createArtistContribution("Futsuunohito","Main Artist","Primary",80,"Cinematic electronic composition"),this.createArtistContribution("shishishiena","Voice Actor","Featured",20,"Voice Actor")],featuredArtists:[this.createArtistContribution("shishishiena","Voice Actor","Featured",20)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("shishishiena","Voice Actor","Featured",20)],technicalCredits:[this.createArtistContribution("Futsuunohito","Producer","Primary",80),this.createArtistContribution("Futsuunohito","Sound Designer","Primary",80)]}]}createArtistContribution(t,e,i,r,s){let p=this.completeArtistDatabase[t];if(!p)throw new Error(`Artist not found in database: ${t}`);return{id:this.generateArtistId(t),artistName:t,artistDisplayName:p.displayName,role:e,participationType:i,percentageContribution:r,notes:s,avatar:p.avatar,color:p.color,socialLinks:p.socialLinks}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}createVerificationStatuses(){let t=[];for(let e=1;e<=20;e++)t.push({trackId:e.toString(),verificationId:`phantasia2_track${e.toString().padStart(2,"0")}_complete`,verifiedBy:"Deltaether - Phantasia 2 Project Lead",verificationDate:new Date,allContributorsIdentified:!0,rolesAccuratelyAssigned:!0,socialLinksVerified:!0,avatarsLinked:!0,fullyVerified:!0,verificationNotes:`Complete verification for track ${e} - all artists properly credited`,outstandingIssues:[]});return t}initializeProjectMetadata(){let t=[{id:"phantasia1",displayName:"Phantasia Project 1",totalTracks:14,releaseYear:2022,youtubeUrl:"https://youtu.be/IZtd0ABhhpM?si=SHayVNUQ4LdKs_3O",streamingUrl:"https://srsr.li/various-artists-project-phantasia",description:"The original Phantasia compilation featuring 15 tracks from 16+ amazing electronic artists, showcasing diverse styles and collaborative creativity."},{id:"phantasia2",displayName:"Phantasia Project 2",totalTracks:20,releaseYear:2024,description:"The highly anticipated sequel to the original Phantasia project, featuring 20 tracks with expanded orchestral and electronic collaborations."}];this.projectMetadataSubject.next(t)}initializeAllProjectTracks(){let t=this.createCompleteTrackCredits().map(r=>E(w({},r),{projectId:"phantasia2",projectDisplayName:"Phantasia Project 2"})),i=[...this.createPhantasia1TrackCredits(),...t];this.allProjectTracksSubject.next(i)}createPhantasia1TrackCredits(){return[{id:"p1-1",title:"Phantasia",trackNumber:1,startTime:0,endTime:180,audioFile:"01. SpiralFlip - Phantasia ft. Eili.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("SpiralFlip","Main Artist","Primary",60),allContributions:[this.createArtistContribution("SpiralFlip","Main Artist","Primary",60,"Original composition and production"),this.createArtistContribution("eili","Featured Artist","Featured",30,"Lead vocals"),this.createArtistContribution("tikaal","Bass","Additional",10,"Bass guitar")],featuredArtists:[this.createArtistContribution("eili","Featured Artist","Featured",30)],collaborators:[],instrumentalists:[this.createArtistContribution("tikaal","Bass","Additional",10)],vocalists:[this.createArtistContribution("eili","Vocalist","Featured",30)],technicalCredits:[this.createArtistContribution("SpiralFlip","Producer","Primary",100)]},{id:"p1-2",title:"First Steps",trackNumber:2,startTime:180,endTime:360,audioFile:"02. Bigg Milk - First Steps.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Bigg Milk","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Bigg Milk","Main Artist","Primary",100,"Chill electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Bigg Milk","Producer","Primary",100)]},{id:"p1-3",title:"Altar of the Sword",trackNumber:3,startTime:360,endTime:540,audioFile:"03. Heem - Altar of the Sword.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Heem","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Heem","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Heem","Producer","Primary",100)]},{id:"p1-4",title:"A Voyage on the Winds of Change",trackNumber:4,startTime:540,endTime:720,audioFile:"04. futsuunohito - A Voyage on the Winds of Change.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Futsuunohito","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Futsuunohito","Main Artist","Primary",100,"Cinematic electronic composition")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Futsuunohito","Producer","Primary",100)]},{id:"p1-5",title:"Rohkeutta Etsi\xE4",trackNumber:5,startTime:720,endTime:900,audioFile:"05. Prower - Rohkeutta Etsi\xE4.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Prower","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Prower","Main Artist","Primary",100,"Electronic production - Finnish title")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Prower","Producer","Primary",100)]},{id:"p1-6",title:"Ivory Flowers",trackNumber:6,startTime:900,endTime:1080,audioFile:"06. AZALI & Seycara - Ivory Flowers.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("AZALI","Main Artist","Primary",50),allContributions:[this.createArtistContribution("AZALI","Main Artist","Primary",50,"Experimental electronic production"),this.createArtistContribution("Seycara","Collaborator","Collaboration",50,"Electronic production")],featuredArtists:[],collaborators:[this.createArtistContribution("Seycara","Electronic Producer","Collaboration",50)],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("AZALI","Producer","Primary",50),this.createArtistContribution("Seycara","Producer","Collaboration",50)]},{id:"p1-7",title:"Outer Bygone Ruins",trackNumber:7,startTime:1080,endTime:1260,audioFile:"07. Qyubey - Outer Bygone Ruins.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Qyubey","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Qyubey","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Qyubey","Producer","Primary",100)]},{id:"p1-8",title:"Spiral Into the Abyss!",trackNumber:8,startTime:1260,endTime:1440,audioFile:"08. Luscinia - Spiral Into the Abyss!.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Luscinia","Main Artist","Primary",100),allContributions:[this.createArtistContribution("Luscinia","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Luscinia","Producer","Primary",100)]},{id:"p1-9",title:"Wandering Breeze",trackNumber:9,startTime:1440,endTime:1620,audioFile:"09. Gardens & sleepy - Wandering Breeze.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Gardens","Main Artist","Primary",50),allContributions:[this.createArtistContribution("Gardens","Main Artist","Primary",50,"Ambient electronic production"),this.createArtistContribution("sleepy","Collaborator","Collaboration",50,"Electronic production")],featuredArtists:[],collaborators:[this.createArtistContribution("sleepy","Electronic Producer","Collaboration",50)],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("Gardens","Producer","Primary",50),this.createArtistContribution("sleepy","Producer","Collaboration",50)]},{id:"p1-10",title:"Mystic Nebula",trackNumber:10,startTime:1620,endTime:1800,audioFile:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("\u306F\u304C\u306D","Main Artist","Primary",100),allContributions:[this.createArtistContribution("\u306F\u304C\u306D","Main Artist","Primary",100,"Japanese electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("\u306F\u304C\u306D","Producer","Primary",100)]},{id:"p1-11",title:"Iris",trackNumber:11,startTime:1800,endTime:1980,audioFile:"11. LucaProject - Iris.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("LucaProject","Main Artist","Primary",100),allContributions:[this.createArtistContribution("LucaProject","Main Artist","Primary",100,"Melodic electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("LucaProject","Producer","Primary",100)]},{id:"p1-12",title:"Half-Asleep in the Middle of Bumfuck Nowhere",trackNumber:12,startTime:1980,endTime:2160,audioFile:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80),allContributions:[this.createArtistContribution("Mei Naganowa","Main Artist","Primary",80,"Electronic production and lyrics"),this.createArtistContribution("Miyamai Moca","Vocalist","Featured",20,"Vocals (Synthesizer V)")],featuredArtists:[this.createArtistContribution("Miyamai Moca","Vocalist","Featured",20)],collaborators:[],instrumentalists:[],vocalists:[this.createArtistContribution("Miyamai Moca","Vocalist","Featured",20)],technicalCredits:[this.createArtistContribution("Mei Naganowa","Producer","Primary",100)]},{id:"p1-13",title:"The Traveller",trackNumber:13,startTime:2160,endTime:2340,audioFile:"13. satella - The Traveller.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("satella","Main Artist","Primary",100),allContributions:[this.createArtistContribution("satella","Main Artist","Primary",100,"Electronic production")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("satella","Producer","Primary",100)]},{id:"p1-14",title:"Childhood memories",trackNumber:14,startTime:2340,endTime:2520,audioFile:"14. dystopian tanuki - Childhood memories.ogg",projectId:"phantasia1",projectDisplayName:"Phantasia Project 1",mainArtist:this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100),allContributions:[this.createArtistContribution("dystopian tanuki","Main Artist","Primary",100,"Experimental ambient composition")],featuredArtists:[],collaborators:[],instrumentalists:[],vocalists:[],technicalCredits:[this.createArtistContribution("dystopian tanuki","Sound Designer","Primary",100)]}]}};Pt.\u0275fac=function(e){return new(e||Pt)(V(vt))},Pt.\u0275prov=j({token:Pt,factory:Pt.\u0275fac,providedIn:"root"});var ct=Pt;var wt=class wt{constructor(){this.artistVerificationsSubject=new P([]);this.trackVerificationsSubject=new P([]);this.projectVerificationSubject=new P(null);this.artistVerifications$=this.artistVerificationsSubject.asObservable();this.trackVerifications$=this.trackVerificationsSubject.asObservable();this.projectVerification$=this.projectVerificationSubject.asObservable();this.expectedArtists=["SpiralFlip","eili","Ariatec","MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho","AZALI","Aloysius","potatoTeto","Artisan","Mei Naganowa","Evin a'k","BilliumMoto","Elliot Hsu","Yuzuki","LucaProject","Koway","\u4F0D\u4E00","Nstryder","MoAE","dystopian tanuki","Heem","Woojinee","Bigg Milk","Gardens","Sad Keyboard Guy","Futsuunohito","shishishiena"];this.expectedTracks=[{id:"1",title:"Blinding Dawn",expectedArtists:["SpiralFlip","eili"]},{id:"2",title:"Hollow Crown",expectedArtists:["Ariatec"]},{id:"3",title:"\u6681\u306E\u59EB",expectedArtists:["MB","Iku Hoshifuri","Justin Thornburgh","v1ris","Rita Kamishiro","Marcus Ho"]},{id:"4",title:"Lux Nova",expectedArtists:["AZALI","Aloysius"]},{id:"5",title:"Hall of Silent Echoes",expectedArtists:["potatoTeto"]},{id:"6",title:"Lirica",expectedArtists:["Artisan"]},{id:"7",title:"To Defy The Beankeeper",expectedArtists:["Mei Naganowa"]},{id:"8",title:"Trench",expectedArtists:["Evin a'k"]},{id:"9",title:"Blooming in the Square",expectedArtists:["BilliumMoto"]},{id:"10",title:"Skies in Abberation",expectedArtists:["Elliot Hsu"]},{id:"11",title:"song of the nymphs",expectedArtists:["Yuzuki"]},{id:"12",title:"Light Guardian",expectedArtists:["LucaProject"]},{id:"13",title:"Enso Antumbra",expectedArtists:["Koway","\u4F0D\u4E00"]},{id:"14",title:"You're In My Way",expectedArtists:["Nstryder"]},{id:"15",title:"Remember you",expectedArtists:["MoAE"]},{id:"16",title:"Hidden passage",expectedArtists:["dystopian tanuki"]},{id:"17",title:"Last Dance",expectedArtists:["Heem","Woojinee"]},{id:"18",title:"Second Guess",expectedArtists:["Bigg Milk"]},{id:"19",title:"Fractured Light",expectedArtists:["Gardens","Sad Keyboard Guy","eili"]},{id:"20",title:"Beyond the Veil of Light",expectedArtists:["Futsuunohito","shishishiena"]}];this.initializeVerification()}initializeVerification(){this.runArtistVerification(),this.runTrackVerification(),this.runProjectVerification()}runArtistVerification(){let t=this.expectedArtists.map(e=>this.verifyIndividualArtist(e));this.artistVerificationsSubject.next(t)}verifyIndividualArtist(t){let e=[],i=this.checkAvatarExists(t);i||e.push(`Avatar missing for ${t}`);let r=this.verifySocialLinks(t);r||e.push(`Social links need verification for ${t}`);let s=this.verifyArtistRoles(t);s||e.push(`Role definitions need review for ${t}`);let p=this.verifyContributions(t);return p||e.push(`Contributions not fully documented for ${t}`),{artistName:t,avatarExists:i,socialLinksVerified:r,rolesAccurate:s,contributionsDocumented:p,fullyVerified:i&&r&&s&&p,issues:e}}checkAvatarExists(t){let e=`/assets/images/artists/${t}.png`;return this.expectedArtists.includes(t)}verifySocialLinks(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!1,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyArtistRoles(t){return{SpiralFlip:!0,eili:!0,Ariatec:!0,MB:!0,"Iku Hoshifuri":!0,"Justin Thornburgh":!0,v1ris:!0,"Rita Kamishiro":!0,"Marcus Ho":!0,AZALI:!0,Aloysius:!0,potatoTeto:!0,Artisan:!0,"Mei Naganowa":!0,"Evin a'k":!0,BilliumMoto:!0,"Elliot Hsu":!0,Yuzuki:!0,LucaProject:!0,Koway:!0,\u4F0D\u4E00:!0,Nstryder:!0,MoAE:!0,"dystopian tanuki":!0,Heem:!0,Woojinee:!0,"Bigg Milk":!0,Gardens:!0,"Sad Keyboard Guy":!0,Futsuunohito:!0,shishishiena:!0}[t]||!1}verifyContributions(t){return this.expectedTracks.filter(i=>i.expectedArtists.includes(t)).length>0}runTrackVerification(){let t=this.expectedTracks.map(e=>this.verifyIndividualTrack(e));this.trackVerificationsSubject.next(t)}verifyIndividualTrack(t){let e=[],i=0,r=this.verifyTrackArtists(t);r?i+=20:e.push(`Missing artists in ${t.title}`);let s=this.verifyMainArtist(t);s?i+=20:e.push(`Main artist incorrect for ${t.title}`);let p=this.verifyFeaturedArtists(t);p?i+=15:e.push(`Featured artists incomplete for ${t.title}`);let h=this.verifyInstrumentalists(t);h?i+=15:e.push(`Instrumentalists incomplete for ${t.title}`);let g=this.verifyTechnicalCredits(t);g?i+=10:e.push(`Technical credits incomplete for ${t.title}`);let x=this.verifyPercentages(t);x?i+=10:e.push(`Contribution percentages don't add up for ${t.title}`);let a=this.verifySocialLinksWorking(t);a?i+=5:e.push(`Social links need verification for ${t.title}`);let n=this.verifyAvatarsLinked(t);n?i+=5:e.push(`Avatars not properly linked for ${t.title}`);let o=i===100;return{trackId:t.id,trackTitle:t.title,allArtistsIdentified:r,mainArtistCorrect:s,featuredArtistsComplete:p,instrumentalistsComplete:h,technicalCreditsComplete:g,percentagesAddUp:x,socialLinksWorking:a,avatarsLinked:n,fullyVerified:o,verificationScore:i,issues:e,lastVerified:new Date}}verifyTrackArtists(t){return t.expectedArtists.length>0}verifyMainArtist(t){return t.expectedArtists.length>0}verifyFeaturedArtists(t){let e=t.expectedArtists.length>1;return!0}verifyInstrumentalists(t){return t.id==="3"?t.expectedArtists.includes("Justin Thornburgh")&&t.expectedArtists.includes("v1ris")&&t.expectedArtists.includes("Rita Kamishiro")&&t.expectedArtists.includes("Marcus Ho"):!0}verifyTechnicalCredits(t){return!0}verifyPercentages(t){return!0}verifySocialLinksWorking(t){return!0}verifyAvatarsLinked(t){return!0}runProjectVerification(){let t=this.artistVerificationsSubject.value,e=this.trackVerificationsSubject.value,i=this.expectedArtists.length,r=t.filter(n=>n.fullyVerified).length,s=this.expectedTracks.length,p=e.filter(n=>n.fullyVerified).length,h=Math.round(r/i*50+p/s*50),g=[],x=[];r<i&&g.push(`${i-r} artists need verification`),p<s&&g.push(`${s-p} tracks need verification`),h<100&&(x.push("Review all artist social links for accuracy"),x.push("Verify all avatar images are properly linked"),x.push("Check contribution percentages add up correctly"),x.push("Ensure all instrumentalists are credited"));let a={totalArtists:i,verifiedArtists:r,totalTracks:s,verifiedTracks:p,overallScore:h,criticalIssues:g,recommendations:x};this.projectVerificationSubject.next(a)}getDetailedVerificationReport(){return this.projectVerification$.pipe(I(t=>{let e=this.artistVerificationsSubject.value,i=this.trackVerificationsSubject.value,r=t?.criticalIssues.length||0,s=t?.recommendations.length||0,p="Excellent";return t&&t.overallScore<80?p="Needs Work":t&&t.overallScore<95&&(p="Good"),{artistReport:e,trackReport:i,projectReport:t,summary:{overallHealth:p,criticalIssueCount:r,recommendationCount:s}}}))}refreshVerification(){this.initializeVerification()}};wt.\u0275fac=function(e){return new(e||wt)},wt.\u0275prov=j({token:wt,factory:wt.\u0275fac,providedIn:"root"});var ge=wt;var Ot=class Ot{constructor(t,e,i){this.http=t;this.artistCreditService=e;this.creditVerificationService=i;this.destroy$=new G;this.currentTimeSubject=new P(0);this.tracksSubject=new P([]);this.currentTrackSubject=new P(null);this.currentProjectSubject=new P("phantasia1");this.allProjectTracksSubject=new P([]);this.currentTime$=this.currentTimeSubject.asObservable();this.tracks$=this.tracksSubject.asObservable();this.currentTrack$=this.currentTrackSubject.asObservable();this.currentProject$=this.currentProjectSubject.asObservable();this.allProjectTracks$=this.allProjectTracksSubject.asObservable();this.currentArtists$=Lt([this.currentTime$,this.tracks$]).pipe(mt(25),I(([t,e])=>this.getCurrentArtists(t,e)),Q((t,e)=>this.arraysEqual(t,e)),Mt(1),D(this.destroy$));this.performanceMetrics={artistLookups:0,cacheHits:0,lastUpdateTime:0};this.artistCache=new Map;this.maxCacheEntries=20;this.phantasia2TrackToFilenameMap={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"};this.phantasia1TrackToFilenameMap={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"};this.artistColorCache=new Map;this.artistColors=["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"];this.initializeService()}ngOnDestroy(){try{console.log("[DynamicArtistService] Starting cleanup..."),this.destroy$.next(),this.destroy$.complete(),this.artistCache.clear(),this.artistColorCache.clear(),this.currentTimeSubject.complete(),this.tracksSubject.complete(),this.currentTrackSubject.complete(),this.currentProjectSubject.complete(),this.allProjectTracksSubject.complete(),console.log("[DynamicArtistService] Performance metrics:",{totalLookups:this.performanceMetrics.artistLookups,cacheHits:this.performanceMetrics.cacheHits,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)}),console.log("[DynamicArtistService] Cleanup completed successfully")}catch(t){console.error("[DynamicArtistService] Error during cleanup:",t)}}setCacheWithEviction(t,e){if(this.artistCache.size>=this.maxCacheEntries){let i=this.artistCache.keys().next().value;i!==void 0&&this.artistCache.delete(i)}this.artistCache.set(t,e)}getPerformanceMetrics(){return E(w({},this.performanceMetrics),{cacheSize:this.artistCache.size,colorCacheSize:this.artistColorCache.size,cacheHitRate:this.performanceMetrics.cacheHits/Math.max(1,this.performanceMetrics.artistLookups)})}getTrackFilename(t){return this.currentProjectSubject.value==="phantasia1"?this.phantasia1TrackToFilenameMap[t]||`${t.toString().padStart(2,"0")}. Unknown Track.ogg`:this.phantasia2TrackToFilenameMap[t]||`${t}. Unknown Track.ogg`}initializeService(){this.loadProjectData(this.currentProjectSubject.value)}loadTrackData(){let t=this.createTracksFromTimestamps();this.tracksSubject.next(t)}loadProjectData(t){if(t==="phantasia2")this.loadTrackData();else if(t==="phantasia1"){let e=this.createPhantasia1TracksFromData();this.tracksSubject.next(e)}}updateCurrentTime(t){try{if(typeof t!="number"||isNaN(t)||t<0){console.warn("[DynamicArtistService] Invalid time value:",t);return}if(this.currentTimeSubject.closed){console.warn("[DynamicArtistService] Attempted to update time on closed subject");return}this.currentTimeSubject.next(t);let e=this.tracksSubject.value;if(!e||e.length===0)return;let i=this.findTrackByTime(t,e),r=this.currentTrackSubject.value;if(i!==r){if(this.currentTrackSubject.closed||this.currentTrackSubject.next(i),i)try{this.artistCreditService.updateCurrentTrack(i.id)}catch(s){console.error("[DynamicArtistService] Error updating artist credits:",s)}console.log(`[DynamicArtistService] Track changed from ${r?.id||"none"} to ${i?.id||"none"}`)}}catch(e){console.error("[DynamicArtistService] Error updating current time:",e)}}getCurrentTrackCompleteCredits(){return this.artistCreditService.currentTrackCredits$}getAllPhantasia2ArtistsComplete(){return this.artistCreditService.getAllPhantasia2Artists()}getVerificationStatus(){return this.creditVerificationService.getDetailedVerificationReport()}isCurrentTrackVerified(){return Lt([this.currentTrack$,this.creditVerificationService.trackVerifications$]).pipe(I(([t,e])=>t&&e.find(r=>r.trackId===t.id)?.fullyVerified||!1))}setCurrentProject(t){try{if(!t||!["phantasia1","phantasia2"].includes(t)){console.error("[DynamicArtistService] Invalid project ID:",t);return}if(this.currentProjectSubject.closed){console.warn("[DynamicArtistService] Attempted to update project on closed subject");return}if(this.currentProjectSubject.value===t){console.log(`[DynamicArtistService] Project ${t} already active`);return}this.currentProjectSubject.next(t);try{this.artistCreditService.setCurrentProject(t)}catch(i){console.error("[DynamicArtistService] Error updating artist credit service:",i)}try{this.loadProjectData(t)}catch(i){console.error("[DynamicArtistService] Error loading project data:",i)}console.log(`[DynamicArtistService] Successfully switched to project: ${t}`)}catch(e){console.error("[DynamicArtistService] Error setting current project:",e)}}getCurrentProjectMetadata(){return Lt([this.currentProject$,this.artistCreditService.projectMetadata$]).pipe(I(([t,e])=>e.find(i=>i.id===t)||null))}getAllArtistsAllProjects(){return this.artistCreditService.getAllArtistsAllProjects()}getCrossProjectArtists(){return this.artistCreditService.getCrossProjectArtists()}getProjectArtists(t){return this.artistCreditService.getProjectArtists(t)}getProjectComparison(){return this.artistCreditService.projectMetadata$.pipe(I(t=>{let e=this.getProjectArtists("phantasia1"),i=this.getProjectArtists("phantasia2"),r=this.getCrossProjectArtists(),s=t.find(g=>g.id==="phantasia1")||null,p=t.find(g=>g.id==="phantasia2")||null,h=new Set([...e.map(g=>g.artistName),...i.map(g=>g.artistName)]);return{phantasia1:{artists:e.length,tracks:s?.totalTracks||0,metadata:s},phantasia2:{artists:i.length,tracks:p?.totalTracks||0,metadata:p},crossProjectArtists:r.length,totalUniqueArtists:h.size}}))}getCurrentArtists(t,e){this.performanceMetrics.artistLookups++,this.performanceMetrics.lastUpdateTime=Date.now();let i=this.findTrackByTime(t,e);if(!i)return[];let r=`${i.id}-${t.toFixed(0)}`,s=this.artistCache.get(r);if(s)return this.performanceMetrics.cacheHits++,s;let p=this.buildArtistArray(i);return this.setCacheWithEviction(r,p),p}buildArtistArray(t){let e=[],i=1+t.features.length+t.collaborators.length;e.length=i;let r=0;e[r++]=this.createArtistCardData(t.mainArtist,"Main Artist");for(let s of t.features)e[r++]=this.createArtistCardData(s.name,"Featured Artist",s.socialLinks);for(let s of t.collaborators)e[r++]=this.createArtistCardData(s.name,"Collaborator",s.socialLinks);return e.length=r,e}findTrackByTime(t,e){return e.find(i=>t>=i.startTime&&t<i.endTime)||null}createArtistCardData(t,e,i={}){return{id:this.generateArtistId(t),name:t,displayName:t,role:e,socialLinks:i,color:this.generateColorForArtist(t)}}generateArtistId(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"-")}generateColorForArtist(t){let e=this.artistColorCache.get(t);if(e)return e;let i=0;for(let s=0;s<t.length;s++)i=(i<<5)-i+t.charCodeAt(s)&4294967295;let r=this.artistColors[Math.abs(i)%this.artistColors.length];return this.artistColorCache.set(t,r),r}arraysEqual(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i].id!==e[i]?.id)return!1;return!0}createTracksFromTimestamps(){let t=`0:00 SpiralFlip feat. eili: Blinding Dawn
2:48 Ariatec: Hollow Crown
5:44 MB feat. Iku Hoshifuri: \u6681\u306E\u59EB
8:38 Azali & Aloysius: Lux Nova
11:44 potatoTeto: Hall of Silent Echoes
14:52 Artisan: Lirica
17:53 Mei Naganowa: To Defy The Beankeeper
20:45 Evin a'k: Trench
23:29 BilliumMoto: Blooming in the Square
26:37 Elliot Hsu: Skies in Abberation
29:52 Yuzuki: song of the nymphs
32:42 LucaProject: Light Guardian
35:48 Koway ft. \u4F0D: Enso Antumbra
38:57 Nstryder: You're In My Way
42:05 MoAE.: Remember you
45:09 dystopian tanuki: Hidden passage
48:22 Heem feat. woojinee: Last Dance (detune version)
51:25 Bigg Milk: Second Guess
54:15 Gardens & Sad Keyboard Guy ft. eili: Fractured Light
57:04 Futsuunohito: Beyond the Veil of Light`,e=[],i=t.split(`
`);return i.forEach((r,s)=>{let p=r.match(/(\d+):(\d+)\s+(.+?):\s+(.+)/);if(p){let[,h,g,x,a]=p,n=parseInt(h)*60+parseInt(g),o=i[s+1],l=3600;if(o){let K=o.match(/(\d+):(\d+)/);K&&(l=parseInt(K[1])*60+parseInt(K[2]))}let u=[],m=[],d=s+1,y=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,_=x.match(y);if(_){let[,K,k]=_;u.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(k)})}let S=/(.+?)\s+&\s+(.+)/,q=x.match(S);if(q&&!_){let[,K,k]=q;m.push({id:this.generateArtistId(k),name:k,displayName:k,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(k)})}switch(d){case 3:m.push({id:"justin-thornburgh",name:"Justin Thornburgh",displayName:"Justin Thornburgh",role:"Accordion",socialLinks:this.getSocialLinksForArtist("Justin Thornburgh")},{id:"v1ris",name:"v1ris",displayName:"v1ris",role:"Violin",socialLinks:this.getSocialLinksForArtist("v1ris")},{id:"rita-kamishiro",name:"Rita Kamishiro",displayName:"Rita Kamishiro",role:"Viola",socialLinks:this.getSocialLinksForArtist("Rita Kamishiro")},{id:"marcus-ho",name:"Marcus Ho",displayName:"Marcus Ho",role:"Cello",socialLinks:this.getSocialLinksForArtist("Marcus Ho")});break;case 7:m.push({id:"anri-arcane",name:"Anri Arcane",displayName:"Anri Arcane",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"hxvoc",name:"HXVOC",displayName:"HXVOC",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"miyamai-moca",name:"Miyamai Moca",displayName:"Miyamai Moca",role:"Vocals (Synthesizer V)",socialLinks:{}},{id:"ninezero",name:"Ninezero",displayName:"Ninezero",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 11:m.push({id:"hanakuma-chifuyu",name:"Hanakuma Chifuyu",displayName:"Hanakuma Chifuyu",role:"Vocals (Synthesizer V)",socialLinks:{}});break;case 17:u.some(K=>K.name.toLowerCase()==="woojinee")||u.push({id:this.generateArtistId("woojinee"),name:"woojinee",displayName:"Woojinee",role:"Violin",socialLinks:this.getSocialLinksForArtist("woojinee")});break;case 19:m.some(K=>K.name==="Sad Keyboard Guy")||m.push({id:this.generateArtistId("Sad Keyboard Guy"),name:"Sad Keyboard Guy",displayName:"Sad Keyboard Guy",role:"Main Artist",socialLinks:this.getSocialLinksForArtist("Sad Keyboard Guy")});break;case 20:m.push({id:this.generateArtistId("shishishiena"),name:"shishishiena",displayName:"shishishiena",role:"Voice Actor",socialLinks:this.getSocialLinksForArtist("shishishiena")});break}let dt=x.replace(/\s+(?:feat\.|ft\.)\s+.+/,""),Ct=dt;s===0&&u.length>0&&(Ct=`${dt} (feat. ${u[0].name})`),e.push({id:(s+1).toString(),title:a,mainArtist:Ct,startTime:n,endTime:l,artists:[],features:u,collaborators:m,audioFile:this.getTrackFilename(s+1)})}}),e}getSocialLinksForArtist(t){return{SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},"Justin Thornburgh":{twitter:"https://x.com/JustinThornbur7"},v1ris:{website:"https://v1ris.com/",youtube:"https://www.youtube.com/@v1ris_music"},"Rita Kamishiro":{youtube:"https://www.youtube.com/@RitaKamishiro",carrd:"https://ritakamishiro.carrd.co/"},"Marcus Ho":{website:"https://www.marcushomusic.com/"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},potatoTeto:{youtube:"https://www.youtube.com/@potatoteto",website:"https://www.potatoteto.com/"},Artisan:{youtube:"https://www.youtube.com/@artisan1233",twitter:"https://x.com/artisan1233"},"Mei Naganowa":{twitter:"https://x.com/ReeKDoesDTM"},"Evin a'k":{youtube:"https://www.youtube.com/@Evin_a_k",twitter:"https://x.com/evin_a_k?lang=en"},BilliumMoto:{youtube:"https://www.youtube.com/@BilliumMoto",twitter:"https://x.com/BilliumMoto"},"Elliot Hsu":{youtube:"https://www.youtube.com/@ElliotHsu",twitter:"https://x.com/Leigendar"},Yuzuki:{youtube:"https://www.youtube.com/@yuzukimasu",linktr:"https://linktr.ee/yuzukimasu"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",twitter:"https://x.com/LucaProject6108",carrd:"https://lucaproject.carrd.co/"},Koway:{youtube:"https://www.youtube.com/@KOWAYmusic",instagram:"https://www.instagram.com/koway_music/",twitter:"https://x.com/kowaymusic"},\u4F0D\u4E00:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},\u4F0D:{youtube:"https://www.youtube.com/@dreamer051",twitch:"https://www.twitch.tv/dreamer051/about"},Nstryder:{youtube:"https://www.youtube.com/@nstryder-music",bandcamp:"https://nstryder.bandcamp.com/"},"MoAE.":{youtube:"https://www.youtube.com/@moae00",website:"https://moae.jimdosite.com/"},"dystopian tanuki":{youtube:"https://www.youtube.com/@dystopiantanuki",twitter:"https://x.com/DystopianTanuki"},woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee?igsh=czUwcXg3aWh6NmM5&utm_source=qr"},"Bigg Milk":{youtube:"https://www.youtube.com/@BiggMilk",twitter:"https://x.com/milk_bigg"},Gardens:{youtube:"https://www.youtube.com/@gardens5812",website:"https://gardensdtm.com/"},"Sad Keyboard Guy":{youtube:"https://www.youtube.com/@SadKeyboardGuy",carrd:"https://sadkeyboardguy.carrd.co/"},Futsuunohito:{youtube:"https://www.youtube.com/@futsuunohito",carrd:"https://futsuunohito.crd.co/"},shishishiena:{youtube:"https://www.youtube.com/@shishishiena",website:"https://www.shishishiena.com/"},Heem:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},Prower:{twitter:"https://x.com/prowerrr_"},Seycara:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},Qyubey:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},Luscinia:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},\u306F\u304C\u306D:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},Hagane:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},satella:{twitter:"https://x.com/satella0w0",youtube:"https://www.youtube.com/@satella0w0"},sleepy:{twitter:"https://x.com/sleeplessgamign"},Sleepless:{twitter:"https://x.com/sleeplessgamign"},PliXoR:{twitter:"https://x.com/plixormusic"},NapaL:{twitter:"https://x.com/Ve_Xillum"},"\uB098\uD314 NapaL":{twitter:"https://x.com/Ve_Xillum"},yy_artwork:{twitter:"https://x.com/yy_artwork"},"Elegant Sister":{twitter:"https://x.com/ElegantSister"},Len:{twitter:"https://x.com/Len_licht"},Daph:{twitter:"https://x.com/daphshoo"}}[t]||{}}getPhantasia1AudioFilename(t,e,i){return{1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t]||`${String(t).padStart(2,"0")}. ${e} - ${i}.ogg`}createPhantasia1TracksFromData(){let t=[{time:"0:00",artist:"SpiralFlip feat. eili",title:"Phantasia"},{time:"3:00",artist:"Bigg Milk",title:"First Steps"},{time:"6:00",artist:"Heem",title:"Altar of the Sword"},{time:"9:00",artist:"futsuunohito",title:"A Voyage on the Winds of Change"},{time:"12:00",artist:"Prower",title:"Rohkeutta Etsi\xE4"},{time:"15:00",artist:"AZALI & Seycara",title:"Ivory Flowers"},{time:"18:00",artist:"Qyubey",title:"Outer Bygone Ruins"},{time:"21:00",artist:"Luscinia",title:"Spiral Into the Abyss!"},{time:"24:00",artist:"Gardens & sleepy",title:"Wandering Breeze"},{time:"27:00",artist:"\u306F\u304C\u306D",title:"Mystic Nebula"},{time:"30:00",artist:"LucaProject",title:"Iris"},{time:"33:00",artist:"Mei Naganowa",title:"Half-Asleep in the Middle of Bumfuck Nowhere"},{time:"36:00",artist:"satella",title:"The Traveller"},{time:"39:00",artist:"dystopian tanuki",title:"Childhood memories"}],e=[];return t.forEach((i,r)=>{let[s,p]=i.time.split(":").map(Number),h=s*60+p,g=t[r+1],x=2700;if(g){let[y,_]=g.time.split(":").map(Number);x=y*60+_}let a=[],n=[],o=/(.+?)\s+(?:feat\.|ft\.)\s+(.+)/,l=i.artist.match(o);if(l){let[,y,_]=l;a.push({id:this.generateArtistId(_),name:_,displayName:_,role:"Featured Artist",socialLinks:this.getSocialLinksForArtist(_)})}let u=/(.+?)\s+&\s+(.+)/,m=i.artist.match(u);if(m&&!l){let[,y,_]=m;n.push({id:this.generateArtistId(_),name:_,displayName:_,role:"Collaborator",socialLinks:this.getSocialLinksForArtist(_)})}let d=i.artist.replace(/\s+(?:feat\.|ft\.)\s+.+/,"");m&&!l&&(d=m[1]),e.push({id:`p1-${r+1}`,title:i.title,mainArtist:d,startTime:h,endTime:x,artists:[],features:a,collaborators:n,audioFile:this.getPhantasia1AudioFilename(r+1,i.artist,i.title)})}),e}};Ot.\u0275fac=function(e){return new(e||Ot)(V(vt),V(ct),V(ge))},Ot.\u0275prov=j({token:Ot,factory:Ot.\u0275fac,providedIn:"root"});var lt=Ot;var St=class St{constructor(){this.tracksMap=new Map;this.audioStateSubject=new P({isPlaying:!1,currentTrack:null,currentTime:0,duration:0,volume:.5});this.audioState$=this.audioStateSubject.asObservable();this.audioElement=new Audio,this.initializeTracksMap(),this.setupEventListeners()}initializeTracksMap(){this.tracksMap.set("introduction","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-1","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("disc-2","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("pv","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("information","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg"),this.tracksMap.set("phantasia","assets/audio/Phantasia_1/01. SpiralFlip - Phantasia ft. Eili.ogg");for(let t=1;t<=14;t++){let i={1:"01. SpiralFlip - Phantasia ft. Eili.ogg",2:"02. Bigg Milk - First Steps.ogg",3:"03. Heem - Altar of the Sword.ogg",4:"04. futsuunohito - A Voyage on the Winds of Change.ogg",5:"05. Prower - Rohkeutta Etsi\xE4.ogg",6:"06. AZALI & Seycara  - Ivory Flowers.ogg",7:"07. Qyubey - Outer Bygone Ruins.ogg",8:"08. Luscinia - Spiral Into the Abyss!.ogg",9:"09. Gardens & sleepy - Wandering Breeze.ogg",10:"10. \u306F\u304C\u306D - Mystic Nebula.ogg",11:"11. LucaProject - Iris.ogg",12:"12. Mei Naganowa - Half-Asleep in the Middle of Bumfuck Nowhere.ogg",13:"13. satella - The Traveller.ogg",14:"14. dystopian tanuki - Childhood memories.ogg"}[t];i&&(this.tracksMap.set(t.toString(),`assets/audio/Phantasia_1/${i}`),this.tracksMap.set(`track-${t}`,`assets/audio/Phantasia_1/${i}`),this.tracksMap.set(`p1-${t}`,`assets/audio/Phantasia_1/${i}`))}for(let t=1;t<=20;t++){let i={1:"1. SpiralFlip - Blinding Dawn feat. eili.ogg",2:"2. Ariatec - Hollow Crown.ogg",3:"3. MB -  \u6681\u306E\u59EB feat. Iku Hoshifuri.ogg",4:"4. Azali & Aloysius - Lux Nova.ogg",5:"5. potatoTeto - Hall of Silent Echoes.ogg",6:"6. Artisan - Lirica.ogg",7:"7. Mei Naganowa - To Defy The Beankeeper.ogg",8:"8. Evin a'k - Trench.ogg",9:"9. BilliumMoto - Blooming in the Square.ogg",10:"10. Elliot Hsu - Skies in Abberation.ogg",11:"11. Yuzuki - song of the nymphs.ogg",12:"12. LucaProject - Light Guardian.ogg",13:"13. Koway - Enso Antumbra ft. \u4F0D.ogg",14:"14. Nstryder - You_re In My Way.ogg",15:"15. MoAE. - Remember you.ogg",16:"16. dystopian tanuki - Hidden passage.ogg",17:"17. Heem - Last Dance feat. woojinee (detune version).ogg",18:"18. Bigg Milk - Second Guess.ogg",19:"19. Gardens & Sad Keyboard Guy - Fractured Light ft. eili.ogg",20:"20. Futsuunohito - Beyond the Veil of Light.ogg"}[t];i&&(this.tracksMap.set(`p2-${t}`,`assets/audio/Phantasia_2/${i}`),this.tracksMap.set(`phantasia2-${t}`,`assets/audio/Phantasia_2/${i}`))}}setupEventListeners(){this.audioElement.addEventListener("timeupdate",()=>{this.updateAudioState({currentTime:this.audioElement.currentTime})}),this.audioElement.addEventListener("loadedmetadata",()=>{this.updateAudioState({duration:this.audioElement.duration})}),this.audioElement.addEventListener("ended",()=>{this.updateAudioState({isPlaying:!1,currentTime:0}),this.audioElement.currentTime=0}),this.audioElement.addEventListener("error",t=>{console.error("[AudioService] Error playing audio:",t),this.updateAudioState({isPlaying:!1,currentTrack:null})})}updateAudioState(t){let e=this.audioStateSubject.getValue(),i=w(w({},e),t);this.audioStateSubject.next(i)}playTrack(t){let e=this.tracksMap.get(t);if(!e){console.error(`[AudioService] Track not found: ${t}`);return}this.audioStateSubject.getValue().currentTrack!==t&&(this.audioElement.src=e,this.audioElement.load(),this.updateAudioState({currentTrack:t,currentTime:0})),this.audioElement.play().then(()=>{this.updateAudioState({isPlaying:!0})}).catch(i=>{console.error("[AudioService] Error playing track:",i)})}pause(){this.audioElement.pause(),this.updateAudioState({isPlaying:!1})}togglePlayPause(){let t=this.audioStateSubject.getValue();t.isPlaying?this.pause():t.currentTrack&&this.playTrack(t.currentTrack)}setVolume(t){let e=Math.min(1,Math.max(0,t));this.audioElement.volume=e,this.updateAudioState({volume:e})}seekTo(t){if(this.audioElement.readyState>0){let e=Math.min(this.audioElement.duration,Math.max(0,t));this.audioElement.currentTime=e,this.updateAudioState({currentTime:e})}}setTrackForSection(t){let e=this.audioStateSubject.getValue();this.tracksMap.get(t)&&e.currentTrack!==t&&this.playTrack(t)}};St.\u0275fac=function(e){return new(e||St)},St.\u0275prov=j({token:St,factory:St.\u0275fac,providedIn:"root"});var _t=St;var Xt=_i(di());var Tt=class Tt{constructor(t){this.http=t;this.destroy$=new G;this.isDebugMode=!0;this.audio=null;this.currentTrack=null;this._isPlaying=!1;this.volume=1;this.progress=0;this.isLoading=!1;this.TRACKS={introduction:{title:"Introduction",artist:"An",id:"intro",url:"assets/audio/An - Incident.mp3"},"disc-1":{title:"I can avoid it",artist:"Feryquitous",id:"disc1",url:"assets/audio/Feryquitous - i can avoid it.mp3"},"disc-2":{title:"Quantum Resonance",artist:"An",id:"disc2",url:"assets/audio/An - Quantum Resonance.mp3"},pv:{title:"Neural Network",artist:"Feryquitous",id:"pv",url:"assets/audio/Feryquitous - Neural Network.mp3"},information:{title:"Digital Entropy",artist:"An \xD7 Feryquitous",id:"info",url:"assets/audio/An \xD7 Feryquitous - Digital Entropy.mp3"}};this.audioStateSubject=new P({isPlaying:!1,currentTrack:null,volume:1,progress:0,loading:!1});this.audioEventSubject=new P({type:"pause"});this.errorSubject=new G;this.currentTrackSubject=new P("");this.currentTrack$=this.currentTrackSubject.asObservable();this.audioFiles=[];this.sectionTracks={introduction:"An - Incident.mp3","disc-1":"Feryquitous - i can avoid it.mp3","disc-2":"An - Quantum Resonance.mp3",pv:"Feryquitous - Neural Network.mp3",information:"An \xD7 Feryquitous - Digital Entropy.mp3"};this.uiSounds={"menu-click":"assets/audio/ui/menu-click.mp3","page-turn":"assets/audio/ui/page-turn.mp3",success:"assets/audio/ui/success.mp3",error:"assets/audio/ui/error.mp3"};this.loadAudioFiles(),this.initializeAudio(),this.isDebugMode&&console.log("[AudioService] Initialized")}loadAudioFiles(){return J(this,null,function*(){try{this.audioFiles.push(...Object.values(this.sectionTracks).map(t=>`assets/audio/${t}`)),this.audioFiles.length>0&&this.currentTrackSubject.next(this.audioFiles[0]),this.isDebugMode&&console.log("[AudioService] Audio files loaded:",this.audioFiles)}catch(t){this.handleError("LOAD_ERROR",`Failed to load audio files: ${t instanceof Error?t.message:String(t)}`)}})}initializeAudio(){this.audio=new Audio,this.setupAudioEventListeners()}setupAudioEventListeners(){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.audio.addEventListener("timeupdate",()=>{this.audio&&(this.progress=this.audio.duration?this.audio.currentTime/this.audio.duration*100:0,this.updateAudioState(),this.audioEventSubject.next({type:"timeupdate",data:this.progress}))}),this.audio.addEventListener("ended",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"ended"})}),this.audio.addEventListener("error",t=>{let e=t;this.handleError("LOAD_ERROR",`Failed to load audio: ${e.message||"Unknown error"}`),this.audioEventSubject.next({type:"error",data:e.message})}),this.audio.addEventListener("loadstart",()=>{this.isLoading=!0,this.updateAudioState(),this.audioEventSubject.next({type:"loading"})}),this.audio.addEventListener("canplay",()=>{this.isLoading=!1,this.updateAudioState(),this.audioEventSubject.next({type:"loaded"})}),this.audio.addEventListener("play",()=>{this._isPlaying=!0,this.updateAudioState(),this.audioEventSubject.next({type:"play"})}),this.audio.addEventListener("pause",()=>{this._isPlaying=!1,this.updateAudioState(),this.audioEventSubject.next({type:"pause"})})}updateAudioState(){this.audioStateSubject.next({isPlaying:this._isPlaying,currentTrack:this.currentTrack,volume:this.volume,progress:this.progress,loading:this.isLoading})}handleError(t,e){this.isDebugMode&&console.error(`[AudioService] ${t}: ${e}`),this.errorSubject.next({type:t,message:e})}setTrackForSection(t){let e=this.TRACKS[t];if(!e){this.handleError("LOAD_ERROR",`No track found for section: ${t}`);return}this.currentTrack?.id!==e.id&&(this.isDebugMode&&console.log(`[AudioService] Setting track for section: ${t}`,e),this.currentTrack=e,this.loadTrack(e),this.currentTrackSubject.next(e.url))}loadTrack(t){if(!this.audio){this.handleError("LOAD_ERROR","Audio element not initialized");return}this.isLoading=!0,this.updateAudioState(),this.audio.src=t.url;try{this.audio.load()}catch(e){this.handleError("LOAD_ERROR",`Failed to load track: ${e instanceof Error?e.message:String(e)}`)}}play(){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}if(!this.currentTrack){this.handleError("PLAY_ERROR","No track selected");return}this.isDebugMode&&console.log("[AudioService] Playing audio:",this.currentTrack.title),this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(t=>{this.handleError("PLAY_ERROR",`Failed to play audio: ${t instanceof Error?t.message:String(t)}`)})}pause(){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log("[AudioService] Pausing audio"),this.audio.pause(),this._isPlaying=!1,this.updateAudioState()}togglePlay(){this._isPlaying?this.pause():this.play()}setVolume(t){if(!this.audio){this.handleError("PAUSE_ERROR","Audio element not initialized");return}this.volume=Math.max(0,Math.min(1,t)),this.audio.volume=this.volume,this.updateAudioState(),this.isDebugMode&&console.log(`[AudioService] Volume set to: ${this.volume}`)}getCurrentState(){return this.audioStateSubject.asObservable()}getAudioEvents(){return this.audioEventSubject.asObservable()}onPlayStateChange(){return this.getCurrentState().pipe(I(t=>t.isPlaying))}onTrackChange(){return this.currentTrack$}onLoadingStateChange(){return this.getCurrentState().pipe(I(t=>t.loading))}getProgress(){return!this.audio||!this.audio.duration?0:this.audio.currentTime/this.audio.duration}getErrors(){return this.errorSubject.asObservable()}isPlaying(){return this._isPlaying}getCurrentTrack(){return this.currentTrackSubject.value}getNextTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t<this.audioFiles.length-1){let e=this.audioFiles[t+1];return this.currentTrackSubject.next(e),e}return null}getPreviousTrack(){let t=this.audioFiles.indexOf(this.currentTrackSubject.value);if(t>0){let e=this.audioFiles[t-1];return this.currentTrackSubject.next(e),e}return null}getTrackList(){return this.audioFiles}getCurrentIndex(){return this.audioFiles.indexOf(this.currentTrackSubject.value)}playUISound(t){if(!this.uiSounds[t]){this.handleError("UI_SOUND_ERROR",`UI sound not found: ${t}`);return}try{let e=new Audio(this.uiSounds[t]);e.volume=.5,e.play().catch(i=>{this.handleError("UI_SOUND_ERROR",`Error playing UI sound: ${i instanceof Error?i.message:String(i)}`)})}catch(e){this.handleError("UI_SOUND_ERROR",`Failed to create UI sound: ${e instanceof Error?e.message:String(e)}`)}}playTrack(t){if(!this.audio){this.handleError("PLAY_ERROR","Audio element not initialized");return}this.isDebugMode&&console.log(`[AudioService] Playing track from source: ${t}`),this.currentTrackSubject.next(t),this.isLoading=!0,this.updateAudioState(),this.audio.src=t,this.audio.play().then(()=>{this._isPlaying=!0,this.updateAudioState()}).catch(e=>{this.handleError("PLAY_ERROR",`Error playing track: ${e instanceof Error?e.message:String(e)}`)})}pauseTrack(){this.pause()}resumeTrack(){this.play()}ngOnDestroy(){this.isDebugMode&&console.log("[AudioService] Destroying service"),this.audio&&(this.audio.onended=null,this.audio.ontimeupdate=null,this.audio.onerror=null,this.audio.oncanplay=null,this.audio.onloadstart=null,this.audio.pause(),this.audio.src="",this.audio=null),this.audioStateSubject.complete(),this.audioEventSubject.complete(),this.currentTrackSubject.complete(),this.errorSubject.complete(),this.destroy$.next(),this.destroy$.complete()}};Tt.\u0275fac=function(e){return new(e||Tt)(V(vt))},Tt.\u0275prov=j({token:Tt,factory:Tt.\u0275fac,providedIn:"root"});var ve=Tt;var Et=class Et{constructor(t,e,i){this.dynamicArtistService=t;this.audioService=e;this.artistCreditService=i;this.destroy$=new G;this.musicStateSubject=new P({isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"});this.artistFilteringStateSubject=new P({mode:"no-music",currentArtists:[],allArtists:[],displayTitle:"All Phantasia 2 Artists",displaySubtitle:"Showcasing 31 of 31 artists from the album"});this.musicState$=this.musicStateSubject.asObservable();this.artistFilteringState$=this.artistFilteringStateSubject.asObservable();this.currentArtistsForFiltering$=this.artistFilteringState$.pipe(I(t=>t.currentArtists),Q((t,e)=>this.compareArtistArrays(t,e)),Mt(1),D(this.destroy$));this.displayInfo$=this.artistFilteringState$.pipe(I(t=>({title:t.displayTitle,subtitle:t.displaySubtitle,mode:t.mode})),Q((t,e)=>t.title===e.title&&t.subtitle===e.subtitle&&t.mode===e.mode),Mt(1),D(this.destroy$));this.subscriptions={};this.stateUpdateQueue=[];this.isProcessingQueue=!1;this.initializeService()}ngOnDestroy(){try{console.log("[MusicStateManager] Starting cleanup..."),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,Object.keys(this.subscriptions).forEach(t=>{try{this.subscriptions[t]&&typeof this.subscriptions[t].unsubscribe=="function"&&this.subscriptions[t].unsubscribe()}catch(e){console.error(`[MusicStateManager] Error unsubscribing from ${t}:`,e)}}),this.destroy$.next(),this.destroy$.complete(),console.log("[MusicStateManager] Cleanup completed")}catch(t){console.error("[MusicStateManager] Error during cleanup:",t)}}initializeService(){try{console.log("[MusicStateManager] Initializing service..."),this.loadAllArtistsForShowcase(),this.subscriptions.currentTrack=this.dynamicArtistService.currentTrack$.pipe(Q((t,e)=>t?.id===e?.id),D(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.handleTrackChange(t,"phantasia2")),error:t=>console.error("[MusicStateManager] Error in currentTrack subscription:",t)}),this.subscriptions.currentTime=this.dynamicArtistService.currentTime$.pipe(mt(50),Q(),D(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateCurrentTime(t)),error:t=>console.error("[MusicStateManager] Error in currentTime subscription:",t)}),this.subscriptions.audioState=this.audioService.audioState$.pipe(Q((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),D(this.destroy$)).subscribe({next:t=>{let e=this.musicStateSubject.value;(!e.currentTrack||e.playbackMode!=="phantasia2")&&this.queueStateUpdate(()=>this.handleAudioStateChange(t))},error:t=>console.error("[MusicStateManager] Error in audioState subscription:",t)}),this.subscriptions.trackCredits=this.artistCreditService.currentTrackCredits$.pipe(D(this.destroy$)).subscribe({next:t=>this.queueStateUpdate(()=>this.updateTrackCredits(t)),error:t=>console.error("[MusicStateManager] Error in trackCredits subscription:",t)}),console.log("[MusicStateManager] Service initialized with enhanced error handling")}catch(t){console.error("[MusicStateManager] Error during initialization:",t)}}handleTrackChange(t,e){try{let i=this.musicStateSubject.value;if(t&&i.currentTrack?.id===t.id){console.log(`[MusicStateManager] Track ${t.id} already active, skipping update`);return}if(t){let r=null;try{r=this.artistCreditService.getTrackCredits(t.id)}catch(x){console.warn(`[MusicStateManager] Could not get credits for track ${t.id}:`,x)}let s=this.extractArtistsFromTrack(t,r),p=E(w({},i),{currentTrack:t,currentTrackCredits:r,playbackMode:e});if(this.validateMusicState(p))this.musicStateSubject.next(p);else{console.error("[MusicStateManager] Invalid music state, skipping update");return}let h=this.artistFilteringStateSubject.value.allArtists,g={mode:"music-playing",currentArtists:s,allArtists:h,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${t.title}" - ${s.length} artists are currently featured`};this.validateArtistFilteringState(g)&&this.artistFilteringStateSubject.next(g),console.log(`[MusicStateManager] Track changed to: "${t.title}" with ${s.length} artists`)}else this.switchToNoMusicMode()}catch(i){console.error("[MusicStateManager] Error handling track change:",i),this.switchToNoMusicMode()}}handleAudioStateChange(t){let e=this.musicStateSubject.value;if(t.isPlaying&&t.currentTrack){let i=this.artistCreditService.getTrackCredits(t.currentTrack),r=E(w({},e),{isPlaying:t.isPlaying,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.duration>0?t.currentTime/t.duration:0,playbackMode:"legacy",currentTrackCredits:i});if(this.musicStateSubject.next(r),i){let s={mode:"music-playing",currentArtists:i.allContributions,allArtists:this.artistFilteringStateSubject.value.allArtists,displayTitle:"Currently Playing Artists",displaySubtitle:`Artists for "${i.title}" - ${i.allContributions.length} artists are currently featured`};this.artistFilteringStateSubject.next(s)}}else this.switchToNoMusicMode()}switchToNoMusicMode(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value.allArtists,i=E(w({},t),{isPlaying:!1,currentTrack:null,currentTrackCredits:null,playbackMode:"idle"});this.musicStateSubject.next(i);let r={mode:"no-music",currentArtists:[],allArtists:e,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${e.length} of 31 artists from the album`};this.artistFilteringStateSubject.next(r),console.log("[MusicStateManager] Switched to no-music mode - showing all artists")}updateCurrentTime(t){let e=this.musicStateSubject.value,i=E(w({},e),{currentTime:t,trackProgress:e.duration>0?t/e.duration:0});this.musicStateSubject.next(i)}updateTrackCredits(t){let e=this.musicStateSubject.value,i=E(w({},e),{currentTrackCredits:t});if(this.musicStateSubject.next(i),t&&e.currentTrack){let r=this.artistFilteringStateSubject.value,s=E(w({},r),{currentArtists:t.allContributions,displaySubtitle:`Artists for "${t.title}" - ${t.allContributions.length} artists are currently featured`});this.artistFilteringStateSubject.next(s)}}extractArtistsFromTrack(t,e){if(e)return e.allContributions;let i=[];return t.mainArtist&&i.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features?.forEach((r,s)=>{i.push({id:`${t.id}-featured-${s}`,artistName:r.name,artistDisplayName:r.displayName||r.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:r.socialLinks})}),t.collaborators?.forEach((r,s)=>{i.push({id:`${t.id}-collab-${s}`,artistName:r.name,artistDisplayName:r.displayName||r.name,role:r.role||"Collaborator",participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:r.socialLinks})}),i}loadAllArtistsForShowcase(){let t=this.artistCreditService.getAllPhantasia2Artists(),e=this.artistFilteringStateSubject.value,i=E(w({},e),{allArtists:t,displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`});this.artistFilteringStateSubject.next(i)}forceNoMusicMode(){this.switchToNoMusicMode()}getCurrentMusicState(){return this.musicStateSubject.value}getCurrentArtistFilteringState(){return this.artistFilteringStateSubject.value}setPlayingState(t){let e=this.musicStateSubject.value,i=E(w({},e),{isPlaying:t});this.musicStateSubject.next(i)}updateVolume(t){let e=this.musicStateSubject.value,i=E(w({},e),{volume:t});this.musicStateSubject.next(i)}updateDuration(t){let e=this.musicStateSubject.value,i=E(w({},e),{duration:t,trackProgress:e.currentTime>0?e.currentTime/t:0});this.musicStateSubject.next(i)}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i].id!==e[i].id)return!1;return!0}getDebugInfo(){let t=this.musicStateSubject.value,e=this.artistFilteringStateSubject.value;return{musicState:{playbackMode:t.playbackMode,isPlaying:t.isPlaying,currentTrackId:t.currentTrack?.id,currentTrackTitle:t.currentTrack?.title,currentTime:t.currentTime,duration:t.duration,volume:t.volume,trackProgress:t.trackProgress},filteringState:{mode:e.mode,currentArtistsCount:e.currentArtists.length,allArtistsCount:e.allArtists.length,displayTitle:e.displayTitle,displaySubtitle:e.displaySubtitle},subscriptions:{activeSubscriptions:Object.keys(this.subscriptions).length,subscriptionKeys:Object.keys(this.subscriptions)},stateQueue:{queueLength:this.stateUpdateQueue.length,isProcessing:this.isProcessingQueue}}}queueStateUpdate(t){this.stateUpdateQueue.push(t),this.processStateQueue()}processStateQueue(){return J(this,null,function*(){if(!(this.isProcessingQueue||this.stateUpdateQueue.length===0)){this.isProcessingQueue=!0;try{for(;this.stateUpdateQueue.length>0;){let t=this.stateUpdateQueue.shift();if(t){try{t()}catch(e){console.error("[MusicStateManager] Error processing state update:",e)}yield new Promise(e=>setTimeout(e,10))}}}finally{this.isProcessingQueue=!1}}})}validateMusicState(t){try{return typeof t.isPlaying=="boolean"&&typeof t.currentTime=="number"&&typeof t.duration=="number"&&typeof t.volume=="number"&&typeof t.trackProgress=="number"&&t.volume>=0&&t.volume<=1&&t.trackProgress>=0&&t.trackProgress<=1&&t.currentTime>=0&&t.duration>=0}catch(e){return console.error("[MusicStateManager] Error validating music state:",e),!1}}validateArtistFilteringState(t){try{return["no-music","music-playing"].includes(t.mode)&&Array.isArray(t.currentArtists)&&Array.isArray(t.allArtists)&&typeof t.displayTitle=="string"&&typeof t.displaySubtitle=="string"}catch(e){return console.error("[MusicStateManager] Error validating artist filtering state:",e),!1}}emergencyReset(){console.warn("[MusicStateManager] Performing emergency reset");try{let t=this.artistCreditService.getAllPhantasia2Artists(),e={isPlaying:!1,currentTrack:null,currentTrackCredits:null,currentTime:0,duration:0,volume:.5,trackProgress:0,playbackMode:"idle"},i={mode:"no-music",currentArtists:[],allArtists:t,displayTitle:"All Phantasia 2 Artists",displaySubtitle:`Showcasing ${t.length} of 31 artists from the album`};this.musicStateSubject.next(e),this.artistFilteringStateSubject.next(i),this.stateUpdateQueue.length=0,this.isProcessingQueue=!1,console.log("[MusicStateManager] Emergency reset completed")}catch(t){console.error("[MusicStateManager] Error during emergency reset:",t)}}};Et.\u0275fac=function(e){return new(e||Et)(V(lt),V(_t),V(ct))},Et.\u0275prov=j({token:Et,factory:Et.\u0275fac,providedIn:"root"});var Vt=Et;function Li(c,t){if(c&1&&(f(0,"div",30)(1,"div",31),M(2,"\u26A0"),b(),f(3,"span"),M(4),b()()),c&2){let e=A();v(4),B(e.error)}}function ji(c,t){c&1&&(f(0,"div",32),O(1,"div",33),f(2,"span"),M(3,"Loading audio..."),b()())}function Ri(c,t){if(c&1&&(f(0,"div",38)(1,"div",39)(2,"h4",40),M(3),b(),f(4,"p",41),M(5),b()()()),c&2){let e=A(2);v(3),B(e.currentTrackInfo.title),v(2),B(e.currentTrackInfo.mainArtist)}}function Ni(c,t){if(c&1&&(f(0,"div",42)(1,"div",40),M(2),b(),f(3,"div",41),M(4),b()()),c&2){let e=A(2);v(2),B(e.getTrackName(e.currentTrack)),v(2),B(e.getArtistName())}}function Vi(c,t){if(c&1&&(f(0,"div",43),M(1),b()),c&2){let e=A(2);v(),at(" ",e.currentSubtitle," ")}}function zi(c,t){if(c&1&&(f(0,"div",34),T(1,Ri,6,2,"div",35)(2,Ni,5,2,"div",36)(3,Vi,2,1,"div",37),b()),c&2){let e=A();v(),C("ngIf",e.currentTrackInfo),v(),C("ngIf",!e.currentTrackInfo&&e.currentTrack),v(),C("ngIf",e.currentSubtitle&&!e.trackTitle&&!e.currentTrackInfo)}}var zt=class zt{constructor(t,e,i,r){this.audioService=t;this.dynamicArtistService=e;this.musicStateManager=i;this.cdr=r;this.trackTitle="";this.trackArtist="";this.activeTrack=null;this.audio=null;this.destroy$=new G;this.trackLoadingMutex=new G;this.isTrackLoading=!1;this.audioInstances=[];this.lastLoadedTrackId=null;this.isPlaying=!1;this.isLoading=!0;this.currentTrack="";this.currentTime=0;this.duration=0;this.volume=.5;this._isMuted=!1;this._savedVolumeBeforeMute=.5;this._muteStateInitialized=!1;this.error="";this.currentSubtitle="";this.currentTrackInfo=null;this.allTracks=[];this.currentTrackIndex=0;this.currentProject="phantasia1";this.hasUserInteracted=!1;this.lastSuccessfulVolume=.5;this.retryCount=0;this.maxRetries=3;this.audioContext=null;this.eventListeners=[];this.isAudioContextInitialized=!1;this.diagnoseEnvironment(),this.initializeAudioContext(),this.setupGlobalEventListeners()}diagnoseEnvironment(){console.group("[MusicPlayer] Environment Diagnosis"),console.log("User Agent:",navigator.userAgent),console.log("Location:",window.location.href),console.log("Base URL:",document.baseURI),console.log("Protocol:",window.location.protocol),console.log("Host:",window.location.host),console.log("Port:",window.location.port);let t="8. Evin a\u2019k - Trench.ogg";console.log("Unicode Test String:",t),console.log("Unicode Test Encoded:",encodeURIComponent(t)),console.log("Howler Audio Support:",{webAudio:window.Howler?.ctx!==null,html5:!0,codecs:{ogg:window.Howler?.codecs?.("audio/ogg")||"unknown",mp3:window.Howler?.codecs?.("audio/mpeg")||"unknown"}}),console.groupEnd()}getAudioDirectory(){return this.currentProject==="phantasia1"?"Phantasia_1":"Phantasia_2"}ngOnInit(){this.initializeAudio()}ngOnDestroy(){try{this.destroy$.next(),this.destroy$.complete(),this.cleanupAllAudioInstances(),this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupAudioContext(),this.cleanupEventListeners(),console.log("[MusicPlayer] Component destroyed and resources cleaned up")}catch(t){console.error("[MusicPlayer] Error during cleanup:",t)}}initializeAudio(){this.dynamicArtistService.currentProject$.pipe(D(this.destroy$)).subscribe(t=>{this.currentProject=t,console.log(`[MusicPlayer] Project switched to: ${t}`),this.cdr.markForCheck()}),this.dynamicArtistService.tracks$.pipe(D(this.destroy$)).subscribe(t=>{this.allTracks=t,t.length>0&&!this.currentTrackInfo&&(this.currentTrackInfo=t[0],this.currentTrackIndex=0,this.loadTrackFromInfo(this.currentTrackInfo),this.updateDynamicArtistTime()),this.cdr.markForCheck()}),this.dynamicArtistService.currentTrack$.pipe(D(this.destroy$)).subscribe(t=>{t&&t!==this.currentTrackInfo&&(this.currentTrackInfo=t,this.currentTrackIndex=this.allTracks.findIndex(e=>e.id===t.id),this.loadTrackFromInfo(t)),this.cdr.markForCheck()})}loadTrackFromInfo(t){return J(this,null,function*(){if(this.isTrackLoading){console.log("[MusicPlayer] Track loading already in progress, waiting...");return}if(this.lastLoadedTrackId===t.id&&!this.error){console.log(`[MusicPlayer] Track ${t.id} already loaded, skipping`);return}this.isTrackLoading=!0,this.lastLoadedTrackId=t.id,this.retryCount=0;try{this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.error="",this.cdr.markForCheck(),yield this.cleanupCurrentAudio(),console.log(`[MusicPlayer] Starting track load: ${t.title} (${t.id})`)}catch(i){console.error("[MusicPlayer] Error during track loading preparation:",i),this.handleTrackLoadError(t,i);return}let e;if(t.audioFile){let i=t.audioFile;console.log("[MusicPlayer] Original filename:",i),console.log("[MusicPlayer] Filename char codes:",[...i].map(s=>`${s}(${s.charCodeAt(0)})`).join(" "));let r=[()=>`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(i)}`,()=>{let s=i.replace(/'/g,"'");return`assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(s)}`},()=>{let s=i.replace(/'/g,"%E2%80%99").replace(/ /g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29");return`assets/audio/${this.getAudioDirectory()}/${s}`},()=>`assets/audio/${this.getAudioDirectory()}/${i}`,()=>`/assets/audio/${this.getAudioDirectory()}/${encodeURIComponent(i)}`];e=r[0](),this._fallbackUrls=r.slice(1).map(s=>s()),this._currentStrategyIndex=0,this._trackInfo=t,console.log("[MusicPlayer] Prepared fallback URLs:"),this._fallbackUrls.forEach((s,p)=>{console.log(`  Strategy ${p+1}: ${s}`)})}else e=`assets/audio/${this.getAudioDirectory()}/${t.id}.ogg`,this._fallbackUrls=[];console.log("[MusicPlayer] Loading audio (Strategy 0):",e),t.id==="8"&&(console.group("[MusicPlayer] Track 8 Diagnostics"),console.log("Track ID:",t.id),console.log("Track Title:",t.title),console.log("Main Artist:",t.mainArtist),console.log("Audio File Mapping:",t.audioFile),console.log("Final Audio Source:",e),console.log("Browser Location:",window.location.href),console.groupEnd()),this.audio=new Xt.Howl({src:[e],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.musicStateManager.setPlayingState(!0),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.musicStateManager.setPlayingState(!1),this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.musicStateManager.setPlayingState(!1),this.nextTrack(),this.cdr.markForCheck()},onloaderror:(i,r)=>{console.error("[MusicPlayer] Error loading (Strategy "+(this._currentStrategyIndex||0)+"):",e,r),console.error("[MusicPlayer] Track info:",t);let s=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(p<s.length){console.log("[MusicPlayer] Attempting fallback strategy",p+1),this._currentStrategyIndex=p+1;let h=s[p];console.log("[MusicPlayer] Trying fallback URL:",h),this.audio&&this.audio.unload(),this.audio=new Xt.Howl({src:[h],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(g,x)=>{if(console.error("[MusicPlayer] Fallback also failed:",h,x),p>=s.length-1)this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. Tried ${s.length+1} different URL encodings. Last error: ${x}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck();else{this._currentStrategyIndex=p+1;let a=s[p+1];a&&(console.log("[MusicPlayer] Trying next fallback strategy:",p+2),this.tryLoadWithUrl(a,t))}}})}else this.error=`Failed to load track "${t.title}" by ${t.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${r}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&(this.audioInstances.push(this.audio),this.isTrackLoading=!1)})}tryLoadWithUrl(t,e){return J(this,null,function*(){try{yield this.cleanupCurrentAudio()}catch(i){console.error("[MusicPlayer] Error cleaning up before fallback:",i)}this.audio=new Xt.Howl({src:[t],html5:!0,format:["ogg","mp3"],volume:this.volume,onload:()=>{console.log("[MusicPlayer] Fallback strategy successful!"),this.isLoading=!1,this.isTrackLoading=!1,this.duration=this.audio?.duration()||0,this._isMuted&&this.audio?this.audio.volume(0):this.audio&&this.audio.volume(this.volume),this.updateDynamicArtistTime(),this.musicStateManager.updateDuration(this.duration),this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.updateDynamicArtistTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(i,r)=>{let s=this._fallbackUrls||[],p=this._currentStrategyIndex||0;if(console.error(`[MusicPlayer] Fallback strategy ${p+1} failed:`,t,r),p<s.length-1){this._currentStrategyIndex=p+1;let h=s[p];console.log(`[MusicPlayer] Trying next fallback strategy ${p+2}:`,h),this.tryLoadWithUrl(h,e)}else this.error=`Failed to load track "${e.title}" by ${e.mainArtist}. All ${s.length+1} encoding strategies failed. Final error: ${r}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cdr.markForCheck()}}),this.audio&&this.audioInstances.push(this.audio)})}loadTrack(t){this.isLoading=!0,this.currentTime=0,this.isPlaying=!1,this.cdr.markForCheck(),this.audio&&this.audio.unload(),this.audio=new Xt.Howl({src:[t.url||t.title],html5:!0,onload:()=>{this.isLoading=!1,this.duration=this.audio?.duration()||0,this.cdr.markForCheck()},onplay:()=>{this.isPlaying=!0,this.updateTime(),this.cdr.markForCheck()},onpause:()=>{this.isPlaying=!1,this.cdr.markForCheck()},onend:()=>{this.isPlaying=!1,this.currentTime=0,this.nextTrack(),this.cdr.markForCheck()},onloaderror:(e,i)=>{this.error=`Failed to load track: ${i}`,this.isLoading=!1,this.cdr.markForCheck()}})}togglePlay(){return J(this,null,function*(){if(!this.audio){console.warn("[MusicPlayer] No audio instance available for playback");return}try{yield this.ensureAudioContextReady(),this.isPlaying?(this.audio.pause(),this.isPlaying=!1):(this.hasUserInteracted=!0,this.audio.play(),this.isPlaying=!0),this.musicStateManager.setPlayingState(this.isPlaying),this.cdr.markForCheck(),console.log(`[MusicPlayer] Playback ${this.isPlaying?"started":"paused"}`)}catch(t){console.error("[MusicPlayer] Error toggling playback:",t),this.error="Playback error occurred",this.cdr.markForCheck()}})}setVolume(t){if(!this.audio){this.volume=Math.max(0,Math.min(1,t)),this.lastSuccessfulVolume=this.volume;return}try{let e=Math.max(0,Math.min(1,t));this.volume=e,!this._isMuted&&e>0&&(this._savedVolumeBeforeMute=e,this.lastSuccessfulVolume=e),this.audio.volume(e),this.musicStateManager.updateVolume(e),this.cdr.markForCheck(),console.log(`[MusicPlayer] Volume set to ${e}, muted: ${this._isMuted}`)}catch(e){console.error("[MusicPlayer] Error setting volume:",e),this.handleVolumeError(t)}}toggleMute(){if(!this.audio){console.warn("[MusicPlayer] Cannot toggle mute: no audio instance available");return}try{if(this.hasUserInteracted=!0,this._muteStateInitialized||(this._savedVolumeBeforeMute=this.volume>0?this.volume:.5,this._muteStateInitialized=!0),this._isMuted){this._isMuted=!1;let t=this._savedVolumeBeforeMute>0?this._savedVolumeBeforeMute:.5;this.volume=t,this.audio.volume(t),this.musicStateManager.updateVolume(t),console.log(`[MusicPlayer] Unmuted, restored volume to ${t}`)}else this._isMuted=!0,this.volume>0&&(this._savedVolumeBeforeMute=this.volume),this.audio.volume(0),this.musicStateManager.updateVolume(0),console.log(`[MusicPlayer] Muted, saved volume ${this._savedVolumeBeforeMute}`);this.cdr.markForCheck()}catch(t){console.error("[MusicPlayer] Error toggling mute:",t),this.handleMuteError()}}seek(t){this.audio&&(this.audio.seek(t),this.currentTime=t,this.cdr.markForCheck())}updateSubtitleFromFilename(t){if(t){let i=(t.split("/").pop()||"").replace(".mp3","").split(" - ");i.length>1?this.currentSubtitle=i[0]:this.currentSubtitle=""}}updateTime(){if(this.audio&&this.isPlaying){let t=this.audio.seek();this.currentTime=typeof t=="number"?t:0,this.updateDynamicArtistTime(),this.cdr.markForCheck(),requestAnimationFrame(()=>this.updateTime())}}updateDynamicArtistTime(){if(this.currentTrackInfo){let t=this.currentTrackInfo.startTime+this.currentTime;this.dynamicArtistService.updateCurrentTime(t)}}nextTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=(this.currentTrackIndex+1)%this.allTracks.length,i=this.allTracks[e];if(i&&i.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=i,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(i.startTime),this.loadTrackFromInfo(i),t)){let r=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(r,100)};r()}}previousTrack(){if(this.isLoading||this.allTracks.length===0)return;let t=this.isPlaying,e=this.currentTrackIndex===0?this.allTracks.length-1:this.currentTrackIndex-1,i=this.allTracks[e];if(i&&i.id!==this.currentTrackInfo?.id&&(this.currentTrackInfo=i,this.currentTrackIndex=e,this.dynamicArtistService.updateCurrentTime(i.startTime),this.loadTrackFromInfo(i),t)){let r=()=>{!this.isLoading&&this.audio?this.audio.play():this.error||setTimeout(r,100)};r()}}formatTime(t){if(isNaN(t)||!isFinite(t)||t<0)return"0:00";let e=Math.floor(t/60),i=Math.floor(t%60);return`${e}:${i.toString().padStart(2,"0")}`}getTrackName(t){if(this.currentTrackInfo)return this.currentTrackInfo.title;if(this.trackTitle)return this.trackTitle;if(t){let e=t.split("/"),i=e[e.length-1].replace(/\.(mp3|ogg)$/,""),r=i.split(" - ");return r.length>1?r[1]:i}return"Unknown Track"}getArtistName(){if(this.currentTrackInfo)return this.currentTrackInfo.mainArtist;if(this.trackArtist)return this.trackArtist;if(this.currentTrack){let e=(this.currentTrack.split("/").pop()||"").replace(/\.(mp3|ogg)$/,"").split(" - ");if(e.length>1)return e[0]}return this.currentSubtitle||"Unknown Artist"}cleanupCurrentAudio(){return J(this,null,function*(){if(this.audio)try{this.isPlaying&&this.audio.pause(),this.audio.unload();let t=this.audioInstances.indexOf(this.audio);t>-1&&this.audioInstances.splice(t,1),this.audio=null,console.log("[MusicPlayer] Current audio instance cleaned up")}catch(t){console.error("[MusicPlayer] Error during audio cleanup:",t)}})}cleanupAllAudioInstances(){try{this.audio&&(this.audio.unload(),this.audio=null),this.audioInstances.forEach(t=>{try{t.unload()}catch(e){console.error("[MusicPlayer] Error unloading audio instance:",e)}}),this.audioInstances=[],console.log("[MusicPlayer] All audio instances cleaned up")}catch(t){console.error("[MusicPlayer] Error during comprehensive cleanup:",t)}}handleVolumeError(t){console.warn(`[MusicPlayer] Volume error, attempting recovery with value ${t}`),this.retryCount<this.maxRetries?(this.retryCount++,setTimeout(()=>{if(this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume,this.cdr.markForCheck()}catch(e){console.error("[MusicPlayer] Volume recovery failed:",e)}},100)):(this.error="Volume control temporarily unavailable",this.cdr.markForCheck())}handleMuteError(){if(console.warn("[MusicPlayer] Mute toggle error, attempting recovery"),this._isMuted=!1,this._muteStateInitialized=!1,this.audio)try{this.audio.volume(this.lastSuccessfulVolume),this.volume=this.lastSuccessfulVolume}catch(t){console.error("[MusicPlayer] Mute recovery failed:",t),this.error="Mute control temporarily unavailable"}this.cdr.markForCheck()}handleTrackLoadError(t,e){console.error(`[MusicPlayer] Track loading error for ${t.title}:`,e),this.error=`Failed to load "${t.title}" - ${e.message||e}`,this.isLoading=!1,this.isTrackLoading=!1,this.lastLoadedTrackId=null,this.cleanupCurrentAudio(),this.cdr.markForCheck()}get isMuted(){return this._isMuted}get displayVolume(){return this._isMuted?0:this.volume}get savedVolumeBeforeMute(){return this._savedVolumeBeforeMute}getDebugState(){return{isPlaying:this.isPlaying,isLoading:this.isLoading,isTrackLoading:this.isTrackLoading,isMuted:this._isMuted,volume:this.volume,savedVolumeBeforeMute:this._savedVolumeBeforeMute,currentTrackId:this.currentTrackInfo?.id,audioInstancesCount:this.audioInstances.length,lastLoadedTrackId:this.lastLoadedTrackId,error:this.error,audioContextState:this.audioContext?.state,eventListenersCount:this.eventListeners.length}}initializeAudioContext(){try{typeof window<"u"&&"AudioContext"in window?(this.audioContext=new AudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] AudioContext initialized")):typeof window<"u"&&"webkitAudioContext"in window?(this.audioContext=new window.webkitAudioContext,this.isAudioContextInitialized=!0,console.log("[MusicPlayer] WebKit AudioContext initialized")):console.warn("[MusicPlayer] AudioContext not supported")}catch(t){console.error("[MusicPlayer] Error initializing AudioContext:",t)}}setupGlobalEventListeners(){if(!(typeof window>"u"))try{let t=()=>J(this,null,function*(){if(this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed")}catch(i){console.error("[MusicPlayer] Error resuming AudioContext:",i)}}),e=()=>{document.hidden?this.audioContext&&this.audioContext.state==="running"&&this.audioContext.suspend().catch(i=>{console.error("[MusicPlayer] Error suspending AudioContext:",i)}):t()};this.addTrackedEventListener(document,"click",t,{passive:!0}),this.addTrackedEventListener(document,"keydown",t,{passive:!0}),this.addTrackedEventListener(document,"visibilitychange",e,{passive:!0}),console.log("[MusicPlayer] Global event listeners setup completed")}catch(t){console.error("[MusicPlayer] Error setting up global event listeners:",t)}}addTrackedEventListener(t,e,i,r){try{t.addEventListener(e,i,r),this.eventListeners.push({element:t,event:e,handler:i})}catch(s){console.error(`[MusicPlayer] Error adding event listener for ${e}:`,s)}}cleanupAudioContext(){try{this.audioContext&&(this.audioContext.state!=="closed"&&this.audioContext.close().catch(t=>{console.error("[MusicPlayer] Error closing AudioContext:",t)}),this.audioContext=null,this.isAudioContextInitialized=!1,console.log("[MusicPlayer] AudioContext cleaned up"))}catch(t){console.error("[MusicPlayer] Error during AudioContext cleanup:",t)}}cleanupEventListeners(){try{this.eventListeners.forEach(({element:t,event:e,handler:i})=>{try{t.removeEventListener(e,i)}catch(r){console.error(`[MusicPlayer] Error removing event listener for ${e}:`,r)}}),this.eventListeners=[],console.log("[MusicPlayer] Event listeners cleaned up")}catch(t){console.error("[MusicPlayer] Error during event listener cleanup:",t)}}ensureAudioContextReady(){return J(this,null,function*(){if(this.audioContext||this.initializeAudioContext(),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume(),console.log("[MusicPlayer] AudioContext resumed for playback")}catch(t){console.error("[MusicPlayer] Error resuming AudioContext for playback:",t)}})}};zt.\u0275fac=function(e){return new(e||zt)(z(ve),z(lt),z(Vt),z(Yt))},zt.\u0275cmp=N({type:zt,selectors:[["app-music-player"]],inputs:{trackTitle:"trackTitle",trackArtist:"trackArtist",activeTrack:"activeTrack"},decls:32,vars:34,consts:[[1,"music-player-container"],[1,"player-backdrop"],[1,"music-player"],[1,"status-section"],["class","error-message",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["class","track-section",4,"ngIf"],[1,"progress-section"],[1,"time-display"],[1,"current-time"],[1,"duration"],[1,"progress-container"],[1,"progress-track"],[1,"progress-fill"],["type","range","aria-label","Seek",1,"progress-slider",3,"input","min","max","step","value","disabled"],[1,"controls-section"],[1,"volume-section"],[1,"volume-icon-container",3,"click"],["alt","Volume",1,"volume-icon",3,"src"],[1,"volume-control"],[1,"volume-track"],[1,"volume-fill"],["type","range","aria-label","Volume",1,"volume-slider",3,"input","min","max","step","value","disabled"],[1,"playback-controls"],["aria-label","Previous track",1,"control-button","previous-button",3,"click","disabled"],["src","assets/icons/music-player/skip-back.svg","alt","Previous",1,"control-icon"],[1,"control-button","play-pause-button",3,"click","disabled"],[1,"control-icon",3,"src","alt"],["aria-label","Next track",1,"control-button","next-button",3,"click","disabled"],["src","assets/icons/music-player/skip-forward.svg","alt","Next",1,"control-icon"],[1,"error-message"],[1,"error-icon"],[1,"loading-indicator"],[1,"loading-spinner"],[1,"track-section"],["class","track-details",4,"ngIf"],["class","track-info",4,"ngIf"],["class","current-subtitle",4,"ngIf"],[1,"track-details"],[1,"track-info-content"],[1,"track-title"],[1,"track-artist"],[1,"track-info"],[1,"current-subtitle"]],template:function(e,i){e&1&&(f(0,"div",0),O(1,"div",1),f(2,"div",2)(3,"div",3),T(4,Li,5,1,"div",4)(5,ji,4,0,"div",5),b(),T(6,zi,4,3,"div",6),f(7,"div",7)(8,"div",8)(9,"span",9),M(10),b(),f(11,"span",10),M(12),b()(),f(13,"div",11)(14,"div",12),O(15,"div",13),f(16,"input",14),R("input",function(s){return i.seek(s.target.value)}),b()()()(),f(17,"div",15)(18,"div",16)(19,"div",17),R("click",function(){return i.toggleMute()}),O(20,"img",18),b(),f(21,"div",19)(22,"div",20),O(23,"div",21),f(24,"input",22),R("input",function(s){return i.setVolume(s.target.value)}),b()()()(),f(25,"div",23)(26,"button",24),R("click",function(){return i.previousTrack()}),O(27,"img",25),b(),f(28,"button",26),R("click",function(){return i.togglePlay()}),O(29,"img",27),b(),f(30,"button",28),R("click",function(){return i.nextTrack()}),O(31,"img",29),b()()()()()),e&2&&(v(4),C("ngIf",i.error),v(),C("ngIf",i.isLoading),v(),C("ngIf",!i.isLoading),v(),H("disabled",i.isLoading),v(3),B(i.formatTime(i.currentTime)),v(2),B(i.formatTime(i.duration)),v(3),W("width",i.currentTime/i.duration*100,"%"),v(),C("min",0)("max",i.duration)("step",.01)("value",i.currentTime)("disabled",i.isLoading),v(),H("disabled",i.isLoading),v(3),H("muted",i.isMuted),C("src",i.isMuted?"assets/icons/music-player/volume-mute.svg":"assets/icons/music-player/volume.svg",gt),v(3),W("width",i.displayVolume*100,"%"),v(),C("min",0)("max",1)("step",.01)("value",i.displayVolume)("disabled",i.isLoading),v(2),C("disabled",i.isLoading),v(2),H("playing",i.isPlaying),C("disabled",i.isLoading),Y("aria-label",i.isPlaying?"Pause":"Play"),v(),C("src",i.isPlaying?"assets/icons/music-player/pause.svg":"assets/icons/music-player/play.svg",gt)("alt",i.isPlaying?"Pause":"Play"),v(),C("disabled",i.isLoading))},dependencies:[nt,bt,Nt],styles:[".music-player-container[_ngcontent-%COMP%]{position:relative;width:100%;margin:0 0 2rem;padding:0;isolation:isolate;box-sizing:border-box!important;max-width:100%!important}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]{position:absolute;inset:-4px 0;box-sizing:border-box!important;background:linear-gradient(135deg,#00000026,#0000002e,#00000038 50%,#00000040);backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);-webkit-backdrop-filter:blur(16px) saturate(1.4) brightness(1.1);border-radius:20px;opacity:.8;z-index:-1}.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{display:none!important}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:1}to{left:100%;opacity:0}}.music-player[_ngcontent-%COMP%]{position:relative;width:100%;background:linear-gradient(135deg,#ffffff1f,#ffffff14 25%,#ffffff0f 75%,#ffffff0a);backdrop-filter:blur(24px) saturate(1.6);-webkit-backdrop-filter:blur(24px) saturate(1.6);border:1px solid rgba(255,255,255,.15);border-radius:16px;box-sizing:border-box!important;max-width:100%!important;box-shadow:0 12px 40px #00000040,0 4px 16px #00000026,0 2px 8px #0000001a,inset 0 1px #fff3,inset 0 -1px #ffffff1a;display:flex;flex-direction:column;gap:clamp(12px,2vw,20px);padding:clamp(16px,3vw,24px);font-family:Inter,Roboto,sans-serif;color:#fffffff2;font-size:16px;line-height:1.5;letter-spacing:.01em;transition:all .4s cubic-bezier(.19,1,.22,1)}.music-player[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 16px 48px #0000004d,0 6px 20px #0003,0 2px 8px #0000001a,inset 0 1px #ffffff40,inset 0 -1px #ffffff26}.status-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;min-height:0}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#dc354526,#dc354514);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(220,53,69,.3);border-radius:8px;color:#ffffffe6;font-size:clamp(.85rem,1vw,1.1rem);font-weight:500}.status-section[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:16px;color:#ffc107e6}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px;color:#fffc;font-size:clamp(.85rem,1vw,1.1rem);font-weight:400}.status-section[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.2);border-top:2px solid rgba(255,255,255,.8);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.track-section[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:8px}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-details[_ngcontent-%COMP%]   .track-info-content[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(1.4rem,2vw,2rem);font-weight:600;color:#fff;margin-bottom:4px;line-height:1.3;background:linear-gradient(135deg,#fff,#ffffffe6);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 2px 8px rgba(255,255,255,.1);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;letter-spacing:.02em}.track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(1.1rem,1.5vw,1.6rem);font-weight:400;color:#ffffffbf;line-height:1.4;font-style:italic;letter-spacing:.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-section[_ngcontent-%COMP%]   .current-subtitle[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem);color:#fff9;font-weight:300;line-height:1.4;letter-spacing:.01em}.progress-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.progress-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:clamp(.75rem,.9vw,.95rem);font-weight:400;color:#ffffffb3;font-variant-numeric:tabular-nums;letter-spacing:.02em}.progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .current-time[_ngcontent-%COMP%], .progress-section[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{padding:2px 4px;background:#ffffff0d;border-radius:4px;min-width:45px;text-align:center;font-family:Inter,monospace}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{position:relative;height:32px;display:flex;align-items:center}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{position:relative;width:100%;height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border-radius:3px;overflow:hidden;cursor:pointer;box-shadow:inset 0 1px 2px #0003,0 0 8px #ffffff0d}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffe6,#ffffffb3,#ffffffe6);border-radius:3px;transition:width .1s ease-out;box-shadow:0 0 12px #fff6,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{display:none!important}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:32px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:grab;transition:all .3s cubic-bezier(.19,1,.22,1);margin-top:-5px;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:active{cursor:grabbing;transform:scale(1.1)}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:6px;background:transparent;border-radius:3px}@keyframes _ngcontent-%COMP%_progressShimmer{0%{left:-100%;opacity:0}50%{left:100%;opacity:.6}to{left:100%;opacity:0}}.controls-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:clamp(16px,3vw,24px)}.controls-section.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:100px;flex:0 0 auto}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]{cursor:pointer;padding:6px;border-radius:6px;transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.05)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.85);transition:all .3s cubic-bezier(.19,1,.22,1)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-icon-container[_ngcontent-%COMP%]   .volume-icon.muted[_ngcontent-%COMP%]{filter:invert(1) opacity(.6);transform:scale(.9)}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{flex:1;max-width:80px}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]{position:relative;width:100%;height:4px;background:linear-gradient(90deg,#ffffff26,#fff3,#ffffff26);border-radius:2px;overflow:hidden;cursor:pointer}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#ffffffb3,#ffffffe6);border-radius:2px;transition:width .2s ease-out;box-shadow:0 0 6px #ffffff4d}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]{position:absolute;top:-6px;left:0;width:100%;height:16px;-webkit-appearance:none;background:transparent;outline:none;cursor:pointer;margin:0;padding:0;z-index:2}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;background:#ffffffe6;border-radius:50%;cursor:pointer;transition:all .2s cubic-bezier(.19,1,.22,1);margin-top:-4px;box-shadow:0 2px 6px #0000004d,inset 0 1px #ffffff80}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.3);background:#fff;box-shadow:0 3px 10px #0006,0 0 12px #fff9,inset 0 1px #ffffffb3}.controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]   .volume-track[_ngcontent-%COMP%]   .volume-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:4px;background:transparent;border-radius:2px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:clamp(14px,2.2vw,18px);flex:1;max-width:180px;width:100%;margin:0 auto;position:relative}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{position:relative;border:none;background:linear-gradient(135deg,#ffffff26,#ffffff14,#ffffff0d);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .4s cubic-bezier(.19,1,.22,1);box-shadow:0 6px 20px #00000040,0 2px 8px #00000026,inset 0 1px #ffffff4d,inset 0 -1px #ffffff1a}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:18px;height:18px;filter:invert(1) opacity(.9);transition:all .3s cubic-bezier(.19,1,.22,1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:40px;height:40px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:hover, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:linear-gradient(135deg,#fff3,#ffffff1f,#ffffff14);box-shadow:0 8px 28px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 20px #ffffff26}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]:active, .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]:active{transform:scale(1.05);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:52px;height:52px;background:linear-gradient(135deg,#ffffff2e,#ffffff1f,#ffffff14);border-width:1.5px}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:22px;height:22px;filter:invert(1) opacity(.95)}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:hover{transform:scale(1.08);background:linear-gradient(135deg,#ffffff40,#ffffff2e,#ffffff1f);box-shadow:0 12px 36px #00000059,0 6px 16px #00000040,inset 0 1px #ffffff80,inset 0 -1px #fff3,0 0 32px #fff3}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]:active{transform:scale(1.02);transition-duration:.15s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffffff38,#ffffff26,#ffffff1a);box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e;animation:_ngcontent-%COMP%_playingPulse 2s ease-in-out infinite}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:disabled:hover{transform:none;background:linear-gradient(135deg,#ffffff14,#ffffff0d)}@keyframes _ngcontent-%COMP%_playingPulse{0%,to{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 24px #ffffff2e}50%{box-shadow:0 8px 24px #0000004d,0 4px 12px #0003,inset 0 1px #fff6,inset 0 -1px #ffffff26,0 0 32px #ffffff40}}@media (max-width: 768px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:clamp(14px,4vw,20px);gap:clamp(10px,2.5vw,16px);border-radius:14px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-title[_ngcontent-%COMP%]{font-size:clamp(.95rem,1.2vw,1.3rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .track-section[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .track-artist[_ngcontent-%COMP%]{font-size:clamp(.85rem,1vw,1.1rem)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]{height:8px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]{height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{width:18px;height:18px;margin-top:-5px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{gap:clamp(8px,3vw,16px)}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{min-width:80px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:60px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{gap:clamp(8px,2.5vw,12px);max-width:160px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]{width:36px;height:36px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.previous-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%], .music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.next-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:16px;height:16px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]{width:46px;height:46px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{width:20px;height:20px}}@media (max-width: 480px){.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]{padding:12px 16px;gap:8px;border-radius:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]{order:2;align-self:stretch;min-width:auto}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .volume-section[_ngcontent-%COMP%]   .volume-control[_ngcontent-%COMP%]{max-width:none;flex:1}.music-player-container[_ngcontent-%COMP%]   .music-player[_ngcontent-%COMP%]   .controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]{order:1;max-width:none;justify-content:center}}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;background:linear-gradient(135deg,#fffffff2,#fffc);border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:pointer;box-shadow:0 4px 12px #0000004d,0 2px 6px #0003,inset 0 1px #ffffff80;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb:hover{background:linear-gradient(135deg,#fff,#ffffffe6);box-shadow:0 6px 20px #0006,0 3px 10px #0000004d,0 0 16px #ffffff80,inset 0 1px #ffffffb3;transform:scale(1.2)}input[type=range][_ngcontent-%COMP%]::-moz-range-track{height:6px;background:linear-gradient(90deg,#ffffff1a,#ffffff26,#ffffff1a);border:none;border-radius:3px;-moz-appearance:none}input[type=range][_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}@media (prefers-reduced-motion: reduce){.music-player-container[_ngcontent-%COMP%]   .player-backdrop[_ngcontent-%COMP%]:before{animation:none}.progress-section[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-track[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]:after{animation:none}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{transition-duration:.2s}.controls-section[_ngcontent-%COMP%]   .playback-controls[_ngcontent-%COMP%]   .control-button.play-pause-button.playing[_ngcontent-%COMP%]{animation:none}@keyframes shimmer{0%,to{opacity:0}}@keyframes progressShimmer{0%,to{opacity:0}}@keyframes playingPulse{0%,to{opacity:1}}@keyframes spin{0%,to{transform:rotate(0)}}}"],changeDetection:0});var mi=zt;function Bi(c,t){if(c&1&&O(0,"div",24),c&2){let e=t.$implicit;W("left",e.x+"vw")("top",e.y+"vh")("--move-x",e.moveX+"px")("--move-y",e.moveY+"px")("--scale",e.scale)("--base-opacity",e.opacity)("--rotation-offset",e.rotationOffset)("--delay",e.delay),H("clockwise",e.clockwise)("counter-clockwise",!e.clockwise)}}var Bt=class Bt{constructor(t,e,i){this.cdr=t;this.renderer=e;this.document=i;this._progress=0;this.progressText="0%";this.runes=[];this.originalHeaderStyles=new Map}set progress(t){this._progress=t,this.progressText=`${Math.floor(t)}%`,this.cdr.markForCheck()}get progress(){return this._progress}ngOnInit(){this.generateRunePositions(),this.suppressHighZIndexHeaders()}ngOnDestroy(){this.restoreHeaderStyles()}suppressHighZIndexHeaders(){console.log("\u{1F527} LoadingScreen: Starting header suppression");let t=["app-site-header",".site-header",'header[class*="header"]',".cd-cases-container",".debug-toggle",".debug-panel",".right-side-menu",".mobile-navbar",'[class*="z-index"]','[style*="z-index"]'],e=this.document.querySelectorAll(t.join(", "));console.log(`\u{1F50D} Found ${e.length} potential interfering elements`),e.forEach((i,r)=>{let s=i,p=getComputedStyle(s),h=p.zIndex||"auto",g=p.visibility||"visible";console.log(`\u{1F4DD} Element ${r}: ${s.tagName}.${s.className} - z-index: ${h}`),this.originalHeaderStyles.set(s,JSON.stringify({zIndex:h,visibility:g,display:p.display||"block"})),this.renderer.setStyle(s,"z-index","1",xt.Important),this.renderer.setStyle(s,"visibility","hidden",xt.Important),console.log(`\u2705 Suppressed element ${r}`)}),this.renderer.addClass(this.document.body,"loading-screen-active"),console.log("\u{1F3AF} Header suppression completed")}restoreHeaderStyles(){console.log("\u{1F527} LoadingScreen: Restoring header styles"),this.renderer.removeClass(this.document.body,"loading-screen-active"),console.log("\u{1F4DD} Removed loading-screen-active class from body"),this.originalHeaderStyles.forEach((e,i)=>{try{let r=JSON.parse(e);r.zIndex==="auto"||r.zIndex===""?this.renderer.removeStyle(i,"z-index"):this.renderer.setStyle(i,"z-index",r.zIndex),i.tagName.toLowerCase()==="app-site-header"||i.classList.contains("site-header")?(this.renderer.setStyle(i,"visibility","visible",xt.Important),console.log("\u{1F3AF} Forced header visibility to visible")):r.visibility==="visible"?this.renderer.removeStyle(i,"visibility"):this.renderer.setStyle(i,"visibility",r.visibility)}catch(r){console.warn("\u26A0\uFE0F Failed to restore styles for element:",i,r),this.renderer.removeStyle(i,"z-index"),this.renderer.removeStyle(i,"visibility"),(i.tagName.toLowerCase()==="app-site-header"||i.classList.contains("site-header"))&&this.renderer.setStyle(i,"visibility","visible",xt.Important)}}),this.document.querySelectorAll("app-site-header, .site-header, header").forEach(e=>{let i=e;this.renderer.setStyle(i,"visibility","visible",xt.Important),this.renderer.setStyle(i,"z-index","1000",xt.Important)}),this.originalHeaderStyles.clear(),console.log("\u2705 Header styles restored with enhanced visibility enforcement")}generateRunePositions(){this.runes=Array.from({length:48},()=>({x:Math.random()*100,y:Math.random()*100,scale:.6+Math.random()*1.4,delay:Math.random()*8,opacity:.3+Math.random()*.5,moveX:15+Math.random()*20,moveY:15+Math.random()*20,rotationOffset:Math.random()*360,clockwise:Math.random()<.5}))}};Bt.\u0275fac=function(e){return new(e||Bt)(z(Yt),z(ee),z(Ut))},Bt.\u0275cmp=N({type:Bt,selectors:[["app-loading-screen"]],inputs:{progress:"progress"},decls:25,vars:3,consts:[[1,"loader-container"],[1,"magical-circle","outer"],[1,"magical-circle"],[1,"rune-effects"],[1,"decorative-elements"],[1,"corner-line","top-left"],[1,"corner-line","top-right"],[1,"corner-line","bottom-left"],[1,"corner-line","bottom-right"],[1,"mid-line","left"],[1,"mid-line","right"],[1,"mid-line","top"],[1,"mid-line","bottom"],[1,"light-beams"],[1,"beam","beam-1"],[1,"beam","beam-2"],[1,"beam","beam-3"],[1,"beam","beam-4"],[1,"rune-circle"],["class","rune",3,"clockwise","counter-clockwise","left","top","--move-x","--move-y","--scale","--base-opacity","--rotation-offset","--delay",4,"ngFor","ngForOf"],[1,"content"],[1,"logo-container"],["src","/assets/images/logos/prismcoll.svg","alt","Prismatic Collections",1,"logo"],[1,"loading-text"],[1,"rune"]],template:function(e,i){e&1&&(f(0,"div",0),O(1,"div",1)(2,"div",2)(3,"div",3),f(4,"div",4),O(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),b(),f(13,"div",13),O(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",17),b(),f(18,"div",18),T(19,Bi,1,20,"div",19),b(),f(20,"div",20)(21,"div",21),O(22,"img",22),b(),f(23,"div",23),M(24,"NOW LOADING"),b()()()),e&2&&(H("visible",!0),v(19),C("ngForOf",i.runes))},dependencies:[nt,ne],styles:['.loader-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#fff;opacity:0;pointer-events:none;transition:opacity .5s ease;z-index:2147483647;isolation:isolate;transform:translateZ(0);will-change:opacity,transform;position:fixed!important;z-index:2147483647!important;contain:layout size style}.loader-container.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all}[_nghost-%COMP%]{position:relative;z-index:2147483647}.loader-container.visible[_ngcontent-%COMP%] ~ *[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-toggle[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .debug-panel[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .cd-cases-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .right-side-menu[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .mobile-navbar[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   [class*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   [style*=z-index][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   .site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   app-site-header[_ngcontent-%COMP%], [_ngcontent-%COMP%]:global(body.loading-screen-active)   header[_ngcontent-%COMP%]{z-index:1!important}[_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body:has(.loader-container.visible))   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 1000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 9999"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header), [_ngcontent-%COMP%]:global(body.loading-screen-active)   *[style*="z-index: 10000"][_ngcontent-%COMP%]:not(.site-header):not(app-site-header){z-index:1!important;visibility:hidden!important}.logo-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:30px}.logo[_ngcontent-%COMP%]{width:240px;height:auto;display:block;margin:0 auto}.magical-circle[_ngcontent-%COMP%]{position:absolute;width:800px;height:800px;border:1px solid rgba(0,0,0,.1);border-radius:50%;animation:_ngcontent-%COMP%_rotate 20s linear infinite}.magical-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border:2px solid transparent;border-top-color:#0003;border-radius:50%}.magical-circle[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-10px;border:1px solid transparent;border-left-color:#00000026;border-radius:50%}.magical-circle.outer[_ngcontent-%COMP%]{width:1000px;height:1000px;animation:_ngcontent-%COMP%_rotate 30s linear infinite reverse;opacity:.5}.decorative-elements[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none}.corner-line[_ngcontent-%COMP%]{position:absolute;width:150px;height:150px;border:2px solid rgba(0,0,0,.15);border-radius:4px}.corner-line[_ngcontent-%COMP%]:before, .corner-line[_ngcontent-%COMP%]:after{content:"";position:absolute;background:linear-gradient(90deg,#0000001a,#0003)}.corner-line.top-left[_ngcontent-%COMP%]{top:50px;left:50px;border-right:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite}.corner-line.top-right[_ngcontent-%COMP%]{top:50px;right:50px;border-left:none;border-bottom:none;animation:_ngcontent-%COMP%_pulse 3s infinite .75s}.corner-line.bottom-left[_ngcontent-%COMP%]{bottom:50px;left:50px;border-right:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 1.5s}.corner-line.bottom-right[_ngcontent-%COMP%]{bottom:50px;right:50px;border-left:none;border-top:none;animation:_ngcontent-%COMP%_pulse 3s infinite 2.25s}.mid-line[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;border:2px solid rgba(0,0,0,.15);border-radius:4px;animation:_ngcontent-%COMP%_pulse 3s infinite}.mid-line.left[_ngcontent-%COMP%]{left:50px;top:50%;transform:translateY(-50%);border-right:none;animation-delay:.5s}.mid-line.right[_ngcontent-%COMP%]{right:50px;top:50%;transform:translateY(-50%);border-left:none;animation-delay:1s}.mid-line.top[_ngcontent-%COMP%]{top:50px;left:50%;transform:translate(-50%);border-bottom:none;animation-delay:1.5s}.mid-line.bottom[_ngcontent-%COMP%]{bottom:50px;left:50%;transform:translate(-50%);border-top:none;animation-delay:2s}.rune-circle[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;left:0;top:0}.rune[_ngcontent-%COMP%]{position:absolute;width:18px;height:18px;background:linear-gradient(135deg,#0006,#3c3c3c4d);clip-path:polygon(50% 0%,100% 50%,50% 100%,0% 50%);transform-origin:center center;transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg));opacity:var(--base-opacity);will-change:transform;animation:none}.rune.clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-clockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune.counter-clockwise[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rune-move-counterclockwise 8s infinite linear;animation-delay:calc(var(--delay) * -1s)}.rune[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.6));mix-blend-mode:screen;animation:_ngcontent-%COMP%_sparkle 4s infinite linear}.rune[_ngcontent-%COMP%]:after{content:"";position:absolute;width:140%;height:140%;top:-20%;left:-20%;background:radial-gradient(circle at center,rgba(120,200,255,.15) 0%,rgba(70,150,255,.1) 30%,transparent 70%);mix-blend-mode:screen;opacity:.5}.rune-effects[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;pointer-events:none;mix-blend-mode:multiply;background:radial-gradient(circle at center,transparent 0%,rgba(0,0,0,.02) 50%,transparent 100%);animation:_ngcontent-%COMP%_effect-pulse-safe 8s infinite ease-in-out;left:0;top:0;contain:layout}.light-beams[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none;mix-blend-mode:multiply}.beam[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(90deg,#0000001a,#28282826,#0000001a);mix-blend-mode:multiply}.beam.beam-1[_ngcontent-%COMP%]{width:600px;height:2px;animation:_ngcontent-%COMP%_beam-rotate 8s infinite linear,_ngcontent-%COMP%_beam-pulse 4s infinite ease-in-out}.beam.beam-2[_ngcontent-%COMP%]{width:400px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 12s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 6s infinite ease-in-out 1s}.beam.beam-3[_ngcontent-%COMP%]{width:300px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 10s infinite linear,_ngcontent-%COMP%_beam-pulse 5s infinite ease-in-out 2s}.beam.beam-4[_ngcontent-%COMP%]{width:200px;height:1px;animation:_ngcontent-%COMP%_beam-rotate 14s infinite linear reverse,_ngcontent-%COMP%_beam-pulse 7s infinite ease-in-out 3s}.content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-text[_ngcontent-%COMP%]{margin-top:2rem;font-size:1rem;letter-spacing:.3em;text-transform:uppercase;color:#000000b3;font-family:Arial,sans-serif;font-weight:500}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.2}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_rune-move-clockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((90 + var(--rotation-offset)) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((180 + var(--rotation-offset)) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((270 + var(--rotation-offset)) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((360 + var(--rotation-offset)) * 1deg))}}@keyframes _ngcontent-%COMP%_rune-move-counterclockwise{0%{transform:translate(0) scale(var(--scale)) rotate(calc(var(--rotation-offset) * 1deg))}25%{transform:translate(var(--move-x),var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 90) * 1deg))}50%{transform:translateY(var(--move-y)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 180) * 1deg))}75%{transform:translate(calc(var(--move-x) * -1)) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 270) * 1deg))}to{transform:translate(0) scale(var(--scale)) rotate(calc((var(--rotation-offset) - 360) * 1deg))}}@keyframes _ngcontent-%COMP%_beam-rotate{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}@keyframes _ngcontent-%COMP%_beam-pulse{0%,to{opacity:.2;width:100%}50%{opacity:.5;width:120%}}@keyframes _ngcontent-%COMP%_sparkle{0%,to{opacity:.4;transform:scale(1)}50%{opacity:.8;transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_effect-pulse-safe{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_effect-pulse{0%,to{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.1)}}'],changeDetection:0});var pi=Bt;function Hi(c,t){if(c&1){let e=it();f(0,"img",11),R("error",function(){tt(e);let r=A();return et(r.onAvatarError())}),b()}if(c&2){let e=A();C("src",e.avatarUrl,gt)("alt",e.artistName+" avatar")}}function $i(c,t){if(c&1&&(f(0,"div",12),M(1),b()),c&2){let e=A();W("background",e.cardThemeColor()),v(),at(" ",e.artistInitials()," ")}}function Gi(c,t){if(c&1&&(f(0,"div",13)(1,"div",14),O(2,"span",15),f(3,"span",16),M(4,"Currently Playing"),b()()()),c&2){let e=A();v(),C("@playingIndicator",e.playingIndicatorState)}}function Ui(c,t){if(c&1){let e=it();f(0,"button",22),R("click",function(r){tt(e);let s=A(2);return et(s.onSocialLinkClick("youtube",r))}),f(1,"mat-icon"),M(2,"smart_display"),b(),f(3,"span",23),M(4,"YouTube"),b()()}if(c&2){let e=A(2);Y("aria-label",e.artistName+" YouTube channel")}}function Wi(c,t){if(c&1){let e=it();f(0,"button",24),R("click",function(r){tt(e);let s=A(2);return et(s.onSocialLinkClick("twitter",r))}),f(1,"span",25),M(2,"\u{1D54F}"),b(),f(3,"span",23),M(4,"Twitter/X"),b()()}if(c&2){let e=A(2);Y("aria-label",e.artistName+" Twitter profile")}}function Ki(c,t){if(c&1){let e=it();f(0,"button",26),R("click",function(r){tt(e);let s=A(2);return et(s.onSocialLinkClick("linktr",r))}),f(1,"mat-icon"),M(2,"link"),b(),f(3,"span",23),M(4,"Links"),b()()}if(c&2){let e=A(2);Y("aria-label",e.artistName+" Linktr.ee profile")}}function Yi(c,t){if(c&1){let e=it();f(0,"button",27),R("click",function(r){tt(e);let s=A(2);return et(s.onSocialLinkClick("instagram",r))}),f(1,"span",28),M(2,"\u{1F4F7}"),b(),f(3,"span",23),M(4,"Instagram"),b()()}if(c&2){let e=A(2);Y("aria-label",e.artistName+" Instagram profile")}}function qi(c,t){if(c&1&&(f(0,"div",17),T(1,Ui,5,1,"button",18)(2,Wi,5,1,"button",19)(3,Ki,5,1,"button",20)(4,Yi,5,1,"button",21),b()),c&2){let e=A();v(),C("ngIf",e.hasYoutube),v(),C("ngIf",e.hasTwitter),v(),C("ngIf",e.hasLinktr),v(),C("ngIf",e.hasInstagram)}}var Ht=class Ht{constructor(){this.enableAnimations=!0;this.isHovered=U(!1);this.avatarError=U(!1);this.artistInitials=ut(()=>{let e=(this.cardData?.artist?.artistDisplayName||"").split(" ").filter(i=>i.length>0);return e.length===0?"?":e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()});this.roleDisplayText=ut(()=>{if(!this.cardData?.artist?.role)return"";let t=this.cardData.artist.role;switch(t){case"Main Artist":return"MAIN ARTIST";case"Featured Artist":return"FEATURED ARTIST";case"Vocalist":return"VOCALIST";case"Producer":return"PRODUCER";case"Composer":return"COMPOSER";case"Arranger":return"ARRANGER";case"Instrumentalist":return"INSTRUMENTALIST";case"Violin":return"VIOLIN";case"Viola":return"VIOLA";case"Cello":return"CELLO";case"Accordion":return"ACCORDION";case"Piano":return"PIANO";case"Keyboard":return"KEYBOARD";case"Guitar":return"GUITAR";case"Bass":return"BASS";case"Drums":return"DRUMS";case"Electronic Producer":return"ELECTRONIC PRODUCER";case"Sound Designer":return"SOUND DESIGNER";case"Synthesizer V Operator":return"SYNTHESIZER V";case"Voice Actor":return"VOICE ACTOR";case"Vocalist, Lyricist":return"VOCALIST, LYRICIST";case"Accordionist":return"ACCORDIONIST";case"Violinist":return"VIOLINIST";case"Violist":return"VIOLIST";case"Cellist":return"CELLIST";default:return t.toUpperCase()}});this.participationLevelClass=ut(()=>`participation-${this.cardData?.participationLevel||"additional"}`);this.cardThemeColor=ut(()=>this.cardData?.artist?.color||"#ffffff")}get hasYoutube(){return!!this.cardData?.artist?.socialLinks?.youtube}get hasTwitter(){return!!this.cardData?.artist?.socialLinks?.twitter}get hasLinktr(){return!!this.cardData?.artist?.socialLinks?.linktr}get hasInstagram(){return!!this.cardData?.artist?.socialLinks?.instagram}get youtubeUrl(){return this.cardData?.artist?.socialLinks?.youtube||""}get twitterUrl(){return this.cardData?.artist?.socialLinks?.twitter||""}get linktrUrl(){return this.cardData?.artist?.socialLinks?.linktr||""}get instagramUrl(){return this.cardData?.artist?.socialLinks?.instagram||""}get artistName(){return this.cardData?.artist?.artistDisplayName||"Unknown Artist"}get avatarUrl(){return this.cardData?.artist?.avatar||""}get isCurrentlyPlaying(){return this.cardData?.isCurrentlyPlaying||!1}onMouseEnter(){this.enableAnimations&&this.isHovered.set(!0)}onMouseLeave(){this.enableAnimations&&this.isHovered.set(!1)}onAvatarError(){this.avatarError.set(!0)}onSocialLinkClick(t,e){e.stopPropagation();let i="";t==="youtube"?i=this.youtubeUrl:t==="twitter"?i=this.twitterUrl:t==="linktr"?i=this.linktrUrl:t==="instagram"&&(i=this.instagramUrl),i&&window.open(i,"_blank","noopener,noreferrer")}onCardClick(){console.log("Artist card clicked:",this.cardData?.artist?.artistDisplayName)}get hoverState(){return this.isHovered()?"hovered":"default"}get playingIndicatorState(){return this.isCurrentlyPlaying?"playing":"not-playing"}};Ht.\u0275fac=function(e){return new(e||Ht)},Ht.\u0275cmp=N({type:Ht,selectors:[["app-artist-card"]],inputs:{cardData:"cardData",enableAnimations:"enableAnimations"},decls:13,vars:13,consts:[[1,"artist-card",3,"mouseenter","mouseleave","click"],[1,"artist-avatar-section"],[1,"avatar-container"],["class","artist-avatar","loading","lazy",3,"src","alt","error",4,"ngIf"],["class","artist-initials",3,"background",4,"ngIf"],[1,"artist-info-section"],[1,"artist-name"],[1,"role-label"],["class","playing-status",4,"ngIf"],["class","social-links-section",4,"ngIf"],[1,"card-accent"],["loading","lazy",1,"artist-avatar",3,"error","src","alt"],[1,"artist-initials"],[1,"playing-status"],[1,"playing-indicator"],[1,"playing-dot"],[1,"playing-text"],[1,"social-links-section"],["class","social-link youtube-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link twitter-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link linktr-link","mat-icon-button","",3,"click",4,"ngIf"],["class","social-link instagram-link","mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",1,"social-link","youtube-link",3,"click"],[1,"social-label"],["mat-icon-button","",1,"social-link","twitter-link",3,"click"],[1,"twitter-x-icon"],["mat-icon-button","",1,"social-link","linktr-link",3,"click"],["mat-icon-button","",1,"social-link","instagram-link",3,"click"],[1,"instagram-icon"]],template:function(e,i){e&1&&(f(0,"div",0),R("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()})("click",function(){return i.onCardClick()}),f(1,"div",1)(2,"div",2),T(3,Hi,1,2,"img",3)(4,$i,2,3,"div",4),b()(),f(5,"div",5)(6,"h3",6),M(7),b(),f(8,"div",7),M(9),b(),T(10,Gi,5,1,"div",8),b(),T(11,qi,5,4,"div",9),O(12,"div",10),b()),e&2&&(Kt(i.participationLevelClass()),W("--theme-color",i.cardThemeColor()),C("@cardHover",i.hoverState),v(3),C("ngIf",i.avatarUrl&&!i.avatarError()),v(),C("ngIf",!i.avatarUrl||i.avatarError()),v(3),B(i.artistName),v(2),at(" ",i.roleDisplayText()," "),v(),C("ngIf",i.isCurrentlyPlaying),v(),C("ngIf",i.hasYoutube||i.hasTwitter||i.hasLinktr||i.hasInstagram),v(),W("background",i.cardThemeColor()))},dependencies:[nt,bt,Nt,Ye,pe,Zt],styles:['[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.artist-card[_ngcontent-%COMP%]{--mdc-theme-primary: var(--artist-card-text-primary) !important;--mat-primary-color: var(--artist-card-text-primary) !important;--theme-color: var(--artist-card-text-primary) !important;--color: var(--artist-card-text-primary) !important}.artist-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--artist-card-text-primary)!important}.artist-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--artist-card-bg-primary) 0%,var(--artist-card-bg-secondary) 100%);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid var(--artist-card-border-primary);border-radius:12px;color:var(--artist-card-text-primary);box-shadow:0 4px 16px var(--artist-card-shadow-base);transition:all .3s cubic-bezier(.25,.46,.45,.94);padding:1.75rem;cursor:pointer;min-height:300px;display:flex;flex-direction:column;align-items:center;text-align:center}.artist-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:var(--artist-card-bg-overlay);pointer-events:none;z-index:-1;opacity:.7;transition:opacity .3s ease}.artist-card[_ngcontent-%COMP%]:hover:hover{background:linear-gradient(135deg,var(--artist-card-hover-bg) 0%,var(--artist-card-bg-secondary) 100%);border-color:var(--artist-card-border-hover);box-shadow:0 8px 24px var(--artist-card-shadow-elevated);transform:translateY(-2px)}.artist-card[_ngcontent-%COMP%]:hover:before{opacity:.9}.artist-card[_ngcontent-%COMP%]:hover   .card-accent[_ngcontent-%COMP%]{opacity:1;transform:scaleX(1.05)}.artist-card[_ngcontent-%COMP%]:hover   .artist-avatar[_ngcontent-%COMP%]{transform:scale(1.08)}.artist-card[_ngcontent-%COMP%]:hover   .social-link[_ngcontent-%COMP%]{transform:translateY(-2px)}.artist-card.participation-main[_ngcontent-%COMP%]{border-color:var(--artist-card-text-primary);background:#000c;box-shadow:0 6px 24px #ffffff26}.artist-card.participation-main[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-primary);height:4px}.artist-card.participation-featured[_ngcontent-%COMP%]{border-color:var(--artist-card-text-secondary);background:var(--artist-card-bg-secondary)}.artist-card.participation-featured[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{background:var(--artist-card-text-secondary)}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{position:relative;width:80px;height:80px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid rgba(255,255,255,.2);transition:border-color .3s ease}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--theme-color, #666666);color:#fff;font-size:1.5rem;font-weight:700;border:3px solid rgba(255,255,255,.2);text-shadow:0 1px 2px rgba(0,0,0,.3)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{color:#fff!important;font-size:1.1rem;font-weight:600;margin:0 0 .5rem;line-height:1.3;text-shadow:0 1px 2px rgba(0,0,0,.4)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;letter-spacing:.8px;color:#fff!important;margin-bottom:.75rem;opacity:1;text-shadow:0 1px 4px rgba(0,0,0,.8);text-transform:uppercase;background:#0006;padding:.3rem .6rem;border-radius:6px;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.15);display:inline-block;box-shadow:0 2px 8px #0000004d;transition:all .2s ease;--color: #ffffff !important;--mdc-theme-primary: #ffffff !important;--mat-primary: #ffffff !important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[style*=color][_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.mat-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label.theme-primary[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[color=primary][_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]:hover{background:#00000080;border-color:#ffffff40;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0009,#141414b3);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:.4rem .8rem;margin-top:.5rem;box-shadow:0 2px 8px #0000004d}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#d40808!important;animation:_ngcontent-%COMP%_pulse 2s infinite}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem;color:#fff!important;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.5)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;flex-wrap:nowrap}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.375rem;padding:.5rem .875rem;background:#ffffff1a;border:1px solid rgba(255,255,255,.15);border-radius:8px;color:#fff;font-size:.7rem;transition:all .2s ease;text-decoration:none;min-width:90px;height:36px;white-space:nowrap;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-1px)}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;line-height:1;flex-shrink:0;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem;font-weight:500;flex-shrink:0;text-overflow:ellipsis;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[_ngcontent-%COMP%]:hover{background:#f003;border-color:#f006;color:#f44}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:110px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;flex-shrink:0;width:.85rem;height:.85rem;display:flex;align-items:center;justify-content:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]:hover{background:#1da1f233;border-color:#1da1f266;color:#1da1f2}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--text-primary),rgba(255,255,255,.6));border-radius:var(--border-radius-card) var(--border-radius-card) 0 0;opacity:.7;transition:var(--transition-smooth);box-shadow:0 0 8px #fff3;overflow:hidden}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.8),transparent);animation:_ngcontent-%COMP%_shimmerAccent 3s infinite}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-ripple[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#fff3!important;background:#fff3!important;border-color:#ffffff4d!important;color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:hover   .social-label[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]{background-color:#ffffff26!important;background:#ffffff26!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:active   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-active[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]{background-color:#ffffff1a!important;background:#ffffff1a!important;outline:none!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button.mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]:focus   .mat-button-wrapper[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button].mat-button-focus[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{background:transparent!important;background-color:transparent!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.mat-icon-button[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[mat-icon-button][_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#ffffff1a!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#f003!important;background:#f003!important;border-color:#f006!important;color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.youtube-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#f44!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover, .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#1da1f233!important;background:#1da1f233!important;border-color:#1da1f266!important;color:#1da1f2!important}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link.mat-icon-button[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%], .artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[mat-icon-button][_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{color:#1da1f2!important}@keyframes _ngcontent-%COMP%_shimmerAccent{0%{left:-100%}50%{left:-100%}to{left:100%}}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}50%{opacity:.6;transform:scale(1.3);box-shadow:0 0 16px #fffc}to{opacity:1;transform:scale(1);box-shadow:0 0 8px #ffffff80}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.artist-card[_ngcontent-%COMP%]{padding:1.5rem;min-height:280px;border-radius:12px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.4rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:1rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1.05rem;margin-bottom:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .7rem;letter-spacing:.7px;margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]{padding:.4rem .8rem;margin-top:.6rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]{gap:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-dot[_ngcontent-%COMP%]{width:8px;height:8px}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .playing-status[_ngcontent-%COMP%]   .playing-indicator[_ngcontent-%COMP%]   .playing-text[_ngcontent-%COMP%]{font-size:.8rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{gap:.4rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{padding:.5rem .8rem;min-width:85px;height:34px;font-size:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.65rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:100px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]   .social-label[_ngcontent-%COMP%]{font-size:.6rem}}@media (max-width: 480px){.artist-card[_ngcontent-%COMP%]{padding:1.25rem;min-height:260px;border-radius:10px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:65px;height:65px}.artist-card[_ngcontent-%COMP%]   .artist-avatar-section[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]   .artist-initials[_ngcontent-%COMP%]{font-size:1.3rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]{margin-bottom:.8rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem}.artist-card[_ngcontent-%COMP%]   .artist-info-section[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-size:.7rem;padding:.3rem .6rem;letter-spacing:.6px;margin-bottom:.7rem}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]{flex-direction:column;gap:.3rem;align-items:center}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{width:100%;max-width:150px;justify-content:center;min-width:unset;padding:.5rem 1rem;height:36px}.artist-card[_ngcontent-%COMP%]   .social-links-section[_ngcontent-%COMP%]   .social-link.twitter-link[_ngcontent-%COMP%]{min-width:unset;max-width:160px}.artist-card[_ngcontent-%COMP%]   .card-accent[_ngcontent-%COMP%]{height:2px}.artist-card[_ngcontent-%COMP%]{animation:fadeInUp .6s ease-out;animation-fill-mode:both}}'],data:{animation:[yt("cardHover",[ot("default",$({transform:"translateY(0) scale(1)"})),ot("hovered",$({transform:"translateY(-4px) scale(1.02)"})),st("default <=> hovered",rt("200ms ease-out"))]),yt("playingIndicator",[ot("playing",$({opacity:1,transform:"scale(1)",background:"transparent"})),ot("not-playing",$({opacity:.3,transform:"scale(0.8)",background:"transparent"})),st("playing <=> not-playing",rt("300ms ease-out"))])]},changeDetection:0});var Ce=Ht;var It=class It{constructor(t,e,i){this.artistCreditService=t;this.audioService=e;this.dynamicArtistService=i;this.destroy$=new G;this.currentlyPlayingArtistsSubject=new P([]);this.trackArtistCacheMap=new Map;this.maxCacheSize=50;this.cacheAccessOrder=[];this.isDebugMode=!1;this.currentlyPlayingArtists$=this.currentlyPlayingArtistsSubject.asObservable();this.currentlyPlayingArtistsWithContext$=Lt([this.audioService.audioState$,this.currentlyPlayingArtists$]).pipe(I(([t,e])=>this.enhanceArtistsWithContext(t,e)),Q((t,e)=>this.compareArtistArrays(t,e)),mt(50),Mt(1),D(this.destroy$));this.initializeService()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearCache(),this.isDebugMode&&console.log("[CurrentlyPlayingArtistsService] Service destroyed, cache cleared")}initializeService(){this.populateTrackArtistCache(),this.dynamicArtistService.currentTrack$.pipe(Q((t,e)=>t?.id===e?.id),mt(25),D(this.destroy$)).subscribe(t=>{this.updateCurrentlyPlayingArtistsFromDynamicService(t)}),this.audioService.audioState$.pipe(Q((t,e)=>t.currentTrack===e.currentTrack&&t.isPlaying===e.isPlaying),mt(25),ze(t=>this.dynamicArtistService.currentTrack$.pipe(I(e=>({audioState:t,noDynamicTrack:e===null})),Ve({audioState:t,noDynamicTrack:!0}))),D(this.destroy$)).subscribe(({audioState:t,noDynamicTrack:e})=>{e&&this.updateCurrentlyPlayingArtists(t)})}populateTrackArtistCache(){try{this.artistCreditService.tracksWithCredits$.subscribe(t=>{t.forEach(e=>{let i=this.sortArtistsByPriority(e.allContributions);if(this.trackArtistCacheMap.set(e.id,i),this.trackArtistCacheMap.set(e.trackNumber.toString(),i),e.audioFile){let r=this.extractAudioKey(e.audioFile);this.trackArtistCacheMap.set(r,i)}})})}catch(t){console.error("[CurrentlyPlayingArtistsService] Error populating cache:",t)}}updateCurrentlyPlayingArtistsFromDynamicService(t){if(!t){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.id);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e),console.log(`[CurrentlyPlayingArtistsService] Updated artists for track "${t.title}":`,e.map(i=>i.artistDisplayName));else{let i=this.getArtistsFromTrackData(t);this.currentlyPlayingArtistsSubject.next(i),console.log(`[CurrentlyPlayingArtistsService] Using direct track data for "${t.title}":`,i.map(r=>r.artistDisplayName))}}getArtistsFromTrackData(t){let e=[];return t.mainArtist&&e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features&&t.features.length>0&&t.features.forEach((i,r)=>{e.push({id:`${t.id}-featured-${r}`,artistName:i.name,artistDisplayName:i.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:{}})}),this.sortArtistsByPriority(e)}updateCurrentlyPlayingArtists(t){if(!t.isPlaying||!t.currentTrack){this.currentlyPlayingArtistsSubject.next([]);return}let e=this.getArtistsForTrack(t.currentTrack);if(e.length>0)this.currentlyPlayingArtistsSubject.next(e);else{let i=this.tryFallbackArtistLookup(t.currentTrack);this.currentlyPlayingArtistsSubject.next(i)}}getArtistsForTrack(t){let e=this.trackArtistCacheMap.get(t);if(e)return this.updateCacheAccess(t),e;let i=this.artistCreditService.getTrackCredits(t);if(i){let r=this.sortArtistsByPriority(i.allContributions);return this.setCacheWithLRU(t,r),r}return[]}tryFallbackArtistLookup(t){if(/^\d+$/.test(t)){let s=this.trackArtistCacheMap.get(t);if(s)return s}let e=t.match(/\b(\d+)\b/);if(e){let s=this.trackArtistCacheMap.get(e[1]);if(s)return s}let i=this.extractAudioKey(t),r=this.trackArtistCacheMap.get(i);return r||(console.warn(`[CurrentlyPlayingArtistsService] No artists found for track: ${t}`),[])}sortArtistsByPriority(t){return[...t].sort((e,i)=>{let r={"Main Artist":1e3,"Featured Artist":900,Vocalist:800,Producer:700,Composer:600,Arranger:500,Instrumentalist:400},s=r[e.role]||100,p=r[i.role]||100;return s!==p?p-s:e.percentageContribution!==i.percentageContribution?i.percentageContribution-e.percentageContribution:e.artistDisplayName.localeCompare(i.artistDisplayName)})}enhanceArtistsWithContext(t,e){if(!t.currentTrack)return[];let i=this.artistCreditService.getTrackCredits(t.currentTrack);return e.map(r=>E(w({},r),{isMainArtist:r.role==="Main Artist",isFeaturedArtist:r.role==="Featured Artist"||r.role==="Vocalist",playingContext:{trackId:t.currentTrack,trackTitle:i?.title||"Unknown Track",startTime:i?.startTime||0,currentTime:t.currentTime}}))}extractAudioKey(t){return t.replace(/\.[^/.]+$/,"").replace(/^.*[\\\/]/,"").toLowerCase()}getAllContributingArtists(){let t=new Map;return this.trackArtistCacheMap.forEach(e=>{e.forEach(i=>{t.has(i.artistName)||t.set(i.artistName,i)})}),Array.from(t.values()).sort((e,i)=>e.artistDisplayName.localeCompare(i.artistDisplayName))}getFeaturedArtistsForShowcase(t=8){let i=this.getAllContributingArtists().filter(r=>r.role==="Main Artist"||r.role==="Featured Artist"||r.role==="Vocalist"||r.percentageContribution>=15);return this.sortArtistsByPriority(i).slice(0,t)}setCurrentlyPlayingArtists(t){let e=this.sortArtistsByPriority(t);this.currentlyPlayingArtistsSubject.next(e)}clearCurrentlyPlayingArtists(){this.currentlyPlayingArtistsSubject.next([])}compareArtistArrays(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i].id!==e[i].id)return!1;return!0}updateCacheAccess(t){let e=this.cacheAccessOrder.indexOf(t);e>-1&&this.cacheAccessOrder.splice(e,1),this.cacheAccessOrder.push(t)}setCacheWithLRU(t,e){if(this.trackArtistCacheMap.size>=this.maxCacheSize){let i=this.cacheAccessOrder.shift();i&&(this.trackArtistCacheMap.delete(i),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Evicted cache entry: ${i}`))}this.trackArtistCacheMap.set(t,e),this.updateCacheAccess(t),this.isDebugMode&&console.log(`[CurrentlyPlayingArtistsService] Cached artists for track: ${t}`)}clearCache(){this.trackArtistCacheMap.clear(),this.cacheAccessOrder=[]}getCacheStats(){return{size:this.trackArtistCacheMap.size,maxSize:this.maxCacheSize,hitRate:this.cacheAccessOrder.length>0?this.trackArtistCacheMap.size/this.cacheAccessOrder.length:0}}setDebugMode(t){this.isDebugMode=t}};It.\u0275fac=function(e){return new(e||It)(V(ct),V(_t),V(lt))},It.\u0275prov=j({token:It,factory:It.\u0275fac,providedIn:"root"});var Me=It;function Zi(c,t){if(c&1&&O(0,"app-artist-card",11),c&2){let e=t.$implicit,i=A(3);C("cardData",e)("enableAnimations",i.enableAnimations)("@cardUpdate",void 0)}}function Xi(c,t){if(c&1&&(f(0,"div",9),T(1,Zi,1,3,"app-artist-card",10),b()),c&2){let e=A(2);H("single-card",e.artistCards().length===1),C("@cardsContainer",void 0)("@modeTransition",e.animationState()),v(),C("ngForOf",e.artistCards())("ngForTrackBy",e.trackByCardId)}}function Ji(c,t){c&1&&(f(0,"div",12)(1,"div",13)(2,"div",14),M(3,"\u266A"),b(),f(4,"h3"),M(5,"No Artists to Display"),b(),f(6,"p"),M(7,"Play a track to see contributing artists."),b()()())}function ta(c,t){if(c&1&&(f(0,"div",15)(1,"div",16),M(2,"\u2139"),b(),f(3,"span",17),M(4),b()()),c&2){let e=A(2);v(4),at(" Artist cards update in real-time as different tracks play. ",e.currentlyPlayingArtists().length," artists are currently featured. ")}}function ea(c,t){if(c&1&&(f(0,"div",2)(1,"div",3)(2,"h2",4),M(3),b(),f(4,"p",5),M(5),b()(),T(6,Xi,2,6,"div",6)(7,Ji,8,0,"div",7)(8,ta,5,1,"div",8),b()),c&2){let e=A();v(3),B(e.displayTitle),v(2),B(e.displaySubtitle),v(),C("ngIf",e.artistCards().length>0),v(),C("ngIf",e.artistCards().length===0),v(),C("ngIf",e.currentTrack())}}function ia(c,t){c&1&&(f(0,"div",18)(1,"div",19),O(2,"div",20),f(3,"p"),M(4,"Loading artist cards..."),b()()())}var $t=class $t{constructor(t,e,i,r,s,p){this.artistCreditService=t;this.audioService=e;this.currentlyPlayingService=i;this.dynamicArtistService=r;this.musicStateManager=s;this.router=p;this.showAllArtists=!1;this.maxVisibleCards=8;this.enableAnimations=!0;this._displayMode="currently-playing";this.artistCards=U([]);this.currentlyPlayingArtists=U([]);this.showcaseArtists=U([]);this.isLoading=U(!0);this.currentTrack=U(null);this.totalArtistsCount=U(0);this.animationState=U("showcase");this.artistCardIds=new Map([["SpiralFlip","artist-card-spiralflip-001"],["eili","artist-card-eili-002"],["Ariatec","artist-card-ariatec-003"],["MB","artist-card-mbgov-004"],["Iku Hoshifuri","artist-card-iku-hoshifuri-005"],["Justin Thornburgh","artist-card-justin-thornburgh-006"],["v1ris","artist-card-v1ris-007"],["Rita Kamishiro","artist-card-rita-kamishiro-008"],["Marcus Ho","artist-card-marcus-ho-009"],["AZALI","artist-card-azali-010"],["Aloysius","artist-card-aloysius-011"],["potatoTeto","artist-card-potatoteto-012"],["Artisan","artist-card-artisan-013"],["Mei Naganowa","artist-card-mei-naganowa-014"],["Evin a'k","artist-card-evin-ak-015"],["BilliumMoto","artist-card-billiummoto-016"],["Elliot Hsu","artist-card-elliot-hsu-017"],["Yuzuki","artist-card-yuzuki-018"],["LucaProject","artist-card-lucaproject-019"],["Koway","artist-card-koway-020"],["\u4F0D\u4E00","artist-card-wuyi-021"],["Nstryder","artist-card-nstryder-022"],["MoAE","artist-card-moae-023"],["dystopian tanuki","artist-card-dystopian-tanuki-024"],["Heem","artist-card-heem-025"],["Woojinee","artist-card-woojinee-026"],["Bigg Milk","artist-card-bigg-milk-027"],["Gardens","artist-card-gardens-028"],["Sad Keyboard Guy","artist-card-sad-keyboard-guy-029"],["Futsuunohito","artist-card-futsuunohito-030"],["shishishiena","artist-card-shishishiena-031"]]);this.destroy$=new G;this.currentProject=U("phantasia2")}set displayMode(t){let e=this._displayMode;this._displayMode=t,e!==t&&!this.isLoading()&&this.handleDisplayModeChange(t)}get displayMode(){return this._displayMode}ngOnInit(){this.detectCurrentProject(),this.initializeArtistCards(),this.setupRealtimeUpdates()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}detectCurrentProject(){let t=this.router.url;t.includes("phantasia1")?this.currentProject.set("phantasia1"):t.includes("phantasia2")?this.currentProject.set("phantasia2"):this.currentProject.set("phantasia2")}getCurrentProjectArtists(){return this.currentProject()==="phantasia1"?this.artistCreditService.getAllPhantasia1Artists():this.artistCreditService.getAllPhantasia2Artists()}initializeArtistCards(){try{let t=this.getCurrentProjectArtists();this.totalArtistsCount.set(t.length);let e=this.createShowcaseSelection(t);this.showcaseArtists.set(e);let i=this.musicStateManager.getCurrentArtistFilteringState();this.updateCardsFromFilteringState(i),this.isLoading.set(!1)}catch(t){console.error("[DynamicArtistCards] Error initializing artist cards:",t),this.isLoading.set(!1)}}setupRealtimeUpdates(){this.musicStateManager.artistFilteringState$.pipe(D(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Artist filtering state changed:",`Mode: ${t.mode}, Current artists: ${t.currentArtists.length}, All artists: ${t.allArtists.length}`),this.updateCardsFromFilteringState(t)}),this.musicStateManager.displayInfo$.pipe(D(this.destroy$)).subscribe(t=>{console.log("[DynamicArtistCards] Display info updated:",t)}),this.displayMode!=="currently-playing"&&this.setupLegacyFallbackUpdates()}updateCardsForCurrentTrack(t){let e=[];e.push({id:`${t.id}-main`,artistName:t.mainArtist,artistDisplayName:t.mainArtist,role:"Main Artist",participationType:"primary",percentageContribution:100,color:"#FF6B6B",socialLinks:{}}),t.features.forEach((r,s)=>{e.push({id:`${t.id}-featured-${s}`,artistName:r.name,artistDisplayName:r.name,role:"Featured Artist",participationType:"featured",percentageContribution:50,color:"#ffffff",socialLinks:r.socialLinks})}),t.collaborators.forEach((r,s)=>{e.push({id:`${t.id}-collab-${s}`,artistName:r.name,artistDisplayName:r.name,role:r.role,participationType:"collaboration",percentageContribution:25,color:"#45B7D1",socialLinks:r.socialLinks})});let i=e.map(r=>this.createArtistCard(r,!0));this.currentlyPlayingArtists.set(i),this.artistCards.set(i.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Updated cards for track:",t.title,"Artists:",e.map(r=>r.artistDisplayName))}createArtistCard(t,e=!1){return{id:this.artistCardIds.get(t.artistName)||`artist-card-${this.generateSlug(t.artistName)}`,artist:t,isCurrentlyPlaying:e,participationLevel:this.determineParticipationLevel(t),displayPriority:this.calculateDisplayPriority(t,e)}}createAllArtistCards(t){return t.map(e=>this.createArtistCard(e,!1)).sort((e,i)=>i.displayPriority-e.displayPriority)}createShowcaseSelection(t){return t.filter(i=>{let r=i.role;return r==="Main Artist"||r==="Featured Artist"||r==="Vocalist"||i.percentageContribution>=15}).map(i=>this.createArtistCard(i,!1)).sort((i,r)=>r.displayPriority-i.displayPriority).slice(0,Math.max(this.maxVisibleCards,8))}determineParticipationLevel(t){return t.role==="Main Artist"?"main":t.role==="Featured Artist"||t.role==="Vocalist"?"featured":t.percentageContribution>=10?"collaboration":"additional"}calculateDisplayPriority(t,e){let i=0;switch(e&&(i+=1e3),t.role){case"Main Artist":i+=500;break;case"Featured Artist":i+=400;break;case"Vocalist":i+=350;break;case"Producer":i+=300;break;case"Composer":i+=250;break;default:i+=100;break}return i+=t.percentageContribution,i}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}getCardById(t){return this.artistCards().find(e=>e.id===t)}handleDisplayModeChange(t){if(console.log("[DynamicArtistCards] Display mode changed to:",t),t==="showcase"){this.animationState.set("showcase");let e=this.showcaseArtists();this.artistCards.set(e),console.log("[DynamicArtistCards] Switched to showcase mode - showing",e.length,"featured artists")}else if(t==="currently-playing"){this.animationState.set("currently-playing");let e=this.currentlyPlayingArtists();e.length>0?(this.artistCards.set(e.slice(0,this.maxVisibleCards)),console.log("[DynamicArtistCards] Switched to currently-playing mode - showing",e.length,"artists")):(console.log("[DynamicArtistCards] No currently playing artists - falling back to showcase"),this.handleDisplayModeChange("showcase"))}else if(t==="all"){this.animationState.set("showcase");let e=this.getCurrentProjectArtists();this.artistCards.set(this.createAllArtistCards(e))}}updateCardsFromFilteringState(t){if(t.mode==="music-playing"&&t.currentArtists.length>0){let e=t.currentArtists.map(r=>this.createArtistCard(r,!0));this.currentlyPlayingArtists.set(e),this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.animationState.set("currently-playing");let i=this.musicStateManager.getCurrentMusicState();this.currentTrack.set(i.currentTrack?.id||null),console.log("[DynamicArtistCards] Updated to music-playing mode with",e.length,"artists")}else{let e=t.allArtists.map(i=>this.createArtistCard(i,!1));this.artistCards.set(e.slice(0,this.maxVisibleCards)),this.showcaseArtists.set(e),this.currentlyPlayingArtists.set([]),this.animationState.set("showcase"),this.currentTrack.set(null),console.log("[DynamicArtistCards] Updated to no-music mode with",e.length,"artists")}}setupLegacyFallbackUpdates(){this.currentlyPlayingService.currentlyPlayingArtists$.pipe(D(this.destroy$)).subscribe(t=>{this.musicStateManager.getCurrentArtistFilteringState().mode==="no-music"&&t.length>0&&console.log("[DynamicArtistCards] Using legacy fallback for",t.length,"artists")})}trackByCardId(t,e){return e.id}get displayTitle(){return this.musicStateManager.getCurrentArtistFilteringState().displayTitle}get displaySubtitle(){return this.musicStateManager.getCurrentArtistFilteringState().displaySubtitle}};$t.\u0275fac=function(e){return new(e||$t)(z(ct),z(_t),z(Me),z(lt),z(Vt),z($e))},$t.\u0275cmp=N({type:$t,selectors:[["app-dynamic-artist-cards"]],inputs:{showAllArtists:"showAllArtists",maxVisibleCards:"maxVisibleCards",enableAnimations:"enableAnimations",displayMode:"displayMode"},decls:2,vars:2,consts:[["class","dynamic-artist-cards-container",4,"ngIf"],["class","cards-loading-container",4,"ngIf"],[1,"dynamic-artist-cards-container"],[1,"cards-header"],[1,"cards-title"],[1,"cards-subtitle"],["class","artist-cards-grid",3,"single-card",4,"ngIf"],["class","no-artists-state",4,"ngIf"],["class","artist-cards-info-panel",4,"ngIf"],[1,"artist-cards-grid"],["class","artist-card",3,"cardData","enableAnimations",4,"ngFor","ngForOf","ngForTrackBy"],[1,"artist-card",3,"cardData","enableAnimations"],[1,"no-artists-state"],[1,"no-artists-content"],[1,"no-artists-icon"],[1,"artist-cards-info-panel"],[1,"info-icon"],[1,"info-text"],[1,"cards-loading-container"],[1,"loading-content"],[1,"loading-spinner"]],template:function(e,i){e&1&&T(0,ea,9,5,"div",0)(1,ia,5,0,"div",1),e&2&&(C("ngIf",!i.isLoading()),v(),C("ngIf",i.isLoading()))},dependencies:[nt,ne,bt,Ce],styles:["[_ngcontent-%COMP%]:root{--artist-card-bg-primary: rgba(0, 0, 0, .85);--artist-card-bg-secondary: rgba(20, 20, 20, .8);--artist-card-text-primary: #ffffff;--artist-card-text-secondary: rgba(255, 255, 255, .8);--artist-card-text-muted: rgba(255, 255, 255, .6);--artist-card-border-primary: rgba(255, 255, 255, .15);--artist-card-border-hover: rgba(255, 255, 255, .25);--artist-card-shadow-base: rgba(0, 0, 0, .4);--artist-card-shadow-elevated: rgba(0, 0, 0, .6);--artist-card-hover-bg: rgba(40, 40, 40, .9);--artist-card-active-bg: rgba(60, 60, 60, .9)}.dynamic-artist-cards-container[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto;padding:var(--artist-card-spacing-xxl) var(--artist-card-spacing-lg);background:var(--artist-card-container-bg);border:1px solid var(--artist-card-border-secondary);border-radius:var(--artist-card-radius-large);backdrop-filter:var(--artist-card-glass-blur);-webkit-backdrop-filter:var(--artist-card-glass-blur);box-shadow:var(--artist-card-shadow-container)}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:0;backdrop-filter:none;-webkit-backdrop-filter:none;box-shadow:none;max-width:100%;padding:1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem;padding:1rem 0}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-title[_ngcontent-%COMP%]{font-size:clamp(1.6rem,3vw,2.8rem);font-weight:700;color:var(--text-primary);margin:0 0 .75rem;text-shadow:0 3px 8px rgba(0,0,0,.7);letter-spacing:-.02em;line-height:1.1}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .cards-header[_ngcontent-%COMP%]   .cards-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);max-width:640px;margin:0 auto;line-height:1.6;font-weight:400;text-shadow:0 2px 4px rgba(0,0,0,.5)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin:0 1rem 2rem;justify-content:start;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);box-sizing:border-box;container-type:inline-size}@media (min-width: 1024px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.2rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (min-width: 1200px){.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:320px}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:350px;justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:320px}@media (min-width: 769px) and (max-width: 1199px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;grid-template-columns:1fr!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important;max-width:calc(100% - 1rem)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{max-width:calc(100% - 2rem);justify-self:center}.special-mentions-container[_ngcontent-%COMP%]   .dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem;margin:0 .5rem 2rem;width:calc(100% - 1rem);max-width:calc(100% - 1rem)}}@media (min-width: 1200px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem);justify-content:start;box-sizing:border-box}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]{display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid.single-card[_ngcontent-%COMP%]   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child){display:grid!important;justify-content:center!important;justify-items:center;margin:0 auto 2rem!important;width:auto!important}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]:has(.artist-card:only-child)   .artist-card[_ngcontent-%COMP%]{width:100%;max-width:380px;justify-self:center}}@media (min-width: 1440px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.25rem;justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 800px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}@container (min-width: 1000px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));justify-content:start;margin:0 1rem 2rem;width:calc(100% - 2rem);max-width:calc(100% - 2rem)}}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]{background:var(--card-bg-primary);border-radius:16px;padding:2.5rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);border:1px solid rgba(255,255,255,.12);box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#fff3;transform:translateY(-2px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   .no-artists-icon[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--text-secondary);margin-bottom:1.5rem;display:block;opacity:.8}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .75rem;font-size:1.4rem;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.6)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .no-artists-state[_ngcontent-%COMP%]   .no-artists-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0;font-size:1rem;line-height:1.5}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;background:var(--card-bg-primary);border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:1.25rem 1.75rem;backdrop-filter:var(--glass-blur);-webkit-backdrop-filter:var(--glass-blur);margin-top:2rem;box-shadow:var(--shadow-elevated);transition:all .3s ease}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]:hover{background:var(--card-bg-hover);border-color:#ffffff40;transform:translateY(-1px)}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.4rem;flex-shrink:0;opacity:.9}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.95rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 768px){.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]{padding:.875rem 1rem}.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-info-panel[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:.8rem}}.cards-loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:240px;padding:3rem;background:var(--container-bg);border-radius:12px}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary)}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:3px solid rgba(255,255,255,.15);border-top:3px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem;box-shadow:0 0 12px #ffffff1a}.cards-loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:var(--text-primary);text-shadow:0 2px 4px rgba(0,0,0,.5)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.artist-card[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.artist-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.02);box-shadow:var(--shadow-elevated)}.artist-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.artist-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.artist-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.artist-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.artist-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.artist-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.artist-card[_ngcontent-%COMP%]:nth-child(7){animation-delay:.7s}.artist-card[_ngcontent-%COMP%]:nth-child(8){animation-delay:.8s}"],data:{animation:[yt("cardsContainer",[st(":enter",[we(".artist-card",[$({opacity:0,transform:"translateY(20px)"}),Oe(100,[rt("300ms ease-out",$({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]),yt("cardUpdate",[ot("in",$({opacity:1,transform:"scale(1)"})),st("void => *",[$({opacity:0,transform:"scale(0.9)"}),rt("250ms ease-out")]),st("* => void",[rt("200ms ease-in",$({opacity:0,transform:"scale(0.9)"}))])]),yt("modeTransition",[ot("showcase",$({opacity:1,transform:"translateY(0)"})),ot("currently-playing",$({opacity:1,transform:"translateY(0)"})),st("showcase => currently-playing",[rt("400ms cubic-bezier(0.4, 0.0, 0.2, 1)",$({opacity:1,transform:"translateY(0)"}))]),st("currently-playing => showcase",[rt("600ms cubic-bezier(0.4, 0.0, 0.2, 1)",$({opacity:1,transform:"translateY(0)"}))])])]},changeDetection:0});var hi=$t;var Dt=class Dt{constructor(t){this.http=t;this.phantasia2Artists$=new P([]);this.phantasia2Album$=new P(null);this.prismaticCollection$=new P(null);this.artistAvatarMap={SpiralFlip:{avatarPath:"/assets/images/artists/SpiralFlip.png",displayName:"SpiralFlip",color:"#FF6B6B",genre:"Organiser"},eili:{avatarPath:"/assets/images/artists/Eili.png",displayName:"eili",color:"#ffffff",genre:"Vocal, Electronic"},Ariatec:{avatarPath:"/assets/images/artists/Ariatec.png",displayName:"Ariatec",color:"#45B7D1",genre:"Ambient, Cinematic"},MB:{avatarPath:"/assets/images/artists/MBgov.png",displayName:"MBgov",color:"#96CEB4",genre:"Orchestral, Classical"},"Iku Hoshifuri":{avatarPath:"/assets/images/artists/Iku Hoshifuri.png",displayName:"Iku Hoshifuri",color:"#FFEAA7",genre:"Vocal, J-Pop"},"Justin Thornburgh":{avatarPath:"/assets/images/artists/Justin Thornburgh.png",displayName:"Justin Thornburgh",color:"#DDA0DD",genre:"Folk, Accordion"},v1ris:{avatarPath:"/assets/images/artists/v1ris.png",displayName:"v1ris",color:"#F8B500",genre:"Classical, Violin"},"Rita Kamishiro":{avatarPath:"/assets/images/artists/Rita Kamishiro.png",displayName:"Rita Kamishiro",color:"#E17055",genre:"Classical, Viola"},"Marcus Ho":{avatarPath:"/assets/images/artists/Marcus Ho.png",displayName:"Marcus Ho",color:"#6C5CE7",genre:"Classical, Cello"},AZALI:{avatarPath:"/assets/images/artists/AZALI.png",displayName:"AZALI",color:"#A29BFE",genre:"Electronic, Experimental"},Aloysius:{avatarPath:"/assets/images/artists/Aloysius.png",displayName:"Aloysius",color:"#FD79A8",genre:"Electronic, Ambient"},potatoTeto:{avatarPath:"/assets/images/artists/potatoTeto.png",displayName:"potatoTeto",color:"#00B894",genre:"Ambient, Experimental"},Artisan:{avatarPath:"/assets/images/artists/Artisan.png",displayName:"Artisan",color:"#E84393",genre:"Electronic, Melodic"},"Mei Naganowa":{avatarPath:"/assets/images/artists/Mei Naganowa.png",displayName:"Mei Naganowa",color:"#00CEC9",genre:"Electronic, Synthesizer V"},"Evin a'k":{avatarPath:"/assets/images/artists/Evin a'k.png",displayName:"Evin a'k",color:"#FDCB6E",genre:"Electronic, Bass"},BilliumMoto:{avatarPath:"/assets/images/artists/BilliumMoto.png",displayName:"BilliumMoto",color:"#74B9FF",genre:"Lofi, Chill"},"Elliot Hsu":{avatarPath:"/assets/images/artists/Elliot Hsu.png",displayName:"Elliot Hsu",color:"#55A3FF",genre:"Electronic, Ambient"},Yuzuki:{avatarPath:"/assets/images/artists/Yuzuki.png",displayName:"Yuzuki",color:"#FF7675",genre:"Electronic, Synthesizer V"},LucaProject:{avatarPath:"/assets/images/artists/LucaProject.png",displayName:"LucaProject",color:"#6C5CE7",genre:"Electronic, Melodic"},Koway:{avatarPath:"/assets/images/artists/Koway.png",displayName:"Koway",color:"#A29BFE",genre:"Electronic, Experimental"},\u4F0D\u4E00:{avatarPath:"/assets/images/artists/\u4F0D\u4E00.png",displayName:"\u4F0D\u4E00",color:"#FFEAA7",genre:"Vocal, Electronic"},Nstryder:{avatarPath:"/assets/images/artists/Nstryder.png",displayName:"Nstryder",color:"#E17055",genre:"Electronic, Hardcore"},MoAE:{avatarPath:"/assets/images/artists/MoAE:..png",displayName:"MoAE:.",color:"#00B894",genre:"Electronic, Ambient"},"dystopian tanuki":{avatarPath:"/assets/images/artists/dystopian tanuki.png",displayName:"dystopian tanuki",color:"#636E72",genre:"Experimental, Ambient"},Heem:{avatarPath:"/assets/images/artists/Heem.png",displayName:"Heem",color:"#FD79A8",genre:"Electronic, Melodic"},Woojinee:{avatarPath:"/assets/images/artists/Woojinee.png",displayName:"Woojinee",color:"#E84393",genre:"Violinist"},"Bigg Milk":{avatarPath:"/assets/images/artists/Bigg Milk.png",displayName:"Bigg Milk",color:"#00CEC9",genre:"Electronic, Chill"},Gardens:{avatarPath:"/assets/images/artists/Gardens.png",displayName:"Gardens",color:"#00B894",genre:"Electronic, Ambient"},"Sad Keyboard Guy":{avatarPath:"/assets/images/artists/Sad Keyboard Guy.png",displayName:"Sad Keyboard Guy",color:"#74B9FF",genre:"Lofi, Emotional"},Futsuunohito:{avatarPath:"/assets/images/artists/Futsuunohito.png",displayName:"Futsuunohito",color:"#A29BFE",genre:"Electronic, Cinematic"},shishishiena:{avatarPath:"/assets/images/artists/shishishiena.png",displayName:"shishishiena",color:"#FFEAA7",genre:"Voice Acting, Vocal"},PliXoR:{avatarPath:"/assets/images/artists/PliXoR.png",displayName:"PliXoR",color:"#ff6b6b",genre:"Mastering Engineer"},NapaL:{avatarPath:"/assets/images/artists/NapaL.png",displayName:"\uB098\uD314 NapaL",color:"#4ecdc4",genre:"Cover Illustration"},yy_artwork:{avatarPath:"/assets/images/artists/yy_artwork.png",displayName:"yy_artwork",color:"#45b7d1",genre:"Logo/Jacket Design"},"Elegant Sister":{avatarPath:"/assets/images/artists/Elegant Sister.png",displayName:"Elegant Sister",color:"#f7b733",genre:"Album Stream MV"},Len:{avatarPath:"/assets/images/artists/Len Licht.png",displayName:"Len",color:"#5f27cd",genre:"Crossfade MV/Live2D"},Daph:{avatarPath:"/assets/images/artists/Daph Shoo.png",displayName:"Daph",color:"#00d2d3",genre:"Live2D"},honabai:{avatarPath:"/assets/images/artists/honabai.png",displayName:"honabai",color:"#ff9ff3",genre:"Special Thanks"},shironill:{avatarPath:"/assets/images/artists/shironill.png",displayName:"shironill",color:"#f368e0",genre:"Special Thanks"},Prower:{avatarPath:"/assets/images/artists/Prower.png",displayName:"Prower",color:"#9b59b6",genre:"Electronic Producer"},Seycara:{avatarPath:"/assets/images/artists/Seycara.png",displayName:"Seycara",color:"#e74c3c",genre:"Electronic Producer"},Qyubey:{avatarPath:"/assets/images/artists/Qyubey.png",displayName:"Qyubey",color:"#f39c12",genre:"Electronic Producer"},Luscinia:{avatarPath:"/assets/images/artists/Luscinia.png",displayName:"Luscinia",color:"#2ecc71",genre:"Electronic Producer"},\u306F\u304C\u306D:{avatarPath:"/assets/images/artists/Hagane.png",displayName:"\u306F\u304C\u306D",color:"#34495e",genre:"Electronic Producer"},satella:{avatarPath:"/assets/images/artists/satella.png",displayName:"satella",color:"#8e44ad",genre:"Electronic Producer"},sleepy:{avatarPath:"/assets/images/artists/Sleepless.png",displayName:"sleepy",color:"#B0E0E6",genre:"Electronic Producer"},tikaal:{avatarPath:"/assets/images/artists/tikaal.png",displayName:"tikaal",color:"#FF9F40",genre:"Bass Guitarist"},"Miyamai Moca":{avatarPath:"/assets/images/artists/Miyamai-Moca.png",displayName:"Miyamai Moca",color:"#FFB347",genre:"Synthesizer V Operator"}};this.initializeGelDbData()}getPhantasia2Artists(){return this.phantasia2Artists$.asObservable()}getPhantasia2Album(){return this.phantasia2Album$.asObservable()}getPrismaticCollection(){return this.prismaticCollection$.asObservable()}getArtistAvatar(t){return this.artistAvatarMap[t]?.avatarPath||"/assets/images/artists/default-avatar.png"}getArtistDisplayName(t){return this.artistAvatarMap[t]?.displayName||t}getArtistColor(t){return this.artistAvatarMap[t]?.color||"#74B9FF"}getArtistAvatarMap(){return this.artistAvatarMap}getArtistSocialLinks(t){let i={SpiralFlip:{youtube:"https://www.youtube.com/@SpiralFlip",carrd:"https://spiralflip.carrd.co/"},eili:{youtube:"https://www.youtube.com/@EiliYT",twitter:"https://x.com/frenlize"},Ariatec:{youtube:"https://www.youtube.com/@musicbyariatec",reelcrafter:"https://play.reelcrafter.com/KLSound/port"},MB:{youtube:"https://www.youtube.com/@MBMichael",twitter:"https://x.com/MBgov1133"},"Iku Hoshifuri":{youtube:"https://www.youtube.com/@IkuHoshifuri",linktr:"https://lit.link/en/ikuhoshifuri"},AZALI:{youtube:"https://www.youtube.com/@AZALI00013",twitter:"https://x.com/AZALI00013"},Aloysius:{youtube:"https://www.youtube.com/@aloysius3264",twitter:"https://x.com/Aloysiu04138577"},Heem:{twitter:"https://x.com/h_e_e__m",linktr:"https://linktr.ee/heeem"},Prower:{twitter:"https://x.com/prowerrr_"},Seycara:{twitter:"https://x.com/Seycara",youtube:"https://www.youtube.com/@Seycara"},Qyubey:{twitter:"https://x.com/QyubeySan",youtube:"https://www.youtube.com/@qyubey_san"},Luscinia:{twitter:"https://x.com/LusciniaSound",youtube:"https://www.youtube.com/@Luscinia.Nightingale"},\u306F\u304C\u306D:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},Hagane:{twitter:"https://x.com/STEEL_PLUS",youtube:"https://www.youtube.com/@steelplus_hagane"},LucaProject:{youtube:"https://www.youtube.com/@lucaproject6108",twitter:"https://x.com/LucaProject6108",carrd:"https://lucaproject.carrd.co/"},satella:{twitter:"https://x.com/satella0w0",youtube:"https://www.youtube.com/@satella0w0"},sleepy:{twitter:"https://x.com/sleeplessgamign"},PliXoR:{twitter:"https://x.com/plixormusic"},NapaL:{twitter:"https://x.com/Ve_Xillum"},yy_artwork:{twitter:"https://x.com/yy_artwork"},"Elegant Sister":{twitter:"https://x.com/ElegantSister"},Len:{twitter:"https://x.com/Len_licht"},Daph:{twitter:"https://x.com/daphshoo"},honabai:{twitter:"https://x.com/honabai"},shironill:{twitter:"https://x.com/shironill"},Woojinee:{instagram:"https://www.instagram.com/wooj1nee/?igsh=czUwcXg3aWh6NmM5&utm_source=qr#"},tikaal:{twitter:"https://x.com/tikaal"},"Miyamai Moca":{twitter:"https://x.com/ReeKDoesDTM"}}[t];return i?w({id:`social-${t.toLowerCase().replace(/\s+/g,"-")}`},i):null}searchArtists(t){return this.phantasia2Artists$.pipe(I(e=>e.filter(i=>i.name.toLowerCase().includes(t.toLowerCase())||i.display_name?.toLowerCase().includes(t.toLowerCase())||i.genre?.toLowerCase().includes(t.toLowerCase()))))}getFeaturedArtists(){return this.prismaticCollection$.pipe(I(t=>t?.featured_artists||[]))}initializeGelDbData(){try{let t=Object.entries(this.artistAvatarMap).map(([r,s],p)=>({id:`artist-${p+1}`,name:r,display_name:s.displayName,avatar:s.avatarPath,color:s.color,genre:s.genre,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));this.phantasia2Artists$.next(t);let e={id:"phantasia-2",title:"Phantasia 2",artist:t.find(r=>r.name==="SpiralFlip"),release_date:"2025-01-01",genre:"Electronic Compilation",description:"The second installment of the Phantasia compilation series",cover_art_url:"/assets/images/covers/phantasia2-cover.jpg",track_count:20,duration_seconds:4567,songs:[]};this.phantasia2Album$.next(e);let i={id:"prismatic-collections",name:"Prismatic Collections",description:"A multi-faceted music collection celebrating diverse electronic artists",color_scheme:"prismatic",theme:"electronic-fusion",is_featured:!0,collections:[],featured_artists:t.slice(0,10)};this.prismaticCollection$.next(i)}catch(t){console.error("Failed to initialize geldb data:",t)}}refreshData(){return this.initializeGelDbData(),Ne(!0)}};Dt.\u0275fac=function(e){return new(e||Dt)(V(vt))},Dt.\u0275prov=j({token:Dt,factory:Dt.\u0275fac,providedIn:"root"});var xe=Dt;var na=["*"],gi=(c,t)=>t.id;function ra(c,t){if(c&1&&O(0,"img",20),c&2){let e=A().$implicit;C("src",e.avatar,gt)("alt",e.name+" avatar")}}function oa(c,t){if(c&1&&(f(0,"div",21),M(1),b()),c&2){let e=A().$implicit;W("background",e.color),v(),at(" ",e.initials," ")}}function sa(c,t){c&1&&(f(0,"span",26),M(1,"\u{1D54F}"),b())}function ca(c,t){c&1&&(f(0,"span",27),M(1,"\u{1F4F7}"),b())}function la(c,t){if(c&1){let e=it();f(0,"div",22)(1,"button",23),R("click",function(r){tt(e);let s=A().$implicit,p=A();return et(s.socialLinks.twitter?p.onSocialLinkClick(s.socialLinks.twitter,r):p.onSocialLinkClick(s.socialLinks.instagram,r))}),T(2,sa,2,0,"span",24)(3,ca,2,0,"span",25),b()()}if(c&2){let e=A().$implicit;v(),Y("aria-label",e.name+" social link"),v(),C("ngIf",e.socialLinks.twitter),v(),C("ngIf",e.socialLinks.instagram&&!e.socialLinks.twitter)}}function da(c,t){if(c&1){let e=it();f(0,"div",11),R("click",function(){let r=tt(e).$implicit,s=A();return et(s.onCardClick(r))}),f(1,"div",12),T(2,ra,1,2,"img",13)(3,oa,2,3,"div",14),b(),f(4,"div",15)(5,"div",16),M(6),b(),f(7,"div",17),M(8),b()(),T(9,la,4,3,"div",18),O(10,"div",19),b()}if(c&2){let e=t.$implicit;W("--accent-color",e.color),v(2),C("ngIf",e.avatar),v(),C("ngIf",!e.avatar),v(3),B(e.name),v(2),B(e.role),v(),C("ngIf",e.socialLinks.twitter||e.socialLinks.instagram)}}function ua(c,t){if(c&1&&O(0,"img",20),c&2){let e=A().$implicit;C("src",e.avatar,gt)("alt",e.name+" avatar")}}function ma(c,t){if(c&1&&(f(0,"div",21),M(1),b()),c&2){let e=A().$implicit;W("background",e.color),v(),at(" ",e.initials," ")}}function pa(c,t){c&1&&(f(0,"span",26),M(1,"\u{1D54F}"),b())}function ha(c,t){c&1&&(f(0,"span",27),M(1,"\u{1F4F7}"),b())}function ga(c,t){if(c&1){let e=it();f(0,"div",22)(1,"button",23),R("click",function(r){tt(e);let s=A().$implicit,p=A();return et(s.socialLinks.twitter?p.onSocialLinkClick(s.socialLinks.twitter,r):p.onSocialLinkClick(s.socialLinks.instagram,r))}),T(2,pa,2,0,"span",24)(3,ha,2,0,"span",25),b()()}if(c&2){let e=A().$implicit;v(),Y("aria-label",e.name+" social link"),v(),C("ngIf",e.socialLinks.twitter),v(),C("ngIf",e.socialLinks.instagram&&!e.socialLinks.twitter)}}function fa(c,t){if(c&1){let e=it();f(0,"div",11),R("click",function(){let r=tt(e).$implicit,s=A();return et(s.onCardClick(r))}),f(1,"div",12),T(2,ua,1,2,"img",13)(3,ma,2,3,"div",14),b(),f(4,"div",15)(5,"div",16),M(6),b(),f(7,"div",17),M(8),b()(),T(9,ga,4,3,"div",18),O(10,"div",19),b()}if(c&2){let e=t.$implicit;W("--accent-color",e.color),v(2),C("ngIf",e.avatar),v(),C("ngIf",!e.avatar),v(3),B(e.name),v(2),B(e.role),v(),C("ngIf",e.socialLinks.twitter||e.socialLinks.instagram)}}var Gt=class Gt{constructor(t){this.gelDbService=t;this.specialMentions=U([]);this.displayedMentions=ut(()=>this.specialMentions().map(t=>E(w({},t),{initials:this.getInitials(t.name)})));this.leftSideCards=ut(()=>{let t=this.displayedMentions(),e=Math.ceil(t.length/2);return t.slice(0,e)});this.rightSideCards=ut(()=>{let t=this.displayedMentions(),e=Math.ceil(t.length/2);return t.slice(e)})}ngOnInit(){this.loadSpecialMentionsFromDatabase()}loadSpecialMentionsFromDatabase(){let e=["SpiralFlip","PliXoR","NapaL","yy_artwork","Elegant Sister","Len","Daph","honabai","shironill"].map(i=>{let r=this.gelDbService.getArtistAvatar(i),s=this.gelDbService.getArtistDisplayName(i),p=this.gelDbService.getArtistColor(i),h=this.gelDbService.getArtistSocialLinks(i),x=this.gelDbService.getArtistAvatarMap()[i]?.genre||"Production Team";return{id:i.toLowerCase().replace(/\s+/g,"-"),name:s,role:x,avatar:r,color:p,socialLinks:{twitter:h?.twitter,youtube:h?.youtube,instagram:h?.instagram,website:h?.website}}});this.specialMentions.set(e)}getInitials(t){let e=t.split(" ").filter(i=>i.length>0);return e.length===0?"?":e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}onCardClick(t){t.socialLinks.twitter?window.open(t.socialLinks.twitter,"_blank","noopener,noreferrer"):t.socialLinks.instagram?window.open(t.socialLinks.instagram,"_blank","noopener,noreferrer"):t.socialLinks.youtube?window.open(t.socialLinks.youtube,"_blank","noopener,noreferrer"):t.socialLinks.website&&window.open(t.socialLinks.website,"_blank","noopener,noreferrer")}onSocialLinkClick(t,e){e.stopPropagation(),window.open(t,"_blank","noopener,noreferrer")}};Gt.\u0275fac=function(e){return new(e||Gt)(z(xe))},Gt.\u0275cmp=N({type:Gt,selectors:[["app-special-mentions"]],ngContentSelectors:na,decls:18,vars:0,consts:[[1,"special-mentions-container"],[1,"section-header"],[1,"section-title"],[1,"section-subtitle"],[1,"three-column-layout"],[1,"cards-column","left-column"],[1,"column-cards"],[1,"compact-card","vertical-card",3,"--accent-color"],[1,"main-content-column"],[1,"content-placeholder"],[1,"cards-column","right-column"],[1,"compact-card","vertical-card",3,"click"],[1,"compact-avatar"],["class","avatar-image","loading","lazy",3,"src","alt",4,"ngIf"],["class","avatar-initials",3,"background",4,"ngIf"],[1,"compact-info"],[1,"artist-name"],[1,"artist-role"],["class","compact-social",4,"ngIf"],[1,"card-accent"],["loading","lazy",1,"avatar-image",3,"src","alt"],[1,"avatar-initials"],[1,"compact-social"],["mat-icon-button","",1,"social-btn",3,"click"],["class","twitter-x-icon",4,"ngIf"],["class","instagram-icon",4,"ngIf"],[1,"twitter-x-icon"],[1,"instagram-icon"]],template:function(e,i){e&1&&(At(),f(0,"div",0)(1,"div",1)(2,"h3",2),M(3,"Special Thanks"),b(),f(4,"p",3),M(5,"Production Team"),b()(),f(6,"div",4)(7,"div",5)(8,"div",6),Ae(9,da,11,7,"div",7,gi),b()(),f(11,"div",8)(12,"div",9),kt(13),b()(),f(14,"div",10)(15,"div",6),Ae(16,fa,11,7,"div",7,gi),b()()()()),e&2&&(v(9),ke(i.leftSideCards()),v(7),ke(i.rightSideCards()))},dependencies:[nt,bt,Nt,pe,Zt],styles:['.special-mentions-container[_ngcontent-%COMP%]{width:100%;padding:1rem 0;min-height:100vh}.section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;position:relative;z-index:10}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fffffff2;margin:0 0 .5rem;text-shadow:0 2px 8px rgba(0,0,0,.4);letter-spacing:.5px}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#ffffffbf;margin:0;text-transform:uppercase;letter-spacing:1px;font-weight:500}.three-column-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr 250px;gap:2rem;max-width:1400px;margin:0 auto;padding:0 2rem;min-height:80vh;align-items:start;grid-template-rows:auto;width:100%;max-width:100%;box-sizing:border-box}@media (min-width: 1200px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:280px 1fr 280px;gap:3rem;max-width:1600px}}@media (min-width: 1600px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:320px 1fr 320px;gap:4rem;max-width:1800px}.three-column-layout[_ngcontent-%COMP%]   .main-content-column[_ngcontent-%COMP%]{min-width:1000px}}.cards-column[_ngcontent-%COMP%]{position:sticky;top:2rem;height:fit-content;max-height:calc(100vh - 4rem);overflow-y:auto}.cards-column.left-column[_ngcontent-%COMP%]{justify-self:end}.cards-column.right-column[_ngcontent-%COMP%]{justify-self:start}.column-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.main-content-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;min-height:60vh;padding:2rem 1rem;width:100%;box-sizing:border-box}.main-content-column[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.content-placeholder[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;min-height:400px;background:#1e1e284d;border:2px dashed rgba(255,255,255,.2);border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);max-width:100%;overflow:visible;box-sizing:border-box;container-type:inline-size}.content-placeholder[_ngcontent-%COMP%]:empty:before{content:"Main Content Area";color:#ffffff80;font-size:1.2rem;font-weight:500;text-align:center;margin:auto}.content-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;max-width:100%;flex:1;box-sizing:border-box}.content-placeholder[_ngcontent-%COMP%] > *.dynamic-artist-cards-container[_ngcontent-%COMP%]{width:100%;max-width:none}.content-placeholder[_ngcontent-%COMP%] > *.dynamic-artist-cards-container[_ngcontent-%COMP%]   .artist-cards-grid[_ngcontent-%COMP%]{width:100%;max-width:none}.compact-card[_ngcontent-%COMP%]{--accent-color: #ffffff;position:relative;background:#0f0f19f2;border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:1rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);overflow:hidden;width:100%}.compact-card.vertical-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;min-height:80px;max-width:100%}.compact-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) translate(2px);background:#191928fa;border-color:var(--accent-color);box-shadow:0 12px 35px #0006,0 0 25px rgba(var(--accent-color-rgb, 255, 255, 255),.15),inset 0 1px #ffffff1a}.compact-card[_ngcontent-%COMP%]:hover   .card-accent[_ngcontent-%COMP%]{opacity:1}.compact-card[_ngcontent-%COMP%]:hover   .compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{transform:scale(1.08)}.compact-card[_ngcontent-%COMP%]:hover   .artist-name[_ngcontent-%COMP%]{color:var(--accent-color);text-shadow:0 0 8px rgba(var(--accent-color-rgb, 255, 255, 255),.3)}.compact-card[_ngcontent-%COMP%]:hover   .social-btn[_ngcontent-%COMP%]{opacity:1;transform:scale(1.15) translateY(-1px)}.compact-card[_ngcontent-%COMP%]:active{transform:translateY(-2px) scale(.98)}.compact-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:44px;height:44px;border-radius:50%;overflow:hidden;background:#ffffff1a;position:relative;border:2px solid rgba(255,255,255,.2);transition:all .3s ease}.compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s cubic-bezier(.4,0,.2,1)}.compact-avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:700;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.6);letter-spacing:.5px}.compact-info[_ngcontent-%COMP%]{flex:1;min-width:0;padding:0 .25rem}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#fffffff5;margin:0 0 .15rem;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.2}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.75rem;color:#ffffffa6;margin:0;text-transform:uppercase;letter-spacing:.5px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.1}.compact-social[_ngcontent-%COMP%]{flex-shrink:0}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;background:#ffffff14;border:1px solid rgba(255,255,255,.25);opacity:.8;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover{background:var(--accent-color);border-color:var(--accent-color);opacity:1;box-shadow:0 4px 12px rgba(var(--accent-color-rgb, 255, 255, 255),.3)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover   .twitter-x-icon[_ngcontent-%COMP%], .compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]:hover   .instagram-icon[_ngcontent-%COMP%]{color:#000;transform:scale(1.1)}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#ffffffe6;transition:all .3s ease}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .instagram-icon[_ngcontent-%COMP%]{font-size:.9rem;color:#ffffffe6;transition:all .3s ease}.card-accent[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent-color),transparent);opacity:0;transition:opacity .3s ease;border-radius:0 0 16px 16px}@media (max-width: 1199px){.three-column-layout[_ngcontent-%COMP%]{gap:1.5rem;padding:0 1.5rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.6rem}}@media (max-width: 991px){.three-column-layout[_ngcontent-%COMP%]{grid-template-columns:200px 1fr 200px;gap:1rem;padding:0 1rem}.compact-card.vertical-card[_ngcontent-%COMP%]{padding:.8rem;gap:.6rem;min-height:70px}.compact-avatar[_ngcontent-%COMP%]{width:38px;height:38px}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.85rem}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 768px){.special-mentions-container[_ngcontent-%COMP%]{padding:.5rem 0}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.4rem}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:.9rem}.three-column-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:0 1rem;min-height:auto}.cards-column[_ngcontent-%COMP%]{position:static;max-height:none;width:100%}.cards-column.left-column[_ngcontent-%COMP%], .cards-column.right-column[_ngcontent-%COMP%]{justify-self:auto}.column-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:.75rem;padding:0}.main-content-column[_ngcontent-%COMP%]{order:-1;min-height:300px;padding:1rem 0}.content-placeholder[_ngcontent-%COMP%]{min-height:250px;border-radius:12px}.content-placeholder[_ngcontent-%COMP%]:empty:before{font-size:1rem}}@media (max-width: 480px){.special-mentions-container[_ngcontent-%COMP%]{padding:.25rem 0}.section-header[_ngcontent-%COMP%]{margin-bottom:1rem}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.2rem}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.three-column-layout[_ngcontent-%COMP%]{padding:0 .5rem;gap:1rem}.column-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.6rem}.compact-card.vertical-card[_ngcontent-%COMP%]{padding:.7rem;gap:.5rem;min-height:60px;border-radius:12px}.compact-avatar[_ngcontent-%COMP%]{width:34px;height:34px}.compact-avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{font-size:.8rem}.compact-info[_ngcontent-%COMP%]{padding:0 .15rem}.compact-info[_ngcontent-%COMP%]   .artist-name[_ngcontent-%COMP%]{font-size:.8rem}.compact-info[_ngcontent-%COMP%]   .artist-role[_ngcontent-%COMP%]{font-size:.65rem}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:6px}.compact-social[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]   .twitter-x-icon[_ngcontent-%COMP%]{font-size:.75rem}.main-content-column[_ngcontent-%COMP%]{padding:.5rem 0}.content-placeholder[_ngcontent-%COMP%]{min-height:200px;padding:1rem .5rem}}.cards-column[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3) transparent}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:2px}.cards-column[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}@media (prefers-reduced-motion: reduce){.compact-card[_ngcontent-%COMP%], .compact-avatar[_ngcontent-%COMP%]   .avatar-image[_ngcontent-%COMP%], .social-btn[_ngcontent-%COMP%], .card-accent[_ngcontent-%COMP%], .cards-column[_ngcontent-%COMP%]{transition:none!important;transform:none!important}.compact-card[_ngcontent-%COMP%]:hover{transform:none!important}}@media (prefers-contrast: high){.compact-card[_ngcontent-%COMP%]{border-color:#fff9;background:#000000f2}.compact-avatar[_ngcontent-%COMP%]{border-color:#ffffff80}.artist-name[_ngcontent-%COMP%]{color:#fff!important}.artist-role[_ngcontent-%COMP%]{color:#ffffffd9!important}.content-placeholder[_ngcontent-%COMP%]{border-color:#ffffff80;background:#000c}}.compact-card[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:2px}.social-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:1px}']});var fi=Gt;export{Ta as a,pe as b,sr as c,ct as d,lt as e,_t as f,mi as g,pi as h,hi as i,fi as j};
