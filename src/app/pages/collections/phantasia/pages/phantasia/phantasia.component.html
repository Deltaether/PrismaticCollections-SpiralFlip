<div class="phantasia-experience" [class.loading]="isLoading">
  <!-- Site Header - only shown when not inside the phantasia layout -->
  <app-site-header *ngIf="!isInsidePhantasiaLayout"></app-site-header>

  <!-- Loading Screen -->
  <app-scene-loader *ngIf="isLoading"></app-scene-loader>
  
  <!-- Desktop Experience with CD Cases -->
  <ng-container>
    <!-- Material Design intro content - positioned above CD cases for interaction priority -->
    <div class="intro-content">
      <mat-card class="hero-card">
        <mat-card-header>
          <mat-card-title>
            <h1 class="mat-display-1">Project Phantasia</h1>
          </mat-card-title>
          <mat-card-subtitle class="mat-subtitle-1">
            A Journey Through Electronic Dreams
          </mat-card-subtitle>
        </mat-card-header>
      </mat-card>
      
      <mat-card class="description-card">
        <mat-card-content>
          <mat-chip-listbox class="highlight-chip">
            <mat-chip-option selected>
              <mat-icon>album</mat-icon>
              Featured Collection
            </mat-chip-option>
          </mat-chip-listbox>
          
          <p class="mat-body-1 highlight-text">
            Welcome to Project Phantasia, a groundbreaking double album that pushes the boundaries of electronic dance music.
          </p>
          
          <p class="mat-body-1">
            Created by legendary producers An and Feryquitous, this masterpiece combines cutting-edge sound design with 
            ethereal melodies to create an unprecedented auditory experience.
          </p>
        </mat-card-content>
      </mat-card>
        
      <div class="features-grid">
        <mat-card class="feature-card" *ngFor="let feature of features">
          <mat-card-header>
            <div mat-card-avatar [style.background]="feature.color">
              <mat-icon>{{feature.icon}}</mat-icon>
            </div>
            <mat-card-title class="mat-h3">{{feature.title}}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p class="mat-body-2">{{feature.description}}</p>
          </mat-card-content>
        </mat-card>
      </div>
      
      <div class="action-buttons">
        <button mat-raised-button color="primary" class="explore-btn">
          <mat-icon>play_circle</mat-icon>
          Start Experience
        </button>
        <button mat-stroked-button color="accent" class="info-btn">
          <mat-icon>info</mat-icon>
          Learn More
        </button>
      </div>
    </div>
    
    <!-- CD Cases - Always rendered but visually hidden during loading -->
    <div class="cd-cases-container">
      <app-cd-cases (loadingChange)="onCDCasesLoadingChange($event)"></app-cd-cases>
    </div>
  </ng-container>
</div>
