<div class="cd-cases-container">
  
  <!-- Pre-recorded video background (TEMPORARY REPLACEMENT) -->
  <div class="video-background-container" *ngIf="usePreRecordedVideo">
    <video 
      #backgroundVideo 
      class="background-video"
      [src]="'assets/videos/backgrounds/pregen_bg_optimized.mp4'"
      autoplay 
      loop 
      muted
      playsinline
      preload="auto"
      webkit-playsinline
      x5-playsinline
      [attr.data-object-fit]="'cover'"
      (loadstart)="onVideoLoadStart()"
      (loadeddata)="onVideoLoadedData()"
      (canplay)="onVideoCanPlay()"
      (loadedmetadata)="onVideoMetadataLoaded()"
      (playing)="onVideoPlaying()"
      (pause)="onVideoPaused()"
      (error)="onVideoError($event)">
    </video>
    
    <!-- Fallback click-to-play overlay if autoplay fails -->
    <div 
      class="video-play-overlay" 
      *ngIf="videoPlaybackFailed"
      (click)="forceVideoPlay()">
      <div class="play-button">
        <div class="play-icon">
          <i class="fas fa-play" aria-hidden="true"></i>
        </div>
        <div class="play-text">Click to start background video</div>
      </div>
    </div>
  </div>

  <!-- 3D CD Cases Canvas (TEMPORARILY DISABLED) -->
  <div class="original-3d-container" *ngIf="!usePreRecordedVideo">
    <canvas #canvas></canvas>
    <div #labelRenderer class="label-renderer"></div>
  </div>
  
  <!-- Loading indicator overlay -->
  <div class="loading-overlay" *ngIf="isLoading && !isRecordingMode" aria-live="polite">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading 3D CD Cases...</div>
  </div>
  
  
  <!-- Recording controls positioned directly below debug menu -->
  <div class="recording-controls-below-debug" *ngIf="forceShowRecordingControls || (isDebugMode && !isLoading)">
    <button 
      class="record-btn" 
      (click)="startRecording()"
      [disabled]="isRecordingMode || usePreRecordedVideo">
      {{ isRecordingMode ? 'Recording... (60s)' : 'Start 60s Recording' }}
    </button>
    
    <button 
      class="toggle-3d-btn" 
      (click)="toggle3DMode()"
      [disabled]="isRecordingMode">
      {{ usePreRecordedVideo ? 'Enable 3D Rendering' : 'Use Pre-recorded Video' }}
    </button>
  </div>
</div> 