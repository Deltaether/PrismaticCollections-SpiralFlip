<div class="cd-cases-container">
  
  <!-- 3D CD Cases Canvas -->
  <div class="original-3d-container">
    <canvas #canvas></canvas>
    <div #labelRenderer class="label-renderer"></div>
  </div>
  
  <!-- Loading indicator overlay -->
  <div class="loading-overlay" *ngIf="isLoading" aria-live="polite">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading 3D CD Cases...</div>
  </div>
  
  <!-- Debug menu with OnPush change detection -->
  <app-debug-menu
    *ngIf="isDebugMode"
    [sceneSettings]="sceneSettings"
    [caseSettings]="caseSettings"
    [cdCases]="cdCases"
    (updateCamera)="updateCamera()"
    (updateLighting)="updateLighting()"
    (updateRenderer)="updateRenderer()"
    (updateOrbitControls)="updateOrbitControls()"
    (updateGround)="updateGround()"
    (updateCaseTransform)="updateCaseTransform($event)"
    (resetToDefault)="resetToDefault()"
    (updateBackgroundEffects)="updateBackgroundEffects()">
  </app-debug-menu>
</div>

<!-- Case status indicators with title and artist information -->
<div class="case-indicators" [style.opacity]="isLoading ? '0' : '1'" aria-live="polite">
  <h2 class="visually-hidden">CD Case Status</h2>
  <div *ngFor="let cdCase of cdCases; let i = index; trackBy: trackByCaseId" 
       class="case-indicator"
       [class.open]="cdCase.isOpen"
       [class.active]="cdCase.isActive"
       (click)="handleTrackSelection(i)"
       role="button"
       tabindex="0"
       [attr.aria-label]="'Select ' + cdCase.title + ' by ' + cdCase.artist">
    <strong>{{cdCase.title}}</strong> by {{cdCase.artist}}
    <span class="status">({{ cdCase.isOpen ? 'Open' : 'Closed' }})</span>
  </div>
</div> 