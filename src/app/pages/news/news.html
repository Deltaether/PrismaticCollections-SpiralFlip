<!-- News Page -->
<div class="news-page anim-c">
  
  <!-- Site Header -->
  <app-site-header></app-site-header>
  
  <!-- TypeScript-based Square Animation (48 squares, space-like movement) -->
  <app-squares-animation [count]="48" [enabled]="true"></app-squares-animation>

  <!-- Main Content -->
  <main class="news-main">
    
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1 class="title">PROJECT UPDATES</h1>
        <p class="subtitle">Latest News and Announcements</p>
        <p class="description">
          Stay updated with the latest developments, releases, and community highlights 
          from Prismatic Collections. Discover new features, technical improvements, and exciting announcements.
        </p>
      </div>
      <div class="hero-background">
        <div class="overlay"></div>
      </div>
    </section>

    <!-- Optimized Twitter Integration Section -->
    <section class="filters">
      <div class="filter-container twitter-integration">

        <!-- Section Header -->
        <div class="section-header">
          <div class="section-title">
            <mat-icon class="section-icon">alternate_email</mat-icon>
            <h3>Latest from Prismatic Collections</h3>
            <span class="twitter-handle">@{{ getTwitterUsername() }}</span>
          </div>
          <div class="section-subtitle">
            Stay updated with our latest announcements and behind-the-scenes content
          </div>
        </div>

        <!-- Optimized Twitter Component -->
        <app-twitter-optimized
          [config]="{
            showHeader: true,
            showFollowButton: true,
            showRefreshButton: true,
            showStats: false,
            maxHeight: 600,
            autoRefresh: false,
            refreshInterval: 300000,
            enableVirtualScrolling: true,
            loadThreshold: 5
          }"
          (followClick)="onFollowClick()"
          (refreshComplete)="onTwitterRefreshComplete($event)">
        </app-twitter-optimized>

        <!-- Performance Stats (Development Only) -->
        <div class="performance-stats" *ngIf="showPerformanceStats()">
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-label">Cache Hit Rate:</span>
              <span class="stat-value">{{ getPerformanceMetrics().cacheHitRate.toFixed(1) }}%</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Memory Usage:</span>
              <span class="stat-value">{{ formatBytes(getPerformanceMetrics().memoryUsage) }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">API Efficiency:</span>
              <span class="stat-value">{{ getPerformanceMetrics().apiEfficiency.toFixed(1) }}%</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Load Time:</span>
              <span class="stat-value">{{ getPerformanceMetrics().loadTime }}ms</span>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- Featured Articles Section -->
    <section class="featured-news" *ngIf="featuredArticles().length > 0">
      <h2 class="section-title">Featured Updates</h2>
      
      <div class="featured-grid">
        <article *ngFor="let article of featuredArticles(); trackBy: trackByArticleId" 
                 class="featured-article"
                 (click)="navigateToArticle(article.id)"
                 (mouseenter)="onArticleHover(article.id)">
          
          <!-- Featured Image -->
          <div class="article-image" *ngIf="article.featuredImage">
            <img [src]="article.featuredImage" 
                 [alt]="article.title" 
                 (error)="$event.target.style.display='none'">
            <div class="image-overlay"></div>
          </div>
          
          <!-- Article Content -->
          <div class="article-content">
            
            <!-- Article Meta -->
            <div class="article-meta">
              <span class="category-badge"
                    [style.background]="getCategoryGradient(article.category)">
                <mat-icon class="category-icon">{{ getCategoryIcon(article.category) }}</mat-icon>
                {{ getCategoryLabel(article.category) }}
              </span>
              <span class="publish-date">{{ formatDate(article.publishDate) }}</span>
              <span class="pinned-indicator" *ngIf="article.isPinned"><mat-icon>push_pin</mat-icon> Pinned</span>
            </div>
            
            <!-- Article Title and Subtitle -->
            <h3 class="article-title">{{ article.title }}</h3>
            <p class="article-subtitle">{{ article.subtitle }}</p>
            <p class="article-excerpt">{{ article.excerpt }}</p>
            
            <!-- Author Info -->
            <div class="author-info">
              <div class="author-avatar" *ngIf="article.author.avatar">
                <img [src]="article.author.avatar" [alt]="article.author.name">
              </div>
              <div class="author-details">
                <span class="author-name">{{ article.author.name }}</span>
                <span class="author-role">{{ article.author.role }}</span>
              </div>
            </div>
            
            <!-- Tags -->
            <div class="article-tags">
              <span *ngFor="let tag of article.tags" class="tag">#{{ tag }}</span>
            </div>
            
            <!-- Read More -->
            <div class="read-more">
              <span class="read-more-text">Read Full Article</span>
              <mat-icon class="read-more-arrow">arrow_forward</mat-icon>
            </div>
            
          </div>
          
        </article>
      </div>
    </section>

    <!-- Regular News Articles -->
    <section class="news-articles">
      <h2 class="section-title" *ngIf="featuredArticles().length > 0">Recent Updates</h2>
      <h2 class="section-title" *ngIf="featuredArticles().length === 0">All Updates</h2>
      
      <!-- No Results Message -->
      <div class="no-results" *ngIf="regularArticles().length === 0 && featuredArticles().length === 0">
        <div class="no-results-icon">üîç</div>
        <h3 class="no-results-title">No articles found</h3>
        <p class="no-results-text">
          No news articles are currently available.
        </p>
      </div>
      
      <!-- Articles Grid -->
      <div class="articles-grid" *ngIf="regularArticles().length > 0">
        <article *ngFor="let article of regularArticles(); trackBy: trackByArticleId" 
                 class="news-article"
                 (click)="navigateToArticle(article.id)"
                 (mouseenter)="onArticleHover(article.id)">
          
          <!-- Article Meta -->
          <div class="article-meta">
            <span class="category-badge small"
                  [style.background]="getCategoryGradient(article.category)">
              <span class="category-icon">{{ getCategoryIcon(article.category) }}</span>
              {{ getCategoryLabel(article.category) }}
            </span>
            <span class="publish-date">{{ formatDate(article.publishDate) }}</span>
          </div>
          
          <!-- Article Content -->
          <div class="article-content">
            <h3 class="article-title">{{ article.title }}</h3>
            <p class="article-subtitle" *ngIf="article.subtitle">{{ article.subtitle }}</p>
            <p class="article-excerpt">{{ article.excerpt }}</p>
            
            <!-- Author Info -->
            <div class="author-info compact">
              <span class="author-name">{{ article.author.name }}</span>
              <span class="author-separator">‚Ä¢</span>
              <span class="author-role">{{ article.author.role }}</span>
            </div>
            
            <!-- Tags -->
            <div class="article-tags">
              <span *ngFor="let tag of article.tags.slice(0, 3)" class="tag small">#{{ tag }}</span>
              <span *ngIf="article.tags.length > 3" class="tag-more">+{{ article.tags.length - 3 }} more</span>
            </div>
          </div>
          
          <!-- Read More Indicator -->
          <div class="read-indicator">
            <span class="read-text">Read More</span>
            <mat-icon class="read-arrow">arrow_forward</mat-icon>
          </div>
          
        </article>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="newsletter-cta">
      <div class="cta-content">
        <h2 class="cta-title">Stay Updated</h2>
        <p class="cta-text">
          Never miss an update! Follow our social channels or bookmark this page 
          to stay informed about the latest developments in Prismatic Collections.
        </p>
        <div class="cta-buttons">
          <button class="button primary" (click)="router.navigate(['/socials'])">
            <mat-icon class="button-icon">notifications</mat-icon>
            Follow Us
            <span class="button-description">Join our community channels</span>
          </button>
          <button class="button secondary" (click)="router.navigate(['/collections'])">
            <mat-icon class="button-icon">palette</mat-icon>
            Explore Collections
            <span class="button-description">Discover our interactive experiences</span>
          </button>
        </div>
      </div>
    </section>
    
  </main>
  
</div>
